/*! For license information please see 67b0eb8c10185775.vendor.js.LICENSE.txt */
(self.webpackChunk_canva_web = self.webpackChunk_canva_web || []).push([
  [99115],
  {
    302768: (e, t, n) => {
      !(function () {
        var e = "undefined" != typeof window ? window : n.g,
          i = {};
        for (var r in (function (e, t, n) {
          var i;
          function r(e) {
            var t = 0;
            return function () {
              return t < e.length ? { done: !1, value: e[t++] } : { done: !0 };
            };
          }
          var a =
            "function" == typeof Object.defineProperties
              ? Object.defineProperty
              : function (e, t, n) {
                  return (
                    e == Array.prototype ||
                      e == Object.prototype ||
                      (e[t] = n.value),
                    e
                  );
                };
          var o = (function (n) {
            n = [
              "object" == typeof globalThis && globalThis,
              n,
              "object" == typeof e && e,
              "object" == typeof self && self,
              "object" == typeof t && t,
            ];
            for (var i = 0; i < n.length; ++i) {
              var r = n[i];
              if (r && r.Math == Math) return r;
            }
            throw Error("Cannot find global object");
          })(this);
          function s(e, t) {
            if (t)
              e: {
                var n = o;
                e = e.split(".");
                for (var i = 0; i < e.length - 1; i++) {
                  var r = e[i];
                  if (!(r in n)) break e;
                  n = n[r];
                }
                (t = t((i = n[(e = e[e.length - 1])]))) != i &&
                  null != t &&
                  a(n, e, { configurable: !0, writable: !0, value: t });
              }
          }
          function u(e) {
            return (
              ((e = { next: e })[Symbol.iterator] = function () {
                return this;
              }),
              e
            );
          }
          function l(e) {
            var t =
              "undefined" != typeof Symbol &&
              Symbol.iterator &&
              e[Symbol.iterator];
            if (t) return t.call(e);
            if ("number" == typeof e.length) return { next: r(e) };
            throw Error(String(e) + " is not an iterable or ArrayLike");
          }
          function c(e) {
            if (!(e instanceof Array)) {
              e = l(e);
              for (var t, n = []; !(t = e.next()).done; ) n.push(t.value);
              e = n;
            }
            return e;
          }
          s("Symbol", function (e) {
            function t(e, t) {
              (this.g = e),
                a(this, "description", {
                  configurable: !0,
                  writable: !0,
                  value: t,
                });
            }
            if (e) return e;
            t.prototype.toString = function () {
              return this.g;
            };
            var n = "jscomp_symbol_" + ((1e9 * Math.random()) >>> 0) + "_",
              i = 0;
            return function e(r) {
              if (this instanceof e)
                throw new TypeError("Symbol is not a constructor");
              return new t(n + (r || "") + "_" + i++, r);
            };
          }),
            s("Symbol.iterator", function (e) {
              if (e) return e;
              e = Symbol("Symbol.iterator");
              for (
                var t =
                    "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(
                      " "
                    ),
                  n = 0;
                n < t.length;
                n++
              ) {
                var i = o[t[n]];
                "function" == typeof i &&
                  "function" != typeof i.prototype[e] &&
                  a(i.prototype, e, {
                    configurable: !0,
                    writable: !0,
                    value: function () {
                      return u(r(this));
                    },
                  });
              }
              return e;
            });
          var d,
            h =
              "function" == typeof Object.create
                ? Object.create
                : function (e) {
                    function t() {}
                    return (t.prototype = e), new t();
                  };
          if ("function" == typeof Object.setPrototypeOf)
            d = Object.setPrototypeOf;
          else {
            var f;
            e: {
              var p = {};
              try {
                (p.__proto__ = { a: !0 }), (f = p.a);
                break e;
              } catch (e) {}
              f = !1;
            }
            d = f
              ? function (e, t) {
                  if (((e.__proto__ = t), e.__proto__ !== t))
                    throw new TypeError(e + " is not extensible");
                  return e;
                }
              : null;
          }
          var g = d;
          function m(e, t) {
            if (
              ((e.prototype = h(t.prototype)), (e.prototype.constructor = e), g)
            )
              g(e, t);
            else
              for (var n in t)
                if ("prototype" != n)
                  if (Object.defineProperties) {
                    var i = Object.getOwnPropertyDescriptor(t, n);
                    i && Object.defineProperty(e, n, i);
                  } else e[n] = t[n];
            e.Vi = t.prototype;
          }
          function v() {
            (this.o = !1),
              (this.m = null),
              (this.h = void 0),
              (this.g = 1),
              (this.j = this.l = 0),
              (this.A = this.i = null);
          }
          function y(e) {
            if (e.o) throw new TypeError("Generator is already running");
            e.o = !0;
          }
          function b(e, t) {
            (e.i = { Pf: t, $f: !0 }), (e.g = e.l || e.j);
          }
          function w(e, t, n) {
            return (e.g = n), { value: t };
          }
          function x(e) {
            e.g = 0;
          }
          function S(e, t, n) {
            (e.l = t), null != n && (e.j = n);
          }
          function T(e, t, n) {
            (e.g = t), (e.l = n || 0);
          }
          function A(e, t) {
            return (e.l = t || 0), (t = e.i.Pf), (e.i = null), t;
          }
          function k(e) {
            (e.A = [e.i]), (e.l = 0), (e.j = 0);
          }
          function I(e, t) {
            var n = e.A.splice(0)[0];
            (n = e.i = e.i || n)
              ? n.$f
                ? (e.g = e.l || e.j)
                : null != n.u && e.j < n.u
                ? ((e.g = n.u), (e.i = null))
                : (e.g = e.j)
              : (e.g = t);
          }
          function C(e) {
            (this.g = new v()), (this.h = e);
          }
          function M(e, t, n, i) {
            try {
              var r = t.call(e.g.m, n);
              if (!(r instanceof Object))
                throw new TypeError(
                  "Iterator result " + r + " is not an object"
                );
              if (!r.done) return (e.g.o = !1), r;
              var a = r.value;
            } catch (t) {
              return (e.g.m = null), b(e.g, t), E(e);
            }
            return (e.g.m = null), i.call(e.g, a), E(e);
          }
          function E(e) {
            for (; e.g.g; )
              try {
                var t = e.h(e.g);
                if (t) return (e.g.o = !1), { value: t.value, done: !1 };
              } catch (t) {
                (e.g.h = void 0), b(e.g, t);
              }
            if (((e.g.o = !1), e.g.i)) {
              if (((t = e.g.i), (e.g.i = null), t.$f)) throw t.Pf;
              return { value: t.return, done: !0 };
            }
            return { value: void 0, done: !0 };
          }
          function D(e) {
            (this.next = function (t) {
              return (
                y(e.g),
                e.g.m
                  ? (t = M(e, e.g.m.next, t, e.g.s))
                  : (e.g.s(t), (t = E(e))),
                t
              );
            }),
              (this.throw = function (t) {
                return (
                  y(e.g),
                  e.g.m
                    ? (t = M(e, e.g.m.throw, t, e.g.s))
                    : (b(e.g, t), (t = E(e))),
                  t
                );
              }),
              (this.return = function (t) {
                return (function (e, t) {
                  y(e.g);
                  var n = e.g.m;
                  return n
                    ? M(
                        e,
                        "return" in n
                          ? n.return
                          : function (e) {
                              return { value: e, done: !0 };
                            },
                        t,
                        e.g.return
                      )
                    : (e.g.return(t), E(e));
                })(e, t);
              }),
              (this[Symbol.iterator] = function () {
                return this;
              });
          }
          function P(e) {
            return (function (e) {
              function t(t) {
                return e.next(t);
              }
              function n(t) {
                return e.throw(t);
              }
              return new Promise(function (i, r) {
                !(function e(a) {
                  a.done
                    ? i(a.value)
                    : Promise.resolve(a.value).then(t, n).then(e, r);
                })(e.next());
              });
            })(new D(new C(e)));
          }
          function L() {
            for (var e = Number(this), t = [], n = e; n < arguments.length; n++)
              t[n - e] = arguments[n];
            return t;
          }
          function R(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
          }
          function N(e, t) {
            e instanceof String && (e += "");
            var n = 0,
              i = !1,
              r = {
                next: function () {
                  if (!i && n < e.length) {
                    var r = n++;
                    return { value: t(r, e[r]), done: !1 };
                  }
                  return (i = !0), { done: !0, value: void 0 };
                },
              };
            return (
              (r[Symbol.iterator] = function () {
                return r;
              }),
              r
            );
          }
          function _(e, t, n) {
            if (null == e)
              throw new TypeError(
                "The 'this' value for String.prototype." +
                  n +
                  " must not be null or undefined"
              );
            if (t instanceof RegExp)
              throw new TypeError(
                "First argument to String.prototype." +
                  n +
                  " must not be a regular expression"
              );
            return e + "";
          }
          function U(e, t, n) {
            e instanceof String && (e = String(e));
            for (var i = e.length, r = 0; r < i; r++) {
              var a = e[r];
              if (t.call(n, a, r, e)) return { Xf: r, v: a };
            }
            return { Xf: -1, v: void 0 };
          }
          (v.prototype.s = function (e) {
            this.h = e;
          }),
            (v.prototype.return = function (e) {
              (this.i = { return: e }), (this.g = this.j);
            }),
            (v.prototype.u = function (e) {
              this.g = e;
            }),
            s("Promise", function (e) {
              function t(e) {
                (this.h = 0), (this.i = void 0), (this.g = []), (this.o = !1);
                var t = this.j();
                try {
                  e(t.resolve, t.reject);
                } catch (e) {
                  t.reject(e);
                }
              }
              function n() {
                this.g = null;
              }
              function i(e) {
                return e instanceof t
                  ? e
                  : new t(function (t) {
                      t(e);
                    });
              }
              if (e) return e;
              n.prototype.h = function (e) {
                if (null == this.g) {
                  this.g = [];
                  var t = this;
                  this.i(function () {
                    t.l();
                  });
                }
                this.g.push(e);
              };
              var r = o.setTimeout;
              (n.prototype.i = function (e) {
                r(e, 0);
              }),
                (n.prototype.l = function () {
                  for (; this.g && this.g.length; ) {
                    var e = this.g;
                    this.g = [];
                    for (var t = 0; t < e.length; ++t) {
                      var n = e[t];
                      e[t] = null;
                      try {
                        n();
                      } catch (e) {
                        this.j(e);
                      }
                    }
                  }
                  this.g = null;
                }),
                (n.prototype.j = function (e) {
                  this.i(function () {
                    throw e;
                  });
                }),
                (t.prototype.j = function () {
                  function e(e) {
                    return function (i) {
                      n || ((n = !0), e.call(t, i));
                    };
                  }
                  var t = this,
                    n = !1;
                  return { resolve: e(this.D), reject: e(this.l) };
                }),
                (t.prototype.D = function (e) {
                  if (e === this)
                    this.l(new TypeError("A Promise cannot resolve to itself"));
                  else if (e instanceof t) this.G(e);
                  else {
                    e: switch (typeof e) {
                      case "object":
                        var n = null != e;
                        break e;
                      case "function":
                        n = !0;
                        break e;
                      default:
                        n = !1;
                    }
                    n ? this.C(e) : this.m(e);
                  }
                }),
                (t.prototype.C = function (e) {
                  var t = void 0;
                  try {
                    t = e.then;
                  } catch (e) {
                    return void this.l(e);
                  }
                  "function" == typeof t ? this.J(t, e) : this.m(e);
                }),
                (t.prototype.l = function (e) {
                  this.s(2, e);
                }),
                (t.prototype.m = function (e) {
                  this.s(1, e);
                }),
                (t.prototype.s = function (e, t) {
                  if (0 != this.h)
                    throw Error(
                      "Cannot settle(" +
                        e +
                        ", " +
                        t +
                        "): Promise already settled in state" +
                        this.h
                    );
                  (this.h = e),
                    (this.i = t),
                    2 === this.h && this.F(),
                    this.A();
                }),
                (t.prototype.F = function () {
                  var e = this;
                  r(function () {
                    if (e.B()) {
                      var t = o.console;
                      void 0 !== t && t.error(e.i);
                    }
                  }, 1);
                }),
                (t.prototype.B = function () {
                  if (this.o) return !1;
                  var e = o.CustomEvent,
                    t = o.Event,
                    n = o.dispatchEvent;
                  return (
                    void 0 === n ||
                    ("function" == typeof e
                      ? (e = new e("unhandledrejection", { cancelable: !0 }))
                      : "function" == typeof t
                      ? (e = new t("unhandledrejection", { cancelable: !0 }))
                      : (e =
                          o.document.createEvent(
                            "CustomEvent"
                          )).initCustomEvent("unhandledrejection", !1, !0, e),
                    (e.promise = this),
                    (e.reason = this.i),
                    n(e))
                  );
                }),
                (t.prototype.A = function () {
                  if (null != this.g) {
                    for (var e = 0; e < this.g.length; ++e) a.h(this.g[e]);
                    this.g = null;
                  }
                });
              var a = new n();
              return (
                (t.prototype.G = function (e) {
                  var t = this.j();
                  e.md(t.resolve, t.reject);
                }),
                (t.prototype.J = function (e, t) {
                  var n = this.j();
                  try {
                    e.call(t, n.resolve, n.reject);
                  } catch (e) {
                    n.reject(e);
                  }
                }),
                (t.prototype.then = function (e, n) {
                  function i(e, t) {
                    return "function" == typeof e
                      ? function (t) {
                          try {
                            r(e(t));
                          } catch (e) {
                            a(e);
                          }
                        }
                      : t;
                  }
                  var r,
                    a,
                    o = new t(function (e, t) {
                      (r = e), (a = t);
                    });
                  return this.md(i(e, r), i(n, a)), o;
                }),
                (t.prototype.catch = function (e) {
                  return this.then(void 0, e);
                }),
                (t.prototype.md = function (e, t) {
                  function n() {
                    switch (i.h) {
                      case 1:
                        e(i.i);
                        break;
                      case 2:
                        t(i.i);
                        break;
                      default:
                        throw Error("Unexpected state: " + i.h);
                    }
                  }
                  var i = this;
                  null == this.g ? a.h(n) : this.g.push(n), (this.o = !0);
                }),
                (t.resolve = i),
                (t.reject = function (e) {
                  return new t(function (t, n) {
                    n(e);
                  });
                }),
                (t.race = function (e) {
                  return new t(function (t, n) {
                    for (var r = l(e), a = r.next(); !a.done; a = r.next())
                      i(a.value).md(t, n);
                  });
                }),
                (t.all = function (e) {
                  var n = l(e),
                    r = n.next();
                  return r.done
                    ? i([])
                    : new t(function (e, t) {
                        function a(t) {
                          return function (n) {
                            (o[t] = n), 0 == --s && e(o);
                          };
                        }
                        var o = [],
                          s = 0;
                        do {
                          o.push(void 0),
                            s++,
                            i(r.value).md(a(o.length - 1), t),
                            (r = n.next());
                        } while (!r.done);
                      });
                }),
                t
              );
            }),
            s("WeakMap", function (e) {
              function t(e) {
                if (((this.g = (u += Math.random() + 1).toString()), e)) {
                  e = l(e);
                  for (var t; !(t = e.next()).done; )
                    (t = t.value), this.set(t[0], t[1]);
                }
              }
              function n() {}
              function i(e) {
                var t = typeof e;
                return ("object" === t && null !== e) || "function" === t;
              }
              function r(e) {
                if (!R(e, s)) {
                  var t = new n();
                  a(e, s, { value: t });
                }
              }
              function o(e) {
                var t = Object[e];
                t &&
                  (Object[e] = function (e) {
                    return e instanceof n
                      ? e
                      : (Object.isExtensible(e) && r(e), t(e));
                  });
              }
              if (
                (function () {
                  if (!e || !Object.seal) return !1;
                  try {
                    var t = Object.seal({}),
                      n = Object.seal({}),
                      i = new e([
                        [t, 2],
                        [n, 3],
                      ]);
                    return (
                      2 == i.get(t) &&
                      3 == i.get(n) &&
                      (i.delete(t), i.set(n, 4), !i.has(t) && 4 == i.get(n))
                    );
                  } catch (e) {
                    return !1;
                  }
                })()
              )
                return e;
              var s = "$jscomp_hidden_" + Math.random();
              o("freeze"), o("preventExtensions"), o("seal");
              var u = 0;
              return (
                (t.prototype.set = function (e, t) {
                  if (!i(e)) throw Error("Invalid WeakMap key");
                  if ((r(e), !R(e, s))) throw Error("WeakMap key fail: " + e);
                  return (e[s][this.g] = t), this;
                }),
                (t.prototype.get = function (e) {
                  return i(e) && R(e, s) ? e[s][this.g] : void 0;
                }),
                (t.prototype.has = function (e) {
                  return i(e) && R(e, s) && R(e[s], this.g);
                }),
                (t.prototype.delete = function (e) {
                  return (
                    !!(i(e) && R(e, s) && R(e[s], this.g)) &&
                    delete e[s][this.g]
                  );
                }),
                t
              );
            }),
            s("Map", function (e) {
              function t() {
                var e = {};
                return (e.Ab = e.next = e.head = e);
              }
              function n(e, t) {
                var n = e[1];
                return u(function () {
                  if (n) {
                    for (; n.head != e[1]; ) n = n.Ab;
                    for (; n.next != n.head; )
                      return (n = n.next), { done: !1, value: t(n) };
                    n = null;
                  }
                  return { done: !0, value: void 0 };
                });
              }
              function i(e, t) {
                var n = t && typeof t;
                "object" == n || "function" == n
                  ? a.has(t)
                    ? (n = a.get(t))
                    : ((n = "" + ++o), a.set(t, n))
                  : (n = "p_" + t);
                var i = e[0][n];
                if (i && R(e[0], n))
                  for (e = 0; e < i.length; e++) {
                    var r = i[e];
                    if ((t != t && r.key != r.key) || t === r.key)
                      return { id: n, list: i, index: e, entry: r };
                  }
                return { id: n, list: i, index: -1, entry: void 0 };
              }
              function r(e) {
                if (((this[0] = {}), (this[1] = t()), (this.size = 0), e)) {
                  e = l(e);
                  for (var n; !(n = e.next()).done; )
                    (n = n.value), this.set(n[0], n[1]);
                }
              }
              if (
                (function () {
                  if (
                    !e ||
                    "function" != typeof e ||
                    !e.prototype.entries ||
                    "function" != typeof Object.seal
                  )
                    return !1;
                  try {
                    var t = Object.seal({ x: 4 }),
                      n = new e(l([[t, "s"]]));
                    if (
                      "s" != n.get(t) ||
                      1 != n.size ||
                      n.get({ x: 4 }) ||
                      n.set({ x: 4 }, "t") != n ||
                      2 != n.size
                    )
                      return !1;
                    var i = n.entries(),
                      r = i.next();
                    return (
                      !r.done &&
                      r.value[0] == t &&
                      "s" == r.value[1] &&
                      !(
                        (r = i.next()).done ||
                        4 != r.value[0].x ||
                        "t" != r.value[1] ||
                        !i.next().done
                      )
                    );
                  } catch (e) {
                    return !1;
                  }
                })()
              )
                return e;
              var a = new WeakMap();
              (r.prototype.set = function (e, t) {
                var n = i(this, (e = 0 === e ? 0 : e));
                return (
                  n.list || (n.list = this[0][n.id] = []),
                  n.entry
                    ? (n.entry.value = t)
                    : ((n.entry = {
                        next: this[1],
                        Ab: this[1].Ab,
                        head: this[1],
                        key: e,
                        value: t,
                      }),
                      n.list.push(n.entry),
                      (this[1].Ab.next = n.entry),
                      (this[1].Ab = n.entry),
                      this.size++),
                  this
                );
              }),
                (r.prototype.delete = function (e) {
                  return (
                    !(!(e = i(this, e)).entry || !e.list) &&
                    (e.list.splice(e.index, 1),
                    e.list.length || delete this[0][e.id],
                    (e.entry.Ab.next = e.entry.next),
                    (e.entry.next.Ab = e.entry.Ab),
                    (e.entry.head = null),
                    this.size--,
                    !0)
                  );
                }),
                (r.prototype.clear = function () {
                  (this[0] = {}), (this[1] = this[1].Ab = t()), (this.size = 0);
                }),
                (r.prototype.has = function (e) {
                  return !!i(this, e).entry;
                }),
                (r.prototype.get = function (e) {
                  return (e = i(this, e).entry) && e.value;
                }),
                (r.prototype.entries = function () {
                  return n(this, function (e) {
                    return [e.key, e.value];
                  });
                }),
                (r.prototype.keys = function () {
                  return n(this, function (e) {
                    return e.key;
                  });
                }),
                (r.prototype.values = function () {
                  return n(this, function (e) {
                    return e.value;
                  });
                }),
                (r.prototype.forEach = function (e, t) {
                  for (var n, i = this.entries(); !(n = i.next()).done; )
                    (n = n.value), e.call(t, n[1], n[0], this);
                }),
                (r.prototype[Symbol.iterator] = r.prototype.entries);
              var o = 0;
              return r;
            }),
            s("Set", function (e) {
              function t(e) {
                if (((this.g = new Map()), e)) {
                  e = l(e);
                  for (var t; !(t = e.next()).done; ) this.add(t.value);
                }
                this.size = this.g.size;
              }
              return (function () {
                if (
                  !e ||
                  "function" != typeof e ||
                  !e.prototype.entries ||
                  "function" != typeof Object.seal
                )
                  return !1;
                try {
                  var t = Object.seal({ x: 4 }),
                    n = new e(l([t]));
                  if (
                    !n.has(t) ||
                    1 != n.size ||
                    n.add(t) != n ||
                    1 != n.size ||
                    n.add({ x: 4 }) != n ||
                    2 != n.size
                  )
                    return !1;
                  var i = n.entries(),
                    r = i.next();
                  return (
                    !r.done &&
                    r.value[0] == t &&
                    r.value[1] == t &&
                    !(r = i.next()).done &&
                    r.value[0] != t &&
                    4 == r.value[0].x &&
                    r.value[1] == r.value[0] &&
                    i.next().done
                  );
                } catch (e) {
                  return !1;
                }
              })()
                ? e
                : ((t.prototype.add = function (e) {
                    return (
                      (e = 0 === e ? 0 : e),
                      this.g.set(e, e),
                      (this.size = this.g.size),
                      this
                    );
                  }),
                  (t.prototype.delete = function (e) {
                    return (e = this.g.delete(e)), (this.size = this.g.size), e;
                  }),
                  (t.prototype.clear = function () {
                    this.g.clear(), (this.size = 0);
                  }),
                  (t.prototype.has = function (e) {
                    return this.g.has(e);
                  }),
                  (t.prototype.entries = function () {
                    return this.g.entries();
                  }),
                  (t.prototype.values = function () {
                    return this.g.values();
                  }),
                  (t.prototype.keys = t.prototype.values),
                  (t.prototype[Symbol.iterator] = t.prototype.values),
                  (t.prototype.forEach = function (e, t) {
                    var n = this;
                    this.g.forEach(function (i) {
                      return e.call(t, i, i, n);
                    });
                  }),
                  t);
            }),
            s("Array.prototype.values", function (e) {
              return (
                e ||
                function () {
                  return N(this, function (e, t) {
                    return t;
                  });
                }
              );
            }),
            s("Array.from", function (e) {
              return (
                e ||
                function (e, t, n) {
                  t =
                    null != t
                      ? t
                      : function (e) {
                          return e;
                        };
                  var i = [],
                    r =
                      "undefined" != typeof Symbol &&
                      Symbol.iterator &&
                      e[Symbol.iterator];
                  if ("function" == typeof r) {
                    e = r.call(e);
                    for (var a = 0; !(r = e.next()).done; )
                      i.push(t.call(n, r.value, a++));
                  } else
                    for (r = e.length, a = 0; a < r; a++)
                      i.push(t.call(n, e[a], a));
                  return i;
                }
              );
            }),
            s("Array.prototype.keys", function (e) {
              return (
                e ||
                function () {
                  return N(this, function (e) {
                    return e;
                  });
                }
              );
            }),
            s("Object.is", function (e) {
              return (
                e ||
                function (e, t) {
                  return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t;
                }
              );
            }),
            s("Array.prototype.includes", function (e) {
              return (
                e ||
                function (e, t) {
                  var n = this;
                  n instanceof String && (n = String(n));
                  var i = n.length;
                  for (
                    0 > (t = t || 0) && (t = Math.max(t + i, 0));
                    t < i;
                    t++
                  ) {
                    var r = n[t];
                    if (r === e || Object.is(r, e)) return !0;
                  }
                  return !1;
                }
              );
            }),
            s("String.prototype.includes", function (e) {
              return (
                e ||
                function (e, t) {
                  return -1 !== _(this, e, "includes").indexOf(e, t || 0);
                }
              );
            }),
            s("String.fromCodePoint", function (e) {
              return (
                e ||
                function (e) {
                  for (var t = "", n = 0; n < arguments.length; n++) {
                    var i = Number(arguments[n]);
                    if (0 > i || 1114111 < i || i !== Math.floor(i))
                      throw new RangeError("invalid_code_point " + i);
                    65535 >= i
                      ? (t += String.fromCharCode(i))
                      : ((i -= 65536),
                        (t += String.fromCharCode(((i >>> 10) & 1023) | 55296)),
                        (t += String.fromCharCode((1023 & i) | 56320)));
                  }
                  return t;
                }
              );
            }),
            s("Array.prototype.findIndex", function (e) {
              return (
                e ||
                function (e, t) {
                  return U(this, e, t).Xf;
                }
              );
            }),
            s("WeakSet", function (e) {
              function t(e) {
                if (((this.g = new WeakMap()), e)) {
                  e = l(e);
                  for (var t; !(t = e.next()).done; ) this.add(t.value);
                }
              }
              return (function () {
                if (!e || !Object.seal) return !1;
                try {
                  var t = Object.seal({}),
                    n = Object.seal({}),
                    i = new e([t]);
                  return (
                    !(!i.has(t) || i.has(n)) &&
                    (i.delete(t), i.add(n), !i.has(t) && i.has(n))
                  );
                } catch (e) {
                  return !1;
                }
              })()
                ? e
                : ((t.prototype.add = function (e) {
                    return this.g.set(e, !0), this;
                  }),
                  (t.prototype.has = function (e) {
                    return this.g.has(e);
                  }),
                  (t.prototype.delete = function (e) {
                    return this.g.delete(e);
                  }),
                  t);
            }),
            s("Array.prototype.find", function (e) {
              return (
                e ||
                function (e, t) {
                  return U(this, e, t).v;
                }
              );
            }),
            s("String.prototype.startsWith", function (e) {
              return (
                e ||
                function (e, t) {
                  var n = _(this, e, "startsWith"),
                    i = n.length,
                    r = e.length;
                  t = Math.max(0, Math.min(0 | t, n.length));
                  for (var a = 0; a < r && t < i; )
                    if (n[t++] != e[a++]) return !1;
                  return a >= r;
                }
              );
            }),
            s("Object.entries", function (e) {
              return (
                e ||
                function (e) {
                  var t,
                    n = [];
                  for (t in e) R(e, t) && n.push([t, e[t]]);
                  return n;
                }
              );
            });
          var j =
            "function" == typeof Object.assign
              ? Object.assign
              : function (e, t) {
                  for (var n = 1; n < arguments.length; n++) {
                    var i = arguments[n];
                    if (i) for (var r in i) R(i, r) && (e[r] = i[r]);
                  }
                  return e;
                };
          s("Object.assign", function (e) {
            return e || j;
          }),
            s("Object.values", function (e) {
              return (
                e ||
                function (e) {
                  var t,
                    n = [];
                  for (t in e) R(e, t) && n.push(e[t]);
                  return n;
                }
              );
            }),
            s("Promise.prototype.finally", function (e) {
              return (
                e ||
                function (e) {
                  return this.then(
                    function (t) {
                      return Promise.resolve(e()).then(function () {
                        return t;
                      });
                    },
                    function (t) {
                      return Promise.resolve(e()).then(function () {
                        throw t;
                      });
                    }
                  );
                }
              );
            }),
            s("Math.log2", function (e) {
              return (
                e ||
                function (e) {
                  return Math.log(e) / Math.LN2;
                }
              );
            }),
            s("Number.EPSILON", function () {
              return Math.pow(2, -52);
            }),
            s("Number.MAX_SAFE_INTEGER", function () {
              return 9007199254740991;
            }),
            s("String.prototype.endsWith", function (e) {
              return (
                e ||
                function (e, t) {
                  var n = _(this, e, "endsWith");
                  void 0 === t && (t = n.length),
                    (t = Math.max(0, Math.min(0 | t, n.length)));
                  for (var i = e.length; 0 < i && 0 < t; )
                    if (n[--t] != e[--i]) return !1;
                  return 0 >= i;
                }
              );
            }),
            s("Array.prototype.entries", function (e) {
              return (
                e ||
                function () {
                  return N(this, function (e, t) {
                    return [e, t];
                  });
                }
              );
            }),
            s("Number.isNaN", function (e) {
              return (
                e ||
                function (e) {
                  return "number" == typeof e && isNaN(e);
                }
              );
            }),
            s("String.prototype.repeat", function (e) {
              return (
                e ||
                function (e) {
                  var t = _(this, null, "repeat");
                  if (0 > e || 1342177279 < e)
                    throw new RangeError("Invalid count value");
                  e |= 0;
                  for (var n = ""; e; )
                    1 & e && (n += t), (e >>>= 1) && (t += t);
                  return n;
                }
              );
            }),
            s("Number.isFinite", function (e) {
              return (
                e ||
                function (e) {
                  return (
                    "number" == typeof e &&
                    !isNaN(e) &&
                    1 / 0 !== e &&
                    -1 / 0 !== e
                  );
                }
              );
            });
          var O = this || self;
          function B(e, t) {
            e = e.split(".");
            var n,
              i = O;
            e[0] in i || void 0 === i.execScript || i.execScript("var " + e[0]);
            for (; e.length && (n = e.shift()); )
              e.length || void 0 === t
                ? (i =
                    i[n] && i[n] !== Object.prototype[n] ? i[n] : (i[n] = {}))
                : (i[n] = t);
          }
          function F() {}
          function H() {}
          function V(e) {
            (this.g = Math.exp(Math.log(0.5) / e)), (this.i = this.h = 0);
          }
          function z(e) {
            return e.h / (1 - Math.pow(e.g, e.i));
          }
          function G() {
            (this.h = new V(2)),
              (this.j = new V(5)),
              (this.g = 0),
              (this.i = 128e3),
              (this.l = 16e3);
          }
          function q() {}
          function K() {}
          function W() {}
          function X(e) {
            var t = L.apply(1, arguments);
            Y.has(e) || (Y.add(e), W.apply(q, c(t)));
          }
          (V.prototype.sample = function (e, t) {
            var n = Math.pow(this.g, e);
            (t = t * (1 - n) + n * this.h),
              isNaN(t) || ((this.h = t), (this.i += e));
          }),
            (G.prototype.configure = function (e) {
              (this.i = e.minTotalBytes),
                (this.l = e.minBytes),
                (this.h.g = Math.exp(Math.log(0.5) / e.fastHalfLife)),
                (this.j.g = Math.exp(Math.log(0.5) / e.slowHalfLife));
            }),
            (G.prototype.sample = function (e, t) {
              if (!(t < this.l)) {
                var n = (8e3 * t) / e;
                (e /= 1e3),
                  (this.g += t),
                  this.h.sample(e, n),
                  this.j.sample(e, n);
              }
            }),
            (G.prototype.getBandwidthEstimate = function (e) {
              return this.g < this.i ? e : Math.min(z(this.h), z(this.j));
            });
          var Y = new Set();
          function J() {
            this.g = new Map();
          }
          function $() {
            this.g = new J();
          }
          function Z(e, t, n, i) {
            (this.target = e),
              (this.type = t),
              (this.listener = n),
              (this.g = (function (e, t) {
                if (null == t) return !1;
                if ("boolean" == typeof t) return t;
                var n = new Set(["passive", "capture"]);
                return (
                  Object.keys(t).filter(function (e) {
                    return !n.has(e);
                  }),
                  (function (e) {
                    var t = Q;
                    if (null == t) {
                      t = !1;
                      try {
                        var n = {},
                          i = {
                            get: function () {
                              return (t = !0), !1;
                            },
                          };
                        Object.defineProperty(n, "passive", i),
                          Object.defineProperty(n, "capture", i),
                          (i = function () {}),
                          e.addEventListener("test", i, n),
                          e.removeEventListener("test", i, n);
                      } catch (e) {
                        t = !1;
                      }
                      Q = t;
                    }
                    return t || !1;
                  })(e)
                    ? t
                    : t.capture || !1
                );
              })(e, i)),
              this.target.addEventListener(t, n, this.g);
          }
          e.console &&
            (new Map()
              .set(1, function () {
                return console.error.apply(console, c(L.apply(0, arguments)));
              })
              .set(2, function () {
                return console.warn.apply(console, c(L.apply(0, arguments)));
              })
              .set(3, function () {
                return console.info.apply(console, c(L.apply(0, arguments)));
              })
              .set(4, function () {
                return console.log.apply(console, c(L.apply(0, arguments)));
              })
              .set(5, function () {
                return console.debug.apply(console, c(L.apply(0, arguments)));
              })
              .set(6, function () {
                return console.debug.apply(console, c(L.apply(0, arguments)));
              }),
            (W = function () {
              return console.warn.apply(console, c(L.apply(0, arguments)));
            }),
            (K = function () {
              console.error.apply(console, c(L.apply(0, arguments)));
            })),
            ((i = J.prototype).push = function (e, t) {
              this.g.has(e) ? this.g.get(e).push(t) : this.g.set(e, [t]);
            }),
            (i.get = function (e) {
              return this.g.has(e) ? this.g.get(e).slice() : null;
            }),
            (i.remove = function (e, t) {
              if (this.g.has(e)) {
                var n = this.g.get(e).filter(function (e) {
                  return e != t;
                });
                this.g.set(e, n), n.length || this.g.delete(e);
              }
            }),
            (i.forEach = function (e) {
              this.g.forEach(function (t, n) {
                e(n, t);
              });
            }),
            (i.size = function () {
              return this.g.size;
            }),
            (i.keys = function () {
              return Array.from(this.g.keys());
            }),
            ((i = $.prototype).release = function () {
              this.qb(), (this.g = null);
            }),
            (i.H = function (e, t, n, i) {
              this.g && ((e = new Z(e, t, n, i)), this.g.push(t, e));
            }),
            (i.Ea = function (e, t, n, i) {
              var r = this;
              this.H(
                e,
                t,
                function i(a) {
                  r.sb(e, t, i), n(a);
                },
                i
              );
            }),
            (i.sb = function (e, t, n) {
              if (this.g)
                for (
                  var i = this.g.get(t) || [], r = (i = l(i)).next();
                  !r.done;
                  r = i.next()
                )
                  (r = r.value).target != e ||
                    (n != r.listener && n) ||
                    (r.sb(), this.g.remove(t, r));
            }),
            (i.qb = function () {
              if (this.g) {
                for (
                  var e = [], t = l(this.g.g.values()), n = t.next();
                  !n.done;
                  n = t.next()
                )
                  e.push.apply(e, c(n.value));
                for (t = (e = l(e)).next(); !t.done; t = e.next()) t.value.sb();
                this.g.g.clear();
              }
            }),
            B("shaka.util.EventManager", $),
            ($.prototype.removeAll = $.prototype.qb),
            ($.prototype.unlisten = $.prototype.sb),
            ($.prototype.listenOnce = $.prototype.Ea),
            ($.prototype.listen = $.prototype.H),
            ($.prototype.release = $.prototype.release),
            (Z.prototype.sb = function () {
              this.target.removeEventListener(this.type, this.listener, this.g),
                (this.listener = this.target = null),
                (this.g = !1);
            });
          var Q = void 0;
          function ee(e, t) {
            (this.g = e), (this.h = t);
          }
          function te(e, t) {
            var n = new ee(5, 0),
              i = re,
              r = i.g,
              a = n.h - r.h;
            (0 < (n.g - r.g || a) ? i.i : i.h)(i.g, n, e, t);
          }
          function ne(e, t, n, i) {
            W(
              [
                n,
                "has been deprecated and will be removed in",
                t,
                ". We are currently at version",
                e,
                ". Additional information:",
                i,
              ].join(" ")
            );
          }
          function ie(e, t, n, i) {
            K(
              [
                n,
                "has been deprecated and has been removed in",
                t,
                ". We are now at version",
                e,
                ". Additional information:",
                i,
              ].join(" ")
            );
          }
          B("shaka.config.AutoShowText", {
            NEVER: 0,
            ALWAYS: 1,
            IF_PREFERRED_TEXT_LANGUAGE: 2,
            IF_SUBTITLES_MAY_BE_NEEDED: 3,
          }),
            (ee.prototype.toString = function () {
              return "v" + this.g + "." + this.h;
            });
          var re = null,
            ae = RegExp(
              "^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"
            );
          function oe(e) {
            var t;
            e instanceof oe
              ? (se(this, e.rb),
                (this.hc = e.hc),
                ue(this, e.gb),
                le(this, e.Bc),
                (this.jb = e.jb),
                ce(this, e.g.clone()),
                (this.Ub = e.Ub))
              : e && (t = String(e).match(ae))
              ? (se(this, t[1] || "", !0),
                (this.hc = de(t[2] || "")),
                ue(this, t[3] || "", !0),
                le(this, t[4]),
                (this.jb = de(t[5] || "", !0)),
                ce(this, t[6] || "", !0),
                (this.Ub = de(t[7] || "")))
              : (this.g = new be(null));
          }
          function se(e, t, n) {
            (e.rb = n ? de(t, !0) : t), e.rb && (e.rb = e.rb.replace(/:$/, ""));
          }
          function ue(e, t, n) {
            e.gb = n ? de(t, !0) : t;
          }
          function le(e, t) {
            if (t) {
              if (((t = Number(t)), isNaN(t) || 0 > t))
                throw Error("Bad port number " + t);
              e.Bc = t;
            } else e.Bc = null;
          }
          function ce(e, t, n) {
            t instanceof be
              ? (e.g = t)
              : (n || (t = he(t, ve)), (e.g = new be(t)));
          }
          function de(e, t) {
            return e ? (t ? decodeURI(e) : decodeURIComponent(e)) : "";
          }
          function he(e, t, n) {
            return null != e
              ? ((e = encodeURI(e).replace(t, fe)),
                n && (e = e.replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
                e)
              : null;
          }
          function fe(e) {
            return (
              "%" +
              (((e = e.charCodeAt(0)) >> 4) & 15).toString(16) +
              (15 & e).toString(16)
            );
          }
          ((i = oe.prototype).rb = ""),
            (i.hc = ""),
            (i.gb = ""),
            (i.Bc = null),
            (i.jb = ""),
            (i.Ub = ""),
            (i.toString = function () {
              var e = [],
                t = this.rb;
              if ((t && e.push(he(t, pe, !0), ":"), (t = this.gb))) {
                e.push("//");
                var n = this.hc;
                n && e.push(he(n, pe, !0), "@"),
                  e.push(
                    encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g, "%$1")
                  ),
                  null != (t = this.Bc) && e.push(":", String(t));
              }
              return (
                (t = this.jb) &&
                  (this.gb && "/" != t.charAt(0) && e.push("/"),
                  e.push(he(t, "/" == t.charAt(0) ? me : ge, !0))),
                (t = this.g.toString()) && e.push("?", t),
                (t = this.Ub) && e.push("#", he(t, ye)),
                e.join("")
              );
            }),
            (i.resolve = function (e) {
              var t = this.clone();
              "data" === t.rb && (t = new oe());
              var n = !!e.rb;
              n ? se(t, e.rb) : (n = !!e.hc),
                n ? (t.hc = e.hc) : (n = !!e.gb),
                n ? ue(t, e.gb) : (n = null != e.Bc);
              var i = e.jb;
              if (n) le(t, e.Bc);
              else if ((n = !!e.jb)) {
                if ("/" != i.charAt(0))
                  if (this.gb && !this.jb) i = "/" + i;
                  else {
                    var r = t.jb.lastIndexOf("/");
                    -1 != r && (i = t.jb.substr(0, r + 1) + i);
                  }
                if (".." == i || "." == i) i = "";
                else if (-1 != i.indexOf("./") || -1 != i.indexOf("/.")) {
                  (r = 0 == i.lastIndexOf("/", 0)), (i = i.split("/"));
                  for (var a = [], o = 0; o < i.length; ) {
                    var s = i[o++];
                    "." == s
                      ? r && o == i.length && a.push("")
                      : ".." == s
                      ? ((1 < a.length || (1 == a.length && "" != a[0])) &&
                          a.pop(),
                        r && o == i.length && a.push(""))
                      : (a.push(s), (r = !0));
                  }
                  i = a.join("/");
                }
              }
              return (
                n ? (t.jb = i) : (n = "" !== e.g.toString()),
                n ? ce(t, e.g.clone()) : (n = !!e.Ub),
                n && (t.Ub = e.Ub),
                t
              );
            }),
            (i.clone = function () {
              return new oe(this);
            });
          var pe = /[#\/\?@]/g,
            ge = /[#\?:]/g,
            me = /[#\?]/g,
            ve = /[#\?@]/g,
            ye = /#/g;
          function be(e) {
            this.g = e || null;
          }
          function we(e) {
            if (!e.Da && ((e.Da = new Map()), (e.Jc = 0), e.g))
              for (var t = e.g.split("&"), n = 0; n < t.length; n++) {
                var i = t[n].indexOf("="),
                  r = null;
                if (0 <= i) {
                  var a = t[n].substring(0, i);
                  r = t[n].substring(i + 1);
                } else a = t[n];
                (a = decodeURIComponent(a.replace(/\+/g, " "))),
                  (r = r || ""),
                  e.add(a, decodeURIComponent(r.replace(/\+/g, " ")));
              }
          }
          function xe() {}
          function Se(e, t) {
            if (!e && !t) return !0;
            if (!e || !t || e.byteLength != t.byteLength) return !1;
            if (
              (ArrayBuffer.isView(e) ? e.buffer : e) ==
                (ArrayBuffer.isView(t) ? t.buffer : t) &&
              (e.byteOffset || 0) == (t.byteOffset || 0)
            )
              return !0;
            var n = Ae(e);
            t = Ae(t);
            for (var i = 0; i < e.byteLength; i++) if (n[i] != t[i]) return !1;
            return !0;
          }
          function Te(e) {
            return ArrayBuffer.isView(e)
              ? 0 == e.byteOffset && e.byteLength == e.buffer.byteLength
                ? e.buffer
                : new Uint8Array(e).buffer
              : e;
          }
          function Ae(e, t, n) {
            return Ce(
              e,
              void 0 === t ? 0 : t,
              (n = void 0 === n ? 1 / 0 : n),
              Uint8Array
            );
          }
          function ke(e, t, n) {
            return Ce(
              e,
              void 0 === t ? 0 : t,
              (n = void 0 === n ? 1 / 0 : n),
              Uint16Array
            );
          }
          function Ie(e, t, n) {
            return Ce(
              e,
              void 0 === t ? 0 : t,
              (n = void 0 === n ? 1 / 0 : n),
              DataView
            );
          }
          function Ce(e, t, n, i) {
            var r = ArrayBuffer.isView(e) ? e.buffer : e,
              a = 1;
            "BYTES_PER_ELEMENT" in i && (a = i.BYTES_PER_ELEMENT);
            var o = ((e.byteOffset || 0) + e.byteLength) / a;
            return new i(
              r,
              (e = Math.floor(
                Math.max(0, Math.min(((e.byteOffset || 0) + t) / a, o))
              )),
              Math.floor(Math.min(e + Math.max(n, 0), o)) - e
            );
          }
          function Me(e, t, n) {
            var i = L.apply(3, arguments);
            if (
              ((this.severity = e),
              (this.category = t),
              (this.code = n),
              (this.data = i),
              (this.handled = !1),
              (this.message = "Shaka Error " + this.code),
              Ee)
            )
              try {
                throw Error(this.message || "Shaka Error");
              } catch (e) {
                this.stack = e.stack;
              }
          }
          ((i = be.prototype).Da = null),
            (i.Jc = null),
            (i.add = function (e, t) {
              we(this), (this.g = null);
              var n = this.Da.has(e) ? this.Da.get(e) : null;
              return n || this.Da.set(e, (n = [])), n.push(t), this.Jc++, this;
            }),
            (i.set = function (e, t) {
              return (
                we(this),
                (this.g = null),
                this.Da.has(e) ? this.Da.set(e, [t]) : this.add(e, t),
                this
              );
            }),
            (i.get = function (e) {
              return we(this), this.Da.get(e) || [];
            }),
            (i.toString = function () {
              if (this.g) return this.g;
              if (!this.Da || !this.Da.size) return "";
              for (
                var e = [], t = l(this.Da.keys()), n = t.next();
                !n.done;
                n = t.next()
              ) {
                var i = n.value;
                (n = encodeURIComponent(i)), (i = this.Da.get(i));
                for (var r = 0; r < i.length; r++) {
                  var a = n;
                  "" !== i[r] && (a += "=" + encodeURIComponent(i[r])),
                    e.push(a);
                }
              }
              return (this.g = e.join("&"));
            }),
            (i.clone = function () {
              var e = new be();
              if (((e.g = this.g), this.Da)) {
                for (
                  var t = new Map(), n = l(this.Da), i = n.next();
                  !i.done;
                  i = n.next()
                ) {
                  var r = l(i.value);
                  (i = r.next().value),
                    (r = r.next().value),
                    t.set(i, r.concat());
                }
                (e.Da = t), (e.Jc = this.Jc);
              }
              return e;
            }),
            B("shaka.util.BufferUtils", xe),
            (xe.toDataView = Ie),
            (xe.toUint16 = ke),
            (xe.toUint8 = Ae),
            (xe.toArrayBuffer = Te),
            (xe.equal = Se),
            (Me.prototype.toString = function () {
              return "shaka.util.Error " + JSON.stringify(this, null, "  ");
            }),
            B("shaka.util.Error", Me);
          var Ee = !0;
          function De(e) {
            (this.h = e), (this.g = void 0);
          }
          function Pe(e, t) {
            if (!e.length) return t;
            if (!t.length) return e;
            for (var n = [], i = (e = l(e)).next(); !i.done; i = e.next()) {
              i = i.value;
              for (var r = l(t), a = r.next(); !a.done; a = r.next())
                if (((a = a.value), i.keySystem == a.keySystem)) {
                  r = new Map();
                  for (
                    var o = l((i.initData || []).concat(a.initData || [])),
                      s = o.next();
                    !s.done;
                    s = o.next()
                  )
                    (s = s.value), r.set(s.keyId, s);
                  (r = Array.from(r.values())),
                    (o =
                      i.keyIds && a.keyIds
                        ? new Set([].concat(c(i.keyIds), c(a.keyIds)))
                        : i.keyIds || a.keyIds),
                    n.push({
                      keySystem: i.keySystem,
                      licenseServerUri:
                        i.licenseServerUri || a.licenseServerUri,
                      distinctiveIdentifierRequired:
                        i.distinctiveIdentifierRequired ||
                        a.distinctiveIdentifierRequired,
                      persistentStateRequired:
                        i.persistentStateRequired || a.persistentStateRequired,
                      videoRobustness: i.videoRobustness || a.videoRobustness,
                      audioRobustness: i.audioRobustness || a.audioRobustness,
                      serverCertificate:
                        i.serverCertificate || a.serverCertificate,
                      serverCertificateUri:
                        i.serverCertificateUri || a.serverCertificateUri,
                      initData: r,
                      keyIds: o,
                    });
                  break;
                }
            }
            return n;
          }
          function Le(e) {
            return !!e && !!e.match(/^com\.(microsoft|chromecast)\.playready/);
          }
          function Re(e) {
            return !!e && !!e.match(/^com\.apple\.fps/);
          }
          (Me.Severity = { RECOVERABLE: 1, CRITICAL: 2 }),
            (Me.Category = {
              NETWORK: 1,
              TEXT: 2,
              MEDIA: 3,
              MANIFEST: 4,
              STREAMING: 5,
              DRM: 6,
              PLAYER: 7,
              CAST: 8,
              STORAGE: 9,
              ADS: 10,
            }),
            (Me.Code = {
              UNSUPPORTED_SCHEME: 1e3,
              BAD_HTTP_STATUS: 1001,
              HTTP_ERROR: 1002,
              TIMEOUT: 1003,
              MALFORMED_DATA_URI: 1004,
              REQUEST_FILTER_ERROR: 1006,
              RESPONSE_FILTER_ERROR: 1007,
              MALFORMED_TEST_URI: 1008,
              UNEXPECTED_TEST_REQUEST: 1009,
              ATTEMPTS_EXHAUSTED: 1010,
              SEGMENT_MISSING: 1011,
              INVALID_TEXT_HEADER: 2e3,
              INVALID_TEXT_CUE: 2001,
              UNABLE_TO_DETECT_ENCODING: 2003,
              BAD_ENCODING: 2004,
              INVALID_XML: 2005,
              INVALID_MP4_TTML: 2007,
              INVALID_MP4_VTT: 2008,
              UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
              INVALID_MP4_CEA: 2010,
              TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
              CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
              TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
              MISSING_TEXT_PLUGIN: 2014,
              UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
              BUFFER_READ_OUT_OF_BOUNDS: 3e3,
              JS_INTEGER_OVERFLOW: 3001,
              EBML_OVERFLOW: 3002,
              EBML_BAD_FLOATING_POINT_SIZE: 3003,
              MP4_SIDX_WRONG_BOX_TYPE: 3004,
              MP4_SIDX_INVALID_TIMESCALE: 3005,
              MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
              WEBM_CUES_ELEMENT_MISSING: 3007,
              WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
              WEBM_SEGMENT_ELEMENT_MISSING: 3009,
              WEBM_INFO_ELEMENT_MISSING: 3010,
              WEBM_DURATION_ELEMENT_MISSING: 3011,
              WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
              WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
              MEDIA_SOURCE_OPERATION_FAILED: 3014,
              MEDIA_SOURCE_OPERATION_THREW: 3015,
              VIDEO_ERROR: 3016,
              QUOTA_EXCEEDED_ERROR: 3017,
              TRANSMUXING_FAILED: 3018,
              CONTENT_TRANSFORMATION_FAILED: 3019,
              MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
              MSS_TRANSMUXING_FAILED: 3022,
              TRANSMUXING_NO_VIDEO_DATA: 3023,
              STREAMING_NOT_ALLOWED: 3024,
              UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3,
              DASH_INVALID_XML: 4001,
              DASH_NO_SEGMENT_INFO: 4002,
              DASH_EMPTY_ADAPTATION_SET: 4003,
              DASH_EMPTY_PERIOD: 4004,
              DASH_WEBM_MISSING_INIT: 4005,
              DASH_UNSUPPORTED_CONTAINER: 4006,
              DASH_PSSH_BAD_ENCODING: 4007,
              DASH_NO_COMMON_KEY_SYSTEM: 4008,
              DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
              DASH_CONFLICTING_KEY_IDS: 4010,
              RESTRICTIONS_CANNOT_BE_MET: 4012,
              HLS_PLAYLIST_HEADER_MISSING: 4015,
              INVALID_HLS_TAG: 4016,
              HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
              DASH_DUPLICATE_REPRESENTATION_ID: 4018,
              HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
              HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
              HLS_REQUIRED_TAG_MISSING: 4024,
              HLS_COULD_NOT_GUESS_CODECS: 4025,
              HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
              DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
              DASH_XLINK_DEPTH_LIMIT: 4028,
              CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
              CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
              NO_VARIANTS: 4036,
              PERIOD_FLATTENING_FAILED: 4037,
              INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
              HLS_VARIABLE_NOT_FOUND: 4039,
              HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
              HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
              NO_WEB_CRYPTO_API: 4042,
              CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
              MSS_INVALID_XML: 4046,
              MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
              AES_128_INVALID_IV_LENGTH: 4048,
              AES_128_INVALID_KEY_LENGTH: 4049,
              DASH_CONFLICTING_AES_128: 4050,
              DASH_UNSUPPORTED_AES_128: 4051,
              DASH_INVALID_PATCH: 4052,
              HLS_EMPTY_MEDIA_PLAYLIST: 4053,
              DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4054,
              CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM: 4054,
              STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
              NO_RECOGNIZED_KEY_SYSTEMS: 6e3,
              REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
              FAILED_TO_CREATE_CDM: 6002,
              FAILED_TO_ATTACH_TO_VIDEO: 6003,
              INVALID_SERVER_CERTIFICATE: 6004,
              FAILED_TO_CREATE_SESSION: 6005,
              FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
              LICENSE_REQUEST_FAILED: 6007,
              LICENSE_RESPONSE_REJECTED: 6008,
              ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
              NO_LICENSE_SERVER_GIVEN: 6012,
              OFFLINE_SESSION_REMOVED: 6013,
              EXPIRED: 6014,
              SERVER_CERTIFICATE_REQUIRED: 6015,
              INIT_DATA_TRANSFORM_ERROR: 6016,
              SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
              MIN_HDCP_VERSION_NOT_MATCH: 6018,
              ERROR_CHECKING_HDCP_VERSION: 6019,
              MISSING_EME_SUPPORT: 6020,
              LOAD_INTERRUPTED: 7e3,
              OPERATION_ABORTED: 7001,
              NO_VIDEO_ELEMENT: 7002,
              OBJECT_DESTROYED: 7003,
              CONTENT_NOT_LOADED: 7004,
              SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
              PRELOAD_DESTROYED: 7006,
              CAST_API_UNAVAILABLE: 8e3,
              NO_CAST_RECEIVERS: 8001,
              ALREADY_CASTING: 8002,
              UNEXPECTED_CAST_ERROR: 8003,
              CAST_CANCELED_BY_USER: 8004,
              CAST_CONNECTION_TIMED_OUT: 8005,
              CAST_RECEIVER_APP_UNAVAILABLE: 8006,
              STORAGE_NOT_SUPPORTED: 9e3,
              INDEXED_DB_ERROR: 9001,
              DEPRECATED_OPERATION_ABORTED: 9002,
              REQUESTED_ITEM_NOT_FOUND: 9003,
              MALFORMED_OFFLINE_URI: 9004,
              CANNOT_STORE_LIVE_OFFLINE: 9005,
              NO_INIT_DATA_FOR_OFFLINE: 9007,
              LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
              NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
              KEY_NOT_FOUND: 9012,
              MISSING_STORAGE_CELL: 9013,
              STORAGE_LIMIT_REACHED: 9014,
              DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
              MODIFY_OPERATION_NOT_SUPPORTED: 9016,
              INDEXED_DB_INIT_TIMED_OUT: 9017,
              CS_IMA_SDK_MISSING: 1e4,
              CS_AD_MANAGER_NOT_INITIALIZED: 10001,
              SS_IMA_SDK_MISSING: 10002,
              SS_AD_MANAGER_NOT_INITIALIZED: 10003,
              CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
              MT_AD_MANAGER_NOT_INITIALIZED: 10005,
              INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED: 10006,
              VAST_INVALID_XML: 10007,
            }),
            (De.prototype.value = function () {
              return void 0 === this.g && (this.g = this.h()), this.g;
            });
          var Ne = new De(function () {
              return Te(new Uint8Array([0]));
            }),
            _e = new Map();
          function Ue(e) {
            (this.h = e), (this.g = null);
          }
          function je(e) {
            (this.h = e), (this.g = null);
          }
          function Oe() {
            var t = e.ManagedMediaSource || e.MediaSource;
            return !(!t || !t.isTypeSupported);
          }
          function Be(e) {
            return "" != at().canPlayType(e);
          }
          function Fe() {
            return !!navigator.userAgent.match(/Edge?\//);
          }
          function He() {
            return it("Xbox One");
          }
          function Ve() {
            return it("Tizen");
          }
          function ze() {
            return it("Tizen 3");
          }
          function Ge() {
            return it("Web0S");
          }
          function qe() {
            return Ge() && 38 === We();
          }
          function Ke() {
            return it("CrKey") && !Ze();
          }
          function We() {
            if (!it("Chrome") || navigator.userAgent.match(/Edge\//))
              return null;
            var e = navigator.userAgent.match(/Chrome\/(\d+)/);
            return e ? parseInt(e[1], 10) : null;
          }
          function Xe() {
            return (
              rt() &&
              ((navigator.userAgentData && navigator.userAgentData.platform
                ? "macos" == navigator.userAgentData.platform.toLowerCase()
                : !!navigator.platform &&
                  navigator.platform.toLowerCase().includes("mac")) ||
                !!/(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ||
                (rt() && 1 < navigator.maxTouchPoints))
            );
          }
          function Ye() {
            return it("PlayStation 5");
          }
          function Je() {
            return it("PlayStation 4");
          }
          function $e() {
            return it("Hisense") || it("VIDAA");
          }
          function Ze() {
            return it("VIZIO SmartCast");
          }
          function Qe() {
            if (!Xe() && (!rt() || Xe())) return null;
            var e = navigator.userAgent.match(/Version\/(\d+)/);
            return e || (e = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))
              ? parseInt(e[1], 10)
              : null;
          }
          function et() {
            return navigator.userAgentData && navigator.userAgentData.platform
              ? "windows" == navigator.userAgentData.platform.toLowerCase()
              : !!navigator.platform &&
                  navigator.platform.toLowerCase().includes("win32");
          }
          function tt() {
            return navigator.userAgentData && navigator.userAgentData.platform
              ? "android" == navigator.userAgentData.platform.toLowerCase()
              : it("Android");
          }
          function nt() {
            return navigator.userAgentData && navigator.userAgentData.platform
              ? "fuchsia" == navigator.userAgentData.platform.toLowerCase()
              : it("Fuchsia");
          }
          function it(e) {
            return (navigator.userAgent || "").includes(e);
          }
          function rt() {
            return (navigator.vendor || "").includes("Apple");
          }
          function at() {
            return (
              ct ||
              (lt ||
                (lt = new je(function () {
                  ct = null;
                })),
              (ct =
                document.getElementsByTagName("video")[0] ||
                document.getElementsByTagName("audio")[0]) ||
                (ct = document.createElement("video")),
              lt.ea(1),
              ct)
            );
          }
          function ot() {
            if (ze() || it("Tizen 2") || qe() || Je() || Ye()) return !1;
            var e = Qe();
            return !(rt() && !Xe() && null != e && 15 > e);
          }
          function st() {
            var t, n, i, r, a, o, s, u, l, c, d, h, f, p, g;
            return P(function (m) {
              switch (m.g) {
                case 1:
                  if (((t = { width: 1 / 0, height: 1 / 0 }), Ke())) {
                    if (
                      ((f =
                        e.cast &&
                        cast.__platform__ &&
                        cast.__platform__.canDisplayType),
                      (t.width = 1280),
                      (t.height = 720),
                      S(m, 14),
                      !(p = f))
                    ) {
                      m.u(16);
                      break;
                    }
                    return w(
                      m,
                      cast.__platform__.canDisplayType(
                        'video/mp4; codecs="avc1.640028"; width=3840; height=2160'
                      ),
                      17
                    );
                  }
                  if (Ve()) {
                    (n = e.devicePixelRatio),
                      (t.width = 1920 < e.screen.width * n ? 3840 : 1920),
                      (t.height = 1080 < e.screen.height * n ? 2160 : 1080);
                    try {
                      webapis.systeminfo &&
                      webapis.systeminfo.getMaxVideoResolution
                        ? ((i = webapis.systeminfo.getMaxVideoResolution()),
                          (t.width = i.width),
                          (t.height = i.height))
                        : webapis.productinfo.is8KPanelSupported &&
                          webapis.productinfo.is8KPanelSupported()
                        ? ((t.width = 7680), (t.height = 4320))
                        : webapis.productinfo.isUdPanelSupported &&
                          webapis.productinfo.isUdPanelSupported() &&
                          ((t.width = 3840), (t.height = 2160));
                    } catch (e) {
                      W(
                        "Tizen: Error detecting screen size, default screen size 1920x1080."
                      );
                    }
                    m.u(3);
                    break;
                  }
                  if (Ge()) {
                    try {
                      (r = JSON.parse(e.PalmSystem.deviceInfo)),
                        (t.width = Math.max(1920, r.screenWidth)),
                        (t.height = Math.max(1080, r.screenHeight));
                    } catch (e) {
                      W(
                        "WebOS: Error detecting screen size, default screen size 1920x1080."
                      ),
                        (t.width = 1920),
                        (t.height = 1080);
                    }
                    m.u(3);
                    break;
                  }
                  if ($e()) {
                    if (((a = null), e.Hisense_Get4KSupportState))
                      try {
                        a = e.Hisense_Get4KSupportState();
                      } catch (e) {}
                    null == a && (a = it("UHD")),
                      a
                        ? ((t.width = 3840), (t.height = 2160))
                        : ((t.width = 1920), (t.height = 1080)),
                      m.u(3);
                    break;
                  }
                  if (!Je() && !Ye()) {
                    o = void 0;
                    try {
                      o =
                        "undefined" != typeof Windows
                          ? Windows
                          : chrome.webview.hostObjects.sync.Windows;
                    } catch (e) {}
                    if (o) {
                      (t.width = 1920), (t.height = 1080);
                      try {
                        (s = new o.Media.Protection.ProtectionCapabilities()),
                          (u = o.Media.Protection.ProtectionCapabilityResult),
                          (l = null);
                        do {
                          l = s.isTypeSupported(
                            'video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',
                            "com.microsoft.playready.recommendation"
                          );
                        } while (l === u.maybe);
                        l === u.probably &&
                          ((t.width = 3840), (t.height = 2160));
                      } catch (e) {
                        W(
                          "Xbox: Error detecting screen size, default screen size 1920x1080."
                        );
                      }
                    } else
                      He() &&
                        ((t.width = 1920),
                        (t.height = 1080),
                        W(
                          "Xbox: Error detecting screen size, default screen size 1920x1080."
                        ));
                    m.u(3);
                    break;
                  }
                  return (
                    (c = !1), S(m, 8), w(m, e.msdk.device.getDisplayInfo(), 10)
                  );
                case 10:
                  (d = m.h), (c = "4K" === d.resolution), T(m, 9);
                  break;
                case 8:
                  return (
                    A(m),
                    S(m, 11),
                    w(m, e.msdk.device.getDisplayInfoImmediate(), 13)
                  );
                case 13:
                  (h = m.h), (c = "4K" === h.resolution), T(m, 9);
                  break;
                case 11:
                  W("PlayStation: Failed to get the display info:", A(m));
                case 9:
                  c
                    ? ((t.width = 3840), (t.height = 2160))
                    : ((t.width = 1920), (t.height = 1080)),
                    m.u(3);
                  break;
                case 17:
                  p = m.h;
                case 16:
                  if (p) {
                    (t.width = 3840), (t.height = 2160), m.u(18);
                    break;
                  }
                  if (!(g = f)) {
                    m.u(19);
                    break;
                  }
                  return w(
                    m,
                    cast.__platform__.canDisplayType(
                      'video/mp4; codecs="avc1.640028"; width=1920; height=1080'
                    ),
                    20
                  );
                case 20:
                  g = m.h;
                case 19:
                  g && ((t.width = 1920), (t.height = 1080));
                case 18:
                  T(m, 3);
                  break;
                case 14:
                  K("Failed to check canDisplayType:", A(m));
                case 3:
                  return m.return(t);
              }
            });
          }
          function ut(t) {
            return void 0 !== e.matchMedia &&
              e.matchMedia("(color-gamut: p3)").matches
              ? t
                ? "HLG"
                : "PQ"
              : "SDR";
          }
          (Ue.prototype.ea = function (t) {
            var n = this;
            this.stop();
            var i = !0,
              r = null;
            return (
              (this.g = function () {
                e.clearTimeout(r), (i = !1);
              }),
              (r = e.setTimeout(function () {
                i && n.h();
              }, 1e3 * t)),
              this
            );
          }),
            (Ue.prototype.stop = function () {
              this.g && (this.g(), (this.g = null));
            }),
            (je.prototype.Nb = function () {
              return this.stop(), this.h(), this;
            }),
            (je.prototype.ea = function (e) {
              var t = this;
              return (
                this.stop(),
                (this.g = new Ue(function () {
                  t.h();
                }).ea(e)),
                this
              );
            }),
            (je.prototype.ta = function (e) {
              var t = this;
              return (
                this.stop(),
                (this.g = new Ue(function () {
                  t.g.ea(e), t.h();
                }).ea(e)),
                this
              );
            }),
            (je.prototype.stop = function () {
              this.g && (this.g.stop(), (this.g = null));
            }),
            B("shaka.util.Timer", je),
            (je.prototype.stop = je.prototype.stop),
            (je.prototype.tickEvery = je.prototype.ta),
            (je.prototype.tickAfter = je.prototype.ea),
            (je.prototype.tickNow = je.prototype.Nb);
          var lt = null,
            ct = null;
          function dt() {}
          function ht(t) {
            if (!t) return "";
            if (
              (239 == (t = Ae(t))[0] &&
                187 == t[1] &&
                191 == t[2] &&
                (t = t.subarray(3)),
              e.TextDecoder && !Je())
            )
              return (
                (t = new TextDecoder().decode(t)).includes("�") &&
                  K(
                    'Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'
                  ),
                t
              );
            for (var n = "", i = 0; i < t.length; ++i) {
              var r = 65533;
              if (
                (128 & t[i]
                  ? t.length >= i + 2 &&
                    192 == (224 & t[i]) &&
                    128 == (192 & t[i + 1])
                    ? ((r = ((31 & t[i]) << 6) | (63 & t[i + 1])), (i += 1))
                    : t.length >= i + 3 &&
                      224 == (240 & t[i]) &&
                      128 == (192 & t[i + 1]) &&
                      128 == (192 & t[i + 2])
                    ? ((r =
                        ((15 & t[i]) << 12) |
                        ((63 & t[i + 1]) << 6) |
                        (63 & t[i + 2])),
                      (i += 2))
                    : t.length >= i + 4 &&
                      240 == (241 & t[i]) &&
                      128 == (192 & t[i + 1]) &&
                      128 == (192 & t[i + 2]) &&
                      128 == (192 & t[i + 3]) &&
                      ((r =
                        ((7 & t[i]) << 18) |
                        ((63 & t[i + 1]) << 12) |
                        ((63 & t[i + 2]) << 6) |
                        (63 & t[i + 3])),
                      (i += 3))
                  : (r = t[i]),
                65535 >= r)
              )
                n += String.fromCharCode(r);
              else {
                var a = 1023 & (r -= 65536);
                (n += String.fromCharCode(55296 + (r >> 10))),
                  (n += String.fromCharCode(56320 + a));
              }
            }
            return n;
          }
          function ft(e, t, n) {
            if (!e) return "";
            if (!n && 0 != e.byteLength % 2) throw new Me(2, 2, 2004);
            n = Math.floor(e.byteLength / 2);
            var i = new Uint16Array(n);
            e = Ie(e);
            for (var r = 0; r < n; r++) i[r] = e.getUint16(2 * r, t);
            return vt(i);
          }
          function pt(e) {
            function t(e) {
              return n.byteLength <= e || (9 <= n[e] && 126 >= n[e]);
            }
            if (!e) return "";
            var n = Ae(e);
            if (239 == n[0] && 187 == n[1] && 191 == n[2]) return ht(n);
            if (254 == n[0] && 255 == n[1]) return ft(n.subarray(2), !1);
            if (255 == n[0] && 254 == n[1]) return ft(n.subarray(2), !0);
            if (0 == n[0] && 0 == n[2]) return ft(e, !1);
            if (0 == n[1] && 0 == n[3]) return ft(e, !0);
            if (t(0) && t(1) && t(2) && t(3)) return ht(e);
            throw new Me(2, 2, 2003);
          }
          function gt(t) {
            if (e.TextEncoder && !Je()) {
              var n = new TextEncoder();
              return Te(n.encode(t));
            }
            (t = encodeURIComponent(t)),
              (t = unescape(t)),
              (n = new Uint8Array(t.length));
            for (var i = 0; i < t.length; i++) n[i] = t[i].charCodeAt(0);
            return Te(n);
          }
          function mt(e, t) {
            for (
              var n = new ArrayBuffer(2 * e.length), i = new DataView(n), r = 0;
              r < e.length;
              ++r
            )
              i.setUint16(2 * r, e.charCodeAt(r), t);
            return n;
          }
          function vt(e) {
            return bt.value()(e);
          }
          function yt(e) {
            var t = {
                "&amp;": "&",
                "&lt;": "<",
                "&gt;": ">",
                "&quot;": '"',
                "&apos;": "'",
                "&nbsp;": " ",
                "&lrm;": "‎",
                "&rlm;": "‏",
              },
              n = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,
              i = RegExp(n.source);
            return e && i.test(e)
              ? e.replace(n, function (e) {
                  return "#" == e[1]
                    ? 0 <=
                        (e =
                          "x" == e[2] || "X" == e[2]
                            ? parseInt(e.substring(3), 16)
                            : parseInt(e.substring(2), 10)) && 1114111 >= e
                      ? String.fromCodePoint(e)
                      : ""
                    : t[e] || "'";
                })
              : e || "";
          }
          B("shaka.util.StringUtils", dt),
            (dt.resetFromCharCode = function () {
              bt.g = void 0;
            }),
            (dt.toUTF16 = mt),
            (dt.toUTF8 = gt),
            (dt.fromBytesAutoDetect = pt),
            (dt.fromUTF16 = ft),
            (dt.fromUTF8 = ht);
          var bt = new De(function () {
            function e(e) {
              try {
                var t = new Uint8Array(e);
                return 0 < String.fromCharCode.apply(null, t).length;
              } catch (e) {
                return !1;
              }
            }
            for (var t = { Mb: 65536 }; 0 < t.Mb; (t = { Mb: t.Mb }).Mb /= 2)
              if (e(t.Mb))
                return (function (e) {
                  return function (t) {
                    for (var n = "", i = 0; i < t.length; i += e.Mb)
                      n += String.fromCharCode.apply(
                        null,
                        t.subarray(i, i + e.Mb)
                      );
                    return n;
                  };
                })(t);
            return null;
          });
          function wt() {}
          function xt(e) {
            return (e = vt(Ae(e))), btoa(e);
          }
          function St(e, t) {
            return (
              (t = t ?? !0),
              (e = xt(e).replace(/\+/g, "-").replace(/\//g, "_")),
              t ? e : e.replace(/[=]*$/, "")
            );
          }
          function Tt(t) {
            t = e.atob(t.replace(/-/g, "+").replace(/_/g, "/"));
            for (var n = new Uint8Array(t.length), i = 0; i < t.length; ++i)
              n[i] = t.charCodeAt(i);
            return n;
          }
          function At(t) {
            for (var n = t.length / 2, i = new Uint8Array(n), r = 0; r < n; r++)
              i[r] = e.parseInt(t.substr(2 * r, 2), 16);
            return i;
          }
          function kt(e) {
            var t = Ae(e);
            e = "";
            for (var n = (t = l(t)).next(); !n.done; n = t.next())
              1 == (n = (n = n.value).toString(16)).length && (n = "0" + n),
                (e += n);
            return e;
          }
          function It() {
            for (var e = L.apply(0, arguments), t = 0, n = 0; n < e.length; ++n)
              t += e[n].byteLength;
            t = new Uint8Array(t);
            for (var i = (n = 0); i < e.length; ++i) {
              var r = e[i];
              ArrayBuffer.isView(r) && 1 === r.BYTES_PER_ELEMENT
                ? t.set(r, n)
                : t.set(Ae(r), n),
                (n += r.byteLength);
            }
            return t;
          }
          function Ct(e, t, n) {
            if (((n = void 0 === n ? "" : n), 0 == t.length)) return e;
            if (1 == e.length && 1 == t.length) {
              var i = new oe(e[0]);
              return (
                (t = new oe(t[0])),
                (t = i.resolve(t)),
                n && ce(t, n),
                [t.toString()]
              );
            }
            (t = t.map(function (e) {
              return new oe(e);
            })),
              (i = []);
            for (var r = (e = l(e)).next(); !r.done; r = e.next()) {
              r = new oe(r.value);
              for (var a = l(t), o = a.next(); !o.done; o = a.next())
                (o = r.resolve(o.value)), n && ce(o, n), i.push(o.toString());
            }
            return i;
          }
          function Mt(e, t, n) {
            return {
              keySystem: e,
              encryptionScheme: t,
              licenseServerUri: "",
              distinctiveIdentifierRequired: !1,
              persistentStateRequired: !1,
              audioRobustness: "",
              videoRobustness: "",
              serverCertificate: null,
              serverCertificateUri: "",
              sessionType: "",
              initData: n || [],
              keyIds: new Set(),
            };
          }
          function Et(e, t) {
            if (1 == t.length) return t[0];
            if (null != (e = Dt(e, t))) return e;
            throw new Me(2, 4, 4025, t);
          }
          function Dt(e, t) {
            for (
              var n = _t.get(e), i = (n = l(n)).next();
              !i.done;
              i = n.next()
            ) {
              i = i.value;
              for (var r = l(t), a = r.next(); !a.done; a = r.next())
                if (((a = a.value), i.test(a.trim()))) return a.trim();
            }
            return e == Lt ? "" : null;
          }
          function Pt(e, t) {
            for (
              var n = [], i = (e = l((e = _t.get(e)))).next();
              !i.done;
              i = e.next()
            ) {
              i = i.value;
              for (var r = l(t), a = r.next(); !a.done; a = r.next())
                (a = a.value), i.test(a.trim()) && n.push(a.trim());
            }
            return n;
          }
          B("shaka.util.Uint8ArrayUtils", wt),
            (wt.concat = It),
            (wt.toHex = kt),
            (wt.fromHex = At),
            (wt.fromBase64 = Tt),
            (wt.toBase64 = St),
            (wt.toStandardBase64 = xt);
          var Lt = "text",
            Rt = {
              ja: "video",
              P: "audio",
              ua: Lt,
              Mg: "image",
              Hi: "application",
            },
            Nt = 1 / 15,
            _t = new Map()
              .set("audio", [
                /^vorbis$/,
                /^Opus$/,
                /^opus$/,
                /^fLaC$/,
                /^flac$/,
                /^mp4a/,
                /^[ae]c-3$/,
                /^ac-4/,
                /^dts[cex]$/,
                /^iamf/,
                /^mhm[12]/,
                /^ac3$/,
                /^eac3$/,
              ])
              .set("video", [
                /^avc/,
                /^hev/,
                /^hvc/,
                /^vvc/,
                /^vvi/,
                /^vp0?[89]/,
                /^av01/,
                /^dvh/,
                /^dva/,
                /^dav/,
              ])
              .set("text", [/^vtt$/, /^wvtt/, /^stpp/]);
          function Ut(e, t, n, i) {
            (this.g = null),
              (this.l = e),
              (this.i = t),
              (this.m = n),
              (this.o = i),
              (this.j = !1);
            e: {
              if (
                ("undefined" == typeof libDPIModule &&
                  W("Could not find LCEVC Library dependencies on this page"),
                "undefined" != typeof LCEVCdec)
              )
                this.h = LCEVCdec;
              else {
                if ("undefined" == typeof LcevcDil) {
                  W("Could not find LCEVC Library on this page"), (e = !1);
                  break e;
                }
                (this.h = LcevcDil),
                  (this.j = !0),
                  te(
                    "LcevcDil",
                    "lcevc_dil.js is deprecated, please use lcevc_dec.js instead"
                  );
              }
              void 0 === this.h.SupportObject
                ? (W("Could not find LCEVC Library on this page"), (e = !1))
                : (this.h.SupportObject.SupportStatus ||
                    W(this.h.SupportObject.SupportError),
                  (e =
                    void 0 !== this.h &&
                    "undefined" != typeof libDPIModule &&
                    this.i instanceof HTMLCanvasElement &&
                    this.h.SupportObject.SupportStatus));
            }
            e &&
              !this.g &&
              this.h.SupportObject.webGLSupport(this.i) &&
              (this.i.classList.remove("shaka-hidden"),
              (this.g = this.j
                ? new this.h.LcevcDil(this.l, this.i, this.m)
                : new this.h.LCEVCdec(this.l, this.i, this.m)));
          }
          function jt(e, t, n, i) {
            "video" !== i.type ||
              (e.o && !i.baseOriginalId) ||
              (e.g && e.g.appendBuffer(t, "video", i.id, -n, !e.o));
          }
          function Ot(e) {
            e.g && e.i.classList.add("shaka-hidden");
          }
          function Bt(e) {
            return (
              !(!e || "undefined" == typeof LCEVCdec) && "lvc1" == e.codecs
            );
          }
          function Ft(t) {
            if (zt.has(t)) return zt.get(t);
            var n = e.ManagedMediaSource || e.MediaSource;
            return !!n && ((n = n.isTypeSupported(t)), zt.set(t, n), n);
          }
          function Ht() {
            var t = e.ManagedSourceBuffer || e.SourceBuffer;
            return !!t && !!t.prototype && !!t.prototype.changeType;
          }
          function Vt() {
            var t = e.ManagedMediaSource || e.MediaSource;
            return (
              !(!t || !t.prototype) &&
              !!t.prototype.setLiveSeekableRange &&
              !!t.prototype.clearLiveSeekableRange
            );
          }
          (Ut.prototype.release = function () {
            this.g && (this.g.close(), (this.g = null));
          }),
            B("shaka.lcevc.Dec", Ut),
            (Ut.prototype.release = Ut.prototype.release);
          var zt = new Map();
          function Gt() {}
          function qt() {}
          function Kt() {}
          function Wt(e) {
            (this.i = new qt()),
              (e = Yt(e.toLowerCase())) && (this.i = e()),
              (this.g = new Gt()),
              (e = $t) && (this.g = e());
          }
          function Xt(e, t) {
            Jt.set(e, t);
          }
          function Yt(e) {
            return Jt.get(e);
          }
          (Gt.prototype.extract = function () {}),
            (Gt.prototype.decode = function () {
              return [];
            }),
            (Gt.prototype.clear = function () {}),
            (Gt.prototype.getStreams = function () {
              return [];
            }),
            (qt.prototype.init = function () {}),
            (qt.prototype.parse = function () {
              return [];
            }),
            (Kt.prototype.init = function () {}),
            (Kt.prototype.j = function () {}),
            (Kt.prototype.h = function () {}),
            B("shaka.media.IClosedCaptionParser", Kt),
            (Wt.prototype.init = function (e, t) {
              (void 0 !== t && t) || this.h(), this.i.init(e);
            }),
            (Wt.prototype.j = function (e) {
              for (
                var t = (e = l((e = this.i.parse(e)))).next();
                !t.done;
                t = e.next()
              ) {
                var n = Ae((t = t.value).packet);
                0 < n.length && this.g.extract(n, t.pts);
              }
              return this.g.decode();
            }),
            (Wt.prototype.h = function () {
              this.g.clear();
            }),
            B("shaka.media.ClosedCaptionParser", Wt),
            (Wt.findDecoder = function () {
              return $t;
            }),
            (Wt.unregisterDecoder = function () {
              $t = null;
            }),
            (Wt.registerDecoder = function (e) {
              $t = e;
            }),
            (Wt.findParser = Yt),
            (Wt.unregisterParser = function (e) {
              Jt.delete(e);
            }),
            (Wt.registerParser = Xt);
          var Jt = new Map(),
            $t = null;
          function Zt() {
            (this.id = ""),
              (this.regionAnchorY =
                this.regionAnchorX =
                this.viewportAnchorY =
                this.viewportAnchorX =
                  0),
              (this.height = this.width = 100),
              (this.viewportAnchorUnits =
                this.widthUnits =
                this.heightUnits =
                  Qt),
              (this.scroll = en);
          }
          B("shaka.text.CueRegion", Zt);
          var Qt = 1;
          Zt.units = { PX: 0, PERCENTAGE: Qt, LINES: 2 };
          var en = "";
          function tn(e, t) {
            return (
              !(
                "number" != typeof e ||
                "number" != typeof t ||
                !isNaN(e) ||
                !isNaN(t)
              ) || e === t
            );
          }
          function nn(e, t) {
            -1 < (t = e.indexOf(t)) && e.splice(t, 1);
          }
          function rn(e, t, n) {
            if (e === t) return !0;
            if (!e || !t) return e == t;
            if ((n || (n = tn), e.length != t.length)) return !1;
            for (var i = 0; i < e.length; i++) if (!n(e[i], t[i])) return !1;
            return !0;
          }
          function an(e) {
            (this.h = e || ""), (this.g = 0);
          }
          function on(e) {
            sn(e, /[ \t]+/gm);
          }
          function sn(e, t) {
            return (
              (t.lastIndex = e.g),
              (t =
                null == (t = t.exec(e.h))
                  ? null
                  : { position: t.index, length: t[0].length, results: t }),
              e.g == e.h.length || null == t || t.position != e.g
                ? null
                : ((e.g += t.length), t.results)
            );
          }
          function un(e) {
            return e.g == e.h.length
              ? null
              : (e = sn(e, /[^ \t\n]*/gm))
              ? e[0]
              : null;
          }
          function ln(e) {
            if (null == (e = sn(e, cn))) return null;
            var t = Number(e[2]),
              n = Number(e[3]);
            return 59 < t || 59 < n
              ? null
              : (Number(e[6]) || 0) / 1e3 +
                  n +
                  60 * t +
                  3600 * (Number(e[1]) || 0);
          }
          Zt.scrollMode = { NONE: en, UP: "up" };
          var cn = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;
          function dn(e) {
            var t = new WeakSet();
            return (function e(n) {
              switch (typeof n) {
                case "undefined":
                case "boolean":
                case "number":
                case "string":
                case "symbol":
                case "function":
                  return n;
                default:
                  if (!n || ArrayBuffer.isView(n)) return n;
                  if (t.has(n)) return null;
                  var i = n.constructor == Array;
                  if (n.constructor != Object && !i) return null;
                  t.add(n);
                  var r,
                    a = i ? [] : {};
                  for (r in n) a[r] = e(n[r]);
                  return i && (a.length = n.length), a;
              }
            })(e);
          }
          function hn(e) {
            var t,
              n = {};
            for (t in e) n[t] = e[t];
            return n;
          }
          function fn(e) {
            if (Array.isArray(e)) {
              for (var t = [], n = 0; n < e.length; n++) {
                var i = n.toString(),
                  r = e[n];
                void 0 !== r && (r = fn(r)) && t.push(i + ":" + r);
              }
              e = "[" + t.join(",") + "]";
            } else if ("function" == typeof e) e = "";
            else if (e instanceof Object) {
              for (
                (n = Object.keys(e)).sort(), t = [], i = (n = l(n)).next();
                !i.done;
                i = n.next()
              )
                (r = i.value),
                  (i = JSON.stringify(r)),
                  void 0 !== (r = e[r]) && (r = fn(r)) && t.push(i + ":" + r);
              e = "{" + t.join(",") + "}";
            } else e = JSON.stringify(e);
            return e;
          }
          function pn(e, t) {
            var n = void 0 !== n && n;
            return gn((e = pt(e)), t, n);
          }
          function gn(e, t, n) {
            return (
              (e = (function (e, t) {
                function n(a, o) {
                  o = void 0 !== o && o;
                  for (var s = []; e[r]; )
                    if (60 == e.charCodeAt(r)) {
                      if (47 === e.charCodeAt(r + 1)) {
                        (o = r + 2), (r = e.indexOf(">", r));
                        var u = (o = e.substring(o, r)).indexOf(a);
                        if (-1 == u) {
                          var l = a.indexOf(".");
                          0 < l && (u = o.indexOf(a.substring(0, l)));
                        }
                        if (-1 == u)
                          throw (
                            ((a = e.substring(0, r).split("\n")),
                            Error(
                              "Unexpected close tag\nLine: " +
                                (a.length - 1) +
                                "\nColumn: " +
                                (a[a.length - 1].length + 1) +
                                "\nChar: " +
                                e[r]
                            ))
                          );
                        r + 1 && (r += 1);
                        break;
                      }
                      if (33 === e.charCodeAt(r + 1)) {
                        if (45 == e.charCodeAt(r + 2)) {
                          for (
                            ;
                            -1 !== r &&
                            (62 !== e.charCodeAt(r) ||
                              45 != e.charCodeAt(r - 1) ||
                              45 != e.charCodeAt(r - 2) ||
                              -1 == r);

                          )
                            r = e.indexOf(">", r + 1);
                          -1 === r && (r = e.length);
                        } else if (
                          91 === e.charCodeAt(r + 2) &&
                          91 === e.charCodeAt(r + 8) &&
                          "cdata" === e.substr(r + 3, 5).toLowerCase()
                        ) {
                          -1 == (u = e.indexOf("]]>", r))
                            ? (s.push(e.substr(r + 9)), (r = e.length))
                            : (s.push(e.substring(r + 9, u)), (r = u + 3));
                          continue;
                        }
                        r++;
                        continue;
                      }
                      e: {
                        (l = o), r++;
                        var d = i(),
                          h = {};
                        for (u = []; 62 !== e.charCodeAt(r) && e[r]; ) {
                          var f = e.charCodeAt(r);
                          if ((64 < f && 91 > f) || (96 < f && 123 > f)) {
                            f = i();
                            for (
                              var p = e.charCodeAt(r);
                              p &&
                              39 !== p &&
                              34 !== p &&
                              !((64 < p && 91 > p) || (96 < p && 123 > p)) &&
                              62 !== p;

                            )
                              r++, (p = e.charCodeAt(r));
                            var g = r + 1;
                            if (
                              ((r = e.indexOf(e[r], g)),
                              (g = e.slice(g, r)),
                              39 === p || 34 === p)
                            ) {
                              if (-1 === r) {
                                if (
                                  ((l = {
                                    tagName: d,
                                    attributes: h,
                                    children: u,
                                    parent: null,
                                  }),
                                  t)
                                )
                                  for (d = 0; d < u.length; d++)
                                    "string" != typeof u[d] &&
                                      (u[d].parent = l);
                                u = l;
                                break e;
                              }
                            } else (g = null), r--;
                            if (f.startsWith("xmlns:")) {
                              p = g;
                              var m = f.split(":")[1];
                              Gn.set(p, m), qn.set(m, p);
                            }
                            "tt" === d &&
                              "xml:space" === f &&
                              "preserve" === g &&
                              (l = !0),
                              (h[f] = g);
                          }
                          r++;
                        }
                        for (
                          47 !== e.charCodeAt(r - 1)
                            ? (r++, (u = n(d, l)))
                            : r++,
                            l = {
                              tagName: d,
                              attributes: h,
                              children: u,
                              parent: null,
                            },
                            d = u.length,
                            h = 0;
                          h < d;
                          h++
                        )
                          "string" != typeof (f = u[h])
                            ? t && (f.parent = l)
                            : h == d - 1 && "\n" == f && u.pop();
                        u = l;
                      }
                      if ((s.push(u), "string" == typeof u)) break;
                      "?" === u.tagName[0] &&
                        u.children &&
                        (s.push.apply(s, c(u.children)), (u.children = []));
                    } else
                      (u = r),
                        -2 === (r = e.indexOf("<", r) - 1) && (r = e.length),
                        (u = e.slice(u, r + 1)),
                        o
                          ? 0 < u.length && s.push(u)
                          : ((s.length && 1 == u.length && "\n" == u[0]) ||
                              0 < u.trim().length) &&
                            s.push(u),
                        r++;
                  return s;
                }
                function i() {
                  for (var t = r; -1 === "\r\n\t>/= ".indexOf(e[r]) && e[r]; )
                    r++;
                  return e.slice(t, r);
                }
                var r = 0;
                return n("");
              })(e, void 0 !== n && n)),
              !t && e.length
                ? e[0]
                : (e = e.find(function (e) {
                    return t.split(",").includes(e.tagName);
                  }))
                ? e
                : null
            );
          }
          function mn(e) {
            return Gn.has(e) ? Gn.get(e) : "";
          }
          function vn(e) {
            return "string" == typeof e;
          }
          function yn(e) {
            var t = [];
            if (!e.children) return [];
            for (var n = (e = l(e.children)).next(); !n.done; n = e.next())
              "string" != typeof (n = n.value) && t.push(n);
            return t;
          }
          function bn(e, t) {
            var n = [];
            if (!e.children) return [];
            for (var i = (e = l(e.children)).next(); !i.done; i = e.next())
              (i = i.value).tagName === t && n.push(i);
            return n;
          }
          function wn(e) {
            return "string" == typeof e
              ? yt(e)
              : "" ===
                (e = e.children.reduce(function (e, t) {
                  return "string" == typeof t ? e + t : e;
                }, ""))
              ? null
              : yt(e);
          }
          function xn(e) {
            return Array.from(e.children).every(function (e) {
              return "string" == typeof e;
            })
              ? ((e = wn(e)) && (e = e.trim()), e)
              : null;
          }
          function Sn(e, t, n) {
            if (
              ((n = void 0 === n ? [] : n),
              e.tagName === t && n.push(e),
              e.children)
            )
              for (var i = (e = l(e.children)).next(); !i.done; i = e.next())
                Sn(i.value, t, n);
            return n;
          }
          function Tn(e, t) {
            return 1 != (e = bn(e, t)).length ? null : e[0];
          }
          function An(e, t, n) {
            return 1 != (e = Cn(e, t, n)).length ? null : e[0];
          }
          function kn(e, t, n, i) {
            i = void 0 === i ? null : i;
            var r = null;
            return null != (e = e.attributes[t]) && (r = n(e)), r ?? i;
          }
          function In(e, t, n) {
            return (t = mn(t)), e.attributes[t + ":" + n] || null;
          }
          function Cn(e, t, n) {
            var i = mn(t);
            if (((t = []), e.children))
              for (
                n = i ? i + ":" + n : n, i = (e = l(e.children)).next();
                !i.done;
                i = e.next()
              )
                (i = i.value) && i.tagName === n && t.push(i);
            return t;
          }
          function Mn(e, t, n) {
            for (var i = (t = l(t)).next(); !i.done; i = t.next())
              if ((i = In(e, i.value, n))) return i;
            return null;
          }
          function En(e) {
            return e
              ? (/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e) && (e += "Z"),
                (e = Date.parse(e)),
                isNaN(e) ? null : e / 1e3)
              : null;
          }
          function Dn(e) {
            return e &&
              (e = RegExp(
                "^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$",
                "i"
              ).exec(e))
              ? ((e =
                  31536e3 * Number(e[1] || null) +
                  2592e3 * Number(e[2] || null) +
                  86400 * Number(e[3] || null) +
                  3600 * Number(e[4] || null) +
                  60 * Number(e[5] || null) +
                  Number(e[6] || null)),
                isFinite(e) ? e : null)
              : null;
          }
          function Pn(e) {
            var t = /([0-9]+)-([0-9]+)/.exec(e);
            return t
              ? ((e = Number(t[1])),
                isFinite(e)
                  ? ((t = Number(t[2])),
                    isFinite(t) ? { start: e, end: t } : null)
                  : null)
              : null;
          }
          function Ln(e) {
            return 0 == (e = Number(e)) % 1 ? e : null;
          }
          function Rn(e) {
            return 0 == (e = Number(e)) % 1 && 0 < e ? e : null;
          }
          function Nn(e) {
            return 0 == (e = Number(e)) % 1 && 0 <= e ? e : null;
          }
          function _n(e) {
            return (e = Number(e)), isNaN(e) ? null : e;
          }
          function Un(e) {
            return !!e && "true" === e.toLowerCase();
          }
          function jn(e) {
            var t,
              n = (t = e.match(/^(\d+)\/(\d+)$/))
                ? Number(t[1]) / Number(t[2])
                : Number(e);
            return isNaN(n) ? null : n;
          }
          function On(e) {
            for (
              var t = [],
                n = (e = l(
                  (e = yt(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))
                )).next();
              !n.done;
              n = e.next()
            ) {
              var i = (n = n.value).match(/^([\w]+)/);
              if (i) {
                var r = n.match(/(@id='(.*?)')/),
                  a = n.match(/(@t='(\d+)')/),
                  o = n.match(/(@n='(\d+)')/),
                  s = n.match(/\[(\d+)\]/);
                t.push({
                  name: i[0],
                  id: r ? r[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null,
                  t: a
                    ? Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm, ""))
                    : null,
                  n: o
                    ? Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm, ""))
                    : null,
                  position: s ? Number(s[1]) - 1 : null,
                  Db: n.split("/@")[1] || null,
                });
              } else
                n.startsWith("@") &&
                  t.length &&
                  (t[t.length - 1].Db = n.slice(1));
            }
            return t;
          }
          function Bn(e, t) {
            var n = On(t.attributes.sel || "");
            if (n.length) {
              var i = n[n.length - 1],
                r = t.attributes.pos || null;
              null == (n = i.position) &&
                (null !== i.t && (n = Fn(e, "t", i.t)),
                null !== i.n && (n = Fn(e, "n", i.n))),
                null === n
                  ? (n = "prepend" === r ? 0 : e.length)
                  : "prepend" === r
                  ? --n
                  : "after" === r && ++n,
                (r = t.tagName),
                (i = i.Db) && e[n]
                  ? Hn(e[n], r, i, xn(t) || "")
                  : (("remove" !== r && "replace" !== r) || e.splice(n, 1),
                    ("add" !== r && "replace" !== r) ||
                      e.splice.apply(e, [n, 0].concat(c(t.children))));
            }
          }
          function Fn(e, t, n) {
            for (var i = 0, r = (e = l(e)).next(); !r.done; r = e.next()) {
              if (Number(r.value.attributes[t]) === n) return i;
              i++;
            }
            return null;
          }
          function Hn(e, t, n, i) {
            "remove" === t
              ? delete e.attributes[n]
              : ("add" !== t && "replace" !== t) || (e.attributes[n] = i);
          }
          function Vn(e) {
            var t = "",
              n = e.tagName.split(":");
            for (var i in (0 < n.length &&
              ((t = n[0]), (t = qn.has(t) ? qn.get(t) : "")),
            (t = document.createElementNS(t, e.tagName)),
            e.attributes))
              t.setAttribute(i, e.attributes[i]);
            for (i = (e = l(e.children)).next(); !i.done; i = e.next())
              (n = void 0),
                (n = "string" == typeof (i = i.value) ? new Text(i) : Vn(i)),
                t.appendChild(n);
            return t;
          }
          function zn(e) {
            if (!e) return null;
            for (
              var t = {
                  tagName: e.tagName,
                  attributes: hn(e.attributes),
                  children: [],
                  parent: null,
                },
                n = (e = l(e.children)).next();
              !n.done;
              n = e.next()
            )
              "string" == typeof (n = n.value) || ((n = zn(n)).parent = t),
                t.children.push(n);
            return t;
          }
          var Gn = new Map(),
            qn = new Map();
          function Kn(e, t, n) {
            (this.startTime = e),
              (this.endTime = t),
              (this.payload = n),
              (this.region = new Zt()),
              (this.position = null),
              (this.positionAlign = Qn),
              (this.size = 0),
              (this.textAlign = ei),
              (this.direction = ri),
              (this.writingMode = ai),
              (this.lineInterpretation = oi),
              (this.line = null),
              (this.lineHeight = ""),
              (this.lineAlign = si),
              (this.displayAlign = ni),
              (this.fontSize =
                this.border =
                this.backgroundImage =
                this.backgroundColor =
                this.color =
                  ""),
              (this.fontWeight = di),
              (this.fontStyle = fi),
              (this.linePadding = this.letterSpacing = this.fontFamily = ""),
              (this.opacity = 1),
              (this.textCombineUpright = ""),
              (this.textDecoration = []),
              (this.textStrokeWidth =
                this.textStrokeColor =
                this.textShadow =
                  ""),
              (this.wrapLine = !0),
              (this.id = ""),
              (this.nestedCues = []),
              (this.lineBreak = this.isContainer = !1),
              (this.rubyTag = null),
              (this.cellResolution = { Rb: 32, rows: 15 });
          }
          function Wn(e, t) {
            return ((e = new Kn(e, t, "")).lineBreak = !0), e;
          }
          function Xn(e, t) {
            if (
              e.payload != t.payload ||
              !(
                0.001 > Math.abs(e.startTime - t.startTime) &&
                0.001 > Math.abs(e.endTime - t.endTime)
              )
            )
              return !1;
            for (var n in e)
              if ("startTime" != n && "endTime" != n && "payload" != n)
                if ("nestedCues" == n) {
                  if (!rn(e.nestedCues, t.nestedCues, Xn)) return !1;
                } else if ("region" == n || "cellResolution" == n) {
                  for (var i in e[n]) if (e[n][i] != t[n][i]) return !1;
                } else if (Array.isArray(e[n])) {
                  if (!rn(e[n], t[n])) return !1;
                } else if (e[n] != t[n]) return !1;
            return !0;
          }
          function Yn(e, t) {
            t = void 0 === t ? new Map() : t;
            var n = e.payload;
            if (n.includes("<")) {
              0 === t.size && Jn(t);
              var i = n;
              n = [];
              for (var r = -1, a = 0; a < i.length; a++)
                "<" === i[a]
                  ? (r = a + 1)
                  : ">" === i[a] &&
                    0 < r &&
                    ((r = i.substr(r, a - r)).match(vi) && n.push(r), (r = -1));
              for (a = (n = l(n)).next(); !a.done; a = n.next())
                (a = a.value),
                  (i = i.replace("<" + a + ">", '<div time="' + a + '">')),
                  (i += "</div>");
              e: {
                (a = i), (r = []);
                var o = -1;
                (n = ""), (i = !1);
                for (var s = 0; s < a.length; s++)
                  if ("/" === a[s]) {
                    var u = a.indexOf(">", s);
                    if (-1 === u) {
                      n = a;
                      break e;
                    }
                    if ((u = a.substring(s + 1, u)) && "v" == u) {
                      i = !0;
                      var c = null;
                      if ((r.length && (c = r[r.length - 1]), c)) {
                        if (c === u) n += "/" + u + ">";
                        else {
                          if (!c.startsWith("v")) {
                            n += a[s];
                            continue;
                          }
                          n += "/" + c + ">";
                        }
                        s += u.length + 1;
                      } else n += a[s];
                    } else n += a[s];
                  } else
                    "<" === a[s]
                      ? "v" != a[(o = s + 1)] && (o = -1)
                      : ">" === a[s] &&
                        0 < o &&
                        (r.push(a.substr(o, s - o)), (o = -1)),
                      (n += a[s]);
                for (r = (a = l(r)).next(); !r.done; r = a.next())
                  (o = (r = r.value).replace(" ", ".voice-")),
                    (n = (n = n.replace("<" + r + ">", "<" + o + ">")).replace(
                      "</" + r + ">",
                      "</" + o + ">"
                    )),
                    i || (n += "</" + o + ">");
              }
              (n = (function (e) {
                var t = { "< ": "", " >": " &gt;" },
                  n = /(< +>|<\s|\s>)/g,
                  i = RegExp(n.source);
                return e && i.test(e)
                  ? e.replace(n, function (e) {
                      return t[e] || "";
                    })
                  : e || "";
              })(n)),
                (e.payload = "");
              try {
                var d = gn("<span>" + n + "</span>", "span");
              } catch (e) {}
              if (d)
                if (1 != (d = d.children).length || d[0].tagName)
                  for (n = (d = l(d)).next(); !n.done; n = d.next())
                    $n(n.value, e, t);
                else e.payload = yt(n);
              else e.payload = yt(n);
            } else e.payload = yt(n);
          }
          function Jn(e) {
            for (
              var t = l(Object.entries(li)), n = t.next();
              !n.done;
              n = t.next()
            ) {
              var i = l(n.value);
              (n = i.next().value), (i = i.next().value);
              var r = new Kn(0, 0, "");
              (r.color = i), e.set("." + n, r);
            }
            for (n = (t = l(Object.entries(ci))).next(); !n.done; n = t.next())
              (n = (i = l(n.value)).next().value),
                (i = i.next().value),
                ((r = new Kn(0, 0, "")).backgroundColor = i),
                e.set("." + n, r);
          }
          function $n(e, t, n) {
            var i = t.clone();
            if (
              ((i.nestedCues = []),
              (i.payload = ""),
              (i.rubyTag = ""),
              (i.line = null),
              (i.region = new Zt()),
              (i.position = null),
              (i.size = 0),
              (i.textAlign = ei),
              e.tagName)
            )
              for (
                var r = l(e.tagName.split(/(?=[ .])+/g)), a = r.next();
                !a.done;
                a = r.next()
              ) {
                var o = (a = a.value);
                if (o.startsWith(".voice-")) {
                  var s = o.split("-").pop();
                  (o = 'v[voice="' + s + '"]'),
                    n.has(o) || (o = "v[voice=" + s + "]");
                }
                switch (
                  (n.has(o) &&
                    ((s = i), (o = n.get(o))) &&
                    ((s.backgroundColor = Zn(
                      o.backgroundColor,
                      s.backgroundColor
                    )),
                    (s.color = Zn(o.color, s.color)),
                    (s.fontFamily = Zn(o.fontFamily, s.fontFamily)),
                    (s.fontSize = Zn(o.fontSize, s.fontSize)),
                    (s.textShadow = Zn(o.textShadow, s.textShadow)),
                    (s.fontWeight = o.fontWeight),
                    (s.fontStyle = o.fontStyle),
                    (s.opacity = o.opacity),
                    (s.rubyTag = o.rubyTag),
                    (s.textCombineUpright = o.textCombineUpright),
                    (s.wrapLine = o.wrapLine)),
                  a)
                ) {
                  case "br":
                    return (
                      (i = Wn(i.startTime, i.endTime)),
                      void t.nestedCues.push(i)
                    );
                  case "b":
                    i.fontWeight = hi;
                    break;
                  case "i":
                    i.fontStyle = pi;
                    break;
                  case "u":
                    i.textDecoration.push(mi);
                    break;
                  case "font":
                    (a = e.attributes.color) && (i.color = a);
                    break;
                  case "div":
                    if (!(a = e.attributes.time)) break;
                    (a = a ? ln(new an(a)) : null) && (i.startTime = a);
                    break;
                  case "ruby":
                  case "rp":
                  case "rt":
                    i.rubyTag = a;
                }
              }
            if (((r = e.children), vn(e) || (1 == r.length && vn(r[0]))))
              for (
                n = wn(e).split("\n"), e = !0, r = (n = l(n)).next();
                !r.done;
                r = n.next()
              )
                (r = r.value),
                  e || ((e = Wn(i.startTime, i.endTime)), t.nestedCues.push(e)),
                  0 < r.length &&
                    (((e = i.clone()).payload = yt(r)), t.nestedCues.push(e)),
                  (e = !1);
            else
              for (
                t.nestedCues.push(i), e = (t = l(r)).next();
                !e.done;
                e = t.next()
              )
                $n(e.value, i, n);
          }
          function Zn(e, t) {
            return e && 0 < e.length ? e : t;
          }
          (Kn.prototype.clone = function () {
            var e,
              t = new Kn(0, 0, "");
            for (e in this)
              (t[e] = this[e]),
                t[e] && t[e].constructor == Array && (t[e] = t[e].slice());
            return t;
          }),
            B("shaka.text.Cue", Kn),
            (Kn.parseCuePayload = Yn),
            (Kn.equal = Xn),
            (Kn.prototype.clone = Kn.prototype.clone);
          var Qn = "auto";
          Kn.positionAlign = {
            LEFT: "line-left",
            RIGHT: "line-right",
            CENTER: "center",
            AUTO: Qn,
          };
          var ei = "center",
            ti = {
              LEFT: "left",
              RIGHT: "right",
              CENTER: ei,
              START: "start",
              END: "end",
            };
          Kn.textAlign = ti;
          var ni = "after",
            ii = { BEFORE: "before", CENTER: "center", AFTER: ni };
          Kn.displayAlign = ii;
          var ri = "ltr";
          Kn.direction = {
            HORIZONTAL_LEFT_TO_RIGHT: ri,
            HORIZONTAL_RIGHT_TO_LEFT: "rtl",
          };
          var ai = "horizontal-tb";
          Kn.writingMode = {
            HORIZONTAL_TOP_TO_BOTTOM: ai,
            VERTICAL_LEFT_TO_RIGHT: "vertical-lr",
            VERTICAL_RIGHT_TO_LEFT: "vertical-rl",
          };
          var oi = 0;
          Kn.lineInterpretation = { LINE_NUMBER: oi, PERCENTAGE: 1 };
          var si = "start",
            ui = { CENTER: "center", START: si, END: "end" };
          Kn.lineAlign = ui;
          var li = {
            white: "white",
            lime: "lime",
            cyan: "cyan",
            red: "red",
            yellow: "yellow",
            magenta: "magenta",
            blue: "blue",
            black: "black",
          };
          Kn.defaultTextColor = li;
          var ci = {
            bg_white: "white",
            bg_lime: "lime",
            bg_cyan: "cyan",
            bg_red: "red",
            bg_yellow: "yellow",
            bg_magenta: "magenta",
            bg_blue: "blue",
            bg_black: "black",
          };
          Kn.defaultTextBackgroundColor = ci;
          var di = 400,
            hi = 700;
          Kn.fontWeight = { NORMAL: di, BOLD: hi };
          var fi = "normal",
            pi = "italic",
            gi = { NORMAL: fi, ITALIC: pi, OBLIQUE: "oblique" };
          Kn.fontStyle = gi;
          var mi = "underline";
          Kn.textDecoration = {
            UNDERLINE: mi,
            LINE_THROUGH: "lineThrough",
            OVERLINE: "overline",
          };
          var vi = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
          function yi() {}
          function bi(e, t, n) {
            xi.set(e.toLowerCase().split(";")[0] + "-" + n, {
              priority: n,
              Ld: t,
            });
          }
          function wi(e, t) {
            for (
              var n = e.toLowerCase().split(";")[0],
                i = l([ki, Ai, Ti, Si]),
                r = i.next();
              !r.done;
              r = i.next()
            )
              if ((r = xi.get(n + "-" + r.value))) {
                var a = r.Ld(),
                  o = a.isSupported(e, t);
                if ((a.destroy(), o)) return r.Ld;
              }
            return null;
          }
          (yi.prototype.destroy = function () {}),
            B("shaka.transmuxer.TransmuxerEngine", yi),
            (yi.findTransmuxer = wi),
            (yi.unregisterTransmuxer = function (e, t) {
              xi.delete(e.toLowerCase().split(";")[0] + "-" + t);
            }),
            (yi.registerTransmuxer = bi),
            (yi.prototype.destroy = yi.prototype.destroy);
          var xi = new Map(),
            Si = 1,
            Ti = 2,
            Ai = 3,
            ki = 4;
          function Ii() {}
          function Ci(e, t) {
            var n = e;
            return t && !Bi.includes(e) && (n += '; codecs="' + t + '"'), n;
          }
          function Mi(e, t) {
            return t && (e += '; codecs="' + t + '"'), e;
          }
          function Ei(e, t, n) {
            var i = Ci(e, t);
            return (
              wi((t = Mi(e, t)))
                ? (e = wi(t))
                  ? ((n = (e = e()).convertCodecs(n, t)), e.destroy())
                  : (n = t)
                : (n =
                    "video/mp2t" != e && "audio" == n
                      ? i.replace("video", "audio")
                      : i),
              n
            );
          }
          function Di(e, t, n) {
            var i = [t];
            return (
              Oi.forEach(function (t, r) {
                var a = e[r];
                "codecs" == r
                  ? Bi.includes(e.mimeType) || i.push('codecs="' + n + '"')
                  : a && i.push(t + '="' + a + '"');
              }),
              "PQ" == e.hdr && i.push('eotf="smpte2084"'),
              i.join(";")
            );
          }
          function Pi(e) {
            return e.split(";")[0].split("/")[1];
          }
          function Li(e) {
            var t = ji(e);
            switch (((e = t[0].toLowerCase()), (t = t[1].toLowerCase()), !0)) {
              case "mp4a" === e && "69" === t:
              case "mp4a" === e && "6b" === t:
              case "mp4a" === e && "40.34" === t:
                return "mp3";
              case "mp4a" === e && "66" === t:
              case "mp4a" === e && "67" === t:
              case "mp4a" === e && "68" === t:
              case "mp4a" === e && "40.2" === t:
              case "mp4a" === e && "40.02" === t:
              case "mp4a" === e && "40.5" === t:
              case "mp4a" === e && "40.05" === t:
              case "mp4a" === e && "40.29" === t:
              case "mp4a" === e && "40.42" === t:
                return "aac";
              case "mp4a" === e && "a5" === t:
              case "ac3" === e:
              case "ac-3" === e:
                return "ac-3";
              case "mp4a" === e && "a6" === t:
              case "eac3" === e:
              case "ec-3" === e:
                return "ec-3";
              case "ac-4" === e:
                return "ac-4";
              case "mp4a" === e && "b2" === t:
                return "dtsx";
              case "mp4a" === e && "a9" === t:
                return "dtsc";
              case "vp09" === e:
              case "vp9" === e:
                return "vp9";
              case "avc1" === e:
              case "avc3" === e:
                return "avc";
              case "hvc1" === e:
              case "hev1" === e:
                return "hevc";
              case "vvc1" === e:
              case "vvi1" === e:
                return "vvc";
              case "dvh1" === e:
              case "dvhe" === e:
                return t && t.startsWith("05") ? "dovi-p5" : "dovi-hevc";
              case "dvav" === e:
              case "dva1" === e:
                return "dovi-avc";
              case "dav1" === e:
                return "dovi-av1";
              case "dvc1" === e:
              case "dvi1" === e:
                return "dovi-vvc";
            }
            return e;
          }
          function Ri(e) {
            for (
              var t = [], n = (e = l(e.split(","))).next();
              !n.done;
              n = e.next()
            )
              (n = ji(n.value)), t.push(n[0]);
            return t.sort().join(",");
          }
          function Ni(e) {
            return e.split(";")[0];
          }
          function _i(e) {
            return (
              (e = e.split(/ *; */)).shift(),
              (e = e.find(function (e) {
                return e.startsWith("codecs=");
              }))
                ? e.split("=")[1].replace(/^"|"$/g, "")
                : ""
            );
          }
          function Ui(e) {
            return (
              "application/x-mpegurl" === e ||
              "application/vnd.apple.mpegurl" === e
            );
          }
          function ji(e) {
            var t = (e = e.split("."))[0];
            return e.shift(), [t, e.join(".")];
          }
          (yi.PluginPriority = {
            FALLBACK: Si,
            PREFERRED_SECONDARY: Ti,
            PREFERRED: Ai,
            APPLICATION: ki,
          }),
            B("shaka.util.MimeUtils", Ii),
            (Ii.getFullTypeWithAllCodecs = Mi),
            (Ii.getFullType = Ci);
          var Oi = new Map()
              .set("codecs", "codecs")
              .set("frameRate", "framerate")
              .set("bandwidth", "bitrate")
              .set("width", "width")
              .set("height", "height")
              .set("channelsCount", "channels"),
            Bi = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];
          function Fi(e) {
            (this.i = null),
              (this.j = e),
              (this.B = !1),
              (this.l = this.s = 0),
              (this.m = 1 / 0),
              (this.h = this.g = null),
              (this.C = ""),
              (this.A = function () {}),
              (this.o = new Map());
          }
          function Hi(e, t) {
            Ki.set(e, t);
          }
          function Vi(e) {
            return Ki.get(e);
          }
          function zi(e) {
            return (
              !!Ki.has(e) ||
              (("application/cea-608" == e || "application/cea-708" == e) &&
                !!$t)
            );
          }
          function Gi(e, t, n) {
            if (((e.C = t), (t = e.o.get(t))))
              for (var i = l(t.keys()), r = i.next(); !r.done; r = i.next())
                (r = t.get(r.value).filter(function (e) {
                  return e.endTime <= n;
                })) && e.j.append(r);
          }
          function qi(e, t, n) {
            (t.startTime += n), (t.endTime += n);
            for (var i = (t = l(t.nestedCues)).next(); !i.done; i = t.next())
              qi(e, i.value, n);
          }
          (Fi.prototype.destroy = function () {
            return (this.j = this.i = null), this.o.clear(), Promise.resolve();
          }),
            (Fi.prototype.remove = function (e, t) {
              var n = this;
              return P(function (i) {
                if (1 == i.g) return w(i, Promise.resolve(), 2);
                !n.j ||
                  !n.j.remove(e, t) ||
                  null == n.g ||
                  t <= n.g ||
                  e >= n.h ||
                  (e <= n.g && t >= n.h
                    ? (n.g = n.h = null)
                    : e <= n.g && t < n.h
                    ? (n.g = t)
                    : e > n.g && t >= n.h && (n.h = e)),
                  x(i);
              });
            }),
            B("shaka.text.TextEngine", Fi),
            (Fi.prototype.destroy = Fi.prototype.destroy),
            (Fi.findParser = Vi),
            (Fi.unregisterParser = function (e) {
              Ki.delete(e);
            }),
            (Fi.registerParser = Hi);
          var Ki = new Map();
          function Wi(e, t) {
            return e.concat(t);
          }
          function Xi() {}
          function Yi(e) {
            return null != e;
          }
          function Ji(e, t) {
            return Promise.race([
              t,
              new Promise(function (t, n) {
                new je(n).ea(e);
              }),
            ]);
          }
          function $i() {}
          function Zi(e, t) {
            return (e = tr(e)), (t = tr(t)), e.split("-")[0] == t.split("-")[0];
          }
          function Qi(e, t) {
            return (
              (e = tr(e)),
              (t = tr(t)),
              (e = e.split("-")),
              (t = t.split("-")),
              e[0] == t[0] && 1 == e.length && 2 == t.length
            );
          }
          function er(e, t) {
            return (
              (e = tr(e)),
              (t = tr(t)),
              (e = e.split("-")),
              (t = t.split("-")),
              2 == e.length && 2 == t.length && e[0] == t[0]
            );
          }
          function tr(e) {
            var t = (e = l(e.split("-x-"))).next().value;
            (t = void 0 === t ? "" : t),
              (e = void 0 === (e = e.next().value) ? "" : e);
            var n = l(t.split("-"));
            return (
              (t = void 0 === (t = n.next().value) ? "" : t),
              (n = void 0 === (n = n.next().value) ? "" : n),
              (e = e ? "x-" + e : ""),
              (t = t.toLowerCase()),
              (t = or.get(t) || t),
              ((n = n.toUpperCase()) ? t + "-" + n : t) + (e ? "-" + e : "")
            );
          }
          function nr(e, t) {
            return (
              (e = tr(e)),
              (t = tr(t)) == e
                ? 4
                : Qi(t, e)
                ? 3
                : er(t, e)
                ? 2
                : Qi(e, t)
                ? 1
                : 0
            );
          }
          function ir(e) {
            var t = e.indexOf("-");
            return (
              (e = (e = 0 <= t ? e.substring(0, t) : e).toLowerCase()),
              or.get(e) || e
            );
          }
          function rr(e) {
            return e.language
              ? tr(e.language)
              : e.audio && e.audio.language
              ? tr(e.audio.language)
              : e.video && e.video.language
              ? tr(e.video.language)
              : "und";
          }
          function ar(e, t) {
            e = tr(e);
            for (
              var n = new Set(), i = (t = l(t)).next();
              !i.done;
              i = t.next()
            )
              n.add(tr(i.value));
            for (i = (t = l(n)).next(); !i.done; i = t.next())
              if ((i = i.value) == e) return i;
            for (i = (t = l(n)).next(); !i.done; i = t.next())
              if (Qi((i = i.value), e)) return i;
            for (i = (t = l(n)).next(); !i.done; i = t.next())
              if (er((i = i.value), e)) return i;
            for (t = (n = l(n)).next(); !t.done; t = n.next())
              if (Qi(e, (t = t.value))) return t;
            return null;
          }
          B("shaka.util.LanguageUtils", $i),
            ($i.findClosestLocale = ar),
            ($i.getLocaleForVariant = rr),
            ($i.getLocaleForText = function (e) {
              return tr(e.language || "und");
            }),
            ($i.getBase = ir),
            ($i.relatedness = nr),
            ($i.areSiblings = function (e, t) {
              var n = ir(e),
                i = ir(t);
              return e != n && t != i && n == i;
            }),
            ($i.normalize = tr),
            ($i.isSiblingOf = er),
            ($i.isParentOf = Qi),
            ($i.areLanguageCompatible = Zi),
            ($i.areLocaleCompatible = function (e, t) {
              return (e = tr(e)) == (t = tr(t));
            });
          var or = new Map([
            ["aar", "aa"],
            ["abk", "ab"],
            ["afr", "af"],
            ["aka", "ak"],
            ["alb", "sq"],
            ["amh", "am"],
            ["ara", "ar"],
            ["arg", "an"],
            ["arm", "hy"],
            ["asm", "as"],
            ["ava", "av"],
            ["ave", "ae"],
            ["aym", "ay"],
            ["aze", "az"],
            ["bak", "ba"],
            ["bam", "bm"],
            ["baq", "eu"],
            ["bel", "be"],
            ["ben", "bn"],
            ["bih", "bh"],
            ["bis", "bi"],
            ["bod", "bo"],
            ["bos", "bs"],
            ["bre", "br"],
            ["bul", "bg"],
            ["bur", "my"],
            ["cat", "ca"],
            ["ces", "cs"],
            ["cha", "ch"],
            ["che", "ce"],
            ["chi", "zh"],
            ["chu", "cu"],
            ["chv", "cv"],
            ["cor", "kw"],
            ["cos", "co"],
            ["cre", "cr"],
            ["cym", "cy"],
            ["cze", "cs"],
            ["dan", "da"],
            ["deu", "de"],
            ["div", "dv"],
            ["dut", "nl"],
            ["dzo", "dz"],
            ["ell", "el"],
            ["eng", "en"],
            ["epo", "eo"],
            ["est", "et"],
            ["eus", "eu"],
            ["ewe", "ee"],
            ["fao", "fo"],
            ["fas", "fa"],
            ["fij", "fj"],
            ["fin", "fi"],
            ["fra", "fr"],
            ["fre", "fr"],
            ["fry", "fy"],
            ["ful", "ff"],
            ["geo", "ka"],
            ["ger", "de"],
            ["gla", "gd"],
            ["gle", "ga"],
            ["glg", "gl"],
            ["glv", "gv"],
            ["gre", "el"],
            ["grn", "gn"],
            ["guj", "gu"],
            ["hat", "ht"],
            ["hau", "ha"],
            ["heb", "he"],
            ["her", "hz"],
            ["hin", "hi"],
            ["hmo", "ho"],
            ["hrv", "hr"],
            ["hun", "hu"],
            ["hye", "hy"],
            ["ibo", "ig"],
            ["ice", "is"],
            ["ido", "io"],
            ["iii", "ii"],
            ["iku", "iu"],
            ["ile", "ie"],
            ["ina", "ia"],
            ["ind", "id"],
            ["ipk", "ik"],
            ["isl", "is"],
            ["ita", "it"],
            ["jav", "jv"],
            ["jpn", "ja"],
            ["kal", "kl"],
            ["kan", "kn"],
            ["kas", "ks"],
            ["kat", "ka"],
            ["kau", "kr"],
            ["kaz", "kk"],
            ["khm", "km"],
            ["kik", "ki"],
            ["kin", "rw"],
            ["kir", "ky"],
            ["kom", "kv"],
            ["kon", "kg"],
            ["kor", "ko"],
            ["kua", "kj"],
            ["kur", "ku"],
            ["lao", "lo"],
            ["lat", "la"],
            ["lav", "lv"],
            ["lim", "li"],
            ["lin", "ln"],
            ["lit", "lt"],
            ["ltz", "lb"],
            ["lub", "lu"],
            ["lug", "lg"],
            ["mac", "mk"],
            ["mah", "mh"],
            ["mal", "ml"],
            ["mao", "mi"],
            ["mar", "mr"],
            ["may", "ms"],
            ["mkd", "mk"],
            ["mlg", "mg"],
            ["mlt", "mt"],
            ["mon", "mn"],
            ["mri", "mi"],
            ["msa", "ms"],
            ["mya", "my"],
            ["nau", "na"],
            ["nav", "nv"],
            ["nbl", "nr"],
            ["nde", "nd"],
            ["ndo", "ng"],
            ["nep", "ne"],
            ["nld", "nl"],
            ["nno", "nn"],
            ["nob", "nb"],
            ["nor", "no"],
            ["nya", "ny"],
            ["oci", "oc"],
            ["oji", "oj"],
            ["ori", "or"],
            ["orm", "om"],
            ["oss", "os"],
            ["pan", "pa"],
            ["per", "fa"],
            ["pli", "pi"],
            ["pol", "pl"],
            ["por", "pt"],
            ["pus", "ps"],
            ["que", "qu"],
            ["roh", "rm"],
            ["ron", "ro"],
            ["rum", "ro"],
            ["run", "rn"],
            ["rus", "ru"],
            ["sag", "sg"],
            ["san", "sa"],
            ["sin", "si"],
            ["slk", "sk"],
            ["slo", "sk"],
            ["slv", "sl"],
            ["sme", "se"],
            ["smo", "sm"],
            ["sna", "sn"],
            ["snd", "sd"],
            ["som", "so"],
            ["sot", "st"],
            ["spa", "es"],
            ["sqi", "sq"],
            ["srd", "sc"],
            ["srp", "sr"],
            ["ssw", "ss"],
            ["sun", "su"],
            ["swa", "sw"],
            ["swe", "sv"],
            ["tah", "ty"],
            ["tam", "ta"],
            ["tat", "tt"],
            ["tel", "te"],
            ["tgk", "tg"],
            ["tgl", "tl"],
            ["tha", "th"],
            ["tib", "bo"],
            ["tir", "ti"],
            ["ton", "to"],
            ["tsn", "tn"],
            ["tso", "ts"],
            ["tuk", "tk"],
            ["tur", "tr"],
            ["twi", "tw"],
            ["uig", "ug"],
            ["ukr", "uk"],
            ["urd", "ur"],
            ["uzb", "uz"],
            ["ven", "ve"],
            ["vie", "vi"],
            ["vol", "vo"],
            ["wel", "cy"],
            ["wln", "wa"],
            ["wol", "wo"],
            ["xho", "xh"],
            ["yid", "yi"],
            ["yor", "yo"],
            ["zha", "za"],
            ["zho", "zh"],
            ["zul", "zu"],
          ]);
          function sr() {}
          function ur(e, t, n, i, r) {
            function a(e) {
              var t =
                String(e.width || "") +
                String(e.height || "") +
                String(Math.round(e.frameRate || 0)) +
                (e.hdr || "") +
                e.fastSwitching;
              return (
                e.dependencyStream &&
                  (t += e.dependencyStream.baseOriginalId || ""),
                t
              );
            }
            if (r.length) {
              for (
                var o = e.textStreams, s = (r = l(r)).next(), u = {};
                !s.done;
                u = { vf: void 0 }, s = r.next()
              )
                if (
                  ((u.vf = s.value),
                  (s = o.filter(
                    (function (e) {
                      return function (t) {
                        return !(
                          !t.codecs.startsWith(e.vf) &&
                          !t.mimeType.startsWith(e.vf)
                        );
                      };
                    })(u)
                  )).length)
                ) {
                  o = s;
                  break;
                }
              e.textStreams = o;
            }
            if (
              ((o = e.variants),
              (t.length || n.length) &&
                (o = (function (e, t, n) {
                  for (
                    var i = (t = l(t)).next(), r = {};
                    !i.done;
                    r = { Ig: void 0 }, i = t.next()
                  )
                    if (
                      ((r.Ig = i.value),
                      (i = e.filter(
                        (function (e) {
                          return function (t) {
                            return t.video && t.video.codecs.startsWith(e.Ig);
                          };
                        })(r)
                      )),
                      i.length)
                    ) {
                      e = i;
                      break;
                    }
                  for (
                    n = l(n), t = n.next(), i = {};
                    !t.done;
                    i = { Ef: void 0 }, t = n.next()
                  )
                    if (
                      ((i.Ef = t.value),
                      (t = e.filter(
                        (function (e) {
                          return function (t) {
                            return t.audio && t.audio.codecs.startsWith(e.Ef);
                          };
                        })(i)
                      )),
                      t.length)
                    ) {
                      e = t;
                      break;
                    }
                  return e;
                })(o, t, n)),
              i.length)
            ) {
              for (t = new J(), o = (n = l(o)).next(); !o.done; o = n.next())
                (o = o.value), t.push(String(o.video.width || 0), o);
              var d = [];
              t.forEach(function (e, t) {
                e = 0;
                for (
                  var n = [], r = (t = l(t)).next(), a = {};
                  !r.done;
                  a = { be: void 0 }, r = t.next()
                )
                  (a.be = r.value),
                    (r = i.filter(
                      (function (e) {
                        return function (t) {
                          return e.be.decodingInfos[0][t];
                        };
                      })(a)
                    ).length) > e
                      ? ((e = r), (n = [a.be]))
                      : r == e && n.push(a.be);
                d.push.apply(d, c(n));
              }),
                (o = d);
            }
            for (
              n = new Set(), t = new Set(), r = (o = l(o)).next();
              !r.done;
              r = o.next()
            )
              (r = r.value).audio && n.add(r.audio), r.video && t.add(r.video);
            o = Array.from(n).sort(function (e, t) {
              return e.bandwidth - t.bandwidth;
            });
            var h,
              f,
              p = [];
            for (n = new Map(), r = (o = l(o)).next(); !r.done; r = o.next()) {
              if (
                ((r = r.value),
                (f = void 0),
                (f =
                  (h = r).language +
                  (h.channelsCount || 0) +
                  (h.audioSamplingRate || 0) +
                  h.roles.join(",") +
                  h.label +
                  h.groupId +
                  h.fastSwitching),
                h.dependencyStream &&
                  (f += h.dependencyStream.baseOriginalId || ""),
                (s = f),
                (u = n.get(s) || []).length)
              ) {
                var g = u[u.length - 1],
                  m = Li(g.codecs),
                  v = Li(r.codecs);
                m != v ||
                  (r.bandwidth &&
                    g.bandwidth &&
                    !(r.bandwidth > g.bandwidth)) ||
                  (u.push(r), p.push(r.id));
              } else u.push(r), p.push(r.id);
              n.set(s, u);
            }
            var y = {
              vp8: 1,
              avc: 1,
              "dovi-avc": 0.95,
              vp9: 0.9,
              vp09: 0.9,
              hevc: 0.85,
              "dovi-hevc": 0.8,
              "dovi-p5": 0.75,
              av01: 0.7,
              "dovi-av1": 0.65,
              vvc: 0.6,
            };
            (o = Array.from(t).sort(function (e, t) {
              if (!e.bandwidth || !t.bandwidth || e.bandwidth == t.bandwidth) {
                if (
                  e.codecs &&
                  t.codecs &&
                  e.codecs != t.codecs &&
                  e.width == t.width
                ) {
                  var n = Li(e.codecs),
                    i = Li(t.codecs);
                  if (n != i) return (y[n] || 1) - (y[i] || 1);
                }
                return e.width - t.width;
              }
              return e.bandwidth - t.bandwidth;
            })),
              (t = Ht());
            var b = [];
            for (n = new Map(), r = (o = l(o)).next(); !r.done; r = o.next()) {
              if (((s = a((r = r.value))), (u = n.get(s) || []).length)) {
                if (
                  ((g = u[u.length - 1]),
                  !t && (m = Li(g.codecs)) !== (v = Li(r.codecs)))
                )
                  continue;
                (m = Li(g.codecs)) != (v = Li(r.codecs)) ||
                  (r.bandwidth &&
                    g.bandwidth &&
                    !(r.bandwidth > g.bandwidth)) ||
                  (u.push(r), b.push(r.id));
              } else u.push(r), b.push(r.id);
              n.set(s, u);
            }
            e.variants = e.variants.filter(function (e) {
              var t = e.audio;
              return (
                (e = e.video),
                !((t && !p.includes(t.id)) || (e && !b.includes(e.id)))
              );
            });
          }
          function lr(e, t, n) {
            function i(e, t, n) {
              return e >= t && e <= n;
            }
            var r = e.video;
            if (r && r.width && r.height) {
              var a = r.width,
                o = r.height;
              if (
                (o > a &&
                  ((a = (o = l([o, a])).next().value), (o = o.next().value)),
                !i(a, t.minWidth, Math.min(t.maxWidth, n.width)) ||
                  !i(o, t.minHeight, Math.min(t.maxHeight, n.height)) ||
                  !i(r.width * r.height, t.minPixels, t.maxPixels))
              )
                return !1;
            }
            return !(
              (e &&
                e.video &&
                e.video.frameRate &&
                !i(e.video.frameRate, t.minFrameRate, t.maxFrameRate)) ||
              (e &&
                e.audio &&
                e.audio.channelsCount &&
                !i(
                  e.audio.channelsCount,
                  t.minChannelsCount,
                  t.maxChannelsCount
                )) ||
              !i(e.bandwidth, t.minBandwidth, t.maxBandwidth)
            );
          }
          function cr(e, t, n, i) {
            return (
              (n = void 0 === n ? [] : n),
              (i = void 0 === i ? {} : i),
              P(function (r) {
                return 1 == r.g
                  ? w(
                      r,
                      (function (e, t, n, i, r) {
                        var a, o;
                        return P(function (s) {
                          if (1 == s.g)
                            return (
                              He() &&
                                (function (e) {
                                  for (
                                    var t = new Map()
                                        .set("dvav", "avc3")
                                        .set("dva1", "avc1")
                                        .set("dvhe", "hev1")
                                        .set("dvh1", "hvc1")
                                        .set("dvc1", "vvc1")
                                        .set("dvi1", "vvi1"),
                                      n = new Set(),
                                      i = (e = l(e)).next();
                                    !i.done;
                                    i = e.next()
                                  )
                                    (i = i.value).video && n.add(i.video);
                                  for (
                                    n = l(n), e = n.next();
                                    !e.done;
                                    e = n.next()
                                  ) {
                                    e = e.value;
                                    for (
                                      var r = (i = l(t)).next();
                                      !r.done;
                                      r = i.next()
                                    ) {
                                      var a = l(r.value);
                                      if (
                                        ((r = a.next().value),
                                        (a = a.next().value),
                                        e.codecs.includes(r))
                                      ) {
                                        e.codecs = e.codecs.replace(r, a);
                                        break;
                                      }
                                    }
                                  }
                                })(t.variants),
                              w(s, fr(t.variants, n, !1, i), 2)
                            );
                          (a = null),
                            e && (o = e.h) && (a = o.keySystem),
                            (t.variants = t.variants.filter(function (e) {
                              var t = (function (e, t, n) {
                                if (
                                  !e.decodingInfos.some(function (e) {
                                    return !(
                                      !e.supported ||
                                      (t &&
                                        (e = e.keySystemAccess) &&
                                        (n[e.keySystem] || e.keySystem) != t)
                                    );
                                  })
                                )
                                  return !1;
                                var i = He(),
                                  r = it("Firefox") && tt(),
                                  a = e.video,
                                  o = (a && a.width) || 0,
                                  s = (a && a.height) || 0;
                                return (
                                  !(
                                    (i &&
                                      a &&
                                      (1920 < o || 1080 < s) &&
                                      (a.codecs.includes("avc1.") ||
                                        a.codecs.includes("avc3."))) ||
                                    ((i = a && a.dependencyStream) && !Bt(i))
                                  ) &&
                                  ((e = e.audio),
                                  !(
                                    (r &&
                                      e &&
                                      e.encrypted &&
                                      e.codecs
                                        .toLowerCase()
                                        .includes("opus")) ||
                                    (e && e.dependencyStream)
                                  ))
                                );
                              })(e, a, r);
                              if (!t) {
                                var n = [];
                                e.audio && n.push(Mr(e.audio)),
                                  e.video && n.push(Mr(e.video));
                              }
                              return t;
                            })),
                            x(s);
                        });
                      })(e, t, 0 < t.offlineSessionIds.length, n, i),
                      2
                    )
                  : ((function (e) {
                      e.textStreams = e.textStreams.filter(function (e) {
                        return zi((e = Ci(e.mimeType, e.codecs)));
                      });
                    })(t),
                    w(
                      r,
                      (function (e) {
                        var t, n, i, r, a, o, s;
                        return P(function (u) {
                          switch (u.g) {
                            case 1:
                              (t = []), (n = l(e.imageStreams)), (i = n.next());
                            case 2:
                              if (i.done) {
                                u.u(4);
                                break;
                              }
                              if (
                                ((r = i.value),
                                "application/mp4" == (a = r.mimeType) &&
                                  "mjpg" == r.codecs &&
                                  (a = "image/jpg"),
                                Lr.has(a))
                              ) {
                                u.u(5);
                                break;
                              }
                              if (!(o = Rr.get(a))) {
                                Lr.set(a, !1), u.u(5);
                                break;
                              }
                              return w(
                                u,
                                (function (e) {
                                  return new Promise(function (t) {
                                    var n = new Image();
                                    (n.src = e),
                                      "decode" in n
                                        ? n
                                            .decode()
                                            .then(function () {
                                              t(!0);
                                            })
                                            .catch(function () {
                                              t(!1);
                                            })
                                        : (n.onload = n.onerror =
                                            function () {
                                              t(2 === n.height);
                                            });
                                  });
                                })(o),
                                7
                              );
                            case 7:
                              (s = u.h), Lr.set(a, s);
                            case 5:
                              Lr.get(a) && t.push(r), (i = n.next()), u.u(2);
                              break;
                            case 4:
                              (e.imageStreams = t), x(u);
                          }
                        });
                      })(t),
                      0
                    ));
              })
            );
          }
          function dr(e, t) {
            var n, i, r, a, o, s, u;
            return P(function (c) {
              if (1 == c.g) {
                for (
                  n = function (e, t) {
                    if (e) {
                      var n = hn(e);
                      return (
                        (n.supported = e.supported && t.supported),
                        (n.powerEfficient =
                          e.powerEfficient && t.powerEfficient),
                        (n.smooth = e.smooth && t.smooth),
                        t.keySystemAccess &&
                          !n.keySystemAccess &&
                          (n.keySystemAccess = t.keySystemAccess),
                        n
                      );
                    }
                    return t;
                  },
                    i = null,
                    r = [],
                    a = l(t),
                    o = a.next(),
                    s = {};
                  !o.done;
                  s = { cache: void 0, ld: void 0 }, o = a.next()
                )
                  (u = o.value),
                    (s.ld = fn(u)),
                    (s.cache = Dr),
                    s.cache.has(s.ld)
                      ? (i = n(i, s.cache.get(s.ld)))
                      : r.push(
                          hr(u).then(
                            (function (e) {
                              return function (t) {
                                for (
                                  var r = null, a = (t = l(t || [])).next();
                                  !a.done;
                                  a = t.next()
                                )
                                  r = n(r, a.value);
                                r && (e.cache.set(e.ld, r), (i = n(i, r)));
                              };
                            })(s)
                          )
                        );
                return w(c, Promise.all(r), 2);
              }
              i && e.decodingInfos.push(i), x(c);
            });
          }
          function hr(e) {
            var t = [""];
            e.video && (t = _i(e.video.contentType).split(","));
            var n = [""];
            e.audio && (n = _i(e.audio.contentType).split(","));
            for (var i = [], r = (t = l(t)).next(); !r.done; r = t.next()) {
              r = r.value;
              for (
                var a = l(n), o = a.next(), s = {};
                !o.done;
                s = { Sb: void 0 }, o = a.next()
              )
                (o = o.value),
                  (s.Sb = dn(e)),
                  e.video &&
                    (s.Sb.video.contentType = Ci(
                      Ni(s.Sb.video.contentType),
                      r
                    )),
                  e.audio &&
                    (s.Sb.audio.contentType = Ci(
                      Ni(s.Sb.audio.contentType),
                      o
                    )),
                  i.push(
                    new Promise(
                      (function (e) {
                        return function (t, n) {
                          (tt()
                            ? Ji(
                                5,
                                navigator.mediaCapabilities.decodingInfo(e.Sb)
                              )
                            : navigator.mediaCapabilities.decodingInfo(e.Sb)
                          )
                            .then(function (e) {
                              t(e);
                            })
                            .catch(n);
                        };
                      })(s)
                    )
                  );
            }
            return Promise.all(i).catch(function () {
              return JSON.stringify(e), null;
            });
          }
          function fr(e, t, n, i) {
            var r, a, o, s, u, c, d, h, f, p, g, m, v, y, b, x, S, T;
            return P(function (A) {
              switch (A.g) {
                case 1:
                  if (
                    e.some(function (e) {
                      return e.decodingInfos.length;
                    })
                  )
                    return A.return();
                  (r = l(i)), (a = r.next()), (o = {});
                case 2:
                  if (a.done) {
                    A.u(4);
                    break;
                  }
                  (o.mg = a.value), (s = !1), (u = l(e)), (c = u.next());
                case 5:
                  if (c.done) {
                    A.u(7);
                    break;
                  }
                  (d = c.value),
                    (h = pr(d, t, n).filter(
                      ((k = o),
                      function (e) {
                        return (
                          ((e = e[0]).keySystemConfiguration &&
                            e.keySystemConfiguration.keySystem) === k.mg
                        );
                      })
                    )),
                    (f = l(h)),
                    (p = f.next());
                case 8:
                  if (p.done) {
                    A.u(10);
                    break;
                  }
                  return (g = p.value), w(A, dr(d, g), 9);
                case 9:
                  (p = f.next()), A.u(8);
                  break;
                case 10:
                  d.decodingInfos.length && (s = !0), (c = u.next()), A.u(5);
                  break;
                case 7:
                  if (s) return A.return();
                  (o = { mg: void 0 }), (a = r.next()), A.u(2);
                  break;
                case 4:
                  (m = l(e)), (v = m.next());
                case 12:
                  if (v.done) {
                    A.u(0);
                    break;
                  }
                  (y = v.value),
                    (b = pr(y, t, n).filter(function (e) {
                      return (
                        !(e =
                          (e = e[0]).keySystemConfiguration &&
                          e.keySystemConfiguration.keySystem) || !i.includes(e)
                      );
                    })),
                    (x = l(b)),
                    (S = x.next());
                case 15:
                  if (S.done) {
                    (v = m.next()), A.u(12);
                    break;
                  }
                  return (T = S.value), w(A, dr(y, T), 16);
                case 16:
                  (S = x.next()), A.u(15);
              }
              var k;
            });
          }
          function pr(e, t, n) {
            var i = e.audio,
              r = e.video,
              a = [],
              o = [];
            if (r)
              for (
                var s = l(r.fullMimeTypes), u = s.next();
                !u.done;
                u = s.next()
              ) {
                var c = _i((u = u.value));
                if (c.includes(",") && !i) {
                  var d = c.split(","),
                    h = Ni(u);
                  (c = Et("video", d)),
                    (h = Ei(h, (d = gr((d = Et("audio", d)), h)), "audio")),
                    o.push({
                      contentType: h,
                      channels: 2,
                      bitrate: e.bandwidth || 1,
                      samplerate: 1,
                      spatialRendering: !1,
                    });
                }
                if (
                  ((c = mr(c)),
                  (u = {
                    contentType: Ei(Ni(u), c, "video"),
                    width: r.width || 64,
                    height: r.height || 64,
                    bitrate: r.bandwidth || e.bandwidth || 1,
                    framerate: r.frameRate || 1,
                  }),
                  r.hdr)
                )
                  switch (r.hdr) {
                    case "SDR":
                      u.transferFunction = "srgb";
                      break;
                    case "PQ":
                      u.transferFunction = "pq";
                      break;
                    case "HLG":
                      u.transferFunction = "hlg";
                  }
                r.colorGamut && (u.colorGamut = r.colorGamut), a.push(u);
              }
            if (i)
              for (u = (s = l(i.fullMimeTypes)).next(); !u.done; u = s.next())
                (u = Ei((u = Ni((c = u.value))), (c = gr(_i(c), u)), "audio")),
                  o.push({
                    contentType: u,
                    channels: i.channelsCount || 2,
                    bitrate: i.bandwidth || e.bandwidth || 1,
                    samplerate: i.audioSamplingRate || 1,
                    spatialRendering: i.spatialAudio,
                  });
            for (
              s = [],
                0 == a.length && a.push(null),
                0 == o.length && o.push(null),
                u = (a = l(a)).next();
              !u.done;
              u = a.next()
            )
              for (u = u.value, h = (c = l(o)).next(); !h.done; h = c.next())
                (h = h.value),
                  (d = { type: n ? "file" : "media-source" }),
                  u && (d.video = u),
                  h && (d.audio = h),
                  s.push(d);
            if (
              !(o = (e.video ? e.video.drmInfos : []).concat(
                e.audio ? e.audio.drmInfos : []
              )).length
            )
              return [s];
            for (
              e = [], n = new Map(), a = (o = l(o)).next();
              !a.done;
              a = o.next()
            )
              (a = a.value),
                n.get(a.keySystem) || n.set(a.keySystem, []),
                n.get(a.keySystem).push(a);
            for (
              o = t ? "required" : "optional",
                t = t ? ["persistent-license"] : ["temporary"],
                u = (a = l(n.keys())).next();
              !u.done;
              u = a.next()
            ) {
              for (
                u = u.value, h = n.get(u), c = new Map(), d = (h = l(h)).next();
                !d.done;
                d = h.next()
              ) {
                var f = (d = d.value).videoRobustness + "," + d.audioRobustness;
                c.get(f) || c.set(f, []), c.get(f).push(d);
              }
              for (h = (c = l(c.values())).next(); !h.done; h = c.next()) {
                (h = h.value), (d = []);
                for (var p = (f = l(s)).next(); !p.done; p = f.next()) {
                  p = Object.assign({}, p.value);
                  for (
                    var g = {
                        keySystem: u,
                        initDataType: "cenc",
                        persistentState: o,
                        distinctiveIdentifier: "optional",
                        sessionTypes: t,
                      },
                      m = l(h),
                      v = m.next();
                    !v.done;
                    v = m.next()
                  ) {
                    if ((v = v.value).initData && v.initData.length) {
                      for (
                        var y = new Set(), b = l(v.initData), w = b.next();
                        !w.done;
                        w = b.next()
                      )
                        y.add(w.value.initDataType);
                      g.initDataType = v.initData[0].initDataType;
                    }
                    v.distinctiveIdentifierRequired &&
                      (g.distinctiveIdentifier = "required"),
                      v.persistentStateRequired &&
                        (g.persistentState = "required"),
                      v.sessionType && (g.sessionTypes = [v.sessionType]),
                      i &&
                        (g.audio
                          ? (v.encryptionScheme &&
                              (g.audio.encryptionScheme =
                                g.audio.encryptionScheme || v.encryptionScheme),
                            (g.audio.robustness =
                              g.audio.robustness || v.audioRobustness))
                          : ((g.audio = { robustness: v.audioRobustness }),
                            v.encryptionScheme &&
                              (g.audio.encryptionScheme = v.encryptionScheme)),
                        "" == g.audio.robustness && delete g.audio.robustness),
                      r &&
                        (g.video
                          ? (v.encryptionScheme &&
                              (g.video.encryptionScheme =
                                g.video.encryptionScheme || v.encryptionScheme),
                            (g.video.robustness =
                              g.video.robustness || v.videoRobustness))
                          : ((g.video = { robustness: v.videoRobustness }),
                            v.encryptionScheme &&
                              (g.video.encryptionScheme = v.encryptionScheme)),
                        "" == g.video.robustness && delete g.video.robustness);
                  }
                  (p.keySystemConfiguration = g), d.push(p);
                }
                e.push(d);
              }
            }
            return e;
          }
          function gr(e, t) {
            return "flac" == e.toLowerCase()
              ? Xe()
                ? "fLaC"
                : "flac"
              : "opus" === e.toLowerCase()
              ? Xe() && "mp4" == Pi(t)
                ? "Opus"
                : "opus"
              : "ac-3" == e.toLowerCase() && ze()
              ? "ec-3"
              : e;
          }
          function mr(e) {
            if (e.includes("avc1")) {
              var t = e.split(".");
              if (3 == t.length)
                return (
                  (e = t.shift() + "."),
                  (e += parseInt(t.shift(), 10).toString(16)) +
                    ("000" + parseInt(t.shift(), 10).toString(16)).slice(-4)
                );
            } else if ("vp9" == e) return "vp09.00.41.08";
            return e;
          }
          function vr(e) {
            var t = e.audio,
              n = e.video,
              i = t ? t.mimeType : null,
              r = n ? n.mimeType : null,
              a = t ? t.codecs : null,
              o = n ? n.codecs : null,
              s = t ? t.groupId : null,
              u = [];
            n && u.push(n.mimeType),
              t && u.push(t.mimeType),
              (u = u[0] || null);
            var c = [];
            t && c.push(t.kind), n && c.push(n.kind), (c = c[0] || null);
            var d = new Set();
            if (t)
              for (var h = l(t.roles), f = h.next(); !f.done; f = h.next())
                d.add(f.value);
            if (n)
              for (f = (h = l(n.roles)).next(); !f.done; f = h.next())
                d.add(f.value);
            if (
              ((e = {
                id: e.id,
                active: !1,
                type: "variant",
                bandwidth: e.bandwidth,
                language: e.language,
                label: null,
                kind: c,
                width: null,
                height: null,
                frameRate: null,
                pixelAspectRatio: null,
                hdr: null,
                colorGamut: null,
                videoLayout: null,
                mimeType: u,
                audioMimeType: i,
                videoMimeType: r,
                codecs: "",
                audioCodec: a,
                videoCodec: o,
                primary: e.primary,
                roles: Array.from(d),
                audioRoles: null,
                forced: !1,
                videoId: null,
                audioId: null,
                audioGroupId: s,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                tilesLayout: null,
                audioBandwidth: null,
                videoBandwidth: null,
                originalVideoId: null,
                originalAudioId: null,
                originalTextId: null,
                originalImageId: null,
                accessibilityPurpose: null,
                originalLanguage: null,
              }),
              n &&
                ((e.videoId = n.id),
                (e.originalVideoId = n.originalId),
                (e.width = n.width || null),
                (e.height = n.height || null),
                (e.frameRate = n.frameRate || null),
                (e.pixelAspectRatio = n.pixelAspectRatio || null),
                (e.videoBandwidth = n.bandwidth || null),
                (e.hdr = n.hdr || null),
                (e.colorGamut = n.colorGamut || null),
                (e.videoLayout = n.videoLayout || null),
                (i = n.dependencyStream) &&
                  ((e.width = i.width || e.width),
                  (e.height = i.height || e.height),
                  (e.videoCodec = i.codecs || e.videoCodec)),
                o.includes(",")))
            ) {
              (e.channelsCount = n.channelsCount),
                (e.audioSamplingRate = n.audioSamplingRate),
                (e.spatialAudio = n.spatialAudio),
                (e.originalLanguage = n.originalLanguage),
                (e.audioMimeType = r),
                (n = o.split(","));
              try {
                (e.videoCodec = Et("video", n)),
                  (e.audioCodec = Et("audio", n));
              } catch (e) {}
            }
            return (
              t &&
                ((e.audioId = t.id),
                (e.originalAudioId = t.originalId),
                (e.channelsCount = t.channelsCount),
                (e.audioSamplingRate = t.audioSamplingRate),
                (e.audioBandwidth = t.bandwidth || null),
                (e.spatialAudio = t.spatialAudio),
                (e.label = t.label),
                (e.audioRoles = t.roles),
                (e.accessibilityPurpose = t.accessibilityPurpose),
                (e.originalLanguage = t.originalLanguage),
                (t = t.dependencyStream)) &&
                (e.audioCodec = t.codecs || e.audioCodec),
              (t = []),
              e.videoCodec && t.push(e.videoCodec),
              e.audioCodec && t.push(e.audioCodec),
              (e.codecs = t.join(", ")),
              e
            );
          }
          function yr(e) {
            return {
              id: e.id,
              active: !1,
              type: Lt,
              bandwidth: 0,
              language: e.language,
              label: e.label,
              kind: e.kind || null,
              width: null,
              height: null,
              frameRate: null,
              pixelAspectRatio: null,
              hdr: null,
              colorGamut: null,
              videoLayout: null,
              mimeType: e.mimeType,
              audioMimeType: null,
              videoMimeType: null,
              codecs: e.codecs || null,
              audioCodec: null,
              videoCodec: null,
              primary: e.primary,
              roles: e.roles,
              audioRoles: null,
              forced: e.forced,
              videoId: null,
              audioId: null,
              audioGroupId: null,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: !1,
              tilesLayout: null,
              audioBandwidth: null,
              videoBandwidth: null,
              originalVideoId: null,
              originalAudioId: null,
              originalTextId: e.originalId,
              originalImageId: null,
              accessibilityPurpose: e.accessibilityPurpose,
              originalLanguage: e.originalLanguage,
            };
          }
          function br(e) {
            var t = e.width || null,
              n = e.height || null,
              i = null;
            e.segmentIndex && (i = e.segmentIndex.g[0] || null);
            var r = e.tilesLayout;
            return (
              i && (r = i.tilesLayout || r),
              r && null != t && (t /= Number(r.split("x")[0])),
              r && null != n && (n /= Number(r.split("x")[1])),
              {
                id: e.id,
                active: !1,
                type: "image",
                bandwidth: e.bandwidth || 0,
                language: "",
                label: null,
                kind: null,
                width: t,
                height: n,
                frameRate: null,
                pixelAspectRatio: null,
                hdr: null,
                colorGamut: null,
                videoLayout: null,
                mimeType: e.mimeType,
                audioMimeType: null,
                videoMimeType: null,
                codecs: e.codecs || null,
                audioCodec: null,
                videoCodec: null,
                primary: !1,
                roles: [],
                audioRoles: null,
                forced: !1,
                videoId: null,
                audioId: null,
                audioGroupId: null,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                tilesLayout: r || null,
                audioBandwidth: null,
                videoBandwidth: null,
                originalVideoId: null,
                originalAudioId: null,
                originalTextId: null,
                originalImageId: e.originalId,
                accessibilityPurpose: null,
                originalLanguage: null,
              }
            );
          }
          function wr(e) {
            return e.__shaka_id || (e.__shaka_id = Pr++), e.__shaka_id;
          }
          function xr(e) {
            var t = Sr(e);
            return (
              (t.active = e.enabled),
              (t.type = "variant"),
              (t.originalAudioId = e.id),
              "main" == e.kind && (t.primary = !0),
              e.kind &&
                ((t.roles = [e.kind]),
                (t.audioRoles = [e.kind]),
                (t.label = e.label)),
              t
            );
          }
          function Sr(e) {
            var t = e.language;
            return {
              id: wr(e),
              active: !1,
              type: "",
              bandwidth: 0,
              language: tr(t || "und"),
              label: e.label,
              kind: e.kind,
              width: null,
              height: null,
              frameRate: null,
              pixelAspectRatio: null,
              hdr: null,
              colorGamut: null,
              videoLayout: null,
              mimeType: null,
              audioMimeType: null,
              videoMimeType: null,
              codecs: null,
              audioCodec: null,
              videoCodec: null,
              primary: !1,
              roles: [],
              forced: !1,
              audioRoles: null,
              videoId: null,
              audioId: null,
              audioGroupId: null,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: !1,
              tilesLayout: null,
              audioBandwidth: null,
              videoBandwidth: null,
              originalVideoId: null,
              originalAudioId: null,
              originalTextId: null,
              originalImageId: null,
              accessibilityPurpose: null,
              originalLanguage: t,
            };
          }
          function Tr(e) {
            return (
              e.allowedByApplication &&
              e.allowedByKeySystem &&
              0 == e.disabledUntilTime
            );
          }
          function Ar(e) {
            return e.filter(function (e) {
              return Tr(e);
            });
          }
          function kr(e, t, n, i) {
            var r = e,
              a = e.filter(function (e) {
                return e.primary;
              });
            a.length && (r = a);
            var o = r.length ? r[0].language : "";
            if (
              ((r = r.filter(function (e) {
                return e.language == o;
              })),
              t)
            ) {
              var s = ar(
                tr(t),
                e.map(function (e) {
                  return e.language;
                })
              );
              s &&
                (r = e.filter(function (e) {
                  return tr(e.language) == s;
                }));
            }
            if (
              ((r = r.filter(function (e) {
                return e.forced == i;
              })),
              n)
            ) {
              if ((e = Ir(r, n)).length) return e;
            } else if (
              ((e = r.filter(function (e) {
                return 0 == e.roles.length;
              })),
              e.length)
            )
              return e;
            return (
              (e = r
                .map(function (e) {
                  return e.roles;
                })
                .reduce(Wi, [])),
              e.length ? Ir(r, e[0]) : r
            );
          }
          function Ir(e, t) {
            return e.filter(function (e) {
              return e.roles.includes(t);
            });
          }
          function Cr(e, t) {
            t.length &&
              ((t = t
                .filter(function (t) {
                  return Li(e.codecs) == Li(t.codecs);
                })
                .sort(function (e, t) {
                  return e.bandwidth &&
                    t.bandwidth &&
                    e.bandwidth != t.bandwidth
                    ? e.bandwidth - t.bandwidth
                    : (e.width || 0) - (t.width || 0);
                })),
              (e.trickModeVideo = t[0]),
              1 < t.length &&
                (t = t.find(function (t) {
                  return e.width == t.width && e.height == t.height;
                }))) &&
              (e.trickModeVideo = t);
          }
          function Mr(e) {
            return "audio" == e.type
              ? "type=audio codecs=" +
                  e.codecs +
                  " bandwidth=" +
                  e.bandwidth +
                  " channelsCount=" +
                  e.channelsCount +
                  " audioSamplingRate=" +
                  e.audioSamplingRate
              : "video" == e.type
              ? "type=video codecs=" +
                e.codecs +
                " bandwidth=" +
                e.bandwidth +
                " frameRate=" +
                e.frameRate +
                " width=" +
                e.width +
                " height=" +
                e.height
              : "unexpected stream type";
          }
          function Er(e, t, n) {
            if (0 == n.autoShowText) return !1;
            if (1 == n.autoShowText) return !0;
            var i = tr(n.preferredTextLanguage);
            return (
              (t = tr(t.language)),
              2 == n.autoShowText
                ? Zi(t, i)
                : 3 == n.autoShowText
                ? !!e && ((e = tr(e.language)), Zi(t, i) && !Zi(e, t))
                : (W("Invalid autoShowText setting!"), !1)
            );
          }
          B("shaka.util.StreamUtils", sr), (sr.meetsRestrictions = lr);
          var Dr = new Map(),
            Pr = 0,
            Lr = new Map()
              .set("image/svg+xml", !0)
              .set("image/png", !0)
              .set("image/jpeg", !0)
              .set("image/jpg", !0),
            Rr = new Map()
              .set(
                "image/webp",
                "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"
              )
              .set(
                "image/avif",
                "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="
              );
          function Nr() {
            var t = this;
            (this.F = null),
              (this.o = !1),
              (this.m = new G()),
              (this.j = new $()),
              navigator.connection &&
                navigator.connection.addEventListener &&
                this.j.H(navigator.connection, "change", function () {
                  if (t.o && t.g.useNetworkInformation) {
                    (t.m = new G()), t.g && t.m.configure(t.g.advanced);
                    var e = t.chooseVariant();
                    e &&
                      navigator.onLine &&
                      t.F(e, t.g.clearBufferSwitch, t.g.safeMarginSwitch);
                  }
                }),
              (this.D = []),
              (this.G = 1),
              (this.J = !1),
              (this.h = this.l = this.g = this.s = null),
              (this.A = new je(function () {
                if (
                  t.o &&
                  (t.g.restrictToElementSize || t.g.restrictToScreenSize)
                ) {
                  var e = t.chooseVariant();
                  e && t.F(e, t.g.clearBufferSwitch, t.g.safeMarginSwitch);
                }
              })),
              (this.B = e),
              "documentPictureInPicture" in e &&
                this.j.H(e.documentPictureInPicture, "enter", function () {
                  (t.B = e.documentPictureInPicture.window),
                    t.A && t.A.Nb(),
                    t.j.Ea(t.B, "pagehide", function () {
                      (t.B = e), t.A && t.A.Nb();
                    });
                }),
              (this.C = this.i = null);
          }
          function _r(e) {
            if (!e.J) {
              var t = e.m;
              if (!(t.g >= t.i)) return;
              (e.J = !0),
                (e.s -= 1e3 * (e.g.switchInterval - e.g.minTimeToSwitch));
            }
            Date.now() - e.s < 1e3 * e.g.switchInterval ||
              ((t = e.chooseVariant()),
              e.getBandwidthEstimate(),
              t && e.F(t, e.g.clearBufferSwitch, e.g.safeMarginSwitch));
          }
          function Ur(e, t, n, i, r) {
            if (e.C) {
              var a = e.C.Uf();
              a &&
                (n = n.filter(function (e) {
                  return !e.bandwidth || !a || e.bandwidth <= a;
                }));
            }
            return (
              t &&
                (n = n.filter(function (e) {
                  return lr(e, t, { width: r, height: i });
                })),
              n.sort(function (e, t) {
                return e.bandwidth - t.bandwidth;
              })
            );
          }
          ((i = Nr.prototype).stop = function () {
            (this.F = null),
              (this.o = !1),
              (this.D = []),
              (this.G = 1),
              (this.l = this.s = null),
              this.h && (this.h.disconnect(), (this.h = null)),
              this.A.stop(),
              (this.C = this.i = null);
          }),
            (i.release = function () {
              this.j.release(), (this.A = null);
            }),
            (i.init = function (e) {
              this.F = e;
            }),
            (i.chooseVariant = function () {
              var e = 1 / 0,
                t = 1 / 0;
              if (this.g.restrictToScreenSize) {
                var n = this.g.ignoreDevicePixelRatio
                  ? 1
                  : this.B.devicePixelRatio;
                (e = this.B.screen.height * n), (t = this.B.screen.width * n);
              }
              if (this.h && this.g.restrictToElementSize) {
                n = this.g.ignoreDevicePixelRatio ? 1 : this.B.devicePixelRatio;
                var i = this.l.clientHeight,
                  r = this.l.clientWidth;
                this.i &&
                  document.pictureInPictureElement &&
                  document.pictureInPictureElement == this.l &&
                  ((i = this.i.height), (r = this.i.width)),
                  (e = Math.min(e, i * n)),
                  (t = Math.min(t, r * n));
              }
              if (
                ((n = this.D.filter(function (e) {
                  return (
                    e &&
                    !(
                      (e.audio && e.audio.fastSwitching) ||
                      (e.video && e.video.fastSwitching)
                    )
                  );
                })).length || (n = this.D),
                (i = n),
                n.length != this.D.length &&
                  (i = this.D.filter(function (e) {
                    return (
                      e &&
                      !!(
                        (e.audio && e.audio.fastSwitching) ||
                        (e.video && e.video.fastSwitching)
                      )
                    );
                  })),
                (n = Ur(this, this.g.restrictions, i, 1 / 0, 1 / 0)),
                1 / 0 != e || 1 / 0 != t)
              ) {
                for (
                  n = (function (e) {
                    for (
                      var t = [], n = (e = l(e)).next();
                      !n.done;
                      n = e.next()
                    )
                      (n = n.value.video) &&
                        n.height &&
                        n.width &&
                        t.push({ height: n.height, width: n.width });
                    return t.sort(function (e, t) {
                      return e.width - t.width;
                    });
                  })(n),
                    r = (n = l(n)).next();
                  !r.done;
                  r = n.next()
                )
                  if ((r = r.value).height >= e && r.width >= t) {
                    (e = r.height), (t = r.width);
                    break;
                  }
                n = Ur(this, this.g.restrictions, i, e, t);
              }
              for (
                e = this.getBandwidthEstimate(),
                  i.length &&
                    !n.length &&
                    (n = [(n = Ur(this, null, i, 1 / 0, 1 / 0))[0]]),
                  t = n[0] || null,
                  i = 0;
                i < n.length;
                i++
              ) {
                r = n[i];
                for (
                  var a = isNaN(this.G) ? 1 : Math.abs(this.G),
                    o = (a * r.bandwidth) / this.g.bandwidthDowngradeTarget,
                    s = { bandwidth: 1 / 0 },
                    u = i + 1;
                  u < n.length;
                  u++
                )
                  if (r.bandwidth != n[u].bandwidth) {
                    s = n[u];
                    break;
                  }
                (a = (a * s.bandwidth) / this.g.bandwidthUpgradeTarget),
                  e >= o &&
                    e <= a &&
                    (t.bandwidth != r.bandwidth ||
                      (t.bandwidth == r.bandwidth &&
                        t.video &&
                        r.video &&
                        (t.video.width < r.video.width ||
                          t.video.height < r.video.height))) &&
                    (t = r);
              }
              return (this.s = Date.now()), t;
            }),
            (i.enable = function () {
              this.o = !0;
            }),
            (i.disable = function () {
              this.o = !1;
            }),
            (i.segmentDownloaded = function (e, t, n) {
              e < this.g.cacheLoadThreshold ||
                (this.m.sample(e, t),
                n && null != this.s && this.o && _r(this));
            }),
            (i.trySuggestStreams = function () {
              null != this.s && this.o && _r(this);
            }),
            (i.getBandwidthEstimate = function () {
              var e = this.g.defaultBandwidthEstimate;
              return (
                navigator.connection &&
                  navigator.connection.downlink &&
                  this.g.useNetworkInformation &&
                  (e = 1e6 * navigator.connection.downlink),
                navigator.connection &&
                navigator.connection.downlink &&
                this.g.useNetworkInformation &&
                this.g.preferNetworkInformationBandwidth
                  ? e
                  : ((e = this.m.getBandwidthEstimate(e)),
                    this.C ? this.C.getBandwidthEstimate(e) : e)
              );
            }),
            (i.setVariants = function (e) {
              this.D = e;
            }),
            (i.playbackRateChanged = function (e) {
              this.G = e;
            }),
            (i.setMediaElement = function (t) {
              function n() {
                i.A.ea(jr);
              }
              var i = this;
              (this.l = t),
                this.h && (this.h.disconnect(), (this.h = null)),
                this.l &&
                  "ResizeObserver" in e &&
                  ((this.h = new ResizeObserver(n)), this.h.observe(this.l)),
                this.j.H(t, "enterpictureinpicture", function (e) {
                  e.pictureInPictureWindow &&
                    ((i.i = e.pictureInPictureWindow), i.j.H(i.i, "resize", n));
                }),
                this.j.H(t, "leavepictureinpicture", function () {
                  i.i && i.j.sb(i.i, "resize", n), (i.i = null);
                });
            }),
            (i.setCmsdManager = function (e) {
              this.C = e;
            }),
            (i.configure = function (e) {
              (this.g = e),
                this.m && this.g && this.m.configure(this.g.advanced);
            }),
            B("shaka.abr.SimpleAbrManager", Nr),
            (Nr.prototype.configure = Nr.prototype.configure),
            (Nr.prototype.setCmsdManager = Nr.prototype.setCmsdManager),
            (Nr.prototype.setMediaElement = Nr.prototype.setMediaElement),
            (Nr.prototype.playbackRateChanged =
              Nr.prototype.playbackRateChanged),
            (Nr.prototype.setVariants = Nr.prototype.setVariants),
            (Nr.prototype.getBandwidthEstimate =
              Nr.prototype.getBandwidthEstimate),
            (Nr.prototype.trySuggestStreams = Nr.prototype.trySuggestStreams),
            (Nr.prototype.segmentDownloaded = Nr.prototype.segmentDownloaded),
            (Nr.prototype.disable = Nr.prototype.disable),
            (Nr.prototype.enable = Nr.prototype.enable),
            (Nr.prototype.chooseVariant = Nr.prototype.chooseVariant),
            (Nr.prototype.init = Nr.prototype.init),
            (Nr.prototype.release = Nr.prototype.release),
            (Nr.prototype.stop = Nr.prototype.stop);
          var jr = 1;
          function Or(e, t, n, i, r) {
            if (i >= r) return null;
            for (var a = -1, o = -1, s = 0; s < n.length; s++)
              if (
                n[s].some(function (e) {
                  return null != e && "" != e.g.trim();
                })
              ) {
                a = s;
                break;
              }
            for (s = n.length - 1; 0 <= s; s--)
              if (
                n[s].some(function (e) {
                  return null != e && "" != e.g.trim();
                })
              ) {
                o = s;
                break;
              }
            if (-1 === a || -1 === o) return null;
            for (
              var u = (s = !1),
                l = "white",
                c = "black",
                d = Br(i, r, s, u, l, c);
              a <= o;
              a++
            ) {
              for (var h = n[a], f = -1, p = -1, g = 0; g < h.length; g++)
                if (null != h[g] && "" !== h[g].g.trim()) {
                  f = g;
                  break;
                }
              for (g = h.length - 1; 0 <= g; g--)
                if (null != h[g] && "" !== h[g].g.trim()) {
                  p = g;
                  break;
                }
              if (-1 === f || -1 === p) (h = Fr(i, r)), e.nestedCues.push(h);
              else {
                for (; f <= p; f++)
                  if ((g = h[f])) {
                    var m = g.l,
                      v = g.i,
                      y = g.j,
                      b = g.h;
                    (m == s && v == u && y == l && b == c) ||
                      (d.payload && e.nestedCues.push(d),
                      (d = Br(i, r, m, v, y, b)),
                      (s = m),
                      (u = v),
                      (l = y),
                      (c = b)),
                      (d.payload += g.g);
                  } else d.payload += " ";
                d.payload && e.nestedCues.push(d),
                  a !== o && ((d = Fr(i, r)), e.nestedCues.push(d)),
                  (d = Br(i, r, s, u, l, c));
              }
            }
            return e.nestedCues.length ? { cue: e, stream: t } : null;
          }
          function Br(e, t, n, i, r, a) {
            return (
              (e = new Kn(e, t, "")),
              n && e.textDecoration.push(mi),
              i && (e.fontStyle = pi),
              (e.color = r),
              (e.backgroundColor = a),
              e
            );
          }
          function Fr(e, t) {
            return ((e = new Kn(e, t, "")).lineBreak = !0), e;
          }
          function Hr(e, t, n, i, r) {
            (this.g = e),
              (this.l = t),
              (this.i = n),
              (this.h = i),
              (this.j = r);
          }
          function Vr(e, t) {
            (this.i = []),
              (this.g = 1),
              (this.h = 0),
              (this.C = e),
              (this.B = t),
              (this.j = this.m = !1),
              (this.l = "white"),
              (this.o = "black"),
              (this.s = this.A = null),
              Gr(this);
          }
          function zr(e, t, n) {
            var i = "CC" + (1 + ((e.C << 1) | e.B)),
              r = new Kn(t, n, "");
            r.lineInterpretation = 1;
            var a = Zr.get(e.g);
            return (
              a && (r.line = a),
              null != e.s &&
                null != e.A &&
                (r.position = 10 + Math.min(70, 10 * e.s) + 2.5 * e.A),
              (t = Or(r, i, e.i, t, n)) &&
                15 < e.g + t.cue.nestedCues.length - 3 &&
                (a = Zr.get(e.g + 3 - t.cue.nestedCues.length)) &&
                (r.line = a),
              t
            );
          }
          function Gr(e) {
            Wr(e, 0, 15), (e.g = 1);
          }
          function qr(e, t, n) {
            if (!(32 > n || 127 < n)) {
              var i = "";
              switch (t) {
                case 0:
                  i = Xr.has(n) ? Xr.get(n) : String.fromCharCode(n);
                  break;
                case 1:
                  i = Yr.get(n);
                  break;
                case 2:
                  e.i[e.g].pop(), (i = Jr.get(n));
                  break;
                case 3:
                  e.i[e.g].pop(), (i = $r.get(n));
              }
              i && e.i[e.g].push(new Hr(i, e.m, e.j, e.o, e.l));
            }
          }
          function Kr(e, t, n, i) {
            if (!(0 > n || 0 > t))
              if (t >= n)
                for (--i; 0 <= i; i--)
                  e.i[t + i] = e.i[n + i].map(function (e) {
                    return e;
                  });
              else
                for (var r = 0; r < i; r++)
                  e.i[t + r] = e.i[n + r].map(function (e) {
                    return e;
                  });
          }
          function Wr(e, t, n) {
            for (var i = 0; i <= n; i++) e.i[t + i] = [];
          }
          var Xr = new Map([
              [39, "’"],
              [42, "á"],
              [92, "é"],
              [92, "é"],
              [94, "í"],
              [95, "ó"],
              [96, "ú"],
              [123, "ç"],
              [124, "÷"],
              [125, "Ñ"],
              [126, "ñ"],
              [127, "█"],
            ]),
            Yr = new Map([
              [48, "®"],
              [49, "°"],
              [50, "½"],
              [51, "¿"],
              [52, "™"],
              [53, "¢"],
              [54, "£"],
              [55, "♪"],
              [56, "à"],
              [57, " "],
              [58, "è"],
              [59, "â"],
              [60, "ê"],
              [61, "î"],
              [62, "ô"],
              [63, "û"],
            ]),
            Jr = new Map([
              [32, "Á"],
              [33, "É"],
              [34, "Ó"],
              [35, "Ú"],
              [36, "Ü"],
              [37, "ü"],
              [38, "‘"],
              [39, "¡"],
              [40, "*"],
              [41, "'"],
              [42, "─"],
              [43, "©"],
              [44, "℠"],
              [45, "·"],
              [46, "“"],
              [47, "”"],
              [48, "À"],
              [49, "Â"],
              [50, "Ç"],
              [51, "È"],
              [52, "Ê"],
              [53, "Ë"],
              [54, "ë"],
              [55, "Î"],
              [56, "Ï"],
              [57, "ï"],
              [58, "Ô"],
              [59, "Ù"],
              [60, "ù"],
              [61, "Û"],
              [62, "«"],
              [63, "»"],
            ]),
            $r = new Map([
              [32, "Ã"],
              [33, "ã"],
              [34, "Í"],
              [35, "Ì"],
              [36, "ì"],
              [37, "Ò"],
              [38, "ò"],
              [39, "Õ"],
              [40, "õ"],
              [41, "{"],
              [42, "}"],
              [43, "\\"],
              [44, "^"],
              [45, "_"],
              [46, "|"],
              [47, "~"],
              [48, "Ä"],
              [49, "ä"],
              [50, "Ö"],
              [51, "ö"],
              [52, "ß"],
              [53, "¥"],
              [54, "¤"],
              [55, "│"],
              [56, "Å"],
              [57, "å"],
              [58, "Ø"],
              [59, "ø"],
              [60, "┌"],
              [61, "┐"],
              [62, "└"],
              [63, "┘"],
            ]),
            Zr = new Map([
              [1, 10],
              [2, 15.33],
              [3, 20.66],
              [4, 26],
              [5, 31.33],
              [6, 36.66],
              [7, 42],
              [8, 47.33],
              [9, 52.66],
              [10, 58],
              [11, 63.33],
              [12, 68.66],
              [13, 74],
              [14, 79.33],
              [15, 84.66],
            ]);
          function Qr(e, t) {
            (this.h = 0),
              (this.o = new Vr(e, t)),
              (this.i = new Vr(e, t)),
              (this.g = this.j = new Vr(e, t)),
              (this.l = 0),
              (this.m = null);
          }
          function ea(e, t, n) {
            e.g = e.i;
            var i = e.g,
              r = null;
            return (
              3 !== e.h &&
                4 !== e.h &&
                ((r = zr(i, e.l, n)),
                ((n = e.i).g = 0 < n.h ? n.h : 0),
                Wr(n, 0, 15),
                ((n = e.j).g = 0 < n.h ? n.h : 0),
                Wr(n, 0, 15),
                (i.g = 15)),
              (e.h = 3),
              (i.h = t),
              r
            );
          }
          function ta(e) {
            (e.h = 1), (e.g = e.j), (e.g.h = 0);
          }
          function na(e) {
            X(
              "Cea608DataChannel",
              "CEA-608 text mode entered, but is unsupported"
            ),
              (e.g = e.o),
              (e.h = 4);
          }
          var ia = "black green blue cyan red yellow magenta black".split(" "),
            ra = "white green blue cyan red yellow magenta white_italics".split(
              " "
            );
          function aa(e, t) {
            (this.J = t),
              (this.O = e),
              (this.K = this.l = !1),
              (this.m = this.o = this.F = this.L = this.G = 0),
              (this.D = 2),
              (this.i = []),
              (this.g = this.h = this.j = 0),
              (this.C = this.A = !1),
              (this.B = "white"),
              (this.s = "black"),
              oa(this);
          }
          function oa(e) {
            e.i = [];
            for (var t = 0; 16 > t; t++) e.i.push(sa());
          }
          function sa() {
            for (var e = [], t = 0; 42 > t; t++) e.push(null);
            return e;
          }
          function ua(e, t) {
            la(e) && ((e.i[e.h][e.g] = new Hr(t, e.C, e.A, e.s, e.B)), e.g++);
          }
          function la(e) {
            var t = e.g < e.m && 0 <= e.g;
            return e.h < e.o && 0 <= e.h && t;
          }
          function ca(e, t, n) {
            var i = new Kn(e.j, t, "");
            i.textAlign = 0 === e.D ? "left" : 1 === e.D ? "right" : ei;
            var r = i.region;
            switch (
              (e.J && (r.id += "svc" + e.J),
              (r.id += "win" + e.O),
              (r.height = e.o),
              (r.width = e.m),
              (r.heightUnits = 2),
              (r.widthUnits = 2),
              (r.viewportAnchorX = e.G),
              (r.viewportAnchorY = e.L),
              (r.viewportAnchorUnits = e.K ? Qt : 2),
              e.F)
            ) {
              case 0:
                (r.regionAnchorX = 0), (r.regionAnchorY = 0);
                break;
              case 1:
                (r.regionAnchorX = 50), (r.regionAnchorY = 0);
                break;
              case 2:
                (r.regionAnchorX = 100), (r.regionAnchorY = 0);
                break;
              case 3:
                (r.regionAnchorX = 0), (r.regionAnchorY = 50);
                break;
              case 4:
                (r.regionAnchorX = 50), (r.regionAnchorY = 50);
                break;
              case 5:
                (r.regionAnchorX = 100), (r.regionAnchorY = 50);
                break;
              case 6:
                (r.regionAnchorX = 0), (r.regionAnchorY = 100);
                break;
              case 7:
                (r.regionAnchorX = 50), (r.regionAnchorY = 100);
                break;
              case 8:
                (r.regionAnchorX = 100), (r.regionAnchorY = 100);
            }
            return (n = Or(i, "svc" + n, e.i, e.j, t)) && (e.j = t), n;
          }
          function da() {
            (this.i = []), (this.h = null), (this.g = 0);
          }
          function ha(e, t) {
            3 === t.type
              ? ((e.g = 2 * (63 & t.value) - 1), (e.h = []))
              : e.h &&
                (0 < e.g && (e.h.push(t), e.g--),
                0 === e.g && (e.i.push(new fa(e.h)), (e.h = null), (e.g = 0)));
          }
          function fa(e) {
            (this.g = 0), (this.h = e);
          }
          function pa(e) {
            if (!e.ya()) throw new Me(2, 2, 3e3);
            return e.h[e.g++];
          }
          function ga(e) {
            (this.i = e),
              (this.h = [null, null, null, null, null, null, null, null]),
              (this.g = null);
          }
          function ma(e, t, n, i) {
            if (!e.g) return [];
            if (24 == n)
              return (
                (n = pa(t).value),
                (i = pa(t).value),
                (n = [n, i]
                  .map(function (e) {
                    return ("0" + (255 & e).toString(16)).slice(-2);
                  })
                  .join("")),
                ua(e.g, String.fromCharCode(parseInt(n, 16))),
                []
              );
            t = e.g;
            var r = null;
            switch (n) {
              case 8:
                !la(t) ||
                  (0 >= t.g && 0 >= t.h) ||
                  (0 >= t.g ? ((t.g = t.m - 1), t.h--) : t.g--,
                  (t.i[t.h][t.g] = null));
                break;
              case 13:
                t.isVisible() && (r = ca(t, i, e.i)),
                  t.h + 1 >= t.o
                    ? (function (e) {
                        for (var t = 0, n = 1; 16 > n; n++, t++)
                          e.i[t] = e.i[n];
                        for (n = 0; 1 > n; n++, t++) e.i[t] = sa();
                      })(t)
                    : t.h++,
                  (t.g = 0);
                break;
              case 14:
                t.isVisible() && (r = ca(t, i, e.i)),
                  (t.i[t.h] = sa()),
                  (t.g = 0);
                break;
              case 12:
                t.isVisible() && (r = ca(t, i, e.i)),
                  oa(t),
                  (t.h = 0),
                  (t.g = 0);
            }
            return r ? [r] : [];
          }
          function va(e, t, n, i) {
            if (128 <= n && 135 >= n) (i = 7 & n), e.h[i] && (e.g = e.h[i]);
            else {
              if (136 === n) {
                (n = pa(t).value), (t = []);
                for (var r = (n = l(ya(e, n))).next(); !r.done; r = n.next()) {
                  if ((r = e.h[r.value]).isVisible()) {
                    var a = ca(r, i, e.i);
                    a && t.push(a);
                  }
                  oa(r);
                }
                return t;
              }
              if (137 === n)
                for (
                  n = (t = l(ya(e, (t = pa(t).value)))).next();
                  !n.done;
                  n = t.next()
                )
                  (n = e.h[n.value]).isVisible() || (n.j = i), n.display();
              else {
                if (138 === n) {
                  for (
                    n = pa(t).value, t = null, r = (n = l(ya(e, n))).next();
                    !r.done;
                    r = n.next()
                  )
                    (r = e.h[r.value]).isVisible() && (t = ca(r, i, e.i)),
                      (r.l = !1);
                  return t ? [t] : [];
                }
                if (139 === n) {
                  for (
                    n = pa(t).value, t = null, r = (n = l(ya(e, n))).next();
                    !r.done;
                    r = n.next()
                  )
                    (r = e.h[r.value]).isVisible()
                      ? (t = ca(r, i, e.i))
                      : (r.j = i),
                      (r.l = !r.l);
                  return t ? [t] : [];
                }
                if (140 === n) return ba(e, (t = pa(t).value), i);
                if (143 === n) return (i = ba(e, 255, i)), wa(e), i;
                if (144 === n)
                  t.skip(1),
                    (i = pa(t).value),
                    e.g && ((e.g.A = 0 < (128 & i)), (e.g.C = 0 < (64 & i)));
                else if (145 === n)
                  (i = pa(t).value),
                    (n = pa(t).value),
                    t.skip(1),
                    e.g &&
                      ((t = xa((48 & n) >> 4, (12 & n) >> 2, 3 & n)),
                      (e.g.B = xa((48 & i) >> 4, (12 & i) >> 2, 3 & i)),
                      (e.g.s = t));
                else if (146 === n)
                  (i = pa(t).value),
                    (t = pa(t).value),
                    e.g && (((e = e.g).h = 15 & i), (e.g = 63 & t));
                else if (151 === n)
                  t.skip(1),
                    t.skip(1),
                    (i = pa(t).value),
                    t.skip(1),
                    e.g && (e.g.D = 3 & i);
                else if (152 <= n && 159 >= n) {
                  (n = (15 & n) - 8),
                    (r = null !== e.h[n]) ||
                      (((a = new aa(n, e.i)).j = i), (e.h[n] = a)),
                    (i = pa(t).value),
                    (a = pa(t).value);
                  var o = pa(t).value,
                    s = pa(t).value,
                    u = pa(t).value;
                  (t = pa(t).value),
                    (r && !(7 & t)) ||
                      (((t = e.h[n]).h = 0),
                      (t.g = 0),
                      (t.C = !1),
                      (t.A = !1),
                      (t.B = "white"),
                      (t.s = "black")),
                    ((t = e.h[n]).l = 0 < (32 & i)),
                    (t.L = 127 & a),
                    (t.G = o),
                    (t.F = (240 & s) >> 4),
                    (t.K = 0 < (128 & a)),
                    (t.o = 1 + (15 & s)),
                    (t.m = 1 + (63 & u)),
                    (e.g = e.h[n]);
                }
              }
            }
            return [];
          }
          function ya(e, t) {
            for (var n = [], i = 0; 8 > i; i++)
              !(1 & ~t) && e.h[i] && n.push(i), (t >>= 1);
            return n;
          }
          function ba(e, t, n) {
            for (
              var i = [], r = (t = l(ya(e, t))).next();
              !r.done;
              r = t.next()
            ) {
              r = r.value;
              var a = e.h[r];
              a.isVisible() && (a = ca(a, n, e.i)) && i.push(a),
                (e.h[r] = null);
            }
            return i;
          }
          function wa(e) {
            (e.g = null),
              (e.h = [null, null, null, null, null, null, null, null]);
          }
          function xa(e, t, n) {
            var i = { 0: 0, 1: 0, 2: 1, 3: 1 };
            return Ta[((e = i[e]) << 2) | ((t = i[t]) << 1) | (n = i[n])];
          }
          (aa.prototype.isVisible = function () {
            return this.l;
          }),
            (aa.prototype.display = function () {
              this.l = !0;
            }),
            (fa.prototype.ya = function () {
              return this.g < this.h.length;
            }),
            (fa.prototype.ra = function () {
              return this.g;
            }),
            (fa.prototype.skip = function (e) {
              if (this.g + e > this.h.length) throw new Me(2, 2, 3e3);
              this.g += e;
            }),
            (fa.prototype.pg = function (e) {
              if (0 > this.g - e) throw new Me(2, 2, 3e3);
              this.g -= e;
            });
          var Sa = new Map([
              [32, " "],
              [33, " "],
              [37, "…"],
              [42, "Š"],
              [44, "Œ"],
              [48, "█"],
              [49, "‘"],
              [50, "’"],
              [51, "“"],
              [52, "”"],
              [53, "•"],
              [57, "™"],
              [58, "š"],
              [60, "œ"],
              [61, "℠"],
              [63, "Ÿ"],
              [118, "⅛"],
              [119, "⅜"],
              [120, "⅝"],
              [121, "⅞"],
              [122, "│"],
              [123, "┐"],
              [124, "└"],
              [125, "─"],
              [126, "┘"],
              [127, "┌"],
            ]),
            Ta = "black blue green cyan red magenta yellow white".split(" ");
          function Aa(e, t) {
            (this.h = Ie(e)), (this.i = t == Ia), (this.g = 0);
          }
          function ka() {
            return new Me(2, 3, 3e3);
          }
          ((i = Aa.prototype).ya = function () {
            return this.g < this.h.byteLength;
          }),
            (i.ra = function () {
              return this.g;
            }),
            (i.getLength = function () {
              return this.h.byteLength;
            }),
            (i.lb = function () {
              try {
                var e = this.h.getUint8(this.g);
                return (this.g += 1), e;
              } catch (e) {
                throw ka();
              }
            }),
            (i.kb = function () {
              try {
                var e = this.h.getUint16(this.g, this.i);
                return (this.g += 2), e;
              } catch (e) {
                throw ka();
              }
            }),
            (i.M = function () {
              try {
                var e = this.h.getUint32(this.g, this.i);
                return (this.g += 4), e;
              } catch (e) {
                throw ka();
              }
            }),
            (i.ef = function () {
              try {
                var e = this.h.getInt32(this.g, this.i);
                return (this.g += 4), e;
              } catch (e) {
                throw ka();
              }
            }),
            (i.Cc = function () {
              try {
                if (this.i)
                  var e = this.h.getUint32(this.g, !0),
                    t = this.h.getUint32(this.g + 4, !0);
                else
                  (t = this.h.getUint32(this.g, !1)),
                    (e = this.h.getUint32(this.g + 4, !1));
              } catch (e) {
                throw ka();
              }
              if (2097151 < t) throw new Me(2, 3, 3001);
              return (this.g += 8), t * Math.pow(2, 32) + e;
            }),
            (i.Ib = function (e) {
              if (this.g + e > this.h.byteLength) throw ka();
              var t = Ae(this.h, this.g, e);
              return (this.g += e), t;
            }),
            (i.skip = function (e) {
              if (this.g + e > this.h.byteLength) throw ka();
              this.g += e;
            }),
            (i.pg = function (e) {
              if (this.g < e) throw ka();
              this.g -= e;
            }),
            (i.seek = function (e) {
              if (0 > e || e > this.h.byteLength) throw ka();
              this.g = e;
            }),
            (i.dc = function () {
              for (var e = this.g; this.ya() && 0 != this.h.getUint8(this.g); )
                this.g += 1;
              return (e = Ae(this.h, e, this.g - e)), (this.g += 1), ht(e);
            }),
            B("shaka.util.DataViewReader", Aa),
            (Aa.prototype.readTerminatedString = Aa.prototype.dc),
            (Aa.prototype.seek = Aa.prototype.seek),
            (Aa.prototype.rewind = Aa.prototype.pg),
            (Aa.prototype.skip = Aa.prototype.skip),
            (Aa.prototype.readBytes = Aa.prototype.Ib),
            (Aa.prototype.readUint64 = Aa.prototype.Cc),
            (Aa.prototype.readInt32 = Aa.prototype.ef),
            (Aa.prototype.readUint32 = Aa.prototype.M),
            (Aa.prototype.readUint16 = Aa.prototype.kb),
            (Aa.prototype.readUint8 = Aa.prototype.lb),
            (Aa.prototype.getLength = Aa.prototype.getLength),
            (Aa.prototype.getPosition = Aa.prototype.ra),
            (Aa.prototype.hasMoreData = Aa.prototype.ya);
          var Ia = 1;
          function Ca() {
            (this.h = []),
              (this.g = []),
              (this.i = new da()),
              (this.l = 0),
              (this.m = new Map([
                ["CC1", new Qr(0, 0)],
                ["CC2", new Qr(0, 1)],
                ["CC3", new Qr(1, 0)],
                ["CC4", new Qr(1, 1)],
              ])),
              (this.s = this.o = 0),
              (this.j = new Map()),
              (this.B = !0),
              (this.A = new Set()),
              Ma(this);
          }
          function Ma(e) {
            (e.o = 0), (e.s = 0);
            for (var t = l(e.m.values()), n = t.next(); !n.done; n = t.next())
              ((n = n.value).h = 0),
                (n.g = n.j),
                (n.m = null),
                Gr(n.i),
                Gr(n.j),
                Gr(n.o);
            e.B = !0;
          }
          function Ea(e, t) {
            var n = t.type;
            if (16 == (112 & t.Za)) {
              var i = (t.Za >> 3) & 1;
              0 === n ? (e.o = i) : (e.s = i);
            }
            if (
              ((i = "CC" + (1 + ((n << 1) | (n ? e.s : e.o)))),
              (n = e.m.get(i)),
              (255 === t.Za && 255 === t.vb) ||
                (!t.Za && !t.vb) ||
                !Pa(t.Za) ||
                !Pa(t.vb))
            )
              return 45 <= ++e.l && Ma(e), null;
            (e.l = 0), (t.Za &= 127), (t.vb &= 127);
            var r = t.Za;
            if ((1 <= r && 15 >= r) || (!t.Za && !t.vb)) return null;
            if (((r = null), 16 == (112 & t.Za)))
              e: {
                if (
                  (e.A.add(i), (i = t.Za), (e = t.vb), n.m === ((i << 8) | e))
                )
                  n.m = null;
                else if (
                  ((n.m = (i << 8) | e), 16 == (240 & i) && 64 == (192 & e))
                ) {
                  (t = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][
                    ((7 & i) << 1) | ((e >> 5) & 1)
                  ]),
                    (i = "white"),
                    (r = !1);
                  var a = null,
                    o = 95 < e ? e - 96 : e - 64;
                  13 >= o
                    ? (i = ra[Math.floor(o / 2)])
                    : 15 >= o
                    ? (r = !0)
                    : (a = Math.floor((o - 16) / 2)),
                    (e = !(1 & ~e)),
                    4 !== n.h &&
                      ((o = n.g),
                      3 === n.h &&
                        t !== o.g &&
                        (Kr(o, (n = 1 + t - o.h), 1 + o.g - o.h, o.h),
                        Wr(o, 0, n - 1),
                        Wr(o, t + 1, 15 - t)),
                      (o.g = t),
                      (o.m = e),
                      (o.j = r),
                      (o.l = i),
                      (o.s = a),
                      (o.o = "black"));
                } else if (17 == (247 & i) && 32 == (240 & e))
                  (n.g.m = !1),
                    (n.g.j = !1),
                    (n.g.l = "white"),
                    qr(n.g, 0, 32),
                    (i = !1),
                    "white_italics" === (t = ra[(14 & e) >> 1]) &&
                      ((t = "white"), (i = !0)),
                    (n.g.m = !(1 & ~e)),
                    (n.g.j = i),
                    (n.g.l = t);
                else if (
                  (16 == (247 & i) && 32 == (240 & e)) ||
                  (23 == (247 & i) && 45 == (255 & e))
                )
                  (t = "black"),
                    !(7 & i) && (t = ia[(14 & e) >> 1]),
                    (n.g.o = t);
                else if (17 == (247 & i) && 48 == (240 & e)) qr(n.g, 1, e);
                else if (18 == (246 & i) && 32 == (224 & e))
                  qr(n.g, 1 & i ? 3 : 2, e);
                else {
                  if (20 == (246 & i) && 32 == (240 & e)) {
                    switch (((e = t.pts), (i = null), t.vb)) {
                      case 32:
                        ta(n);
                        break;
                      case 33:
                        (n = n.g).i[n.g].pop();
                        break;
                      case 37:
                        i = ea(n, 2, e);
                        break;
                      case 38:
                        i = ea(n, 3, e);
                        break;
                      case 39:
                        i = ea(n, 4, e);
                        break;
                      case 40:
                        qr(n.g, 0, 32);
                        break;
                      case 41:
                        (n.h = 2), (n.g = n.i), (n.g.h = 0), (n.l = e);
                        break;
                      case 42:
                        Gr(n.o), na(n);
                        break;
                      case 43:
                        na(n);
                        break;
                      case 44:
                        (t = n.i),
                          (i = null),
                          4 !== n.h && (i = zr(t, n.l, e)),
                          Wr(t, 0, 15);
                        break;
                      case 45:
                        (t = n.g),
                          3 !== n.h
                            ? (i = null)
                            : ((i = zr(t, n.l, e)),
                              Kr(t, (r = t.g - t.h + 1) - 1, r, t.h),
                              Wr(t, 0, r - 1),
                              Wr(t, t.g, 15 - t.g),
                              (n.l = e));
                        break;
                      case 46:
                        Wr(n.j, 0, 15);
                        break;
                      case 47:
                        (t = null),
                          4 !== n.h && (t = zr(n.i, n.l, e)),
                          (i = n.j),
                          (n.j = n.i),
                          (n.i = i),
                          ta(n),
                          (n.l = e),
                          (i = t);
                    }
                    r = i;
                    break e;
                  }
                  (23 == i || 31 == i) &&
                    33 <= e &&
                    35 >= e &&
                    (n.g.A = e - 32);
                }
                r = null;
              }
            else (e = t.vb), qr(n.g, 0, t.Za), qr(n.g, 0, e);
            return r;
          }
          function Da(e, t) {
            var n = [];
            try {
              for (; t.ya(); ) {
                var i = pa(t).value,
                  r = (224 & i) >> 5,
                  a = 31 & i;
                if ((7 === r && 0 != a && (r = 63 & pa(t).value), 0 != r)) {
                  e.A.add("svc" + r), e.j.has(r) || e.j.set(r, new ga(r));
                  for (var o = e.j.get(r), s = t.ra(); t.ra() - s < a; ) {
                    r = o;
                    var u = t,
                      l = pa(u),
                      d = l.value,
                      h = l.pts;
                    if (16 === d) d = (d << 16) | pa(u).value;
                    if (0 <= d && 31 >= d) var f = ma(r, u, d, h);
                    else if (128 <= d && 159 >= d) f = va(r, u, d, h);
                    else {
                      if (4096 <= d && 4127 >= d)
                        (r = u),
                          8 <= (u = 255 & d) && 15 >= u
                            ? r.skip(1)
                            : 16 <= u && 23 >= u
                            ? r.skip(2)
                            : 24 <= u && 31 >= u && r.skip(3);
                      else if (4224 <= d && 4255 >= d)
                        (r = u),
                          128 <= (u = 255 & d) && 135 >= u
                            ? r.skip(4)
                            : 136 <= u && 143 >= u && r.skip(5);
                      else if (32 <= d && 127 >= d)
                        (u = d),
                          r.g &&
                            ua(r.g, 127 === u ? "♪" : String.fromCharCode(u));
                      else if (160 <= d && 255 >= d)
                        r.g && ua(r.g, String.fromCharCode(d));
                      else if (4128 <= d && 4223 >= d) {
                        if (((u = 255 & d), r.g))
                          if (Sa.has(u)) {
                            var p = Sa.get(u);
                            ua(r.g, p);
                          } else ua(r.g, "_");
                      } else
                        4256 <= d &&
                          4351 >= d &&
                          r.g &&
                          ua(r.g, 160 != (255 & d) ? "_" : "[CC]");
                      f = [];
                    }
                    n.push.apply(n, c(f));
                  }
                }
              }
            } catch (e) {
              if (!(e instanceof Me && 3e3 === e.code)) throw e;
              X(
                "CEA708_INVALID_DATA",
                "Buffer read out of bounds / invalid CEA-708 Data."
              );
            }
            return n;
          }
          function Pa(e) {
            for (var t = 0; e; ) (t ^= 1 & e), (e >>= 1);
            return 1 === t;
          }
          function La(e) {
            for (var t = [], n = e, i = (e = 0); i < n.length; )
              2 == e && 3 == n[i]
                ? ((e = 0),
                  (n = [].concat(c(n))).splice(i, 1),
                  (n = new Uint8Array(n)))
                : 0 == n[i]
                ? e++
                : (e = 0),
                i++;
            for (e = n, i = 0; i < e.length; ) {
              for (n = 0; 255 == e[i]; ) (n += 255), i++;
              n += e[i++];
              for (var r = 0; 255 == e[i]; ) (r += 255), i++;
              (r += e[i++]), 4 == n && t.push(e.subarray(i, i + r)), (i += r);
            }
            return t;
          }
          function Ra() {
            (this.i = new Map()), (this.h = new Map()), (this.g = !1);
          }
          function Na(e) {
            for (var t = Ha(e); e.reader.ya() && !e.parser.g; )
              e.parser.zc(e.start + t, e.reader, e.partialOkay);
          }
          function _a(e) {
            for (
              var t = Ha(e), n = e.reader.M(), i = 0;
              i < n &&
              (e.parser.zc(e.start + t, e.reader, e.partialOkay), !e.parser.g);
              i++
            );
          }
          function Ua(e) {
            var t = Ha(e);
            for (e.reader.skip(78); e.reader.ya() && !e.parser.g; )
              e.parser.zc(e.start + t, e.reader, e.partialOkay);
          }
          function ja(e) {
            var t = Ha(e);
            e.reader.skip(8);
            var n = e.reader.kb();
            for (
              e.reader.skip(6),
                2 == n ? e.reader.skip(48) : e.reader.skip(12),
                1 == n && e.reader.skip(16);
              e.reader.ya() && !e.parser.g;

            )
              e.parser.zc(e.start + t, e.reader, e.partialOkay);
          }
          function Oa(e) {
            return function (t) {
              e(t.reader.Ib(t.reader.getLength() - t.reader.ra()));
            };
          }
          function Ba(e) {
            for (var t = 0, n = (e = l(e)).next(); !n.done; n = e.next())
              t = (t << 8) | n.value.charCodeAt(0);
            return t;
          }
          function Fa(e) {
            return String.fromCharCode(
              (e >> 24) & 255,
              (e >> 16) & 255,
              (e >> 8) & 255,
              255 & e
            );
          }
          function Ha(e) {
            return 8 + (e.has64BitSize ? 8 : 0) + (null != e.flags ? 4 : 0);
          }
          (Aa.Endianness = { BIG_ENDIAN: 0, LITTLE_ENDIAN: Ia }),
            (Ca.prototype.clear = function () {
              (this.l = 0), (this.h = []), (this.g = []);
              var e = this.i;
              (e.i = []), (e.h = []), (e.g = 0), Ma(this);
              for (
                var t = (e = l(this.j.values())).next();
                !t.done;
                t = e.next()
              )
                wa(t.value);
            }),
            (Ca.prototype.extract = function (e, t) {
              if (this.B) {
                for (
                  var n = l(this.m.values()), i = n.next();
                  !i.done;
                  i = n.next()
                )
                  i.value.l = t;
                this.B = !1;
              }
              if (
                !(8 > (e = new Aa(e, 0)).getLength()) &&
                181 === e.lb() &&
                49 === e.kb() &&
                1195456820 === e.M() &&
                3 === e.lb() &&
                64 & (n = e.lb())
              )
                for (n &= 31, e.skip(1), i = 0; i < n; i++) {
                  var r = e.lb(),
                    a = (4 & r) >> 2,
                    o = e.lb(),
                    s = e.lb();
                  a &&
                    (0 === (r &= 3) || 1 === r
                      ? this.h.push({
                          pts: t,
                          type: r,
                          Za: o,
                          vb: s,
                          order: this.h.length,
                        })
                      : (this.g.push({
                          pts: t,
                          type: r,
                          value: o,
                          order: this.g.length,
                        }),
                        this.g.push({
                          pts: t,
                          type: 2,
                          value: s,
                          order: this.g.length,
                        })));
                }
            }),
            (Ca.prototype.decode = function () {
              function e(e, t) {
                return e.pts - t.pts || e.order - t.order;
              }
              var t = [];
              this.h.sort(e), this.g.sort(e);
              for (var n = l(this.h), i = n.next(); !i.done; i = n.next())
                (i = Ea(this, i.value)) && t.push(i);
              for (i = (n = l(this.g)).next(); !i.done; i = n.next())
                ha(this.i, i.value);
              for (i = (n = l(this.i.i)).next(); !i.done; i = n.next())
                (i = Da(this, i.value)), t.push.apply(t, c(i));
              return (this.i.i = []), (this.h = []), (this.g = []), t;
            }),
            (Ca.prototype.getStreams = function () {
              return Array.from(this.A);
            }),
            B("shaka.cea.CeaDecoder", Ca),
            ($t = function () {
              return new Ca();
            }),
            ((i = Ra.prototype).box = function (e, t) {
              return (e = Ba(e)), this.i.set(e, Va), this.h.set(e, t), this;
            }),
            (i.N = function (e, t) {
              return (e = Ba(e)), this.i.set(e, za), this.h.set(e, t), this;
            }),
            (i.stop = function () {
              this.g = !0;
            }),
            (i.parse = function (e, t, n) {
              for (e = new Aa(e, 0), this.g = !1; e.ya() && !this.g; )
                this.zc(0, e, t, n);
            }),
            (i.zc = function (e, t, n, i) {
              var r = t.ra();
              if (i && r + 8 > t.getLength()) this.g = !0;
              else {
                var a = t.M(),
                  o = t.M(),
                  s = Fa(o),
                  u = !1;
                switch (a) {
                  case 0:
                    a = t.getLength() - r;
                    break;
                  case 1:
                    if (i && t.ra() + 8 > t.getLength())
                      return void (this.g = !0);
                    (a = t.Cc()), (u = !0);
                }
                var l = this.h.get(o);
                if (l) {
                  var c = null,
                    d = null;
                  if (this.i.get(o) == za) {
                    if (i && t.ra() + 4 > t.getLength())
                      return void (this.g = !0);
                    (c = (d = t.M()) >>> 24), (d &= 16777215);
                  }
                  (o = r + a),
                    n && o > t.getLength() && (o = t.getLength()),
                    i && o > t.getLength()
                      ? (this.g = !0)
                      : ((i = o - t.ra()),
                        l({
                          name: s,
                          parser: this,
                          partialOkay: n || !1,
                          version: c,
                          flags: d,
                          reader: (t = new Aa(
                            (t = 0 < i ? t.Ib(i) : new Uint8Array(0)),
                            0
                          )),
                          size: a,
                          start: r + e,
                          has64BitSize: u,
                        }));
                } else t.skip(Math.min(r + a - t.ra(), t.getLength() - t.ra()));
              }
            }),
            B("shaka.util.Mp4Parser", Ra),
            (Ra.headerSize = Ha),
            (Ra.typeToString = Fa),
            (Ra.allData = Oa),
            (Ra.audioSampleEntry = ja),
            (Ra.visualSampleEntry = Ua),
            (Ra.sampleDescription = _a),
            (Ra.children = Na),
            (Ra.prototype.parseNext = Ra.prototype.zc),
            (Ra.prototype.parse = Ra.prototype.parse),
            (Ra.prototype.stop = Ra.prototype.stop),
            (Ra.prototype.fullBox = Ra.prototype.N),
            (Ra.prototype.box = Ra.prototype.box);
          var Va = 0,
            za = 1;
          function Ga(e, t) {
            var n = null,
              i = null,
              r = null,
              a = null,
              o = e.M();
            return (
              1 & t && (r = e.Cc()),
              2 & t && (a = e.M()),
              8 & t && (n = e.M()),
              16 & t && (i = e.M()),
              { trackId: o, Kc: n, Lc: i, Tg: r, qg: a }
            );
          }
          function qa(e, t) {
            return 1 == t
              ? ((t = e.M()),
                (e = e.M()),
                { baseMediaDecodeTime: t * Math.pow(2, 32) + e })
              : { baseMediaDecodeTime: e.M() };
          }
          function Ka(e, t) {
            return (
              1 == t ? (e.skip(8), e.skip(8)) : (e.skip(4), e.skip(4)),
              (t = e.M()),
              e.skip(4),
              (e = e.kb()),
              {
                timescale: t,
                language:
                  String.fromCharCode(96 + (e >> 10)) +
                  String.fromCharCode(96 + ((960 & e) >> 5)) +
                  String.fromCharCode(96 + (31 & e)),
              }
            );
          }
          function Wa(e, t, n) {
            var i = e.M(),
              r = [],
              a = null;
            1 & n && (a = e.ef()), 4 & n && e.skip(4);
            for (var o = 0; o < i; o++) {
              var s = { kf: null, sampleSize: null, Od: null };
              256 & n && (s.kf = e.M()),
                512 & n && (s.sampleSize = e.M()),
                1024 & n && e.skip(4),
                2048 & n && (s.Od = 0 == t ? e.M() : e.ef()),
                r.push(s);
            }
            return { Ui: i, jf: r, xe: a };
          }
          function Xa(e) {
            return { codec: Fa((e = e.M())) };
          }
          function Ya() {
            (this.j = new Map()), (this.i = this.h = 0), (this.g = $a);
          }
          function Ja(e, t, n, i, r, a, o, s, u) {
            var d = 0,
              h = a,
              f = s.map(function (e) {
                return e.jf;
              });
            for (
              (f = [].concat.apply([], c(f))).length &&
                (h = f[0].sampleSize || a),
                t.skip(o + s[0].xe);
              t.ya();

            ) {
              o = t.M();
              var p = t.lb(),
                g = null;
              switch (((g = !1), (s = 1), e.g)) {
                case Za:
                  g = 6 == (g = 31 & p);
                  break;
                case Qa:
                  (s = 2),
                    t.skip(1),
                    (g = 39 == (g = (p >> 1) & 63) || 40 == g);
                  break;
                case eo:
                  (s = 2),
                    t.skip(1),
                    (g = 23 == (g = (p >> 1) & 63) || 24 == g);
                  break;
                default:
                  return;
              }
              if (g)
                for (
                  p = 0,
                    d < f.length && (p = f[d].Od || 0),
                    p = (n + p) / i,
                    g = (s = l(La(t.Ib(o - s)))).next();
                  !g.done;
                  g = s.next()
                )
                  u.push({ packet: g.value, pts: p });
              else
                try {
                  t.skip(o - s);
                } catch (e) {
                  break;
                }
              0 == (h -= o + 4) &&
                ((n = d < f.length ? n + (f[d].kf || r) : n + r),
                (h = (++d < f.length && f[d].sampleSize) || a));
            }
          }
          (Ya.prototype.init = function (e) {
            function t(e) {
              (e = e.name), to.has(e) && (n.g = to.get(e));
            }
            var n = this,
              i = [],
              r = [];
            if (
              (new Ra()
                .box("moov", Na)
                .box("mvex", Na)
                .N("trex", function (e) {
                  var t = e.reader;
                  t.skip(4),
                    t.skip(4),
                    (e = t.M()),
                    (t = t.M()),
                    (n.h = e),
                    (n.i = t);
                })
                .box("trak", Na)
                .N("tkhd", function (e) {
                  var t = e.reader;
                  1 == (e = e.version)
                    ? (t.skip(8), t.skip(8))
                    : (t.skip(4), t.skip(4));
                  var n = t.M();
                  1 == e ? t.skip(8) : t.skip(4),
                    t.skip(4),
                    t.skip(8),
                    t.skip(2),
                    t.skip(2),
                    t.skip(2),
                    t.skip(2),
                    t.skip(36),
                    t.kb(),
                    t.kb(),
                    t.kb(),
                    t.kb(),
                    i.push(n);
                })
                .box("mdia", Na)
                .N("mdhd", function (e) {
                  (e = Ka(e.reader, e.version)), r.push(e.timescale);
                })
                .box("minf", Na)
                .box("stbl", Na)
                .N("stsd", _a)
                .box("avc1", t)
                .box("avc3", t)
                .box("dvav", t)
                .box("dva1", t)
                .box("hev1", t)
                .box("hvc1", t)
                .box("dvh1", t)
                .box("dvhe", t)
                .box("vvc1", t)
                .box("vvi1", t)
                .box("dvc1", t)
                .box("dvi1", t)
                .box("encv", Ua)
                .box("sinf", Na)
                .box("frma", function (e) {
                  (e = Xa(e.reader).codec), to.has(e) && (n.g = to.get(e));
                })
                .parse(e, !0),
              !i.length || !r.length || i.length != r.length)
            )
              throw new Me(2, 2, 2010);
            this.g == $a &&
              W("Unable to determine bitstream format for CEA parsing!"),
              i.forEach(function (e, t) {
                n.j.set(e, r[t]);
              });
          }),
            (Ya.prototype.parse = function (e) {
              var t = this;
              if (this.g == $a) return [];
              var n = [],
                i = 0,
                r = [];
              return (
                new Ra()
                  .box("moof", function (e) {
                    (i = e.start), (r = []), Na(e);
                  })
                  .box("traf", function (e) {
                    r.push({
                      baseMediaDecodeTime: null,
                      Kc: t.h,
                      Lc: t.i,
                      lg: [],
                      timescale: 9e4,
                    }),
                      Na(e);
                  })
                  .N("trun", function (e) {
                    var t = r[r.length - 1];
                    (e = Wa(e.reader, e.version, e.flags)), t.lg.push(e);
                  })
                  .N("tfhd", function (e) {
                    var n = r[r.length - 1];
                    (e = Ga(e.reader, e.flags)),
                      (n.Kc = e.Kc || t.h),
                      (n.Lc = e.Lc || t.i),
                      (e = e.trackId),
                      t.j.has(e) && (n.timescale = t.j.get(e));
                  })
                  .N("tfdt", function (e) {
                    var t = r[r.length - 1];
                    (e = qa(e.reader, e.version)),
                      (t.baseMediaDecodeTime = e.baseMediaDecodeTime);
                  })
                  .box("mdat", function (e) {
                    for (
                      var a = i - e.start - 8,
                        o = e.reader.ra(),
                        s = l(r),
                        u = s.next();
                      !u.done;
                      u = s.next()
                    ) {
                      if (null === (u = u.value).baseMediaDecodeTime)
                        throw (
                          (W(
                            "Unable to find base media decode time for CEA captions!"
                          ),
                          new Me(2, 2, 2010))
                        );
                      e.reader.seek(o),
                        Ja(
                          t,
                          e.reader,
                          u.baseMediaDecodeTime,
                          u.timescale,
                          u.Kc,
                          u.Lc,
                          a,
                          u.lg,
                          n
                        );
                    }
                  })
                  .parse(e, !1),
                n
              );
            }),
            B("shaka.cea.Mp4CeaParser", Ya);
          var $a = 0,
            Za = 1,
            Qa = 2,
            eo = 3,
            to = new Map()
              .set("avc1", Za)
              .set("avc3", Za)
              .set("dvav", Za)
              .set("dva1", Za)
              .set("hev1", Qa)
              .set("hvc1", Qa)
              .set("dvh1", Qa)
              .set("dvhe", Qa)
              .set("vvc1", eo)
              .set("vvi1", eo)
              .set("dvc1", eo)
              .set("dvi1", eo);
          function no(e, t) {
            if (((this.j = e), void 0 !== t && t)) {
              t = new Uint8Array(e.byteLength);
              for (var n = 0, i = 0; i < e.byteLength; i++)
                (2 <= i && 3 == e[i] && 0 == e[i - 1] && 0 == e[i - 2]) ||
                  ((t[n] = e[i]), n++);
              this.j = Ae(t, 0, n);
            }
            (this.i = this.j.byteLength), (this.g = this.h = 0);
          }
          function io(e) {
            var t = e.j.byteLength - e.i,
              n = new Uint8Array(4),
              i = Math.min(4, e.i);
            0 !== i &&
              (n.set(e.j.subarray(t, t + i)),
              (e.h = new Aa(n, 0).M()),
              (e.g = 8 * i),
              (e.i -= i));
          }
          function ro(e, t) {
            if (e.g <= t) {
              t -= e.g;
              var n = Math.floor(t / 8);
              (t -= 8 * n), (e.g -= n), io(e);
            }
            (e.h <<= t), (e.g -= t);
          }
          function ao(e, t) {
            var n = Math.min(e.g, t),
              i = e.h >>> (32 - n);
            return (
              (e.g -= n),
              0 < e.g ? (e.h <<= n) : 0 < e.i && io(e),
              0 < (n = t - n) ? (i << n) | ao(e, n) : i
            );
          }
          function oo(e) {
            var t;
            for (t = 0; t < e.g; ++t)
              if (e.h & (2147483648 >>> t)) return (e.h <<= t), (e.g -= t), t;
            return io(e), t + oo(e);
          }
          function so(e) {
            ro(e, 1 + oo(e));
          }
          function uo(e) {
            return ao(e, oo(e) + 1) - 1;
          }
          function lo(e) {
            return 1 & (e = uo(e)) ? (1 + e) >>> 1 : -1 * (e >>> 1);
          }
          function co(e) {
            return 1 === ao(e, 1);
          }
          function ho(e) {
            return ao(e, 8);
          }
          function fo(e, t) {
            for (var n = 8, i = 8, r = 0; r < t; r++)
              0 !== i && (i = (n + (i = lo(e)) + 256) % 256),
                (n = 0 === i ? n : i);
          }
          function po(e) {
            return ho(e), uo(e), uo(e);
          }
          function go() {}
          function mo(e, t) {
            return (
              t + 10 <= e.length &&
              73 === e[t] &&
              68 === e[t + 1] &&
              51 === e[t + 2] &&
              255 > e[t + 3] &&
              255 > e[t + 4] &&
              128 > e[t + 6] &&
              128 > e[t + 7] &&
              128 > e[t + 8] &&
              128 > e[t + 9]
            );
          }
          function vo(e, t) {
            return (
              t + 10 <= e.length &&
              51 === e[t] &&
              68 === e[t + 1] &&
              73 === e[t + 2] &&
              255 > e[t + 3] &&
              255 > e[t + 4] &&
              128 > e[t + 6] &&
              128 > e[t + 7] &&
              128 > e[t + 8] &&
              128 > e[t + 9]
            );
          }
          function yo(e, t) {
            var n = (127 & e[t]) << 21;
            return (
              (n |= (127 & e[t + 1]) << 14),
              (n |= (127 & e[t + 2]) << 7) | (127 & e[t + 3])
            );
          }
          function bo(e) {
            var t = {
              key: e.type,
              description: "",
              data: "",
              mimeType: null,
              pictureType: null,
            };
            if ("APIC" === e.type) {
              if (2 > e.size || 3 !== e.data[0]) return null;
              var n = e.data.subarray(1).indexOf(0);
              if (-1 === n) return null;
              var i = ht(Ae(e.data, 1, n)),
                r = e.data[2 + n],
                a = e.data.subarray(3 + n).indexOf(0);
              if (-1 === a) return null;
              var o,
                s = ht(Ae(e.data, 3 + n, a));
              return (
                (o =
                  "--\x3e" === i
                    ? ht(Ae(e.data, 4 + n + a))
                    : Te(e.data.subarray(4 + n + a))),
                (t.mimeType = i),
                (t.pictureType = r),
                (t.description = s),
                (t.data = o),
                t
              );
            }
            return "TXXX" === e.type || "WXXX" === e.type
              ? 2 > e.size ||
                3 !== e.data[0] ||
                -1 === (i = e.data.subarray(1).indexOf(0))
                ? null
                : ((n = ht(Ae(e.data, 1, i))),
                  (e = ht(Ae(e.data, 2 + i)).replace(/\0*$/, "")),
                  (t.description = n),
                  (t.data = e),
                  t)
              : "PRIV" === e.type
              ? 2 > e.size || -1 === (n = e.data.indexOf(0))
                ? null
                : ((n = ht(Ae(e.data, 0, n))),
                  (t.description = n),
                  "com.apple.streaming.transportStreamTimestamp" == n
                    ? ((n = e.data.subarray(n.length + 1)),
                      (e = 1 & n[3]),
                      (n = (n[4] << 23) + (n[5] << 15) + (n[6] << 7) + n[7]),
                      (n /= 45),
                      e && (n += 47721858.84),
                      (t.data = n))
                    : ((e = Te(e.data.subarray(n.length + 1))), (t.data = e)),
                  t)
              : "T" === e.type[0]
              ? 2 > e.size || 3 !== e.data[0]
                ? null
                : ((e = ht(e.data.subarray(1)).replace(/\0*$/, "")),
                  (t.data = e),
                  t)
              : "W" === e.type[0]
              ? ((e = ht(e.data).replace(/\0*$/, "")), (t.data = e), t)
              : e.data
              ? ((t.data = Te(e.data)), t)
              : null;
          }
          function wo(e) {
            for (var t = 0, n = []; mo(e, t); ) {
              var i = yo(e, t + 6);
              for (
                (e[t + 5] >> 6) & 1 && (t += 10), i = (t += 10) + i;
                t + 10 < i;

              ) {
                var r = e.subarray(t),
                  a = yo(r, 4);
                (a = bo(
                  (r = {
                    type: String.fromCharCode(r[0], r[1], r[2], r[3]),
                    size: a,
                    data: r.subarray(10, 10 + a),
                  })
                )) && n.push(a),
                  (t += r.size + 10);
              }
              vo(e, t) && (t += 10);
            }
            return n;
          }
          function xo(e, t) {
            for (var n = (t = void 0 === t ? 0 : t), i = 0; mo(e, t); )
              (e[t + 5] >> 6) & 1 && (i += 10),
                (i += 10),
                (i += yo(e, t + 6)),
                vo(e, t + 10) && (i += 10),
                (t += i);
            return 0 < i ? e.subarray(n, n + i) : new Uint8Array([]);
          }
          function So() {
            (this.F = null),
              (this.G = !1),
              (this.m = this.J = null),
              (this.j = []),
              (this.g = []),
              (this.A = this.B = null),
              (this.i = []),
              (this.h = []),
              (this.C = null),
              (this.l = []),
              (this.D = this.o = this.s = null);
          }
          function To(e, t) {
            if (1 != ((t[0] << 16) | (t[1] << 8) | t[2])) return null;
            var n = {
              data: new Uint8Array(0),
              packetLength: (t[4] << 8) | t[5],
              pts: null,
              dts: null,
              nalus: [],
            };
            if (n.packetLength && n.packetLength > t.byteLength - 6)
              return null;
            var i = t[7];
            if (192 & i) {
              var r =
                536870912 * (14 & t[9]) +
                4194304 * (255 & t[10]) +
                16384 * (254 & t[11]) +
                128 * (255 & t[12]) +
                (254 & t[13]) / 2;
              null == e.s && (e.s = r),
                (n.pts = ko(r, e.s)),
                (e.s = n.pts),
                (n.dts = n.pts),
                64 & i &&
                  ((i =
                    536870912 * (14 & t[14]) +
                    4194304 * (255 & t[15]) +
                    16384 * (254 & t[16]) +
                    128 * (255 & t[17]) +
                    (254 & t[18]) / 2),
                  null == e.o && (e.o = i),
                  (n.dts = ko(i, e.o))),
                (e.o = n.dts);
            }
            return (
              (e = t[8] + 9),
              t.byteLength <= e ? null : ((n.data = t.subarray(e)), n)
            );
          }
          function Ao(e) {
            var t = e.Zb();
            return 1 < t.length &&
              ((e = t[0].pts), (t = t[1].pts), !isNaN(t - e))
              ? String((1 / (t - e)) * 9e4)
              : null;
          }
          function ko(e, t) {
            var n = 1;
            for (e > t && (n = -1); 4294967296 < Math.abs(t - e); )
              e += 8589934592 * n;
            return e;
          }
          function Io(e) {
            return !(0 > Co(e));
          }
          function Co(e) {
            for (var t = Math.min(1e3, e.length - 564), n = 0; n < t; ) {
              if (71 == e[n] && 71 == e[n + 188] && 71 == e[n + 376]) return n;
              n++;
            }
            return -1;
          }
          Xt("video/mp4", function () {
            return new Ya();
          }),
            B("shaka.util.ExpGolomb", no),
            B("shaka.util.Id3Utils", go),
            (go.getID3Data = xo),
            (go.getID3Frames = wo),
            ((i = So.prototype).clearData = function () {
              (this.j = []),
                (this.g = []),
                (this.i = []),
                (this.h = []),
                (this.l = []);
            }),
            (i.parse = function (e) {
              if (564 > e.length) return this;
              for (
                var t = Math.max(0, Co(e)),
                  n = e.length - ((e.length + t) % 188),
                  i = !1,
                  r = t;
                r < n;
                r += 188
              )
                if (71 == e[r]) {
                  var a = !!(64 & e[r + 1]),
                    o = ((31 & e[r + 1]) << 8) + e[r + 2];
                  if (1 < (48 & e[r + 3]) >> 4) {
                    var s = r + 5 + e[r + 4];
                    if (s == r + 188) continue;
                  } else s = r + 4;
                  switch (o) {
                    case 0:
                      a && (s += e[s] + 1),
                        (this.F = ((31 & e[s + 10]) << 8) | e[s + 11]);
                      break;
                    case 17:
                    case 8191:
                      break;
                    case this.F:
                      a && (s += e[s] + 1),
                        (o = {
                          audio: -1,
                          video: -1,
                          xd: -1,
                          audioCodec: "",
                          videoCodec: "",
                        });
                      var u =
                        s + 3 + (((15 & (a = e)[s + 1]) << 8) | a[s + 2]) - 4;
                      for (
                        s += 12 + (((15 & a[s + 10]) << 8) | a[s + 11]);
                        s < u;

                      ) {
                        var l = ((31 & a[s + 1]) << 8) | a[s + 2],
                          c = ((15 & a[s + 3]) << 8) | a[s + 4];
                        switch (a[s]) {
                          case 6:
                            if (0 < c)
                              for (var d = s + 5, h = c; 2 < h; ) {
                                var f = a[d + 1] + 2;
                                switch (a[d]) {
                                  case 5:
                                    var p = vt(a.subarray(d + 2, d + f));
                                    -1 == o.audio && "Opus" === p
                                      ? ((o.audio = l), (o.audioCodec = "opus"))
                                      : -1 == o.video &&
                                        "AV01" === p &&
                                        ((o.video = l), (o.videoCodec = "av1"));
                                    break;
                                  case 106:
                                    -1 == o.audio &&
                                      ((o.audio = l), (o.audioCodec = "ac3"));
                                    break;
                                  case 122:
                                    -1 == o.audio &&
                                      ((o.audio = l), (o.audioCodec = "ec3"));
                                    break;
                                  case 124:
                                    -1 == o.audio &&
                                      ((o.audio = l), (o.audioCodec = "aac"));
                                    break;
                                  case 127:
                                    "opus" == o.audioCodec &&
                                      ((p = null),
                                      128 === a[d + 2] && (p = a[d + 3]),
                                      null != p &&
                                        (this.D = {
                                          channelCount: 15 & p ? 15 & p : 2,
                                          Ug: p,
                                          sampleRate: 48e3,
                                        }));
                                }
                                (d += f), (h -= f);
                              }
                            break;
                          case 15:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "aac"));
                            break;
                          case 17:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "aac-loas"));
                            break;
                          case 21:
                            -1 == o.xd && (o.xd = l);
                            break;
                          case 27:
                            -1 == o.video &&
                              ((o.video = l), (o.videoCodec = "avc"));
                            break;
                          case 3:
                          case 4:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "mp3"));
                            break;
                          case 36:
                            -1 == o.video &&
                              ((o.video = l), (o.videoCodec = "hvc"));
                            break;
                          case 129:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "ac3"));
                            break;
                          case 132:
                          case 135:
                            -1 == o.audio &&
                              ((o.audio = l), (o.audioCodec = "ec3"));
                        }
                        s += c + 5;
                      }
                      -1 != (a = o).video &&
                        ((this.J = a.video), (this.m = a.videoCodec)),
                        -1 != a.audio &&
                          ((this.B = a.audio), (this.A = a.audioCodec)),
                        -1 != a.xd && (this.C = a.xd),
                        i && !this.G && ((i = !1), (r = t - 188)),
                        (this.G = !0);
                      break;
                    case this.J:
                      (s = e.subarray(s, r + 188)),
                        a
                          ? this.j.push([s])
                          : this.j.length &&
                            this.j[this.j.length - 1] &&
                            this.j[this.j.length - 1].push(s);
                      break;
                    case this.B:
                      (s = e.subarray(s, r + 188)),
                        a
                          ? this.i.push([s])
                          : this.i.length &&
                            this.i[this.i.length - 1] &&
                            this.i[this.i.length - 1].push(s);
                      break;
                    case this.C:
                      (s = e.subarray(s, r + 188)),
                        a
                          ? this.l.push([s])
                          : this.l.length &&
                            this.l[this.l.length - 1] &&
                            this.l[this.l.length - 1].push(s);
                      break;
                    default:
                      i = !0;
                  }
                }
              return this;
            }),
            (i.di = function (e) {
              return (
                te(
                  "TsParser.parseAvcNalus",
                  "Please use parseNalus function instead."
                ),
                this.bf(e, { Zc: null, state: null })
              );
            }),
            (i.bf = function (e, t) {
              var n = e.pts ? e.pts / 9e4 : null,
                i = (e = e.data).byteLength,
                r = 1;
              "hvc" == this.m && (r = 2);
              var a = t.state || 0,
                o = a,
                s = 0,
                u = [],
                l = -1,
                c = 0;
              for (
                -1 == a &&
                ((l = 0),
                (c = "hvc" == this.m ? (e[0] >> 1) & 63 : 31 & e[0]),
                (a = 0),
                (s = 1));
                s < i;

              ) {
                var d = e[s++];
                a
                  ? 1 === a
                    ? (a = d ? 0 : 2)
                    : d
                    ? 1 == d
                      ? ((d = s - a - 1),
                        0 <= l
                          ? u.push({
                              data: e.subarray(l + r, d),
                              fullData: e.subarray(l, d),
                              type: c,
                              time: n,
                              state: null,
                            })
                          : (a = u.length ? u[u.length - 1] : t.Zc) &&
                            (o &&
                              s <= 4 - o &&
                              a.state &&
                              ((a.data = a.data.subarray(
                                0,
                                a.data.byteLength - o
                              )),
                              (a.fullData = a.fullData.subarray(
                                0,
                                a.fullData.byteLength - o
                              ))),
                            0 < d &&
                              ((d = e.subarray(0, d)),
                              (a.data = It(a.data, d)),
                              (a.fullData = It(a.fullData, d)),
                              (a.state = 0))),
                        s < i
                          ? ((c =
                              "hvc" == this.m ? (e[s] >> 1) & 63 : 31 & e[s]),
                            (l = s),
                            (a = 0))
                          : (a = -1))
                      : (a = 0)
                    : (a = 3)
                  : (a = d ? 0 : 1);
              }
              return (
                0 <= l &&
                  0 <= a &&
                  u.push({
                    data: e.subarray(l + r, i),
                    fullData: e.subarray(l, i),
                    type: c,
                    time: n,
                    state: a,
                  }),
                !u.length &&
                  t.Zc &&
                  (n = u.length ? u[u.length - 1] : t.Zc) &&
                  ((n.data = It(n.data, e)), (n.fullData = It(n.fullData, e))),
                (t.state = a),
                u
              );
            }),
            (i.getMetadata = function () {
              for (
                var e = [], t = l(this.l), n = t.next();
                !n.done;
                n = t.next()
              )
                (n = To(this, (n = It.apply(wt, c(n.value))))) &&
                  e.push({
                    cueTime: n.pts ? n.pts / 9e4 : null,
                    data: n.data,
                    frames: wo(n.data),
                    dts: n.dts,
                    pts: n.pts,
                  });
              return e;
            }),
            (i.Fb = function () {
              if (this.i.length && !this.h.length) {
                for (
                  var e = !1, t = l(this.i), n = t.next();
                  !n.done;
                  n = t.next()
                ) {
                  var i = It.apply(wt, c(n.value)),
                    r = To(this, i);
                  (n = this.h.length ? this.h[this.h.length - 1] : null),
                    r &&
                    null != r.pts &&
                    null != r.dts &&
                    (!n || (n.pts != r.pts && n.dts != r.dts))
                      ? (this.h.length && r.dts < (n.dts || 0) && (e = !0),
                        this.h.push(r))
                      : this.h.length &&
                        (i = r ? r.data : i) &&
                        (((n = this.h.pop()).data = It(n.data, i)),
                        this.h.push(n));
                }
                e &&
                  (this.h = this.h.sort(function (e, t) {
                    var n = (e.pts || 0) - (t.pts || 0);
                    return (e.dts || 0) - (t.dts || 0) || n;
                  }));
              }
              return this.h;
            }),
            (i.Zb = function (e) {
              if (((e = void 0 === e || e), this.j.length && !this.g.length)) {
                for (
                  var t = !1, n = l(this.j), i = n.next();
                  !i.done;
                  i = n.next()
                ) {
                  var r = It.apply(wt, c(i.value)),
                    a = To(this, r);
                  (i = this.g.length ? this.g[this.g.length - 1] : null),
                    a &&
                    null != a.pts &&
                    null != a.dts &&
                    (!i || (i.pts != a.pts && i.dts != a.dts))
                      ? (this.g.length && a.dts < (i.dts || 0) && (t = !0),
                        this.g.push(a))
                      : this.g.length &&
                        (r = a ? a.data : r) &&
                        (((i = this.g.pop()).data = It(i.data, r)),
                        this.g.push(i));
                }
                if (e) {
                  for (
                    n = { Zc: null, state: null },
                      i = [],
                      a = (r = l(this.g)).next();
                    !a.done;
                    a = r.next()
                  )
                    ((a = a.value).nalus = this.bf(a, n)),
                      a.nalus.length &&
                        (i.push(a), (n.Zc = a.nalus[a.nalus.length - 1]));
                  this.g = i;
                }
                t &&
                  (this.g = this.g.sort(function (e, t) {
                    var n = (e.pts || 0) - (t.pts || 0);
                    return (e.dts || 0) - (t.dts || 0) || n;
                  }));
              }
              return e ? this.g : ((e = this.g), (this.g = []), e);
            }),
            (i.getStartTime = function (e) {
              if ("audio" == e) {
                e = null;
                var t = this.Fb();
                return (
                  t.length && ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)),
                  e
                );
              }
              return "video" == e
                ? ((e = null),
                  (t = this.Zb(!1)).length &&
                    ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)),
                  e)
                : null;
            }),
            (i.rd = function () {
              return { audio: this.A, video: this.m };
            }),
            (i.wd = function () {
              for (
                var e = [], t = l(this.Zb()), n = t.next();
                !n.done;
                n = t.next()
              )
                e.push.apply(e, c(n.value.nalus));
              return e;
            }),
            (i.Ih = function () {
              te(
                "TsParser.getVideoResolution",
                "Please use getVideoInfo function instead."
              );
              var e = this.Wf();
              return { height: e.height, width: e.width };
            }),
            (i.Wf = function () {
              return "hvc" == this.m
                ? (function (e) {
                    var t = {
                        height: null,
                        width: null,
                        codec: null,
                        frameRate: null,
                      },
                      n = e.wd();
                    if (!n.length) return t;
                    if (
                      !(n = n.find(function (e) {
                        return 33 == e.type;
                      }))
                    )
                      return t;
                    var i = new no(n.fullData, !0);
                    ho(i), ho(i), ao(i, 4);
                    var r = ao(i, 3);
                    co(i);
                    var a = ao(i, 2),
                      o = ao(i, 1),
                      s = ao(i, 5),
                      u = ao(i, 32);
                    n = ho(i);
                    for (
                      var l = ho(i),
                        c = ho(i),
                        d = ho(i),
                        h = ho(i),
                        f = ho(i),
                        p = ho(i),
                        g = [],
                        m = [],
                        v = 0;
                      v < r;
                      v++
                    )
                      g.push(co(i)), m.push(co(i));
                    if (0 < r) for (v = r; 8 > v; v++) ao(i, 2);
                    for (v = 0; v < r; v++) g[v] && ao(i, 88), m[v] && ho(i);
                    uo(i),
                      3 == (r = uo(i)) && ao(i, 1),
                      (g = uo(i)),
                      (m = uo(i));
                    var y = (v = 0),
                      b = 0,
                      w = 0;
                    return (
                      co(i) &&
                        ((v += uo(i)),
                        (y += uo(i)),
                        (b += uo(i)),
                        (w += uo(i))),
                      (t.width = String(
                        g - (v + y) * (1 === r || 2 === r ? 2 : 1)
                      )),
                      (t.height = String(m - (b + w) * (1 === r ? 2 : 1))),
                      (i = (function (e) {
                        for (var t = 0, n = 0; 32 > n; n++)
                          t |= ((e >> n) & 1) << (31 - n);
                        return t >>> 0;
                      })(u)),
                      (o = 1 == o ? "H" : "L"),
                      (a = "hvc1." + ["", "A", "B", "C"][a] + s),
                      (a += "." + i.toString(16).toUpperCase()),
                      (a += "." + o + p),
                      f && (a += "." + f.toString(16).toUpperCase()),
                      h && (a += "." + h.toString(16).toUpperCase()),
                      d && (a += "." + d.toString(16).toUpperCase()),
                      c && (a += "." + c.toString(16).toUpperCase()),
                      l && (a += "." + l.toString(16).toUpperCase()),
                      n && (a += "." + n.toString(16).toUpperCase()),
                      (t.codec = a),
                      (t.frameRate = Ao(e)),
                      t
                    );
                  })(this)
                : (function (e) {
                    var t = {
                        height: null,
                        width: null,
                        codec: null,
                        frameRate: null,
                      },
                      n = e.wd();
                    if (!n.length) return t;
                    if (
                      !(n = n.find(function (e) {
                        return 7 == e.type;
                      }))
                    )
                      return t;
                    var i = ho((n = new no(n.data))),
                      r = ho(n),
                      a = ho(n);
                    if ((so(n), Mo.includes(i))) {
                      var o = uo(n);
                      if (
                        (3 === o && ro(n, 1), so(n), so(n), ro(n, 1), co(n))
                      ) {
                        o = 3 !== o ? 8 : 12;
                        for (var s = 0; s < o; s++)
                          co(n) && fo(n, 6 > s ? 16 : 64);
                      }
                    }
                    if ((so(n), 0 === (o = uo(n)))) uo(n);
                    else if (1 === o)
                      for (ro(n, 1), so(n), so(n), o = uo(n), s = 0; s < o; s++)
                        so(n);
                    so(n), ro(n, 1), (o = uo(n)), (s = uo(n));
                    var u = ao(n, 1);
                    0 === u && ro(n, 1), ro(n, 1);
                    var l = 0,
                      c = 0,
                      d = 0,
                      h = 0;
                    return (
                      co(n) &&
                        ((l = uo(n)), (c = uo(n)), (d = uo(n)), (h = uo(n))),
                      (t.height = String(
                        (2 - u) * (s + 1) * 16 - 2 * d - 2 * h
                      )),
                      (t.width = String(16 * (o + 1) - 2 * l - 2 * c)),
                      (t.codec =
                        "avc1." +
                        ("0" + i.toString(16).toUpperCase()).slice(-2) +
                        ("0" + r.toString(16).toUpperCase()).slice(-2) +
                        ("0" + a.toString(16).toUpperCase()).slice(-2)),
                      (t.frameRate = Ao(e)),
                      t
                    );
                  })(this);
            }),
            B("shaka.util.TsParser", So),
            (So.syncOffset = Co),
            (So.probe = Io),
            (So.prototype.getVideoInfo = So.prototype.Wf),
            (So.prototype.getVideoResolution = So.prototype.Ih),
            (So.prototype.getVideoNalus = So.prototype.wd),
            (So.prototype.getCodecs = So.prototype.rd),
            (So.prototype.getStartTime = So.prototype.getStartTime),
            (So.prototype.getVideoData = So.prototype.Zb),
            (So.prototype.getAudioData = So.prototype.Fb),
            (So.prototype.getMetadata = So.prototype.getMetadata),
            (So.prototype.parseNalus = So.prototype.bf),
            (So.prototype.parseAvcNalus = So.prototype.di),
            (So.prototype.parse = So.prototype.parse),
            (So.prototype.clearData = So.prototype.clearData),
            (So.Timescale = 9e4);
          var Mo = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
          function Eo() {
            this.g = null;
          }
          function Do(e) {
            return (e = (function (e) {
              var t = 0,
                n = Ie(e),
                i = n.getUint32(t, !0);
              if (i != e.byteLength) return [];
              e: {
                for (e = t + 6, t = []; e < n.byteLength - 1; ) {
                  (i = n.getUint16(e, !0)), (e += 2);
                  var r = n.getUint16(e, !0);
                  if (((e += 2), 1 & r || r + e > n.byteLength)) {
                    n = [];
                    break e;
                  }
                  var a = Ae(n, e, r);
                  t.push({ type: i, value: a }), (e += r);
                }
                n = t;
              }
              return n;
            })((e = Tt(wn(e)))).filter(function (e) {
              return e.type === Lo;
            })[0]) && (e = gn((e = ft(e.value, !0)), "WRMHEADER"))
              ? e
              : null;
          }
          function Po(e) {
            try {
              var t = Do(e);
              if (t)
                e: {
                  for (
                    var n = l(Sn(t, "DATA")), i = n.next();
                    !i.done;
                    i = n.next()
                  ) {
                    var r = i.value;
                    if (r.children)
                      for (
                        var a = l(r.children), o = a.next();
                        !o.done;
                        o = a.next()
                      ) {
                        var s = o.value;
                        if ("LA_URL" == s.tagName) {
                          var u = wn(s);
                          break e;
                        }
                      }
                  }
                  u = "";
                }
              else u = "";
              return u;
            } catch (e) {
              return "";
            }
          }
          (Eo.prototype.init = function () {}),
            (Eo.prototype.parse = function (e) {
              this.g ? this.g.clearData() : (this.g = new So());
              var t = [];
              if (!Io((e = Ae(e)))) return t;
              var n = (e = this.g.parse(e)).rd(),
                i = e.wd();
              switch (((e = []), n.video)) {
                case "avc":
                  e.push(6);
                  break;
                case "hvc":
                  e.push(39), e.push(40);
              }
              if (!e.length) return t;
              for (i = (n = l(i)).next(); !i.done; i = n.next())
                if (((i = i.value), e.includes(i.type) && null != i.time))
                  for (
                    var r = l(La(i.data)), a = r.next();
                    !a.done;
                    a = r.next()
                  )
                    t.push({ packet: a.value, pts: i.time });
              return t;
            }),
            B("shaka.cea.TsCeaParser", Eo),
            Xt("video/mp2t", function () {
              return new Eo();
            }),
            B("shaka.config.CodecSwitchingStrategy", {
              RELOAD: "reload",
              SMOOTH: "smooth",
            }),
            B("shaka.config.CrossBoundaryStrategy", {
              KEEP: "keep",
              RESET: "reset",
              RESET_TO_ENCRYPTED: "reset_to_encrypted",
              RESET_ON_ENCRYPTION_CHANGE: "RESET_ON_ENCRYPTION_CHANGE",
            });
          var Lo = 1;
          function Ro(e) {
            var t = this;
            (this.h = []),
              (this.g = []),
              (this.data = []),
              new Ra()
                .box("moov", Na)
                .box("moof", Na)
                .N("pssh", function (e) {
                  if (!(1 < e.version)) {
                    var n = Ae(e.reader.h, -12, e.size);
                    if (
                      (t.data.push(n),
                      t.h.push(kt(e.reader.Ib(16))),
                      0 < e.version)
                    ) {
                      n = e.reader.M();
                      for (var i = 0; i < n; i++) {
                        var r = kt(e.reader.Ib(16));
                        t.g.push(r);
                      }
                    }
                  }
                })
                .parse(e);
          }
          function No(e, t, n, i) {
            var r = e.length,
              a = t.length + 16 + r;
            0 < i && (a += 4 + 16 * n.size);
            var o = new Uint8Array(a),
              s = Ie(o),
              u = 0;
            if (
              (s.setUint32(u, a),
              (u += 4),
              s.setUint32(u, 1886614376),
              (u += 4),
              1 > i ? s.setUint32(u, 0) : s.setUint32(u, 16777216),
              (u += 4),
              o.set(t, u),
              (u += t.length),
              0 < i)
            )
              for (
                s.setUint32(u, n.size), u += 4, n = (t = l(n)).next();
                !n.done;
                n = t.next()
              )
                (n = At(n.value)), o.set(n, u), (u += n.length);
            return s.setUint32(u, r), o.set(e, u + 4), o;
          }
          function _o(t, n, i) {
            var r = (function (e) {
                for (var t = [], n = (e = l(e)).next(); !n.done; n = e.next())
                  (n = jo(n.value)) && t.push(n);
                return t;
              })(t),
              a = null;
            t = [];
            var o = [],
              s = null,
              u = new Set(
                r.map(function (e) {
                  return e.keyId;
                })
              );
            u.delete(null);
            var c = "cenc";
            if (1 < u.size) throw new Me(2, 4, 4010);
            if (!n) {
              if (
                1 <
                (o = r.filter(function (e) {
                  return "urn:mpeg:dash:sea:2012" == e.Dc;
                })).length
              )
                throw new Me(2, 4, 4050);
              o.length &&
                (s = (function (t) {
                  if (!e.crypto || !e.crypto.subtle)
                    throw (
                      (W(
                        "Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"
                      ),
                      new Me(2, 4, 4042))
                    );
                  var n = An(
                    t.node,
                    "urn:mpeg:dash:schema:sea:2012",
                    "SegmentEncryption"
                  );
                  if (!n) throw new Me(2, 4, 4051);
                  if (
                    "urn:mpeg:dash:sea:aes128-cbc:2013" !=
                    n.attributes.schemeIdUri
                  )
                    throw new Me(2, 4, 4051);
                  if (
                    ((n = An(
                      t.node,
                      "urn:mpeg:dash:schema:sea:2012",
                      "CryptoPeriod"
                    )),
                    !n)
                  )
                    throw new Me(2, 4, 4051);
                  if (
                    ((t = n.attributes.IV),
                    (n = yt(n.attributes.keyUriTemplate)),
                    !t || !n)
                  )
                    throw new Me(2, 4, 4051);
                  if (((t = At(t.substr(2))), 16 != t.byteLength))
                    throw new Me(2, 4, 4048);
                  return { Sh: n, iv: t };
                })(o[0])),
                (o = r.find(function (e) {
                  return "urn:mpeg:dash:mp4protection:2011" == e.Dc;
                })) &&
                  o.encryptionScheme &&
                  (c = o.encryptionScheme),
                (o = r.filter(function (e) {
                  return "urn:mpeg:dash:mp4protection:2011" == e.Dc
                    ? ((a = e.init || a), !1)
                    : "urn:mpeg:dash:sea:2012" != e.Dc;
                })).length &&
                  ((t = (function (e, t, n, i, r) {
                    for (
                      var a = [], o = (n = l(n)).next();
                      !o.done;
                      o = n.next()
                    ) {
                      var s = i[(o = o.value).Dc];
                      if (s) {
                        var u;
                        if (
                          (u = An(o.node, "urn:microsoft:playready", "pro")) &&
                          wn(u)
                        ) {
                          u = Tt((u = wn(u)));
                          var c = new Uint8Array([
                            154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230,
                            91, 224, 136, 95, 149,
                          ]);
                          u = [
                            {
                              initData: No(u, c, new Set(), 0),
                              initDataType: "cenc",
                              keyId: o.keyId,
                            },
                          ];
                        } else u = null;
                        if (
                          ((c = null),
                          "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e" ===
                            o.Dc)
                        ) {
                          c = o;
                          var d = r;
                          if (0 == d.size) c = null;
                          else {
                            var h = new Uint8Array([
                              16, 119, 239, 236, 192, 178, 77, 2, 172, 227, 60,
                              30, 82, 226, 251, 75,
                            ]);
                            c = [
                              {
                                initData: No(new Uint8Array([]), h, d, 1),
                                initDataType: "cenc",
                                keyId: c.keyId,
                              },
                            ];
                          }
                        }
                        (u = Mt(s, t, o.init || e || u || c)),
                          (s = Oo.get(s)) && (u.licenseServerUri = s(o)),
                          a.push(u);
                      }
                    }
                    return a;
                  })(a, c, o, i, u)),
                  0 == t.length && (t = [Mt("", c, a)]));
            }
            if (r.length && !s && (n || !o.length))
              for (
                t = [], i = (n = l(Object.values(i))).next();
                !i.done;
                i = n.next()
              )
                "org.w3.clearkey" != (i = i.value) && t.push(Mt(i, c, a));
            if ((u = Array.from(u)[0] || null))
              for (n = (c = l(t)).next(); !n.done; n = c.next())
                for (
                  i = (n = l(n.value.initData)).next();
                  !i.done;
                  i = n.next()
                )
                  i.value.keyId = u;
            return { Kf: u, Ri: a, drmInfos: t, ne: s, Qf: !0 };
          }
          function Uo(e) {
            var t = An(e.node, "https://dashif.org/CPS", "Laurl");
            if (t && (t = wn(t))) return t;
            if ((t = An(e.node, "urn:microsoft:playready", "pro")) && wn(t))
              return Po(t);
            if ((e = An(e.node, "urn:mpeg:cenc:2013", "pssh")) && (e = wn(e))) {
              (t = Tt(e)), (e = 8);
              var n = (t = Ie(t)).getUint8(e);
              return (
                (e += 20),
                0 < n && (e += 4 + 16 * t.getUint32(e)),
                Po((e = gn("<pro>" + (e = xt((e = Ae(t, e + 4)))) + "</pro>")))
              );
            }
            return "";
          }
          function jo(e) {
            var t = e.attributes.schemeIdUri,
              n = In(e, "urn:mpeg:cenc:2013", "default_KID"),
              i = Cn(e, "urn:mpeg:cenc:2013", "pssh").map(xn),
              r = e.attributes.value;
            if (!t) return null;
            if (
              ((t = t.toLowerCase()),
              n && (n = n.replace(/-/g, "").toLowerCase()).includes(" "))
            )
              throw new Me(2, 4, 4009);
            var a = [];
            try {
              a = i.map(function (e) {
                return { initDataType: "cenc", initData: Tt(e), keyId: null };
              });
            } catch (e) {
              throw new Me(2, 4, 4007);
            }
            return {
              node: e,
              Dc: t,
              keyId: n,
              init: 0 < a.length ? a : null,
              encryptionScheme: r,
            };
          }
          var Oo = new Map()
            .set("com.apple.fps", function (t) {
              if ("apple" === e.shakaMediaKeysPolyfill)
                throw new Me(2, 4, 4054);
              return (t = An(t.node, "https://dashif.org/CPS", "Laurl")) &&
                (t = wn(t))
                ? t
                : "";
            })
            .set("com.widevine.alpha", function (e) {
              var t = An(e.node, "https://dashif.org/CPS", "Laurl");
              return t && (t = wn(t))
                ? t
                : ((e = An(e.node, "urn:microsoft", "laurl")) &&
                    yt(e.attributes.licenseUrl)) ||
                    "";
            })
            .set("com.microsoft.playready", Uo)
            .set("com.microsoft.playready.recommendation", Uo)
            .set("com.microsoft.playready.software", Uo)
            .set("com.microsoft.playready.hardware", Uo)
            .set("org.w3.clearkey", function (e) {
              var t = An(e.node, "https://dashif.org/CPS", "Laurl");
              return t && (t = wn(t))
                ? t
                : (e = An(
                    e.node,
                    "http://dashif.org/guidelines/clearKey",
                    "Laurl"
                  )) &&
                  "EME-1.0" === e.attributes.Lic_type &&
                  e &&
                  (e = wn(e))
                ? e
                : "";
            });
          function Bo(e, t) {
            var n = {
              maxAttempts: 2,
              baseDelay: 1e3,
              backoffFactor: 2,
              fuzzFactor: 0.5,
              timeout: 3e4,
              stallTimeout: 5e3,
              connectionTimeout: 1e4,
            };
            (this.l = null == e.maxAttempts ? n.maxAttempts : e.maxAttempts),
              (this.j = null == e.baseDelay ? n.baseDelay : e.baseDelay),
              (this.o = null == e.fuzzFactor ? n.fuzzFactor : e.fuzzFactor),
              (this.m =
                null == e.backoffFactor ? n.backoffFactor : e.backoffFactor),
              (this.g = 0),
              (this.h = this.j),
              (this.i = void 0 !== t && t) && (this.g = 1);
          }
          function Fo(e) {
            var t, n;
            return P(function (i) {
              if (1 == i.g) {
                if (e.g >= e.l) {
                  if (!e.i) throw new Me(2, 7, 1010);
                  (e.g = 1), (e.h = e.j);
                }
                return (
                  (t = e.g),
                  e.g++,
                  0 == t
                    ? i.return()
                    : ((n = e.h * (1 + (2 * Math.random() - 1) * e.o)),
                      w(
                        i,
                        new Promise(function (e) {
                          new je(e).ea(n / 1e3);
                        }),
                        2
                      ))
                );
              }
              (e.h *= e.m), x(i);
            });
          }
          function Ho() {
            var e,
              t,
              n = new Promise(function (n, i) {
                (e = n), (t = i);
              });
            return (n.resolve = e), (n.reject = t), n;
          }
          function Vo(e, t) {
            (this.promise = e), (this.i = t), (this.g = null);
          }
          function zo(e) {
            return new Vo(Promise.reject(e), function () {
              return Promise.resolve();
            });
          }
          function Go() {
            var e = Promise.reject(new Me(2, 7, 7001));
            return (
              e.catch(function () {}),
              new Vo(e, function () {
                return Promise.resolve();
              })
            );
          }
          function qo(e) {
            return new Vo(Promise.resolve(e), function () {
              return Promise.resolve();
            });
          }
          function Ko(e) {
            return new Vo(e, function () {
              return e.catch(function () {});
            });
          }
          function Wo(e) {
            return new Vo(
              Promise.all(
                e.map(function (e) {
                  return e.promise;
                })
              ),
              function () {
                return Promise.all(
                  e.map(function (e) {
                    return e.abort();
                  })
                );
              }
            );
          }
          function Xo(t, n) {
            if (n)
              if (n instanceof Map)
                for (var i = l(n.keys()), r = i.next(); !r.done; r = i.next())
                  (r = r.value),
                    Object.defineProperty(this, r, {
                      value: n.get(r),
                      writable: !0,
                      enumerable: !0,
                    });
              else
                for (i in n)
                  Object.defineProperty(this, i, {
                    value: n[i],
                    writable: !0,
                    enumerable: !0,
                  });
            (this.defaultPrevented = this.cancelable = this.bubbles = !1),
              (this.timeStamp =
                e.performance && e.performance.now
                  ? e.performance.now()
                  : Date.now()),
              (this.type = t),
              (this.isTrusted = !1),
              (this.target = this.currentTarget = null),
              (this.g = !1);
          }
          function Yo() {
            (this.Xa = new J()), (this.Af = this);
          }
          function Jo() {
            this.g = [];
          }
          function $o(e, t) {
            e.g.push(
              t.finally(function () {
                nn(e.g, t);
              })
            );
          }
          function Zo(e, t, n, i, r, a, o) {
            Yo.call(this),
              (this.i = !1),
              (this.s = new Jo()),
              (this.g = new Set()),
              (this.h = new Set()),
              (this.m = e || null),
              (this.l = t || null),
              (this.C = n || null),
              (this.D = i || null),
              (this.F = r || null),
              (this.J = a || null),
              (this.G = o || null),
              (this.A = this.B = !1),
              (this.o = 16e3),
              (this.j = new Map());
          }
          function Qo(e, t, n, i) {
            (i = void 0 !== i && i), (n = n || os);
            var r = ss.get(e);
            (!r || n >= r.priority) && ss.set(e, { priority: n, Ld: t, ei: i });
          }
          function es(e, t, n) {
            return {
              uris: e,
              method: "GET",
              body: null,
              headers: {},
              allowCrossSiteCredentials: !1,
              retryParameters: t,
              licenseRequestType: null,
              sessionId: null,
              drmInfo: null,
              initData: null,
              initDataType: null,
              streamDataCallback: void 0 === n ? null : n,
            };
          }
          function ts(e, t, n, i, r, a, o, s) {
            e.B && (n.uris[a] = n.uris[a].replace("https://", "http://")),
              e.A && (n.uris[a] = n.uris[a].replace("http://", "https://")),
              0 < a && e.J && e.J(t, i, n.uris[a], n.uris[a - 1]);
            var u = new oe(n.uris[a]),
              l = u.rb,
              c = !1;
            l ||
              (se(u, (l = (l = location.protocol).slice(0, -1))),
              (n.uris[a] = u.toString())),
              (l = l.toLowerCase());
            var d = (l = ss.get(l)) ? l.Ld : null;
            if (!d) return zo(new Me(2, 1, 1e3, u));
            var h = l.ei;
            (u = e.j.get(u.gb)) && (n.headers["common-access-token"] = u);
            var f,
              p = null,
              g = null,
              m = !1,
              v = !1;
            return Ko(Fo(r))
              .Pa(function () {
                if (e.i) return Go();
                f = Date.now();
                var r = 0;
                n.requestStartTime = Date.now();
                var o = d(
                  n.uris[a],
                  n,
                  t,
                  function (a, o, u) {
                    p && p.stop(),
                      g && g.ea(l / 1e3),
                      e.m &&
                        t == as &&
                        (r++,
                        (n.packetNumber = r),
                        e.m(a, o, ns(i), n),
                        (c = !0),
                        (s.g = u));
                  },
                  function (i) {
                    (v = !0),
                      (n.timeToFirstByte = Date.now() - n.requestStartTime),
                      e.l && e.l(i, n, t);
                  },
                  { minBytesForProgressEvents: e.o }
                );
                if (!h) return o;
                var u = n.retryParameters.connectionTimeout;
                u &&
                  (p = new je(function () {
                    (m = !0), o.abort();
                  })).ea(u / 1e3);
                var l = n.retryParameters.stallTimeout;
                return (
                  l &&
                    (g = new je(function () {
                      (m = !0), o.abort();
                    })),
                  o
                );
              })
              .Pa(
                function (i) {
                  p && p.stop(),
                    g && g.stop(),
                    null == i.timeMs && (i.timeMs = Date.now() - f);
                  var r = i.headers["common-access-token"];
                  if (r) {
                    var a = new oe(i.uri);
                    e.j.set(a.gb, r);
                  }
                  return (
                    (r = { response: i, Kh: c }),
                    !v && e.l && e.l(i.headers, n, t),
                    e.C && e.C(n, i),
                    r
                  );
                },
                function (u) {
                  if ((p && p.stop(), g && g.stop(), e.D)) {
                    var l = null,
                      c = 0;
                    u instanceof Me &&
                      ((l = u), 1001 == u.code && (c = u.data[1])),
                      e.D(n, l, c, m);
                  }
                  if (e.i) return Go();
                  if (
                    (m && (u = new Me(1, 1, 1003, n.uris[a], t)),
                    u instanceof Me)
                  ) {
                    if (7001 == u.code) throw u;
                    if (1010 == u.code) throw o;
                    if (1 == u.severity) {
                      if (
                        (((l = new Xo(
                          "retry",
                          (l = new Map().set("error", u))
                        )).cancelable = !0),
                        e.dispatchEvent(l),
                        l.defaultPrevented)
                      )
                        throw u;
                      return (
                        (a = (a + 1) % n.uris.length),
                        ts(e, t, n, i, r, a, u, s)
                      );
                    }
                  }
                  throw u;
                }
              );
          }
          function ns(e) {
            if (e) {
              var t = e.segment;
              if (((e = e.stream), t && e && e.fastSwitching && t.m)) return !1;
            }
            return !0;
          }
          function is() {
            this.g = 0;
          }
          function rs(e, t, n) {
            Vo.call(this, e, t), (this.h = n);
          }
          (Ho.prototype.resolve = function () {}),
            (Ho.prototype.reject = function () {}),
            (Vo.prototype.abort = function () {
              return this.g || (this.g = this.i()), this.g;
            }),
            (Vo.prototype.finally = function (e) {
              return (
                this.promise.then(
                  function () {
                    return e(!0);
                  },
                  function () {
                    return e(!1);
                  }
                ),
                this
              );
            }),
            (Vo.prototype.Pa = function (e, t) {
              function n(n) {
                return function (s) {
                  if (r.g && n) a.reject(o);
                  else {
                    var u = n ? e : t;
                    u
                      ? (i = (function (e, t, n) {
                          try {
                            var i = e(t);
                            return i && i.promise && i.abort
                              ? (n.resolve(i.promise),
                                function () {
                                  return i.abort();
                                })
                              : (n.resolve(i),
                                function () {
                                  return Promise.resolve(i).then(
                                    function () {},
                                    function () {}
                                  );
                                });
                          } catch (e) {
                            return (
                              n.reject(e),
                              function () {
                                return Promise.resolve();
                              }
                            );
                          }
                        })(u, s, a))
                      : (n ? a.resolve : a.reject)(s);
                  }
                };
              }
              function i() {
                return a.reject(o), r.abort();
              }
              var r = this,
                a = new Ho();
              a.catch(function () {});
              var o = new Me(2, 7, 7001);
              return (
                this.promise.then(n(!0), n(!1)),
                new Vo(a, function () {
                  return i();
                })
              );
            }),
            o.Object.defineProperties(Vo.prototype, {
              aborted: {
                configurable: !0,
                enumerable: !0,
                get: function () {
                  return null !== this.g;
                },
              },
            }),
            B("shaka.util.AbortableOperation", Vo),
            (Vo.prototype.chain = Vo.prototype.Pa),
            (Vo.prototype.finally = Vo.prototype.finally),
            (Vo.all = Wo),
            (Vo.prototype.abort = Vo.prototype.abort),
            (Vo.notAbortable = Ko),
            (Vo.completed = qo),
            (Vo.aborted = Go),
            (Vo.failed = zo),
            (Xo.prototype.preventDefault = function () {
              this.cancelable && (this.defaultPrevented = !0);
            }),
            (Xo.prototype.stopImmediatePropagation = function () {
              this.g = !0;
            }),
            (Xo.prototype.stopPropagation = function () {}),
            B("shaka.util.FakeEvent", Xo),
            (Yo.prototype.addEventListener = function (e, t) {
              this.Xa && this.Xa.push(e, t);
            }),
            (Yo.prototype.removeEventListener = function (e, t) {
              this.Xa && this.Xa.remove(e, t);
            }),
            (Yo.prototype.dispatchEvent = function (e) {
              if (!this.Xa) return !0;
              var t = this.Xa.get(e.type) || [],
                n = this.Xa.get("All");
              for (
                n && (t = t.concat(n)), n = (t = l(t)).next();
                !n.done;
                n = t.next()
              ) {
                (n = n.value),
                  (e.target = this.Af),
                  (e.currentTarget = this.Af);
                try {
                  n.handleEvent ? n.handleEvent(e) : n.call(this, e);
                } catch (e) {}
                if (e.g) break;
              }
              return e.defaultPrevented;
            }),
            (Yo.prototype.release = function () {
              this.Xa = null;
            }),
            (Jo.prototype.destroy = function () {
              for (
                var e = [], t = l(this.g), n = t.next();
                !n.done;
                n = t.next()
              )
                (n = n.value).promise.catch(function () {}), e.push(n.abort());
              return (this.g = []), Promise.all(e);
            }),
            m(Zo, Yo),
            ((i = Zo.prototype).lf = function (e) {
              this.B = e;
            }),
            (i.mf = function (e) {
              this.A = e;
            }),
            (i.hi = function (e) {
              this.g.add(e);
            }),
            (i.Ci = function (e) {
              this.g.delete(e);
            }),
            (i.Vg = function () {
              this.g.clear();
            }),
            (i.ii = function (e) {
              this.h.add(e);
            }),
            (i.Di = function (e) {
              this.h.delete(e);
            }),
            (i.Wg = function () {
              this.h.clear();
            }),
            (i.Jf = function () {
              this.j.clear();
            }),
            (i.destroy = function () {
              return (
                (this.i = !0),
                this.g.clear(),
                this.h.clear(),
                this.j.clear(),
                Yo.prototype.release.call(this),
                this.s.destroy()
              );
            }),
            (i.request = function (e, t, n) {
              var i = this,
                r = new is();
              if (this.i) {
                var a = Promise.reject(new Me(2, 7, 7001));
                return (
                  a.catch(function () {}),
                  new rs(
                    a,
                    function () {
                      return Promise.resolve();
                    },
                    r
                  )
                );
              }
              (t.method = t.method || "GET"),
                (t.headers = t.headers || {}),
                (t.retryParameters = t.retryParameters
                  ? dn(t.retryParameters)
                  : {
                      maxAttempts: 2,
                      baseDelay: 1e3,
                      backoffFactor: 2,
                      fuzzFactor: 0.5,
                      timeout: 3e4,
                      stallTimeout: 5e3,
                      connectionTimeout: 1e4,
                    }),
                (t.uris = dn(t.uris)),
                (a = (function (e, t, n, i) {
                  function r(e) {
                    a = a.Pa(function () {
                      return n.body && (n.body = Te(n.body)), e(t, n, i);
                    });
                  }
                  var a = qo(void 0);
                  e.F && r(e.F);
                  for (var o = (e = l(e.g)).next(); !o.done; o = e.next())
                    r(o.value);
                  return a.Pa(void 0, function (e) {
                    if (e instanceof Me && 7001 == e.code) throw e;
                    throw new Me(2, 1, 1006, e);
                  });
                })(this, e, t, n));
              var o = a.Pa(function () {
                  return ts(
                    i,
                    e,
                    t,
                    n,
                    new Bo(t.retryParameters, !1),
                    0,
                    null,
                    r
                  );
                }),
                s = o.Pa(function (t) {
                  return (function (e, t, n, i) {
                    for (
                      var r = qo(void 0), a = (e = l(e.h)).next(), o = {};
                      !a.done;
                      o = { og: void 0 }, a = e.next()
                    )
                      (o.og = a.value),
                        (r = r.Pa(
                          (function (e) {
                            return function () {
                              var r = n.response;
                              return (
                                r.data && (r.data = Te(r.data)),
                                (0, e.og)(t, r, i)
                              );
                            };
                          })(o)
                        ));
                    return r.Pa(
                      function () {
                        return n;
                      },
                      function (e) {
                        var t = 2;
                        if (e instanceof Me) {
                          if (7001 == e.code) throw e;
                          t = e.severity;
                        }
                        throw new Me(t, 1, 1007, e);
                      }
                    );
                  })(i, e, t, n);
                }),
                u = Date.now(),
                c = 0;
              a.promise.then(
                function () {
                  c = Date.now() - u;
                },
                function () {}
              );
              var d = 0;
              o.promise.then(
                function () {
                  d = Date.now();
                },
                function () {}
              );
              var h = s.Pa(
                function (r) {
                  var a = Date.now() - d,
                    o = r.response;
                  return (
                    (o.timeMs += c),
                    (o.timeMs += a),
                    r.Kh ||
                      !i.m ||
                      o.fromCache ||
                      "HEAD" == t.method ||
                      e != as ||
                      i.m(o.timeMs, o.data.byteLength, ns(n)),
                    i.G && i.G(e, o, n),
                    o
                  );
                },
                function (e) {
                  throw (e && (e.severity = 2), e);
                }
              );
              return (
                (a = new rs(
                  h.promise,
                  function () {
                    return h.abort();
                  },
                  r
                )),
                $o(this.s, a),
                a
              );
            }),
            B("shaka.net.NetworkingEngine", Zo),
            (Zo.prototype.request = Zo.prototype.request),
            (Zo.prototype.destroy = Zo.prototype.destroy),
            (Zo.makeRequest = es),
            (Zo.defaultRetryParameters = function () {
              return {
                maxAttempts: 2,
                baseDelay: 1e3,
                backoffFactor: 2,
                fuzzFactor: 0.5,
                timeout: 3e4,
                stallTimeout: 5e3,
                connectionTimeout: 1e4,
              };
            }),
            (Zo.prototype.clearCommonAccessTokenMap = Zo.prototype.Jf),
            (Zo.prototype.clearAllResponseFilters = Zo.prototype.Wg),
            (Zo.prototype.unregisterResponseFilter = Zo.prototype.Di),
            (Zo.prototype.registerResponseFilter = Zo.prototype.ii),
            (Zo.prototype.clearAllRequestFilters = Zo.prototype.Vg),
            (Zo.prototype.unregisterRequestFilter = Zo.prototype.Ci),
            (Zo.prototype.registerRequestFilter = Zo.prototype.hi),
            (Zo.unregisterScheme = function (e) {
              ss.delete(e);
            }),
            (Zo.registerScheme = Qo),
            (Zo.prototype.setForceHTTPS = Zo.prototype.mf),
            (Zo.prototype.setForceHTTP = Zo.prototype.lf),
            (Zo.NumBytesRemainingClass = is),
            m(rs, Vo),
            (Zo.PendingRequest = rs);
          var as = 1;
          (Zo.RequestType = {
            MANIFEST: 0,
            SEGMENT: as,
            LICENSE: 2,
            APP: 3,
            TIMING: 4,
            SERVER_CERTIFICATE: 5,
            KEY: 6,
            ADS: 7,
            CONTENT_STEERING: 8,
          }),
            (Zo.AdvancedRequestType = {
              INIT_SEGMENT: 0,
              MEDIA_SEGMENT: 1,
              MEDIA_PLAYLIST: 2,
              MASTER_PLAYLIST: 3,
              MPD: 4,
              MSS: 5,
              MPD_PATCH: 6,
              MEDIATAILOR_SESSION_INFO: 7,
              MEDIATAILOR_TRACKING_INFO: 8,
              MEDIATAILOR_STATIC_RESOURCE: 9,
              MEDIATAILOR_TRACKING_EVENT: 10,
              INTERSTITIAL_ASSET_LIST: 11,
              INTERSTITIAL_AD_URL: 12,
            });
          var os = 3;
          Zo.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: os };
          var ss = new Map();
          function us(t, n, i, r, a, o) {
            var s = new Map()
              .set("RepresentationID", n)
              .set("Number", i)
              .set("SubNumber", r)
              .set("Bandwidth", a)
              .set("Time", o);
            return t.replace(
              /\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,
              function (t, n, i, r) {
                if ("$$" == t) return "$";
                var a = s.get(n);
                if (null == a) return t;
                switch (
                  ("RepresentationID" == n && i && (i = void 0),
                  "Time" == n &&
                    "bigint" != typeof a &&
                    (0.2 <= Math.abs(a - Math.round(a)) &&
                      W("Calculated $Time$ values must be close to integers"),
                    (a = Math.round(a))),
                  r)
                ) {
                  case void 0:
                  case "d":
                  case "i":
                  case "u":
                    t = a.toString();
                    break;
                  case "o":
                    t = a.toString(8);
                    break;
                  case "x":
                    t = a.toString(16);
                    break;
                  case "X":
                    t = a.toString(16).toUpperCase();
                    break;
                  default:
                    t = a.toString();
                }
                return (
                  (i = e.parseInt(i, 10) || 1),
                  Array(Math.max(0, i - t.length) + 1).join("0") + t
                );
              }
            );
          }
          function ls(e, t) {
            var n = ds(e, t, "timescale"),
              i = 1;
            n && (i = Rn(n) || 1);
            var r = (n = Rn((n = ds(e, t, "duration")) || "")) ? n / i : null,
              a = ds(e, t, "startNumber"),
              o = Number(ds(e, t, "presentationTimeOffset")) || 0,
              s = Nn(a || "");
            if (
              ((null != a && null != s) || (s = 1),
              (a = null),
              (t = hs(e, t, "SegmentTimeline")))
            ) {
              (t = bn(t, "S")), (a = i), (e = e.$.duration || 1 / 0);
              for (var u = s, l = [], c = -o, d = 0; d < t.length; ++d) {
                var h = t[d],
                  f = t[d + 1],
                  p = kn(h, "t", Nn),
                  g = kn(h, "d", Nn),
                  m = kn(h, "r", Ln);
                if (((h = kn(h, "k", Ln) || 0), null != p && (p -= o), g)) {
                  if (((p = null != p ? p : c), 0 > (m = m || 0)))
                    if (f) {
                      if (null == (f = kn(f, "t", Nn))) break;
                      if (p >= f) break;
                      m = Math.ceil((f - p) / g) - 1;
                    } else {
                      if (1 / 0 == e) break;
                      if (p / a >= e) break;
                      m = Math.ceil((e * a - p) / g) - 1;
                    }
                  for (
                    0 < l.length && p != c && (l[l.length - 1].end = p / a),
                      f = 0;
                    f <= m;
                    ++f
                  )
                    (c = p + g),
                      l.push({
                        start: p / a,
                        end: c / a,
                        zf: p,
                        Kd: h,
                        ri: l.length + u,
                      }),
                      (p = c);
                }
              }
              a = l;
            }
            return {
              timescale: i,
              Wd: n,
              Fa: r,
              fd: s,
              Kb: o / i || 0,
              yf: o,
              timeline: a,
            };
          }
          function cs(e, t) {
            return [t(e.I), t(e.Z), t(e.ia)].filter(Yi);
          }
          function ds(e, t, n) {
            (t = cs(e, t)), (e = null);
            for (
              var i = (t = l(t)).next();
              !i.done && !(e = i.value.attributes[n]);
              i = t.next()
            );
            return e;
          }
          function hs(e, t, n) {
            (t = cs(e, t)), (e = null);
            for (
              var i = (t = l(t)).next();
              !i.done && !(e = Tn(i.value, n));
              i = t.next()
            );
            return e;
          }
          function fs(e, t, n, i, r, a) {
            if (
              ((a = void 0 === a ? 0 : a),
              In(e, "http://www.w3.org/1999/xlink", "href"))
            ) {
              var o = (function (e, t, n, i, r, a) {
                for (
                  var o = In(e, "http://www.w3.org/1999/xlink", "href"),
                    s =
                      In(e, "http://www.w3.org/1999/xlink", "actuate") ||
                      "onRequest",
                    u = l(Object.keys(e.attributes)),
                    c = u.next();
                  !c.done;
                  c = u.next()
                ) {
                  var d = (c = c.value).split(":"),
                    h = mn("http://www.w3.org/1999/xlink");
                  d[0] == h && delete e.attributes[c];
                }
                if (5 <= a) return zo(new Me(2, 4, 4028));
                if ("onLoad" != s) return zo(new Me(2, 4, 4027));
                var f = Ct([i], [o]);
                return r.request(0, es(f, t)).Pa(function (i) {
                  if (!(i = pn(i.data, e.tagName)))
                    return zo(new Me(2, 4, 4001, o));
                  for (e.children = []; i.children.length; ) {
                    var s = i.children.shift();
                    e.children.push(s);
                  }
                  for (
                    var u = (s = l(Object.keys(i.attributes))).next();
                    !u.done;
                    u = s.next()
                  )
                    (u = u.value), (e.attributes[u] = i.attributes[u]);
                  return fs(e, t, n, f[0], r, a + 1);
                });
              })(e, t, n, i, r, a);
              return (
                n &&
                  (o = o.Pa(void 0, function () {
                    return fs(e, t, n, i, r, a);
                  })),
                o
              );
            }
            o = [];
            for (
              var s = l(yn(e)), u = s.next(), c = {};
              !u.done;
              c = { Ic: void 0 }, u = s.next()
            )
              (c.Ic = u.value),
                "urn:mpeg:dash:resolve-to-zero:2013" ==
                In(c.Ic, "http://www.w3.org/1999/xlink", "href")
                  ? (e.children = e.children.filter(
                      (function (e) {
                        return function (t) {
                          return t !== e.Ic;
                        };
                      })(c)
                    ))
                  : "SegmentTimeline" != c.Ic.tagName &&
                    o.push(fs(c.Ic, t, n, i, r, a));
            return Wo(o).Pa(function () {
              return e;
            });
          }
          function ps(e, t, n, i, r, a, o, s) {
            (this.T = e),
              (this.startByte = t),
              (this.endByte = n),
              (this.We = void 0 === i ? null : i),
              (this.timescale = void 0 === r ? null : r),
              (this.h = void 0 === a ? null : a),
              (this.aesKey = void 0 === o ? null : o),
              (this.g = this.mimeType = this.codecs = null),
              (this.encrypted = void 0 !== s && s);
          }
          function gs(e, t) {
            return (
              e === t ||
              (e && t
                ? e.qc() == t.qc() &&
                  e.oc() == t.oc() &&
                  rn(e.T().sort(), t.T().sort()) &&
                  Se(e.Xb(), t.Xb())
                : e == t)
            );
          }
          function ms(e, t, n, i, r, a, o, s, u, c, d, h, f, p, g, m) {
            for (
              c = void 0 === c ? [] : c,
                p = void 0 === p ? ys : p,
                this.startTime = e,
                this.i = this.endTime = t,
                this.G = n,
                this.startByte = i,
                this.endByte = r,
                this.ha = a,
                this.l = o,
                this.F = s,
                this.D = u,
                this.g = c,
                this.tilesLayout = void 0 === d ? "" : d,
                this.C = void 0 === h ? null : h,
                this.B = void 0 === f ? null : f,
                this.status = p,
                this.preload = !1,
                this.j = !0,
                this.A = !1,
                this.aesKey = void 0 === g ? null : g,
                this.thumbnailSprite = null,
                this.h = -1,
                this.s = void 0 !== m && m,
                this.J = this.m = !1,
                t = (e = l(this.g)).next();
              !t.done;
              t = e.next()
            )
              t.value.eg();
            this.s && this.g.length && this.g[this.g.length - 1].dg(),
              (this.o = this.bandwidth = this.mimeType = this.codecs = null),
              (this.K = !1);
          }
          function vs(e, t) {
            e.ha = t;
            for (var n = (e = l(e.g)).next(); !n.done; n = e.next())
              vs(n.value, t);
          }
          (ps.prototype.qc = function () {
            return this.startByte;
          }),
            (ps.prototype.oc = function () {
              return this.endByte;
            }),
            (ps.prototype.yg = function (e) {
              this.h = e;
            }),
            (ps.prototype.Xb = function () {
              return this.h;
            }),
            B("shaka.media.InitSegmentReference", ps),
            (ps.prototype.getEndByte = ps.prototype.oc),
            (ps.prototype.getStartByte = ps.prototype.qc),
            ((i = ms.prototype).T = function () {
              return this.G();
            }),
            (i.getStartTime = function () {
              return this.startTime;
            }),
            (i.jh = function () {
              return this.endTime;
            }),
            (i.qc = function () {
              return this.startByte;
            }),
            (i.oc = function () {
              return this.endByte;
            }),
            (i.Gh = function () {
              return this.tilesLayout;
            }),
            (i.Fh = function () {
              return this.C;
            }),
            (i.Pc = function () {
              return this.status;
            }),
            (i.Xh = function () {
              this.status = bs;
            }),
            (i.Wh = function () {
              this.preload = !0;
            }),
            (i.isPreload = function () {
              return this.preload;
            }),
            (i.Xc = function () {
              this.j = !1;
            }),
            (i.Oh = function () {
              return this.j;
            }),
            (i.eg = function () {
              this.m = !0;
            }),
            (i.Qh = function () {
              return this.m;
            }),
            (i.dg = function () {
              this.J = !0;
            }),
            (i.Ph = function () {
              return this.J;
            }),
            (i.Vh = function () {
              this.A = !0;
            }),
            (i.Lh = function () {
              return this.A;
            }),
            (i.zg = function (e) {
              this.thumbnailSprite = e;
            }),
            (i.Dh = function () {
              return this.thumbnailSprite;
            }),
            (i.offset = function (e) {
              (this.startTime += e), (this.endTime += e), (this.i += e);
              for (var t = l(this.g), n = t.next(); !n.done; n = t.next())
                ((n = n.value).startTime += e), (n.endTime += e), (n.i += e);
            }),
            (i.zi = function (e) {
              null == this.B
                ? K("Sync attempted without sync time!")
                : ((e = this.B - e - this.startTime),
                  0.001 <= Math.abs(e) && this.offset(e));
            }),
            (i.yg = function (e, t) {
              (this.o = e), (this.K = void 0 !== t && t);
            }),
            (i.Xb = function (e) {
              var t = this.o;
              return (void 0 === e || e) && this.K && (this.o = null), t;
            }),
            B("shaka.media.SegmentReference", ms),
            (ms.prototype.getSegmentData = ms.prototype.Xb),
            (ms.prototype.setSegmentData = ms.prototype.yg),
            (ms.prototype.syncAgainst = ms.prototype.zi),
            (ms.prototype.offset = ms.prototype.offset),
            (ms.prototype.getThumbnailSprite = ms.prototype.Dh),
            (ms.prototype.setThumbnailSprite = ms.prototype.zg),
            (ms.prototype.hasByterangeOptimization = ms.prototype.Lh),
            (ms.prototype.markAsByterangeOptimization = ms.prototype.Vh),
            (ms.prototype.isLastPartial = ms.prototype.Ph),
            (ms.prototype.markAsLastPartial = ms.prototype.dg),
            (ms.prototype.isPartial = ms.prototype.Qh),
            (ms.prototype.markAsPartial = ms.prototype.eg),
            (ms.prototype.isIndependent = ms.prototype.Oh),
            (ms.prototype.markAsNonIndependent = ms.prototype.Xc),
            (ms.prototype.isPreload = ms.prototype.isPreload),
            (ms.prototype.markAsPreload = ms.prototype.Wh),
            (ms.prototype.markAsUnavailable = ms.prototype.Xh),
            (ms.prototype.getStatus = ms.prototype.Pc),
            (ms.prototype.getTileDuration = ms.prototype.Fh),
            (ms.prototype.getTilesLayout = ms.prototype.Gh),
            (ms.prototype.getEndByte = ms.prototype.oc),
            (ms.prototype.getStartByte = ms.prototype.qc),
            (ms.prototype.getEndTime = ms.prototype.jh),
            (ms.prototype.getStartTime = ms.prototype.getStartTime),
            (ms.prototype.getUris = ms.prototype.T);
          var ys = 0,
            bs = 1;
          function ws(e, t, n, i, r, a, o) {
            var s,
              u = new Ra().N("sidx", function (e) {
                s = (function (e, t, n, i, r, a, o) {
                  var s = [];
                  o.reader.skip(4);
                  var u = o.reader.M();
                  if (0 == u) throw new Me(2, 3, 3005);
                  if (0 == o.version)
                    var l = o.reader.M(),
                      c = o.reader.M();
                  else (l = o.reader.Cc()), (c = o.reader.Cc());
                  o.reader.skip(2);
                  var d = o.reader.kb();
                  for (e = e + o.size + c, c = 0; c < d; c++) {
                    var h = o.reader.M(),
                      f = (2147483648 & h) >>> 31;
                    h &= 2147483647;
                    var p = o.reader.M();
                    if ((o.reader.skip(4), 1 == f)) throw new Me(2, 3, 3006);
                    s.push(
                      new ms(
                        l / u + n,
                        (l + p) / u + n,
                        function () {
                          return a;
                        },
                        e,
                        e + h - 1,
                        t,
                        n,
                        i,
                        r
                      )
                    ),
                      (l += p),
                      (e += h);
                  }
                  return o.parser.stop(), s;
                })(t, i, r, a, o, n, e);
              });
            if ((e && u.parse(e), s)) return s;
            throw new Me(2, 3, 3004);
          }
          function xs(e) {
            (this.h = Ie(e)), (this.g = new Aa(this.h, 0));
          }
          function Ss(e) {
            var t = Ts(e);
            if (7 < t.length) throw new Me(2, 3, 3002);
            for (var n = 0, i = (t = l(t)).next(); !i.done; i = t.next())
              n = 256 * n + i.value;
            t = Ts(e);
            e: {
              for (var r = (i = l(As)).next(); !r.done; r = i.next())
                if (Se(t, new Uint8Array(r.value))) {
                  i = !0;
                  break e;
                }
              i = !1;
            }
            if (i) t = e.h.byteLength - e.g.ra();
            else {
              if (8 == t.length && 224 & t[1]) throw new Me(2, 3, 3001);
              for (r = i = 0; r < t.length; r++) {
                var a = t[r];
                i = 0 == r ? a & ((1 << (8 - t.length)) - 1) : 256 * i + a;
              }
              t = i;
            }
            return (
              (t =
                e.g.ra() + t <= e.h.byteLength ? t : e.h.byteLength - e.g.ra()),
              (i = Ie(e.h, e.g.ra(), t)),
              e.g.skip(t),
              new ks(n, i)
            );
          }
          function Ts(e) {
            var t = e.g.ra(),
              n = e.g.lb();
            if (0 == n) throw new Me(2, 3, 3002);
            return (
              (n = 8 - Math.floor(Math.log2(n))), e.g.skip(n - 1), Ae(e.h, t, n)
            );
          }
          (ms.Status = { Ii: ys, Pi: bs, Ni: 2 }),
            (xs.prototype.ya = function () {
              return this.g.ya();
            });
          var As = [
            [255],
            [127, 255],
            [63, 255, 255],
            [31, 255, 255, 255],
            [15, 255, 255, 255, 255],
            [7, 255, 255, 255, 255, 255],
            [3, 255, 255, 255, 255, 255, 255],
            [1, 255, 255, 255, 255, 255, 255, 255],
          ];
          function ks(e, t) {
            (this.id = e), (this.g = t);
          }
          function Is(e) {
            if (8 < e.g.byteLength) throw new Me(2, 3, 3002);
            if (8 == e.g.byteLength && 224 & e.g.getUint8(0))
              throw new Me(2, 3, 3001);
            for (var t = 0, n = 0; n < e.g.byteLength; n++) {
              t = 256 * t + e.g.getUint8(n);
            }
            return t;
          }
          function Cs(e) {
            var t = new xs(e.g);
            if (179 != (e = Ss(t)).id) throw new Me(2, 3, 3013);
            if (((e = Is(e)), 183 != (t = Ss(t)).id)) throw new Me(2, 3, 3012);
            t = new xs(t.g);
            for (var n = 0; t.ya(); ) {
              var i = Ss(t);
              if (241 == i.id) {
                n = Is(i);
                break;
              }
            }
            return { Ei: e, ji: n };
          }
          function Ms(e) {
            (this.g = e), (this.m = null), (this.i = 0), (this.o = !1);
          }
          function Es(e, t, n) {
            return new Ms([
              (e = new ms(
                e,
                e + t,
                function () {
                  return n;
                },
                0,
                null,
                null,
                e,
                e,
                e + t
              )),
            ]);
          }
          function Ds(e, t, n, i) {
            (this.i = e), (this.h = t), (this.g = n), (this.reverse = i);
          }
          function Ps() {
            Ms.call(this, []), (this.h = []);
          }
          function Ls(e, t, n) {
            if (!(t = hs(e, t, "Initialization"))) return null;
            var i = e.I.Ca(),
              r = t.attributes.sourceURL;
            r && (i = Ct(i, [yt(r)], e.eb())), (r = 0);
            var a = null;
            return (
              (t = kn(t, "range", Pn)) && ((r = t.start), (a = t.end)),
              ((n = new ps(
                function () {
                  return i;
                },
                r,
                a,
                Os(e),
                null,
                null,
                n,
                e.Z.encrypted
              )).codecs = e.I.codecs),
              (n.mimeType = e.I.mimeType),
              e.$ && (n.g = e.$.start + e.$.duration),
              n
            );
          }
          function Rs(e, t, n) {
            var i = Number(ds(e, _s, "presentationTimeOffset")) || 0,
              r = ds(e, _s, "timescale"),
              a = 1;
            r && (a = Rn(r) || 1);
            var o = i / a || 0,
              s = Ls(e, _s, n);
            !(function (e, t) {
              if ((js(e, t), !Us(e))) throw new Me(2, 4, 4002);
            })(e, s);
            var u = hn(e);
            return {
              Vb: function () {
                var e = hs(u, _s, "RepresentationIndex"),
                  n = u.I.Ca();
                return (
                  e &&
                    (e = yt(e.attributes.sourceURL)) &&
                    (n = Ct(n, [e], u.eb())),
                  (e = Us(u)),
                  Ns(u, t, s, n, e.start, e.end, o)
                );
              },
            };
          }
          function Ns(e, t, n, i, r, a, o) {
            var s, u, c, d, h, f, p, g, m, v, y, b, x, S, T, A, k, I;
            return P(function (C) {
              if (1 == C.g)
                return (
                  (s = e.presentationTimeline),
                  (u = !e.wb || !e.$.ag),
                  (c = e.$.start),
                  (d = e.$.duration),
                  (h = e.I.mimeType.split("/")[1]),
                  (p = null),
                  (g = [
                    (f = t)(i, r, a, !1),
                    "webm" == h ? f(n.T(), n.startByte, n.endByte, !0) : null,
                  ]),
                  (f = null),
                  w(C, Promise.all(g), 2)
                );
              if (
                ((m = C.h),
                (v = m[0]),
                (y = m[1] || null),
                null,
                (x = c - o),
                (S = c),
                (T = d ? c + d : 1 / 0),
                "mp4" == h)
              )
                var M = ws(v, r, i, n, x, S, T);
              else {
                M = v;
                var E = new xs(y);
                if (440786851 != Ss(E).id) throw new Me(2, 3, 3008);
                var D = Ss(E);
                if (408125543 != D.id) throw new Me(2, 3, 3009);
                (E = D.g.byteOffset), (D = new xs(D.g));
                for (var P = null; D.ya(); ) {
                  var L = Ss(D);
                  if (357149030 == L.id) {
                    P = L;
                    break;
                  }
                }
                if (!P) throw new Me(2, 3, 3010);
                for (P = new xs(P.g), L = 1e6, D = null; P.ya(); ) {
                  var R = Ss(P);
                  if (2807729 == R.id) L = Is(R);
                  else if (17545 == R.id)
                    if (4 == R.g.byteLength) D = R.g.getFloat32(0);
                    else {
                      if (8 != R.g.byteLength) throw new Me(2, 3, 3003);
                      D = R.g.getFloat64(0);
                    }
                }
                if (null == D) throw new Me(2, 3, 3011);
                if (((D *= P = L / 1e9), 475249515 != (M = Ss(new xs(M))).id))
                  throw new Me(2, 3, 3007);
                M = (function (e, t, n, i, r, a, o, s, u) {
                  function l() {
                    return r;
                  }
                  var c = [];
                  e = new xs(e.g);
                  for (var d = null, h = null; e.ya(); ) {
                    var f = Ss(e);
                    if (187 == f.id) {
                      var p = Cs(f);
                      p &&
                        ((f = n * p.Ei),
                        (p = t + p.ji),
                        null != d &&
                          c.push(new ms(d + o, f + o, l, h, p - 1, a, o, s, u)),
                        (d = f),
                        (h = p));
                    }
                  }
                  return (
                    null != d &&
                      c.push(new ms(d + o, i + o, l, h, null, a, o, s, u)),
                    c
                  );
                })(M, E, P, D, i, n, x, S, T);
              }
              for (A = l((b = M)), k = A.next(); !k.done; k = A.next())
                ((I = k.value).codecs = e.I.codecs),
                  (I.mimeType = e.I.mimeType),
                  (I.bandwidth = e.bandwidth);
              return s.Ye(b), (p = new Ms(b)), u && p.Nc(S, T, !0), C.return(p);
            });
          }
          function _s(e) {
            return e.Ec;
          }
          function Us(e) {
            var t = hs(e, _s, "RepresentationIndex");
            return (
              (e = Pn((e = ds(e, _s, "indexRange")) || "")),
              t && (e = kn(t, "range", Pn, e)),
              e
            );
          }
          function js(e, t) {
            var n = e.I.mimeType.split("/")[1];
            if (e.I.contentType != Lt && "mp4" != n && "webm" != n)
              throw new Me(2, 4, 4006);
            if ("webm" == n && !t) throw new Me(2, 4, 4005);
          }
          function Os(e) {
            var t = e.I;
            return {
              bandwidth: e.bandwidth,
              audioSamplingRate: t.audioSamplingRate,
              codecs: t.codecs,
              contentType: t.contentType,
              frameRate: t.frameRate || null,
              height: t.height || null,
              mimeType: t.mimeType,
              channelsCount: t.Id,
              pixelAspectRatio: t.pixelAspectRatio || null,
              width: t.width || null,
              label: e.Z.label || null,
              roles: e.roles || null,
              language: e.Z.language || null,
            };
          }
          function Bs(e, t, n) {
            var i = Ls(e, Fs, n),
              r = (function (e) {
                var t = (function (e) {
                  return [e.I.Bb, e.Z.Bb, e.ia.Bb]
                    .filter(Yi)
                    .map(function (e) {
                      return bn(e, "SegmentURL");
                    })
                    .reduce(function (e, t) {
                      return 0 < e.length ? e : t;
                    })
                    .map(function (t) {
                      return (
                        t.attributes.indexRange && !e.Re && (e.Re = !0),
                        {
                          Zh: yt(t.attributes.media),
                          start: (t = kn(t, "mediaRange", Pn, {
                            start: 0,
                            end: null,
                          })).start,
                          end: t.end,
                        }
                      );
                    });
                })(e);
                e = ls(e, Fs);
                var n = e.fd;
                0 == n && (n = 1);
                var i = 0;
                return (
                  e.Fa
                    ? (i = e.Fa * (n - 1))
                    : e.timeline &&
                      0 < e.timeline.length &&
                      (i = e.timeline[0].start),
                  {
                    Fa: e.Fa,
                    startTime: i,
                    fd: n,
                    Kb: e.Kb,
                    timeline: e.timeline,
                    yc: t,
                  }
                );
              })(e);
            if (!r.Fa && !r.timeline && 1 < r.yc.length)
              throw new Me(2, 4, 4002);
            if (!r.Fa && !e.$.duration && !r.timeline && 1 == r.yc.length)
              throw new Me(2, 4, 4002);
            if (r.timeline && 0 == r.timeline.length) throw new Me(2, 4, 4002);
            var a = null,
              o = null;
            e.ia.id &&
              e.I.id &&
              (o = t.get(e.ia.id + "," + e.I.id)) &&
              (a = o.segmentIndex);
            var s = (function (e, t, n, i, r, a, o, s, u, l) {
              var c = i.yc.length;
              i.timeline &&
                i.timeline.length != i.yc.length &&
                (c = Math.min(i.timeline.length, i.yc.length));
              for (
                var d = e - i.Kb,
                  h = t ? e + t : 1 / 0,
                  f = [],
                  p = i.startTime,
                  g = {},
                  m = 0;
                m < c;
                g = { Yd: void 0, Pd: void 0 }, m++
              ) {
                g.Pd = i.yc[m];
                var v = p;
                (p = void 0),
                  (p =
                    null != i.Fa
                      ? v + i.Fa
                      : i.timeline
                      ? i.timeline[m].end
                      : v + t),
                  (g.Yd = null),
                  ((g = new ms(
                    e + v,
                    e + p,
                    (function (e) {
                      return function () {
                        return (
                          null == e.Yd && (e.Yd = Ct(n(), [e.Pd.Zh], l())), e.Yd
                        );
                      };
                    })(g),
                    g.Pd.start,
                    g.Pd.end,
                    r,
                    d,
                    e,
                    h,
                    [],
                    "",
                    null,
                    null,
                    ys,
                    a
                  )).codecs = s),
                  (g.mimeType = o),
                  (g.bandwidth = u),
                  f.push(g);
              }
              return f;
            })(
              e.$.start,
              e.$.duration,
              e.I.Ca,
              r,
              i,
              n,
              e.I.mimeType,
              e.I.codecs,
              e.bandwidth,
              e.eb
            );
            return (
              (t = !a),
              a ? a.Ed(s, e.presentationTimeline.xb()) : (a = new Ms(s)),
              e.presentationTimeline.Ye(s),
              (e.wb && e.$.ag) ||
                a.Nc(
                  e.$.start,
                  e.$.duration ? e.$.start + e.$.duration : 1 / 0,
                  t
                ),
              o && (o.segmentIndex = a),
              {
                Vb: function () {
                  return (
                    (a && 0 != a.getNumReferences()) || a.Dd(s),
                    Promise.resolve(a)
                  );
                },
              }
            );
          }
          function Fs(e) {
            return e.Bb;
          }
          function Hs(t, n, i, r, a, o, s, u, c) {
            c || t.I.yd || (t.I.yd = ds(t, Vs, "initialization"));
            var d = t.I.yd
                ? (function (e, t) {
                    var n = e.I.yd;
                    if ((n || (n = ds(e, Vs, "initialization")), !n))
                      return null;
                    n = yt(n);
                    var i = e.I.originalId,
                      r = e.bandwidth || null,
                      a = e.I.Ca,
                      o = e.eb;
                    return (
                      (t = new ps(
                        function () {
                          var e = us(n, i, null, null, r, null);
                          return Ct(a(), [e], o());
                        },
                        0,
                        null,
                        Os(e),
                        null,
                        null,
                        t,
                        e.Z.encrypted
                      )),
                      (t.codecs = e.I.codecs),
                      (t.mimeType = e.I.mimeType),
                      e.$ && (t.g = e.$.start + e.$.duration),
                      t
                    );
                  })(t, s)
                : null,
              h = (function (e) {
                var t = ls(e, Vs),
                  n = ds(e, Vs, "media"),
                  i = ds(e, Vs, "index"),
                  r = ds(e, Vs, "k"),
                  a = 0;
                return (
                  r && (a = parseInt(r, 10)),
                  {
                    Wd: t.Wd,
                    Fa: t.Fa,
                    timescale: t.timescale,
                    fd: t.fd,
                    Kb: t.Kb,
                    yf: t.yf,
                    timeline: t.timeline,
                    Hb: n && yt(n),
                    Tc: i,
                    mimeType: e.I.mimeType,
                    codecs: e.I.codecs,
                    bandwidth: e.bandwidth,
                    $h: a,
                  }
                );
              })(t);
            !(function (e) {
              var t = e.Tc ? 1 : 0;
              if (((t += e.timeline ? 1 : 0), (t += e.Fa ? 1 : 0), 0 == t))
                throw new Me(2, 4, 4002);
              if (
                (1 != t &&
                  (e.Tc && (e.timeline = null), (e.Wd = null), (e.Fa = null)),
                !e.Tc && !e.Hb)
              )
                throw new Me(2, 4, 4002);
            })(h);
            var f = hn(t);
            if (h.Tc)
              return (
                js(t, d),
                {
                  Vb: function () {
                    var e = us(
                      h.Tc,
                      f.I.originalId,
                      null,
                      null,
                      f.bandwidth || null,
                      null
                    );
                    return (
                      (e = Ct(f.I.Ca(), [e])), Ns(f, n, d, e, 0, null, h.Kb)
                    );
                  },
                }
              );
            if (h.Fa)
              return (
                r ||
                  "image" === t.Z.contentType ||
                  "text" === t.Z.contentType ||
                  ((i = t.$.start),
                  (r = t.ia.id),
                  (c = t.$.duration),
                  (r = (r = (null != r && o.get(r)) || c) ? i + r : 1 / 0),
                  t.presentationTimeline.Xe(h.Fa),
                  t.presentationTimeline.ig(i, r)),
                {
                  Vb: function () {
                    return (function (t, n, i, r, a, o, s, u) {
                      function c(i) {
                        var a = i - y,
                          s = a * v,
                          l = n.Wd,
                          c = a * l;
                        "BigInt" in e &&
                          c > Number.MAX_SAFE_INTEGER &&
                          (c = BigInt(a) * BigInt(l)),
                          (a = (s += p) + v),
                          (l = Math.min(a, h()));
                        var d = [],
                          f = n.$h;
                        if (f)
                          for (
                            var g = (l - s) / f, m = {}, k = 0;
                            k < f;
                            m = { Dg: void 0 }, k++
                          ) {
                            var I = s + g * k,
                              C = I + g;
                            (m.Dg = k + 1),
                              ((m = new ms(
                                I,
                                C,
                                (function (e) {
                                  return function () {
                                    var t = us(b, x, i, e.Dg, w, c);
                                    return Ct(S(), [t], T());
                                  };
                                })(m),
                                0,
                                null,
                                r,
                                A,
                                p,
                                h(),
                                [],
                                "",
                                null,
                                null,
                                ys,
                                o
                              )).codecs = t.I.codecs),
                              (m.mimeType = t.I.mimeType),
                              0 == u ? 0 < k && m.Xc() : 0 != k % u && m.Xc(),
                              d.push(m);
                          }
                        return (
                          ((s = new ms(
                            s,
                            l,
                            function () {
                              if (f) return [];
                              var e = us(b, x, i, null, w, c);
                              return Ct(S(), [e], T());
                            },
                            0,
                            null,
                            r,
                            A,
                            p,
                            h(),
                            d,
                            "",
                            null,
                            null,
                            ys,
                            o,
                            0 < d.length
                          )).codecs = t.I.codecs),
                          (s.mimeType = t.I.mimeType),
                          (s.bandwidth = t.bandwidth),
                          (s.i = a),
                          s
                        );
                      }
                      function d() {
                        var e = [
                          Math.max(f.xb(), p),
                          Math.min(f.Gb(), h()),
                        ].map(function (e) {
                          return e - p;
                        });
                        return (
                          (e = [Math.ceil(e[0] / v), Math.ceil(e[1] / v) - 1]),
                          t.I.Na && e[1]++,
                          e.map(function (e) {
                            return e + y;
                          })
                        );
                      }
                      function h() {
                        var e = (null != g && a.get(g)) || m;
                        return e ? p + e : 1 / 0;
                      }
                      var f = t.presentationTimeline,
                        p = t.$.start,
                        g = t.ia.id,
                        m = t.$.duration,
                        v = n.Fa,
                        y = n.fd,
                        b = n.Hb,
                        w = t.bandwidth || null,
                        x = t.I.id,
                        S = t.I.Ca,
                        T = t.eb,
                        A = p - n.Kb,
                        k = d();
                      (i = t.wb ? Math.max(k[0], k[1] - i + 1) : k[0]),
                        (s = s || k[1]),
                        (k = []);
                      for (var I = i; I <= s; ++I) {
                        var C = c(I);
                        k.push(C);
                      }
                      var M = new Ms(k);
                      if (((k = f.Gb() < h()), (I = f.R()), k || I)) {
                        var E = Math.max(i, s + 1);
                        (i = v),
                          t.I.Na && (i = 0.1),
                          M.Xd(i, function () {
                            var e = f.xb();
                            M.Ba(e);
                            var t = l(d());
                            t.next(), (t = t.next().value);
                            for (var n = []; E <= t; ) {
                              var i = c(E);
                              n.push(i), E++;
                            }
                            return e > h() && !n.length ? null : n;
                          });
                      }
                      return Promise.resolve(M);
                    })(f, h, a, d, o, s, u, t.I.Qd);
                  },
                }
              );
            var p = null;
            (r = r = null),
              t.ia.id &&
                t.I.id &&
                ((r = t.ia.id + "," + t.I.id), (r = i.get(r))) &&
                (p = r.segmentIndex);
            var g = t.$.start,
              m = t.$.duration ? g + t.$.duration : 1 / 0;
            return (
              p
                ? (Gs((i = p), h, g, m, d), i.Ba(t.presentationTimeline.xb()))
                : (p = new zs(
                    h,
                    t.I.originalId,
                    t.bandwidth,
                    t.I.Ca,
                    t.eb,
                    g,
                    m,
                    d,
                    s,
                    t.I.Qd
                  )),
              h.timeline &&
                "image" !== t.Z.contentType &&
                "text" !== t.Z.contentType &&
                t.presentationTimeline.jg(p.h ? p.h.timeline : [], g),
              r && t.wb && (r.segmentIndex = p),
              {
                Vb: function () {
                  return (
                    p instanceof zs &&
                      0 == p.getNumReferences() &&
                      Gs(p, h, g, m, d),
                    Promise.resolve(p)
                  );
                },
              }
            );
          }
          function Vs(e) {
            return e.Lb;
          }
          function zs(e, t, n, i, r, a, o, s, u, l) {
            Ms.call(this, []),
              (this.h = e),
              (this.D = t),
              (this.B = n),
              (this.C = i),
              (this.G = r),
              (this.j = a),
              (this.l = o),
              (this.s = s),
              (this.A = u),
              (this.F = l),
              qs(this);
          }
          function Gs(e, t, n, i, r) {
            if (
              ((function (e, t) {
                if (e.s !== t) {
                  e.s = t;
                  for (var n = (e = l(e.g)).next(); !n.done; n = e.next())
                    (n = n.value) && vs(n, t);
                }
              })(e, r),
              e.h)
            ) {
              if (
                ((n = e.h.timeline),
                e.h.Hb !== t.Hb && (e.h.Hb = t.Hb),
                n.length)
              ) {
                var a = n[n.length - 1];
                t = t.timeline.filter(function (e) {
                  return e.end > a.end;
                });
              } else t = t.timeline.slice();
              0 < t.length && e.h.timeline.push.apply(e.h.timeline, c(t)),
                e.l !== i && (e.l = i);
            } else (e.h = t), (e.j = n), (e.l = i);
            qs(e);
          }
          function qs(e) {
            if (e.h && !e.o) {
              for (
                var t = [], n = l(e.h.timeline), i = n.next();
                !i.done;
                i = n.next()
              )
                (i = i.value).start >= e.l || 0 >= i.end || t.push(i);
              (e.h.timeline = t), e.Ba(e.j);
            }
          }
          function Ks(e, t, n, i, r, a, o, s) {
            return (
              (e = us(e, t, n, a, i || null, r)),
              Ct(o(), [e], s()).map(function (e) {
                return e.toString();
              })
            );
          }
          function Ws() {}
          function Xs(e, t) {
            Ys.set(e, t);
          }
          ((i = Ms.prototype).getNumReferences = function () {
            return this.g.length;
          }),
            (i.getNumEvicted = function () {
              return this.i;
            }),
            (i.release = function () {
              this.o ||
                ((this.g = []), this.m && this.m.stop(), (this.m = null));
            }),
            (i.Yh = function () {
              this.o = !0;
            }),
            (i.Tb = function (e) {
              for (var t = l(this.g), n = t.next(); !n.done; n = t.next())
                e(n.value);
            }),
            (i.find = function (e) {
              for (var t = this.g.length - 1, n = t; 0 <= n; --n) {
                var i = this.g[n],
                  r = n < t ? this.g[n + 1].startTime : i.endTime;
                if (e >= i.startTime && e < r) return n + this.i;
              }
              return this.g.length && e < this.g[0].startTime ? this.i : null;
            }),
            (i.get = function (e) {
              return 0 == this.g.length ||
                0 > (e -= this.i) ||
                e >= this.g.length
                ? null
                : this.g[e];
            }),
            (i.offset = function (e) {
              if (!this.o)
                for (var t = l(this.g), n = t.next(); !n.done; n = t.next())
                  n.value.offset(e);
            }),
            (i.Dd = function (e) {
              if (!this.o && e.length) {
                var t = Math.round(1e3 * e[0].startTime) / 1e3;
                (this.g = this.g.filter(function (e) {
                  return Math.round(1e3 * e.startTime) / 1e3 < t;
                })),
                  this.g.push.apply(this.g, c(e));
              }
            }),
            (i.Ed = function (e, t) {
              var n = this;
              (e = e.filter(function (e) {
                return (
                  e.endTime > t &&
                  (0 == n.g.length || e.endTime > n.g[0].startTime)
                );
              })),
                this.Dd(e),
                this.Ba(t);
            }),
            (i.Ba = function (e) {
              if (!this.o) {
                var t = this.g.length;
                (this.g = this.g.filter(function (t) {
                  return t.endTime > e;
                })),
                  (this.i += t - this.g.length);
              }
            }),
            (i.Nc = function (e, t, n) {
              if (((n = void 0 !== n && n), !this.o)) {
                for (
                  ;
                  this.g.length && this.g[this.g.length - 1].startTime >= t;

                )
                  this.g.pop();
                for (; this.g.length && this.g[0].endTime <= e; )
                  this.g.shift(), n || this.i++;
                0 != this.g.length &&
                  (((t = new ms(
                    (e = this.g[this.g.length - 1]).startTime,
                    t,
                    e.G,
                    e.startByte,
                    e.endByte,
                    e.ha,
                    e.l,
                    e.F,
                    e.D,
                    e.g,
                    e.tilesLayout,
                    e.C,
                    e.B,
                    e.status,
                    e.aesKey
                  )).mimeType = e.mimeType),
                  (t.codecs = e.codecs),
                  (t.h = e.h),
                  (this.g[this.g.length - 1] = t));
              }
            }),
            (i.Xd = function (e, t) {
              var n = this;
              this.o ||
                (this.m && this.m.stop(),
                (this.m = new je(function () {
                  var e = t();
                  e ? n.g.push.apply(n.g, c(e)) : (n.m.stop(), (n.m = null));
                })),
                this.m.ta(e));
            }),
            (Ms.prototype[Symbol.iterator] = function () {
              return this.ob(0);
            }),
            (Ms.prototype.ob = function (e, t, n) {
              (t = void 0 !== t && t), (n = void 0 !== n && n);
              var i = this.find(e);
              if (null == i) return null;
              var r = this.get(i);
              n ? i++ : i--;
              var a = -1;
              if (r && 0 < r.g.length)
                for (var o = r.g.length - 1; 0 <= o; --o) {
                  var s = r.g[o];
                  if (e >= s.startTime && e < s.endTime) {
                    if (!t) {
                      for (; o && !s.j; ) o--, (s = r.g[o]);
                      if (!s.j)
                        return K("No independent partial segment found!"), null;
                    }
                    n ? i-- : i++, (a = o - 1);
                    break;
                  }
                }
              return new Ds(this, i, a, n);
            }),
            B("shaka.media.SegmentIndex", Ms),
            (Ms.forSingleSegment = Es),
            (Ms.prototype.getIteratorForTime = Ms.prototype.ob),
            (Ms.prototype.updateEvery = Ms.prototype.Xd),
            (Ms.prototype.fit = Ms.prototype.Nc),
            (Ms.prototype.evict = Ms.prototype.Ba),
            (Ms.prototype.mergeAndEvict = Ms.prototype.Ed),
            (Ms.prototype.offset = Ms.prototype.offset),
            (Ms.prototype.get = Ms.prototype.get),
            (Ms.prototype.find = Ms.prototype.find),
            (Ms.prototype.markImmutable = Ms.prototype.Yh),
            (Ms.prototype.release = Ms.prototype.release),
            (Ms.prototype.getNumEvicted = Ms.prototype.getNumEvicted),
            (Ms.prototype.getNumReferences = Ms.prototype.getNumReferences),
            ((i = Ds.prototype).Fc = function (e) {
              this.reverse = e;
            }),
            (i.Yg = function () {
              return this.h;
            }),
            (i.current = function () {
              var e = this.i.get(this.h);
              return (
                e &&
                  0 < e.g.length &&
                  e.s &&
                  this.g >= e.g.length &&
                  (this.h++, (this.g = 0), (e = this.i.get(this.h))),
                e && 0 < e.g.length ? e.g[this.g] : e
              );
            }),
            (i.next = function () {
              var e = this.i.get(this.h);
              return (
                this.reverse
                  ? e && 0 < e.g.length
                    ? (this.g--,
                      0 > this.g &&
                        (this.h--,
                        (this.g =
                          (e = this.i.get(this.h)) && 0 < e.g.length
                            ? e.g.length - 1
                            : 0)))
                    : (this.h--, (this.g = 0))
                  : e && 0 < e.g.length
                  ? (this.g++,
                    e.s && this.g == e.g.length && (this.h++, (this.g = 0)))
                  : (this.h++, (this.g = 0)),
                { value: (e = this.current()), done: !e }
              );
            }),
            (i.gf = function () {
              var e = this.current();
              if (e.m && !e.j && (e = this.i.get(this.h)) && 0 < e.g.length)
                for (var t = e.g[this.g]; t.j && !(0 >= this.g); )
                  this.g--, (t = e.g[this.g]);
            }),
            B("shaka.media.SegmentIterator", Ds),
            (Ds.prototype.resetToLastIndependent = Ds.prototype.gf),
            (Ds.prototype.next = Ds.prototype.next),
            (Ds.prototype.current = Ds.prototype.current),
            (Ds.prototype.currentPosition = Ds.prototype.Yg),
            (Ds.prototype.setReverse = Ds.prototype.Fc),
            m(Ps, Ms),
            ((i = Ps.prototype).clone = function () {
              var e = new Ps();
              return (e.h = this.h.slice()), (e.i = this.i), e;
            }),
            (i.release = function () {
              for (var e = l(this.h), t = e.next(); !t.done; t = e.next())
                t.value.release();
              this.h = [];
            }),
            (i.Tb = function (e) {
              for (var t = l(this.h), n = t.next(); !n.done; n = t.next())
                n.value.Tb(e);
            }),
            (i.find = function (e) {
              for (
                var t = this.i, n = l(this.h), i = n.next();
                !i.done;
                i = n.next()
              ) {
                var r = (i = i.value).find(e);
                if (null != r) return r + t;
                t += i.getNumEvicted() + i.getNumReferences();
              }
              return null;
            }),
            (i.get = function (e) {
              for (
                var t = this.i, n = l(this.h), i = n.next();
                !i.done;
                i = n.next()
              ) {
                var r = (i = i.value).get(e - t);
                if (r) return r;
                (r = i.getNumReferences()), (t += i.getNumEvicted() + r);
              }
              return null;
            }),
            (i.offset = function () {}),
            (i.Dd = function () {}),
            (i.Ba = function (e) {
              for (var t = l(this.h), n = t.next(); !n.done; n = t.next())
                n.value.Ba(e);
              for (; 1 < this.h.length && 0 == this.h[0].getNumReferences(); )
                (e = this.h.shift()),
                  (this.i += e.getNumEvicted()),
                  e.release();
            }),
            (i.Ed = function () {}),
            (i.Nc = function () {}),
            (i.Xd = function () {}),
            B("shaka.media.MetaSegmentIndex", Ps),
            (Ps.prototype.updateEvery = Ps.prototype.Xd),
            (Ps.prototype.fit = Ps.prototype.Nc),
            (Ps.prototype.mergeAndEvict = Ps.prototype.Ed),
            (Ps.prototype.evict = Ps.prototype.Ba),
            (Ps.prototype.merge = Ps.prototype.Dd),
            (Ps.prototype.offset = Ps.prototype.offset),
            (Ps.prototype.get = Ps.prototype.get),
            (Ps.prototype.find = Ps.prototype.find),
            (Ps.prototype.forEachTopLevelReference = Ps.prototype.Tb),
            (Ps.prototype.release = Ps.prototype.release),
            m(zs, Ms),
            ((i = zs.prototype).getNumReferences = function () {
              return this.h ? this.h.timeline.length : 0;
            }),
            (i.release = function () {
              Ms.prototype.release.call(this), (this.h = null);
            }),
            (i.Ba = function (e) {
              if (this.h) {
                for (
                  var t = 0, n = this.h.timeline, i = 0;
                  i < n.length && n[i].end + this.j <= e;
                  i += 1
                )
                  t += 1;
                0 < t &&
                  ((this.h.timeline = n.slice(t)),
                  this.g.length >= t && (this.g = this.g.slice(t)),
                  (this.i += t),
                  0 === this.getNumReferences() && this.release());
              }
            }),
            (i.find = function (e) {
              if (
                this.h &&
                this.h.timeline &&
                this.h.timeline.length &&
                e < this.h.timeline[0].start + this.j
              )
                return this.i;
              if (!this.h) return null;
              var t = this.h.timeline;
              if (e < this.j || e >= this.l) return null;
              for (var n = t.length - 1, i = 0; i < t.length; i++) {
                var r = t[i],
                  a = r.start + this.j;
                if (
                  ((r =
                    i < n
                      ? t[i + 1].start + this.j
                      : 1 / 0 === this.l
                      ? r.end + this.j
                      : this.l),
                  e >= a && e < r)
                )
                  return i + this.i;
              }
              return null;
            }),
            (i.get = function (e) {
              var t = this;
              if (0 > (e -= this.i) || e >= this.getNumReferences() || !this.h)
                return null;
              var n = this.g[e];
              if (!n) {
                var i = this.h.timeline[e],
                  r = i.ri,
                  a = i.zf + this.h.yf;
                n = this.j - this.h.Kb;
                var o = this.j + i.end,
                  s = o;
                e === this.getNumReferences() - 1 &&
                  1 / 0 !== this.l &&
                  (s = Math.min(s, this.l));
                for (
                  var u = this.h.codecs,
                    l = this.h.mimeType,
                    c = this.h.bandwidth,
                    d = [],
                    h = (i.end - i.start) / i.Kd,
                    f = {},
                    p = 0;
                  p < i.Kd;
                  f = { Zd: void 0, Eg: void 0 }, p++
                ) {
                  var g = i.start + h * p,
                    m = g + h;
                  (f.Eg = p + 1),
                    (f.Zd = null),
                    ((f = new ms(
                      this.j + g,
                      this.j + m,
                      (function (e) {
                        return function () {
                          return t.h
                            ? (null == e.Zd &&
                                (e.Zd = Ks(
                                  t.h.Hb,
                                  t.D,
                                  r,
                                  t.B,
                                  a,
                                  e.Eg,
                                  t.C,
                                  t.G
                                )),
                              e.Zd)
                            : [];
                        };
                      })(f),
                      0,
                      null,
                      this.s,
                      n,
                      this.j,
                      this.l,
                      [],
                      "",
                      null,
                      null,
                      ys,
                      this.A
                    )).codecs = u),
                    (f.mimeType = l),
                    (f.bandwidth = c),
                    0 == this.F ? 0 < p && f.Xc() : 0 != p % this.F && f.Xc(),
                    d.push(f);
                }
                ((n = new ms(
                  this.j + i.start,
                  s,
                  function () {
                    return 0 < i.Kd || !t.h
                      ? []
                      : Ks(t.h.Hb, t.D, r, t.B, a, null, t.C, t.G);
                  },
                  0,
                  null,
                  this.s,
                  n,
                  this.j,
                  this.l,
                  d,
                  "",
                  null,
                  null,
                  ys,
                  this.A,
                  0 < i.Kd
                )).codecs = u),
                  (n.mimeType = l),
                  (n.i = o),
                  (n.bandwidth = c),
                  (this.g[e] = n);
              }
              return n;
            }),
            (i.Tb = function (e) {
              qs(this);
              for (var t = 0; t < this.getNumReferences(); t++) {
                var n = this.get(t + this.i);
                n && e(n);
              }
            }),
            B("shaka.media.ManifestParser", Ws),
            (Ws.unregisterParserByMime = function (e) {
              Ys.delete(e);
            }),
            (Ws.registerParserByMime = Xs),
            (Ws.registerParserByExtension = function () {
              te(
                "ManifestParser.registerParserByExtension",
                "Please use an ManifestParser with registerParserByMime function."
              );
            }),
            (Ws.AccessibilityPurpose = {
              Qi: "visually impaired",
              Ji: "hard of hearing",
            });
          var Ys = new Map();
          function Js(e, t, n) {
            (this.i = e),
              (this.F = t),
              (this.m = this.l = 1 / 0),
              (this.h = 1),
              (this.g = this.j = null),
              (this.o = 0),
              (this.B = !0),
              (this.J = !1),
              (this.G = 0),
              (this.C = void 0 === n || n),
              (this.D = 0),
              (this.A = !1),
              (this.s = e);
          }
          function $s(e) {
            for (
              var t = new Set(), n = [], i = (e = l(e)).next();
              !i.done;
              i = e.next()
            ) {
              var r = Ri((i = i.value));
              t.has(r) || (n.push(i), t.add(r));
            }
            return (
              (t = Pt("audio", n)),
              (i = Pt("video", n)),
              (e = Pt(Lt, n)),
              (i = (function (e) {
                if (1 >= e.length) return e;
                var t = e.find(function (e) {
                  return (
                    e.startsWith("dvav.") ||
                    e.startsWith("dva1.") ||
                    e.startsWith("dvh1.") ||
                    e.startsWith("dvhe.") ||
                    e.startsWith("dav1.") ||
                    e.startsWith("dvc1.") ||
                    e.startsWith("dvi1.")
                  );
                });
                return t
                  ? Ft('video/mp4; codecs="' + t + '"')
                    ? [t]
                    : e.filter(function (e) {
                        return e != t;
                      })
                  : e;
              })(i)),
              (t = t.concat(i).concat(e)),
              n.length && !t.length ? n : t
            );
          }
          function Zs(e) {
            (this.o = null),
              (this.A = e),
              (this.F = new Jo()),
              (this.j = []),
              (this.h = null),
              (this.m = []),
              (this.B = null),
              (this.D = []),
              (this.C = 300),
              (this.l = new Map()),
              (this.i = new Map()),
              (this.g = null),
              (this.s = "UNKNOWN");
          }
          function Qs(e, t) {
            var n, i, r, a, o, s, u;
            return P(function (l) {
              return 1 == l.g
                ? ((n = Ct(e.j, [eu(e, t)])),
                  (i = es(n, e.o.retryParameters)),
                  (r = e.A.networkingEngine.request(8, i)),
                  $o(e.F, r),
                  S(l, 2),
                  w(l, r.promise, 4))
                : 2 != l.g
                ? ((a = l.h),
                  (o = ht(a.data)),
                  1 == (s = JSON.parse(o)).VERSION &&
                    (function (e, t, n) {
                      null != e.g && (e.g.stop(), (e.g = null));
                      var i = t["RELOAD-URI"] || n;
                      (e.g = new je(function () {
                        Qs(e, i);
                      })),
                        (n = t.TTL) && (e.C = n);
                      e.g.ea(e.C),
                        (e.m = t["PATHWAY-PRIORITY"] || []),
                        (e.D = t["PATHWAY-CLONES"] || []);
                    })(e, s, a.uri),
                  T(l, 0))
                : (u = A(l)) && 7001 == u.code
                ? l.return()
                : (null != e.g && (e.g.stop(), (e.g = null)),
                  (e.g = new je(function () {
                    Qs(e, t);
                  })),
                  e.g.ea(e.C),
                  void x(l));
            });
          }
          function eu(e, t) {
            if (!e.m.length) return t;
            t = new oe(t);
            var n = e.B || e.m[0],
              i = Math.round(e.A.getBandwidthEstimate()),
              r = t.g;
            return (
              "DASH" == e.s
                ? (r.add("_DASH_pathway", n),
                  r.add("_DASH_throughput", String(i)))
                : "HLS" == e.s &&
                  (r.add("_HLS_pathway", n),
                  r.add("_HLS_throughput", String(i))),
              we(r),
              r.Jc && ce(t, r),
              t.toString()
            );
          }
          function tu(e, t, n, i) {
            var r = e.l.get(t);
            r || (r = new Map()), r.set(n, i), e.l.set(t, r);
          }
          function nu(e, t, n) {
            (n = void 0 !== n && n), (t = e.l.get(t) || new Map());
            for (
              var i = [], r = l(e.m), a = r.next(), o = {};
              !a.done;
              o = { Ac: void 0 }, a = r.next()
            )
              if (((o.Ac = a.value), (a = t.get(o.Ac))))
                i.push({ cf: o.Ac, location: a });
              else if (
                (a = e.D.find(
                  (function (e) {
                    return function (t) {
                      return t.Ki == e.Ac;
                    };
                  })(o)
                ))
              ) {
                var s = t.get(a["BASE-ID"]);
                s &&
                  (a["URI-REPLACEMENT"].Lg
                    ? (ue((s = new oe(s)), a["URI-REPLACEMENT"].Lg),
                      i.push({ cf: o.Ac, location: s.toString() }))
                    : i.push({ cf: o.Ac, location: s }));
              }
            for (
              r = Date.now(), a = (o = l(e.i.keys())).next();
              !a.done;
              a = o.next()
            )
              (a = a.value), r > (s = e.i.get(a)) && e.i.delete(a);
            if (
              ((i = i.filter(function (t) {
                for (var n = l(e.i.keys()), i = n.next(); !i.done; i = n.next())
                  if (i.value.includes(new oe(t.location).gb)) return !1;
                return !0;
              })),
              i.length && (e.B = i[0].cf),
              (i = i.map(function (e) {
                return e.location;
              })),
              !i.length && e.h)
            )
              for (o = (r = l(e.h.split(","))).next(); !o.done; o = r.next())
                (o = t.get(o.value)) && ((e.B = e.h), i.push(o));
            if (!i.length)
              for (r = (t = l(t.values())).next(); !r.done; r = t.next())
                i.push(r.value);
            return n ? i : Ct(e.j, i);
          }
          function iu(e, t, n, i, r) {
            return (
              (e = es(e, i, r)),
              (0 == t && null == n) ||
                (e.headers.Range = n
                  ? "bytes=" + t + "-" + n
                  : "bytes=" + t + "-"),
              e
            );
          }
          function ru() {
            (this.l = []),
              (this.h = []),
              (this.g = []),
              (this.j = []),
              (this.i = []),
              (this.s = this.o = !1),
              (this.m = new Set());
          }
          function au(e, t) {
            for (
              var n = [], i = [], r = [], a = [], o = (e = l(e)).next();
              !o.done;
              o = e.next()
            ) {
              var s = o.value;
              o = new Map(
                s.audioStreams.map(function (e) {
                  return [Cu(e), e];
                })
              );
              var u = new Map(
                  s.videoStreams.map(function (e) {
                    return [Iu(e), e];
                  })
                ),
                c = new Map(
                  s.textStreams.map(function (e) {
                    return [Mu(e), e];
                  })
                );
              if (
                ((s = new Map(
                  s.imageStreams.map(function (e) {
                    return [Eu(e), e];
                  })
                )),
                t)
              ) {
                var d = Su(Lt);
                c.set(Mu(d), d), (d = Su("image")), s.set(Eu(d), d);
              }
              n.push(o), i.push(u), r.push(c), a.push(s);
            }
            return { Ff: n, Jg: i, Fg: r, Yf: a };
          }
          function ou(e, t, n, i, r) {
            var a,
              o,
              s,
              u,
              c,
              d,
              h,
              f,
              p,
              g,
              m,
              v,
              y,
              b,
              x,
              S,
              T,
              A,
              k = cu,
              I = du;
            return P(function (C) {
              switch (C.g) {
                case 1:
                  for (a = [], o = 0; o < n.length; o++)
                    o >= i ? a.push(new Set(n[o].values())) : a.push(new Set());
                  (s = l(t)), (u = s.next());
                case 2:
                  if (u.done) {
                    C.u(4);
                    break;
                  }
                  return (
                    (c = u.value),
                    w(
                      C,
                      (function (e, t, n, i, r, a, o) {
                        return P(function (s) {
                          return 1 == s.g
                            ? (hu(e, n, t, 0 < o),
                              t.matchedStreams
                                ? t.segmentIndex
                                  ? w(s, su(t, i + o), 2)
                                  : s.u(2)
                                : s.return(!1))
                            : (lu(t, i, r, a, o), s.return(!0));
                        });
                      })(e, c, n, i, I, a, r),
                      5
                    )
                  );
                case 5:
                  if (!C.h) throw new Me(2, 4, 4037);
                  (u = s.next()), C.u(2);
                  break;
                case 4:
                  for (d = l(a), h = d.next(); !h.done; h = d.next())
                    for (
                      f = h.value, p = l(f), g = p.next();
                      !g.done;
                      g = p.next()
                    )
                      (m = g.value), (v = uu(e, m, n, k, I, a)) && t.push(v);
                  for (y = l(a), b = y.next(); !b.done; b = y.next())
                    for (
                      x = b.value, S = l(x), T = S.next(), A = {};
                      !T.done;
                      A = { qf: void 0 }, T = S.next()
                    )
                      if (
                        ((A.qf = T.value),
                        !ku(A.qf) &&
                          t.some(
                            (function (t) {
                              return function (n) {
                                return gu(e, t.qf, n);
                              };
                            })(A)
                          ))
                      )
                        throw new Me(2, 4, 4037);
                  return C.return(t);
              }
            });
          }
          function su(e, t) {
            var n, i, r, a, o, s;
            return P(function (u) {
              if (1 == u.g) {
                for (n = [], i = e.matchedStreams, r = t; r < i.length; r++)
                  (a = i[r]),
                    n.push(a.createSegmentIndex()),
                    a.trickModeVideo &&
                      !a.trickModeVideo.segmentIndex &&
                      n.push(a.trickModeVideo.createSegmentIndex()),
                    a.dependencyStream &&
                      !a.dependencyStream.segmentIndex &&
                      n.push(a.dependencyStream.createSegmentIndex());
                return w(u, Promise.all(n), 2);
              }
              if (e.segmentIndex instanceof Ps)
                for (o = t; o < i.length; o++)
                  (s = i[o]).segmentIndex &&
                    e.segmentIndex.h.push(s.segmentIndex);
              x(u);
            });
          }
          function uu(e, t, n, i, r, a) {
            if (ku(t)) return null;
            var o = i(t);
            return (
              hu(e, n, o),
              o.createSegmentIndex &&
                (o.createSegmentIndex = function () {
                  return P(function (e) {
                    return o.segmentIndex
                      ? e.u(0)
                      : ((o.segmentIndex = new Ps()), w(e, su(o, 0), 0));
                  });
                }),
              o.matchedStreams && o.matchedStreams.length
                ? (lu(o, 0, r, a, 0), o)
                : null
            );
          }
          function lu(e, t, n, i, r) {
            var a = e.matchedStreams;
            for (t += r; t < a.length; t++) {
              var o = a[t];
              n(e, o);
              var s = !0;
              if (
                ("audio" == e.type &&
                  0 == nr(e.language, o.language) &&
                  (s = !1),
                s && (i[t - r].delete(o), o.fullMimeTypes))
              )
                for (
                  s = (o = l(o.fullMimeTypes.values())).next();
                  !s.done;
                  s = o.next()
                )
                  e.fullMimeTypes.add(s.value);
            }
          }
          function cu(e) {
            var t = Object.assign({}, e);
            return (
              (t.originalId = null),
              (t.createSegmentIndex = function () {
                return Promise.resolve();
              }),
              (t.closeSegmentIndex = function () {
                if (
                  (t.segmentIndex &&
                    (t.segmentIndex.release(), (t.segmentIndex = null)),
                  t.matchedStreams)
                )
                  for (
                    var e = l(t.matchedStreams), n = e.next();
                    !n.done;
                    n = e.next()
                  )
                    (n = n.value).segmentIndex &&
                      (n.segmentIndex.release(), (n.segmentIndex = null));
              }),
              (t.roles = t.roles.slice()),
              (t.segmentIndex = null),
              (t.emsgSchemeIdUris = []),
              (t.keyIds = new Set(e.keyIds)),
              (t.closedCaptions = e.closedCaptions
                ? new Map(e.closedCaptions)
                : null),
              (t.trickModeVideo = null),
              (t.dependencyStream = null),
              t
            );
          }
          function du(e, t) {
            function n(e, t) {
              e || (e = []);
              for (var n = (t = l(t)).next(); !n.done; n = t.next())
                (n = n.value), e.includes(n) || e.push(n);
              return e;
            }
            (e.roles = n(e.roles, t.roles)),
              t.emsgSchemeIdUris &&
                (e.emsgSchemeIdUris = n(
                  e.emsgSchemeIdUris,
                  t.emsgSchemeIdUris
                ));
            for (var i = l(t.keyIds), r = i.next(); !r.done; r = i.next())
              e.keyIds.add(r.value);
            if (
              (null == e.originalId
                ? (e.originalId = t.originalId)
                : (i = t.originalId || "") &&
                  !e.originalId.endsWith(i) &&
                  (e.originalId += "," + i),
              (i = Pe(e.drmInfos, t.drmInfos)),
              t.drmInfos.length && e.drmInfos.length && !i.length)
            )
              throw new Me(2, 4, 4038);
            if (
              ((e.drmInfos = i),
              (e.encrypted = e.encrypted || t.encrypted),
              t.closedCaptions)
            )
              for (
                e.closedCaptions || (e.closedCaptions = new Map()),
                  r = (i = l(t.closedCaptions)).next();
                !r.done;
                r = i.next()
              ) {
                var a = l(r.value);
                (r = a.next().value),
                  (a = a.next().value),
                  e.closedCaptions.set(r, a);
              }
            e.bandwidth &&
              t.bandwidth &&
              (e.bandwidth = Math.max(e.bandwidth, t.bandwidth)),
              t.trickModeVideo
                ? (e.trickModeVideo ||
                    ((e.trickModeVideo = cu(t.trickModeVideo)),
                    (e.trickModeVideo.matchedStreams = []),
                    (e.trickModeVideo.createSegmentIndex = function () {
                      if (e.trickModeVideo.segmentIndex)
                        return Promise.resolve();
                      for (
                        var t = new Ps(),
                          n = l(e.trickModeVideo.matchedStreams),
                          i = n.next();
                        !i.done;
                        i = n.next()
                      )
                        t.h.push(i.value.segmentIndex);
                      return (
                        (e.trickModeVideo.segmentIndex = t), Promise.resolve()
                      );
                    })),
                  e.trickModeVideo.matchedStreams.push(t.trickModeVideo),
                  du(e.trickModeVideo, t.trickModeVideo))
                : e.trickModeVideo &&
                  (e.trickModeVideo.matchedStreams.push(t),
                  du(e.trickModeVideo, t)),
              t.dependencyStream
                ? (e.dependencyStream ||
                    ((e.dependencyStream = cu(t.dependencyStream)),
                    (e.dependencyStream.matchedStreams = []),
                    (e.dependencyStream.createSegmentIndex = function () {
                      if (e.dependencyStream.segmentIndex)
                        return Promise.resolve();
                      for (
                        var t = new Ps(),
                          n = l(e.dependencyStream.matchedStreams),
                          i = n.next();
                        !i.done;
                        i = n.next()
                      )
                        t.h.push(i.value.segmentIndex);
                      return (
                        (e.dependencyStream.segmentIndex = t), Promise.resolve()
                      );
                    })),
                  e.dependencyStream.matchedStreams.push(t.dependencyStream),
                  du(e.dependencyStream, t.dependencyStream))
                : e.dependencyStream &&
                  (e.dependencyStream.matchedStreams.push(t),
                  du(e.dependencyStream, t));
          }
          function hu(e, t, n, i) {
            i = void 0 !== i && i ? n.matchedStreams : [];
            for (var r = (t = l(t)).next(); !r.done; r = t.next()) {
              if (!(r = fu(e, r.value, n))) return;
              i.push(r);
            }
            n.matchedStreams = i;
          }
          function fu(e, t, n) {
            var i = { audio: Cu, video: Iu, text: Mu, image: Eu }[n.type],
              r = null,
              a = i(n);
            if (t.has(a)) r = t.get(a);
            else {
              a = {
                audio: function (t, n) {
                  return gu(e, t, n);
                },
                video: function (t, n) {
                  return gu(e, t, n);
                },
                text: mu,
                image: vu,
              }[n.type];
              for (
                var o = { audio: yu, video: bu, text: wu, image: xu }[n.type],
                  s = l(t.values()),
                  u = s.next();
                !u.done;
                u = s.next()
              )
                !a(n, (u = u.value)) ||
                  n.fastSwitching != u.fastSwitching ||
                  (r && !o(n, r, u)) ||
                  (r = u);
            }
            return e.s && !ku(r) && t.delete(i(r)), r;
          }
          function pu(e, t) {
            return e.mimeType == t.mimeType && Du(e.codecs) === Du(t.codecs);
          }
          function gu(e, t, n) {
            return (
              !(e = !pu(t, n) && !e.o) &&
                (e = t.drmInfos) &&
                ((t = t.drmInfos),
                (n = n.drmInfos),
                (e = !(
                  !t.length ||
                  !n.length ||
                  t === n ||
                  0 < Pe(t, n).length
                ))),
              !e
            );
          }
          function mu(e, t) {
            return (
              !t.language ||
              (e.forced === t.forced &&
                0 != nr(e.language, t.language) &&
                t.kind == e.kind)
            );
          }
          function vu() {
            return !0;
          }
          function yu(e, t, n) {
            var i = pu(e, t),
              r = pu(e, n);
            if (i && !r) return !1;
            if (!i && r) return !0;
            if (
              ((i = nr(e.language, t.language)),
              (r = nr(e.language, n.language)) > i)
            )
              return !0;
            if (r < i) return !1;
            if (t.label !== n.label) {
              if (e.label === t.label) return !1;
              if (e.label === n.label) return !0;
            }
            if (e.roles.length) {
              if (
                ((i = t.roles.filter(function (t) {
                  return e.roles.includes(t);
                })),
                (r = n.roles.filter(function (t) {
                  return e.roles.includes(t);
                })).length > i.length)
              )
                return !0;
              if (r.length < i.length) return !1;
              if (n.roles.length !== t.roles.length)
                return n.roles.length < t.roles.length;
            } else {
              if (!n.roles.length && t.roles.length) return !0;
              if (n.roles.length && !t.roles.length) return !1;
            }
            return (
              !(t.primary || !n.primary) ||
              (!(t.primary && !n.primary) &&
                ((i = Tu(e.channelsCount, t.channelsCount, n.channelsCount)) ==
                  Pu ||
                  (i != Ru &&
                    ((i = Tu(
                      e.audioSamplingRate,
                      t.audioSamplingRate,
                      n.audioSamplingRate
                    )) == Pu ||
                      (i != Ru &&
                        !(
                          !e.bandwidth ||
                          Au(e.bandwidth, t.bandwidth, n.bandwidth) != Pu
                        ))))))
            );
          }
          function bu(e, t, n) {
            var i = pu(e, t),
              r = pu(e, n);
            if (i && !r) return !1;
            if (!i && r) return !0;
            if (
              (i = Tu(
                e.width * e.height,
                t.width * t.height,
                n.width * n.height
              )) == Pu
            )
              return !0;
            if (i == Ru) return !1;
            if (e.frameRate) {
              if ((i = Tu(e.frameRate, t.frameRate, n.frameRate)) == Pu)
                return !0;
              if (i == Ru) return !1;
            }
            return !(
              !e.bandwidth || Au(e.bandwidth, t.bandwidth, n.bandwidth) != Pu
            );
          }
          function wu(e, t, n) {
            var i = nr(e.language, t.language),
              r = nr(e.language, n.language);
            if (r > i) return !0;
            if (r < i) return !1;
            if (!t.primary && n.primary) return !0;
            if (t.primary && !n.primary) return !1;
            if (t.label !== n.label) {
              if (e.label === t.label) return !1;
              if (e.label === n.label) return !0;
            }
            if (e.roles.length) {
              if (
                ((i = t.roles.filter(function (t) {
                  return e.roles.includes(t);
                })),
                (r = n.roles.filter(function (t) {
                  return e.roles.includes(t);
                })).length > i.length)
              )
                return !0;
              if (r.length < i.length) return !1;
            } else {
              if (!n.roles.length && t.roles.length) return !0;
              if (n.roles.length && !t.roles.length) return !1;
            }
            return (
              n.mimeType == e.mimeType &&
              n.codecs == e.codecs &&
              (t.mimeType != e.mimeType || t.codecs != e.codecs)
            );
          }
          function xu(e, t, n) {
            return (
              Tu(e.width * e.height, t.width * t.height, n.width * n.height) ==
              Pu
            );
          }
          function Su(e) {
            return {
              id: 0,
              originalId: "",
              groupId: null,
              createSegmentIndex: function () {
                return Promise.resolve();
              },
              segmentIndex: new Ms([]),
              mimeType: "",
              codecs: "",
              encrypted: !1,
              drmInfos: [],
              keyIds: new Set(),
              language: "",
              originalLanguage: null,
              label: null,
              type: e,
              primary: !1,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: null,
              roles: [],
              forced: !1,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: !1,
              closedCaptions: null,
              accessibilityPurpose: null,
              external: !1,
              fastSwitching: !1,
              fullMimeTypes: new Set(),
              isAudioMuxedInVideo: !1,
              baseOriginalId: null,
            };
          }
          function Tu(e, t, n) {
            if (t == e && e != n) return Ru;
            if (n == e && e != t) return Pu;
            if (t > e) {
              if (n <= e || n - e < t - e) return Pu;
              if (n - e > t - e) return Ru;
            } else {
              if (n > e) return Ru;
              if (e - n < e - t) return Pu;
              if (e - n > e - t) return Ru;
            }
            return Lu;
          }
          function Au(e, t, n) {
            return (
              (t = Math.abs(e - t)),
              (e = Math.abs(e - n)) < t ? Pu : t < e ? Ru : Lu
            );
          }
          function ku(e) {
            switch (e.type) {
              case Lt:
                return !e.language;
              case "image":
                return !e.tilesLayout;
              default:
                return !1;
            }
          }
          function Iu(e) {
            return JSON.stringify([
              e.fastSwitching,
              e.width,
              e.frameRate,
              Du(e.codecs),
              e.mimeType,
              e.label,
              e.roles,
              e.closedCaptions ? Array.from(e.closedCaptions.entries()) : null,
              e.bandwidth,
              e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
              Array.from(e.keyIds),
            ]);
          }
          function Cu(e) {
            return JSON.stringify([
              e.fastSwitching,
              e.channelsCount,
              e.language,
              e.bandwidth,
              e.label,
              Du(e.codecs),
              e.mimeType,
              e.roles,
              e.audioSamplingRate,
              e.primary,
              e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
              Array.from(e.keyIds),
            ]);
          }
          function Mu(e) {
            return JSON.stringify([
              e.language,
              e.label,
              e.codecs,
              e.mimeType,
              e.bandwidth,
              e.roles,
            ]);
          }
          function Eu(e) {
            return JSON.stringify([e.width, e.codecs, e.mimeType]);
          }
          function Du(e) {
            if (!Nu.has(e)) {
              var t = Li(e);
              Nu.set(e, t);
            }
            return Nu.get(e);
          }
          ((i = Js.prototype).getDuration = function () {
            return this.l;
          }),
            (i.rh = function () {
              return this.h;
            }),
            (i.wi = function (e) {
              this.i = e;
            }),
            (i.nb = function (e) {
              this.l = e;
            }),
            (i.yh = function () {
              return this.i;
            }),
            (i.wg = function (e) {
              this.o = e;
            }),
            (i.Sd = function (e) {
              e && !this.B && (this.J = !0), (this.B = e);
            }),
            (i.pf = function (e) {
              this.m = e;
            }),
            (i.vd = function () {
              return this.m;
            }),
            (i.xg = function (e) {
              this.F = e;
            }),
            (i.ih = function () {
              return this.F;
            }),
            (i.jg = function (e, t) {
              if (0 != e.length) {
                var n = (Date.now() + this.o) / 1e3;
                if (
                  0 !=
                  (e = e.filter(function (e) {
                    return e.start + t < n;
                  })).length
                ) {
                  var i = e[e.length - 1].end + t;
                  this.Hd(e[0].start + t),
                    (this.h = e.reduce(function (e, t) {
                      return Math.max(e, t.end - t.start);
                    }, this.h)),
                    (this.g = Math.max(this.g, i)),
                    null != this.i &&
                      this.C &&
                      !this.A &&
                      (this.i = n - this.g - this.h);
                }
              }
            }),
            (i.Ye = function (e) {
              if (0 != e.length) {
                for (
                  var t = e[0].startTime,
                    n = e[0].endTime,
                    i = (Date.now() + this.o) / 1e3,
                    r = (e = l(e)).next();
                  !r.done;
                  r = e.next()
                )
                  i < (r = r.value).startTime ||
                    ((t = Math.min(t, r.startTime)),
                    (n = Math.max(n, r.endTime)),
                    (this.h = Math.max(this.h, r.endTime - r.startTime)));
                this.Hd(t),
                  (this.g = Math.max(this.g, n)),
                  null != this.i &&
                    this.C &&
                    !this.A &&
                    (this.i = i - this.g - this.h);
              }
            }),
            (i.ig = function (e, t) {
              this.Hd(e),
                1 / 0 == t || this.R() || (this.g = Math.max(this.g, t));
            }),
            (i.sh = function () {
              return this.g;
            }),
            (i.Ve = function () {
              this.A = !0;
            }),
            (i.Rh = function () {
              return this.A;
            }),
            (i.ui = function (e) {
              this.s = e;
            }),
            (i.nh = function () {
              return this.s;
            }),
            (i.Hd = function (e) {
              null == this.j
                ? (this.j = e)
                : this.J || (this.j = Math.min(this.j, e));
            }),
            (i.Xe = function (e) {
              this.h = Math.max(this.h, e);
            }),
            (i.offset = function (e) {
              null != this.j && (this.j += e), null != this.g && (this.g += e);
            }),
            (i.R = function () {
              return 1 / 0 == this.l && !this.B;
            }),
            (i.wc = function () {
              return 1 / 0 != this.l && !this.B;
            }),
            (i.xb = function () {
              return Math.max(this.G, this.Gb() - this.m);
            }),
            (i.Bg = function (e) {
              this.G = e;
            }),
            (i.Gb = function () {
              return this.R() || this.wc()
                ? Math.min(
                    Math.max(0, (Date.now() + this.o) / 1e3 - this.h - this.i) +
                      this.D,
                    this.l
                  )
                : this.g
                ? Math.min(this.g, this.l)
                : this.l;
            }),
            (i.Oc = function (e) {
              var t = Math.max(this.j, this.G);
              return 1 / 0 == this.m
                ? Math.ceil(1e3 * t) / 1e3
                : Math.max(t, Math.min(this.Gb() - this.m + e, this.bb()));
            }),
            (i.pb = function () {
              return this.Oc(0);
            }),
            (i.bb = function () {
              return Math.max(
                0,
                this.Gb() - (this.R() || this.wc() ? this.F : 0)
              );
            }),
            (i.Hg = function () {
              return !(null == this.i || (null != this.g && this.C));
            }),
            (i.vg = function (e) {
              this.D = e;
            }),
            (i.eh = function () {
              return this.D;
            }),
            B("shaka.media.PresentationTimeline", Js),
            (Js.prototype.getAvailabilityTimeOffset = Js.prototype.eh),
            (Js.prototype.setAvailabilityTimeOffset = Js.prototype.vg),
            (Js.prototype.usingPresentationStartTime = Js.prototype.Hg),
            (Js.prototype.getSeekRangeEnd = Js.prototype.bb),
            (Js.prototype.getSeekRangeStart = Js.prototype.pb),
            (Js.prototype.getSafeSeekRangeStart = Js.prototype.Oc),
            (Js.prototype.getSegmentAvailabilityEnd = Js.prototype.Gb),
            (Js.prototype.setUserSeekStart = Js.prototype.Bg),
            (Js.prototype.getSegmentAvailabilityStart = Js.prototype.xb),
            (Js.prototype.isInProgress = Js.prototype.wc),
            (Js.prototype.isLive = Js.prototype.R),
            (Js.prototype.offset = Js.prototype.offset),
            (Js.prototype.notifyMaxSegmentDuration = Js.prototype.Xe),
            (Js.prototype.notifyMinSegmentStartTime = Js.prototype.Hd),
            (Js.prototype.getInitialProgramDateTime = Js.prototype.nh),
            (Js.prototype.setInitialProgramDateTime = Js.prototype.ui),
            (Js.prototype.isStartTimeLocked = Js.prototype.Rh),
            (Js.prototype.lockStartTime = Js.prototype.Ve),
            (Js.prototype.getMaxSegmentEndTime = Js.prototype.sh),
            (Js.prototype.notifyPeriodDuration = Js.prototype.ig),
            (Js.prototype.notifySegments = Js.prototype.Ye),
            (Js.prototype.notifyTimeRange = Js.prototype.jg),
            (Js.prototype.getDelay = Js.prototype.ih),
            (Js.prototype.setDelay = Js.prototype.xg),
            (Js.prototype.getSegmentAvailabilityDuration = Js.prototype.vd),
            (Js.prototype.setSegmentAvailabilityDuration = Js.prototype.pf),
            (Js.prototype.setStatic = Js.prototype.Sd),
            (Js.prototype.setClockOffset = Js.prototype.wg),
            (Js.prototype.getPresentationStartTime = Js.prototype.yh),
            (Js.prototype.setDuration = Js.prototype.nb),
            (Js.prototype.setPresentationStartTime = Js.prototype.wi),
            (Js.prototype.getMaxSegmentDuration = Js.prototype.rh),
            (Js.prototype.getDuration = Js.prototype.getDuration),
            (Zs.prototype.configure = function (e) {
              this.o = e;
            }),
            (Zs.prototype.destroy = function () {
              return (
                (this.A = this.o = null),
                (this.j = []),
                (this.h = null),
                (this.m = []),
                (this.D = []),
                this.l.clear(),
                null != this.g && (this.g.stop(), (this.g = null)),
                this.F.destroy()
              );
            }),
            (Zs.prototype.setManifestType = function (e) {
              this.s = e;
            }),
            (Zs.prototype.banLocation = function (e) {
              this.i.set(e, Date.now() + 6e4);
            }),
            ((i = ru.prototype).release = function () {
              for (
                var e = l(this.h.concat(this.g, this.j, this.i)), t = e.next();
                !t.done;
                t = e.next()
              )
                (t = t.value).segmentIndex && t.segmentIndex.release();
              (this.h = []),
                (this.g = []),
                (this.j = []),
                (this.i = []),
                (this.l = []),
                (this.s = this.o = !1),
                this.m.clear();
            }),
            (i.Hh = function () {
              return this.l;
            }),
            (i.Qe = function () {
              return this.j.slice();
            }),
            (i.lh = function () {
              return this.i;
            }),
            (i.Lf = function (e, t) {
              if (e) {
                if ("audio" == e.type)
                  for (var n = l(this.h), i = n.next(); !i.done; i = n.next())
                    (i = i.value).matchedStreams = i.matchedStreams.filter(
                      function (t) {
                        return t !== e;
                      }
                    );
                else if ("video" == e.type)
                  for (i = (n = l(this.g)).next(); !i.done; i = n.next())
                    ((i = i.value).matchedStreams = i.matchedStreams.filter(
                      function (t) {
                        return t !== e;
                      }
                    )),
                      i.trickModeVideo &&
                        (i.trickModeVideo.matchedStreams =
                          i.trickModeVideo.matchedStreams.filter(function (t) {
                            return t !== e;
                          })),
                      i.dependencyStream &&
                        (i.dependencyStream.matchedStreams =
                          i.dependencyStream.matchedStreams.filter(function (
                            t
                          ) {
                            return t !== e;
                          }));
                else if (e.type == Lt)
                  for (i = (n = l(this.j)).next(); !i.done; i = n.next())
                    (i = i.value).matchedStreams = i.matchedStreams.filter(
                      function (t) {
                        return t !== e;
                      }
                    );
                else if ("image" == e.type)
                  for (i = (n = l(this.i)).next(); !i.done; i = n.next())
                    (i = i.value).matchedStreams = i.matchedStreams.filter(
                      function (t) {
                        return t !== e;
                      }
                    );
                e.segmentIndex && e.closeSegmentIndex(), this.m.delete(t);
              }
            }),
            (i.re = function (e, t, n) {
              n = void 0 !== n && n;
              var i,
                r,
                a,
                o,
                s,
                u,
                c,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b,
                S,
                T,
                A,
                k,
                I,
                C,
                M,
                E,
                D,
                L,
                R,
                N,
                _,
                U,
                j,
                O,
                B = this;
              return P(function (P) {
                if (1 == P.g) {
                  if (((i = Rt), !t && 1 == e.length))
                    return (
                      (r = au(e, !1)),
                      (a = r.Ff),
                      (o = r.Jg),
                      (s = r.Fg),
                      (u = r.Yf),
                      (B.h = Array.from(a[0].values())),
                      (B.g = Array.from(o[0].values())),
                      (B.j = Array.from(s[0].values())),
                      (B.i = Array.from(u[0].values())),
                      P.u(2)
                    );
                  for (c = n ? B.m.size : 0, d = -1, h = 0; h < e.length; h++)
                    (f = e[h]),
                      B.m.has(f.id) || (B.m.add(f.id), -1 == d && (d = h));
                  return -1 == d
                    ? P.return()
                    : ((p = au(e, !0)),
                      (g = p.Ff),
                      (m = p.Jg),
                      (v = p.Fg),
                      (y = p.Yf),
                      w(
                        P,
                        Promise.all([
                          ou(B, B.h, g, d, c),
                          ou(B, B.g, m, d, c),
                          ou(B, B.j, v, d, c),
                          ou(B, B.i, y, d, c),
                        ]),
                        2
                      ));
                }
                if (((b = 0), (S = []), B.g.length && B.h.length))
                  for (E = l(B.h), D = E.next(); !D.done; D = E.next())
                    for (
                      L = D.value, R = l(B.g), N = R.next();
                      !N.done;
                      N = R.next()
                    )
                      (_ = N.value),
                        (U = Pe(L.drmInfos, _.drmInfos)),
                        (L.drmInfos.length && _.drmInfos.length && !U.length) ||
                          ((j = (L.bandwidth || 0) + (_.bandwidth || 0)),
                          L.dependencyStream &&
                            (j += L.dependencyStream.bandwidth || 0),
                          _.dependencyStream &&
                            (j += _.dependencyStream.bandwidth || 0),
                          (O = b++),
                          S.push({
                            id: O,
                            language: L.language,
                            disabledUntilTime: 0,
                            primary: L.primary,
                            audio: L,
                            video: _,
                            bandwidth: j,
                            drmInfos: U,
                            allowedByApplication: !0,
                            allowedByKeySystem: !0,
                            decodingInfos: [],
                          }));
                else
                  for (
                    T = B.g.length ? B.g : B.h, A = l(T), k = A.next();
                    !k.done;
                    k = A.next()
                  )
                    (I = k.value),
                      (C = b++),
                      (M = I.bandwidth || 0),
                      I.dependencyStream &&
                        (M += I.dependencyStream.bandwidth || 0),
                      S.push({
                        id: C,
                        language: I.language,
                        disabledUntilTime: 0,
                        primary: I.primary,
                        audio: I.type == i.P ? I : null,
                        video: I.type == i.ja ? I : null,
                        bandwidth: M,
                        drmInfos: I.drmInfos,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      });
                (B.l = S), x(P);
              });
            }),
            (i.ug = function (e) {
              this.o = e;
            }),
            (i.Ag = function (e) {
              this.s = e;
            }),
            B("shaka.util.PeriodCombiner", ru),
            (ru.prototype.setUseStreamOnce = ru.prototype.Ag),
            (ru.prototype.setAllowMultiTypeVariants = ru.prototype.ug),
            (ru.prototype.combinePeriods = ru.prototype.re),
            (ru.prototype.deleteStream = ru.prototype.Lf),
            (ru.prototype.getImageStreams = ru.prototype.lh),
            (ru.prototype.getTextStreams = ru.prototype.Qe),
            (ru.prototype.getVariants = ru.prototype.Hh);
          var Pu = 1,
            Lu = 0,
            Ru = -1,
            Nu = new Map();
          function _u() {}
          function Uu(e) {
            return new oe((e = pt(e))).gb;
          }
          function ju(e, t, n) {
            function i(e) {
              Ie(a).setUint32(o, e.byteLength, !0),
                (o += 4),
                a.set(Ae(e), o),
                (o += e.byteLength);
            }
            if (!n || !n.byteLength) throw new Me(2, 6, 6015);
            var r;
            (r = "string" == typeof t ? mt(t, !0) : t),
              (e = mt((e = pt(e)), !0));
            var a = new Uint8Array(
                12 + e.byteLength + r.byteLength + n.byteLength
              ),
              o = 0;
            return i(e), i(r), i(n), a;
          }
          function Ou(e, t, n) {
            return "skd" !== t
              ? e
              : ((t = n.serverCertificate),
                ju(e, (n = pt(e).split("skd://").pop()), t));
          }
          function Bu(e, t) {
            2 === e &&
              (e = t.drmInfo) &&
              Re(e.keySystem) &&
              (t.headers["Content-Type"] = "application/octet-stream");
          }
          function Fu(e, t, n) {
            for (
              n = void 0 === n || n,
                this.h = e,
                this.g = new Set([e]),
                t = (e = l((t = t || []))).next();
              !t.done;
              t = e.next()
            )
              this.add(t.value, n);
          }
          function Hu(e, t) {
            if (e.mimeType != t.mimeType) return !1;
            if (
              ((e = e.codecs.split(",").map(function (e) {
                return Ri(e);
              })),
              (t = t.codecs.split(",").map(function (e) {
                return Ri(e);
              })),
              e.length != t.length)
            )
              return !1;
            e.sort(), t.sort();
            for (var n = 0; n < e.length; n++) if (e[n] != t[n]) return !1;
            return !0;
          }
          function Vu(e, t) {
            if (
              ((e = new Set(e)),
              (t = new Set(t)),
              e.delete("main"),
              t.delete("main"),
              e.size != t.size)
            )
              return !1;
            for (var n = (e = l(e)).next(); !n.done; n = e.next())
              if (!t.has(n.value)) return !1;
            return !0;
          }
          function zu() {}
          function Gu() {
            this.g = null;
          }
          function qu() {}
          function Ku(e, t, n, i, r) {
            var a,
              o = r in i,
              s = o
                ? n.constructor == Object && 0 == Object.keys(i).length
                : n.constructor == Object && 0 == Object.keys(n).length,
              u = o || s,
              l = !0;
            for (a in t) {
              var c = r + "." + a,
                d = o ? i[r] : n[a];
              u || a in n
                ? void 0 === t[a]
                  ? void 0 === d || u
                    ? delete e[a]
                    : (e[a] = dn(d))
                  : s
                  ? (e[a] = t[a])
                  : d.constructor == Object &&
                    t[a] &&
                    t[a].constructor == Object
                  ? (e[a] || (e[a] = dn(d)),
                    (c = Ku(e[a], t[a], d, i, c)),
                    (l = l && c))
                  : typeof t[a] != typeof d ||
                    null == t[a] ||
                    ("function" != typeof t[a] &&
                      t[a].constructor != d.constructor)
                  ? (K("Invalid config, wrong type for " + c), (l = !1))
                  : "function" == typeof n[a] && n[a].length != t[a].length
                  ? (W("Unexpected number of arguments for " + c),
                    (e[a] = t[a]))
                  : (e[a] = Array.isArray(e[a]) ? t[a].slice() : t[a])
                : (K("Invalid config, unrecognized key " + c), (l = !1));
            }
            return l;
          }
          function Wu(e, t) {
            for (
              var n = {}, i = n, r = 0, a = 0;
              !(0 > (r = e.indexOf(".", r)));

            )
              (0 != r && "\\" == e[r - 1]) ||
                ((i[(a = e.substring(a, r).replace(/\\\./g, "."))] = {}),
                (i = i[a]),
                (a = r + 1)),
                (r += 1);
            return (i[e.substring(a).replace(/\\\./g, ".")] = t), n;
          }
          function Xu(e, t) {
            return e && t;
          }
          function Yu(e, t) {
            function n(e) {
              return e && "object" == typeof e && !Array.isArray(e);
            }
            return (
              (e = (function e(t, i) {
                return Object.keys(t).reduce(function (r, a) {
                  var o = t[a];
                  return (
                    i.hasOwnProperty(a)
                      ? o instanceof HTMLElement && i[a] instanceof HTMLElement
                        ? o.isEqualNode(i[a]) || (r[a] = o)
                        : n(o) && n(i[a])
                        ? ((o = e(o, i[a])),
                          (0 < Object.keys(o).length || !n(o)) && (r[a] = o))
                        : Array.isArray(o) && Array.isArray(i[a])
                        ? (function (e, t) {
                            var n;
                            if ((n || (n = tn), e.length != t.length))
                              return !1;
                            t = t.slice();
                            for (
                              var i = (e = l(e)).next(), r = {};
                              !i.done;
                              r = { bg: void 0 }, i = e.next()
                            ) {
                              if (
                                ((r.bg = i.value),
                                -1 ==
                                  (i = t.findIndex(
                                    (function (e) {
                                      return function (t) {
                                        return n(e.bg, t);
                                      };
                                    })(r)
                                  )))
                              )
                                return !1;
                              (t[i] = t[t.length - 1]), t.pop();
                            }
                            return 0 == t.length;
                          })(o, i[a]) || (r[a] = o)
                        : (Number.isNaN(o) && Number.isNaN(i[a])) ||
                          (o !== i[a] && (r[a] = o))
                      : (r[a] = o),
                    r
                  );
                }, {});
              })(e, t)),
              (function e(t) {
                for (
                  var i = l(Object.keys(t)), r = i.next();
                  !r.done;
                  r = i.next()
                )
                  if (!(t[(r = r.value)] instanceof HTMLElement))
                    if (n(t[r]) && 0 === Object.keys(t[r]).length) delete t[r];
                    else {
                      var a = t[r];
                      (Array.isArray(a) && 0 === a.length) ||
                      "function" == typeof t[r]
                        ? delete t[r]
                        : n(t[r]) &&
                          (e(t[r]),
                          0 === Object.keys(t[r]).length && delete t[r]);
                    }
              })(e),
              e
            );
          }
          function Ju() {}
          function $u() {
            var t = 1 / 0;
            navigator.connection && navigator.connection.saveData && (t = 360);
            var n = {
              retryParameters: {
                maxAttempts: 2,
                baseDelay: 1e3,
                backoffFactor: 2,
                fuzzFactor: 0.5,
                timeout: 3e4,
                stallTimeout: 5e3,
                connectionTimeout: 1e4,
              },
              servers: {},
              clearKeys: {},
              advanced: {},
              delayLicenseRequestUntilPlayed: !1,
              persistentSessionOnlinePlayback: !1,
              persistentSessionsMetadata: [],
              initDataTransform: function (t, n, i) {
                return (
                  "apple" === e.shakaMediaKeysPolyfill &&
                    "skd" == n &&
                    ((n = i.serverCertificate), (t = ju(t, (i = Uu(t)), n))),
                  t
                );
              },
              logLicenseExchange: !1,
              updateExpirationTime: 1,
              preferredKeySystems: [],
              keySystemsMapping: {},
              parseInbandPsshEnabled: He(),
              minHdcpVersion: "",
              ignoreDuplicateInitData: !it("Tizen 2"),
              defaultAudioRobustnessForWidevine: "SW_SECURE_CRYPTO",
              defaultVideoRobustnessForWidevine: "SW_SECURE_DECODE",
            };
            (He() || Je()) &&
              n.preferredKeySystems.push("com.microsoft.playready"),
              et() &&
                !Fe() &&
                (n.keySystemsMapping = {
                  "com.microsoft.playready":
                    "com.microsoft.playready.recommendation",
                });
            var i = "reload",
              r = !1;
            !Ht() ||
              Ve() ||
              Je() ||
              Ye() ||
              (Ge() && 79 === We()) ||
              (Ke() && !tt() && !nt()) ||
              (et() && Fe()) ||
              ((i = "smooth"), (r = !0)),
              (r = {
                retryParameters: {
                  maxAttempts: 2,
                  baseDelay: 1e3,
                  backoffFactor: 2,
                  fuzzFactor: 0.5,
                  timeout: 3e4,
                  stallTimeout: 5e3,
                  connectionTimeout: 1e4,
                },
                availabilityWindowOverride: NaN,
                disableAudio: !1,
                disableVideo: !1,
                disableText: !1,
                disableThumbnails: !1,
                disableIFrames: !1,
                defaultPresentationDelay: 0,
                segmentRelativeVttTiming: !1,
                raiseFatalErrorOnManifestUpdateRequestFailure: !1,
                continueLoadingWhenPaused: !0,
                ignoreSupplementalCodecs: !1,
                updatePeriod: -1,
                ignoreDrmInfo: !1,
                dash: {
                  clockSyncUri: "",
                  disableXlinkProcessing: !0,
                  xlinkFailGracefully: !1,
                  ignoreMinBufferTime: !1,
                  autoCorrectDrift: !0,
                  initialSegmentLimit: 1e3,
                  ignoreSuggestedPresentationDelay: !1,
                  ignoreEmptyAdaptationSet: !1,
                  ignoreMaxSegmentDuration: !1,
                  keySystemsByURI: {
                    "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":
                      "org.w3.clearkey",
                    "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":
                      "org.w3.clearkey",
                    "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":
                      "com.widevine.alpha",
                    "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":
                      "com.microsoft.playready",
                    "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":
                      "com.microsoft.playready",
                    "urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":
                      "com.apple.fps",
                    "urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":
                      "com.huawei.wiseplay",
                  },
                  manifestPreprocessor: el,
                  manifestPreprocessorTXml: tl,
                  sequenceMode: !1,
                  multiTypeVariantsAllowed: r,
                  useStreamOnceInPeriodFlattening: !1,
                  enableFastSwitching: !0,
                },
                hls: {
                  ignoreTextStreamFailures: !1,
                  ignoreImageStreamFailures: !1,
                  defaultAudioCodec: "mp4a.40.2",
                  defaultVideoCodec: "avc1.42E01E",
                  ignoreManifestProgramDateTime: !1,
                  ignoreManifestProgramDateTimeForTypes: [],
                  mediaPlaylistFullMimeType:
                    'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',
                  liveSegmentsDelay: 3,
                  sequenceMode: ot(),
                  ignoreManifestTimestampsInSegmentsMode: !1,
                  disableCodecGuessing: !1,
                  disableClosedCaptionsDetection: !1,
                  allowLowLatencyByteRangeOptimization: !0,
                  allowRangeRequestsToGuessMimeType: !1,
                },
                mss: {
                  manifestPreprocessor: el,
                  manifestPreprocessorTXml: tl,
                  sequenceMode: !1,
                  keySystemsBySystemId: {
                    "9a04f079-9840-4286-ab92-e65be0885f95":
                      "com.microsoft.playready",
                    "79f0049a-4098-8642-ab92-e65be0885f95":
                      "com.microsoft.playready",
                  },
                },
              });
            var a = {
              retryParameters: {
                maxAttempts: 2,
                baseDelay: 1e3,
                backoffFactor: 2,
                fuzzFactor: 0.5,
                timeout: 3e4,
                stallTimeout: 5e3,
                connectionTimeout: 1e4,
              },
              failureCallback: function (e) {
                return Xu([e]);
              },
              rebufferingGoal: 0,
              bufferingGoal: 10,
              bufferBehind: 30,
              evictionGoal: 1,
              ignoreTextStreamFailures: !1,
              alwaysStreamText: !1,
              startAtSegmentBoundary: !1,
              gapDetectionThreshold: 0.5,
              gapPadding: 0,
              gapJumpTimerTime: 0.25,
              durationBackoff: 1,
              safeSeekOffset: 5,
              safeSeekEndOffset: 0,
              stallEnabled: !0,
              stallThreshold: 1,
              stallSkip: 0.1,
              useNativeHlsForFairPlay: !0,
              inaccurateManifestTolerance: 2,
              lowLatencyMode: !1,
              forceHTTP: !1,
              forceHTTPS: !1,
              minBytesForProgressEvents: 16e3,
              preferNativeDash: !1,
              preferNativeHls: !1,
              updateIntervalSeconds: 1,
              observeQualityChanges: !1,
              maxDisabledTime: 30,
              segmentPrefetchLimit: 1,
              prefetchAudioLanguages: [],
              disableAudioPrefetch: !1,
              disableTextPrefetch: !1,
              disableVideoPrefetch: !1,
              liveSync: {
                enabled: !1,
                targetLatency: 0.5,
                targetLatencyTolerance: 0.5,
                maxPlaybackRate: 1.1,
                minPlaybackRate: 0.95,
                panicMode: !1,
                panicThreshold: 60,
                dynamicTargetLatency: {
                  enabled: !1,
                  stabilityThreshold: 60,
                  rebufferIncrement: 0.5,
                  maxAttempts: 10,
                  maxLatency: 4,
                  minLatency: 1,
                },
              },
              allowMediaSourceRecoveries: !0,
              minTimeBetweenRecoveries: 5,
              vodDynamicPlaybackRate: !1,
              vodDynamicPlaybackRateLowBufferRate: 0.95,
              vodDynamicPlaybackRateBufferRatio: 0.5,
              preloadNextUrlWindow: 30,
              loadTimeout: 30,
              clearDecodingCache: Je() || Ye(),
              dontChooseCodecs: !1,
              shouldFixTimestampOffset: Ge() || Ve(),
              avoidEvictionOnQuotaExceededError: !1,
              crossBoundaryStrategy: "keep",
            };
            (Ge() || Ve() || Ke() || $e()) && (a.stallSkip = 0),
              (navigator.userAgent.match(/Edge\//) || He()) &&
                (a.gapPadding = 0.01),
              Ve() && (a.gapPadding = 2),
              qe() && (a.crossBoundaryStrategy = "reset"),
              ze() && (a.crossBoundaryStrategy = "reset_to_encrypted");
            var o = {
              trackSelectionCallback: function (e) {
                return P(function (t) {
                  return t.return(e);
                });
              },
              downloadSizeCallback: function (e) {
                var t;
                return P(function (n) {
                  return 1 == n.g
                    ? navigator.storage && navigator.storage.estimate
                      ? w(n, navigator.storage.estimate(), 3)
                      : n.return(!0)
                    : ((t = n.h), n.return(t.usage + e < 0.95 * t.quota));
                });
              },
              progressCallback: function (e, t) {
                return Xu([e, t]);
              },
              usePersistentLicense: !0,
              numberOfParallelDownloads: 5,
            };
            (t = {
              enabled: !0,
              useNetworkInformation: !0,
              defaultBandwidthEstimate: 1e6,
              switchInterval: 8,
              bandwidthUpgradeTarget: 0.85,
              bandwidthDowngradeTarget: 0.95,
              restrictions: {
                minWidth: 0,
                maxWidth: 1 / 0,
                minHeight: 0,
                maxHeight: t,
                minPixels: 0,
                maxPixels: 1 / 0,
                minFrameRate: 0,
                maxFrameRate: 1 / 0,
                minBandwidth: 0,
                maxBandwidth: 1 / 0,
                minChannelsCount: 0,
                maxChannelsCount: 1 / 0,
              },
              advanced: {
                minTotalBytes: 128e3,
                minBytes: 16e3,
                fastHalfLife: 2,
                slowHalfLife: 5,
              },
              restrictToElementSize: !1,
              restrictToScreenSize: !1,
              ignoreDevicePixelRatio: !1,
              clearBufferSwitch: !1,
              safeMarginSwitch: 0,
              cacheLoadThreshold: 20,
              minTimeToSwitch: Xe() ? 0.5 : 0,
              preferNetworkInformationBandwidth: !1,
            }),
              (i = {
                codecSwitchingStrategy: i,
                addExtraFeaturesToSourceBuffer: function (e) {
                  return Xu([e], "");
                },
                forceTransmux: !1,
                insertFakeEncryptionInInit: !0,
                correctEc3Enca: !1,
                modifyCueCallback: function (e, t) {
                  return Xu([e, t]);
                },
                dispatchAllEmsgBoxes: !1,
              });
            var s = !1,
              u = !1,
              d = !0;
            (Ve() ||
              Ge() ||
              He() ||
              Je() ||
              Ye() ||
              Ke() ||
              $e() ||
              Ze() ||
              (rt() && !Xe())) &&
              ((u = s = !0), (d = !1));
            var h = {
              drm: n,
              manifest: r,
              streaming: a,
              mediaSource: i,
              offline: o,
              abrFactory: function () {
                return new Nr();
              },
              adaptationSetCriteriaFactory: function () {
                return new (Function.prototype.bind.apply(
                  Gu,
                  [null].concat(c(L.apply(0, arguments)))
                ))();
              },
              abr: t,
              autoShowText: 3,
              preferredAudioLanguage: "",
              preferredAudioLabel: "",
              preferredTextLanguage: "",
              preferredVariantRole: "",
              preferredTextRole: "",
              preferredAudioChannelCount: 2,
              preferredVideoHdrLevel: "AUTO",
              preferredVideoLayout: "",
              preferredVideoLabel: "",
              preferredVideoCodecs: [],
              preferredAudioCodecs: [],
              preferredTextFormats: [],
              preferForcedSubs: !1,
              preferSpatialAudio: !1,
              preferredDecodingAttributes: [],
              restrictions: {
                minWidth: 0,
                maxWidth: 1 / 0,
                minHeight: 0,
                maxHeight: 1 / 0,
                minPixels: 0,
                maxPixels: 1 / 0,
                minFrameRate: 0,
                maxFrameRate: 1 / 0,
                minBandwidth: 0,
                maxBandwidth: 1 / 0,
                minChannelsCount: 0,
                maxChannelsCount: 1 / 0,
              },
              playRangeStart: 0,
              playRangeEnd: 1 / 0,
              textDisplayer: { captionsUpdatePeriod: 0.25, fontScaleFactor: 1 },
              textDisplayFactory: function () {
                return null;
              },
              cmcd: {
                enabled: !1,
                sessionId: "",
                contentId: "",
                rtpSafetyFactor: 5,
                useHeaders: !1,
                includeKeys: [],
                version: 1,
              },
              cmsd: {
                enabled: !0,
                applyMaximumSuggestedBitrate: !0,
                estimatedThroughputWeightRatio: 0.5,
              },
              lcevc: {
                enabled: !1,
                dynamicPerformanceScaling: !0,
                logLevel: 0,
                drawLogo: !1,
                poster: !0,
              },
              ads: {
                customPlayheadTracker: s,
                skipPlayDetection: u,
                supportsMultipleMediaElements: d,
                disableHLSInterstitial: !1,
                disableDASHInterstitial: !1,
                allowPreloadOnDomElements: !0,
              },
              ignoreHardwareResolution: !1,
            };
            return (
              (o.trackSelectionCallback = function (e) {
                return P(function (t) {
                  return t.return(
                    (function (e, t, n) {
                      var i = n;
                      "AUTO" == i &&
                        ((n = e.some(function (e) {
                          return !(!e.hdr || "HLG" != e.hdr);
                        })),
                        (i = ut(n)));
                      var r = e.filter(function (e) {
                        return !("variant" != e.type || (e.hdr && e.hdr != i));
                      });
                      n = [];
                      var a = ar(
                        t,
                        r.map(function (e) {
                          return e.language;
                        })
                      );
                      a &&
                        (n = r.filter(function (e) {
                          return tr(e.language) == a;
                        })),
                        0 == n.length &&
                          (n = r.filter(function (e) {
                            return e.primary;
                          })),
                        0 == n.length &&
                          (r.map(function (e) {
                            return e.language;
                          }),
                          (n = r));
                      var o = n.filter(function (e) {
                        return e.height && 480 >= e.height;
                      });
                      for (
                        o.length &&
                          (o.sort(function (e, t) {
                            return t.height - e.height;
                          }),
                          (n = o.filter(function (e) {
                            return e.height == o[0].height;
                          }))),
                          t = [],
                          n.length &&
                            ((r = Math.floor(n.length / 2)),
                            n.sort(function (e, t) {
                              return e.bandwidth - t.bandwidth;
                            }),
                            t.push(n[r])),
                          e = l(e),
                          n = e.next();
                        !n.done;
                        n = e.next()
                      )
                        ((n = n.value).type != Lt && "image" != n.type) ||
                          t.push(n);
                      return t;
                    })(e, h.preferredAudioLanguage, h.preferredVideoHdrLevel)
                  );
                });
              }),
              h
            );
          }
          function Zu() {
            return {
              streaming: {
                inaccurateManifestTolerance: 0,
                segmentPrefetchLimit: 2,
                updateIntervalSeconds: 0.1,
                maxDisabledTime: 1,
                retryParameters: { baseDelay: 100 },
              },
              manifest: {
                dash: { autoCorrectDrift: !1 },
                retryParameters: { baseDelay: 100 },
              },
              drm: { retryParameters: { baseDelay: 100 } },
            };
          }
          function Qu(e, t, n) {
            var i = {
              ".drm.keySystemsMapping": "",
              ".drm.servers": "",
              ".drm.clearKeys": "",
              ".drm.advanced": {
                distinctiveIdentifierRequired: !1,
                persistentStateRequired: !1,
                videoRobustness: [],
                audioRobustness: [],
                sessionType: "",
                serverCertificate: new Uint8Array(0),
                serverCertificateUri: "",
                individualizationServer: "",
                headers: {},
              },
            };
            return Ku(e, t, n || $u(), i, "");
          }
          function el(e) {
            return Xu([e], e);
          }
          function tl(e) {
            return Xu([e], e);
          }
          function nl(e, t) {
            try {
              return (function (e, t) {
                var n = new DOMParser(),
                  i = il.value()(e);
                e = null;
                try {
                  e = n.parseFromString(i, "text/xml");
                } catch (e) {
                  return null;
                }
                if (
                  !(n = e.documentElement) ||
                  n.getElementsByTagName("parsererror").length ||
                  n.tagName != t
                )
                  return null;
                if (!("createNodeIterator" in document)) return n;
                for (
                  t = document.createNodeIterator(e, NodeFilter.SHOW_ALL);
                  (e = t.nextNode());

                )
                  if (e instanceof HTMLElement || e instanceof SVGElement)
                    return null;
                return n;
              })(pt(e), t);
            } catch (e) {
              return null;
            }
          }
          B("shaka.drm.FairPlay", _u),
            (_u.commonFairPlayResponse = function (e, t) {
              if (
                2 === e &&
                (e = t.originalRequest.drmInfo) &&
                Re(e.keySystem)
              ) {
                try {
                  var n = ht(t.data);
                } catch (e) {
                  return;
                }
                if (
                  ((e = !1),
                  "<ckc>" === (n = n.trim()).substr(0, 5) &&
                    "</ckc>" === n.substr(-6) &&
                    ((n = n.slice(5, -6)), (e = !0)),
                  !e)
                )
                  try {
                    var i = JSON.parse(n);
                    i.ckc && ((n = i.ckc), (e = !0)),
                      i.CkcMessage && ((n = i.CkcMessage), (e = !0)),
                      i.License && ((n = i.License), (e = !0));
                  } catch (e) {}
                e && (t.data = Te(Tt(n)));
              }
            }),
            (_u.muxFairPlayRequest = function (e, t) {
              Bu(e, t);
            }),
            (_u.expressplayFairPlayRequest = function (e, t) {
              if (2 === e) {
                var n = t.drmInfo;
                n && Re(n.keySystem) && Bu(e, t);
              }
            }),
            (_u.conaxFairPlayRequest = function (e, t) {
              Bu(e, t);
            }),
            (_u.ezdrmFairPlayRequest = function (e, t) {
              Bu(e, t);
            }),
            (_u.verimatrixFairPlayRequest = function (e, t) {
              2 === e &&
                (e = t.drmInfo) &&
                Re(e.keySystem) &&
                ((e = St((e = Ae(t.body)))),
                (t.headers["Content-Type"] =
                  "application/x-www-form-urlencoded"),
                (t.body = gt("spc=" + e)));
            }),
            (_u.muxInitDataTransform = function (e, t, n) {
              return Ou(e, t, n);
            }),
            (_u.expressplayInitDataTransform = function (e, t, n) {
              return Ou(e, t, n);
            }),
            (_u.conaxInitDataTransform = function (t, n, i) {
              if ("skd" !== n) return t;
              (n = i.serverCertificate),
                (i = pt(t).split("skd://").pop().split("?").shift()),
                (i = e.atob(i));
              var r = new ArrayBuffer(2 * i.length);
              r = ke(r);
              for (var a = 0, o = i.length; a < o; a++) r[a] = i.charCodeAt(a);
              return ju(t, r, n);
            }),
            (_u.ezdrmInitDataTransform = function (e, t, n) {
              return "skd" !== t
                ? e
                : ((t = n.serverCertificate),
                  ju(e, (n = pt(e).split(";").pop()), t));
            }),
            (_u.verimatrixInitDataTransform = function (e, t, n) {
              return Ou(e, t, n);
            }),
            (_u.initDataTransform = ju),
            (_u.defaultGetContentId = Uu),
            (_u.isFairPlaySupported = function () {
              var e;
              return P(function (t) {
                return 1 == t.g
                  ? ((e = {
                      initDataTypes: ["cenc", "sinf", "skd"],
                      videoCapabilities: [
                        { contentType: 'video/mp4; codecs="avc1.42E01E"' },
                      ],
                    }),
                    S(t, 2),
                    w(
                      t,
                      navigator.requestMediaKeySystemAccess("com.apple.fps", [
                        e,
                      ]),
                      4
                    ))
                  : 2 != t.g
                  ? t.return(!0)
                  : (A(t), t.return(!1));
              });
            }),
            (Fu.prototype.add = function (e, t) {
              var n,
                i = this.h;
              if (
                ((t = void 0 === t || t),
                !(n =
                  !!i.audio != !!e.audio ||
                  !!i.video != !!e.video ||
                  i.language != e.language) && (n = i.audio && e.audio))
              ) {
                n = i.audio;
                var r = e.audio;
                n = !(
                  !(
                    ((!n.channelsCount ||
                      !r.channelsCount ||
                      2 < n.channelsCount ||
                      2 < r.channelsCount) &&
                      n.channelsCount != r.channelsCount) ||
                    n.spatialAudio !== r.spatialAudio ||
                    (t && !Hu(n, r))
                  ) &&
                  Vu(n.roles, r.roles) &&
                  n.groupId === r.groupId
                );
              }
              return (
                !n &&
                  (n = i.video && e.video) &&
                  ((i = i.video),
                  (n = e.video),
                  (n = !((!t || Hu(i, n)) && Vu(i.roles, n.roles)))),
                !n && (this.g.add(e), !0)
              );
            }),
            (Fu.prototype.values = function () {
              return this.g.values();
            }),
            B("shaka.media.AdaptationSet", Fu),
            (zu.prototype.create = function () {}),
            (zu.prototype.configure = function () {}),
            B("shaka.media.AdaptationSetCriteria", zu),
            (Gu.prototype.configure = function (e) {
              this.g = e;
            }),
            (Gu.prototype.create = function (e) {
              var t;
              if (this.g.language) {
                var n = (function (e, t) {
                  t = tr(t);
                  var n = ar(
                    t,
                    e.map(function (e) {
                      return rr(e);
                    })
                  );
                  return n
                    ? e.filter(function (e) {
                        return n == rr(e);
                      })
                    : [];
                })(e, this.g.language);
                n.length && (t = n);
              }
              return (
                t ||
                  (t = (t = e.filter(function (e) {
                    return e.primary;
                  })).length
                    ? t
                    : e),
                (e = (function (e, t) {
                  return e.filter(function (e) {
                    return (
                      !!e.audio &&
                      (t
                        ? e.audio.roles.includes(t)
                        : 0 == e.audio.roles.length)
                    );
                  });
                })(t, this.g.role)),
                e.length && (t = e),
                this.g.videoLayout &&
                  ((e = (function (e, t) {
                    return e.filter(function (e) {
                      return (
                        !e.video ||
                        !e.video.videoLayout ||
                        e.video.videoLayout == t
                      );
                    });
                  })(t, this.g.videoLayout)),
                  e.length && (t = e)),
                this.g.sc &&
                  ((e = (function (e, t) {
                    if ("AUTO" == t) {
                      var n = e.some(function (e) {
                        return !(
                          !e.video ||
                          !e.video.hdr ||
                          "HLG" != e.video.hdr
                        );
                      });
                      t = ut(n);
                    }
                    return e.filter(function (e) {
                      return !e.video || !e.video.hdr || e.video.hdr == t;
                    });
                  })(t, this.g.sc)),
                  e.length && (t = e)),
                this.g.channelCount &&
                  ((e = (function (e, t) {
                    return e
                      .filter(function (e) {
                        return !(
                          e.audio &&
                          e.audio.channelsCount &&
                          e.audio.channelsCount > t
                        );
                      })
                      .sort(function (e, t) {
                        return e.audio || t.audio
                          ? e.audio
                            ? t.audio
                              ? (t.audio.channelsCount || 0) -
                                (e.audio.channelsCount || 0)
                              : 1
                            : -1
                          : 0;
                      });
                  })(t, this.g.channelCount)),
                  e.length && (t = e)),
                this.g.kc &&
                  ((e = (function (e, t) {
                    return e.filter(function (e) {
                      return (
                        !(!e.audio || !e.audio.label) &&
                        e.audio.label.toLowerCase() == t.toLowerCase()
                      );
                    });
                  })(t, this.g.kc)),
                  e.length && (t = e)),
                this.g.Gc &&
                  ((e = (function (e, t) {
                    return e.filter(function (e) {
                      return (
                        !(!e.video || !e.video.label) &&
                        e.video.label.toLowerCase() == t.toLowerCase()
                      );
                    });
                  })(t, this.g.Gc)),
                  e.length && (t = e)),
                (e = (function (e, t) {
                  return e.filter(function (e) {
                    return !e.audio || e.audio.spatialAudio == t;
                  });
                })(t, this.g.spatialAudio)),
                e.length && (t = e),
                this.g.audioCodec &&
                  ((e = (function (e, t) {
                    return e.filter(function (e) {
                      return !e.audio || e.audio.codecs == t;
                    });
                  })(t, this.g.audioCodec)),
                  e.length && (t = e)),
                new Fu(
                  t[0],
                  t,
                  !("smooth" == this.g.codecSwitchingStrategy && Ht())
                )
              );
            }),
            B("shaka.util.ConfigUtils", qu),
            (qu.getDifferenceFromConfigObjects = Yu),
            (qu.convertToConfigObject = Wu),
            (qu.mergeConfigObjects = Ku),
            B("shaka.util.PlayerConfiguration", Ju),
            (Ju.mergeConfigObjects = Qu),
            (Ju.createDefaultForLL = Zu),
            (Ju.createDefault = $u);
          var il = new De(function () {
            if ("undefined" != typeof trustedTypes) {
              var e = trustedTypes.createPolicy("shaka-player#xml", {
                createHTML: function (e) {
                  return e;
                },
              });
              return function (t) {
                return e.createHTML(t);
              };
            }
            return function (e) {
              return e;
            };
          });
          function rl() {
            var e = this;
            (this.j = this.g = null),
              (this.A = []),
              (this.i = null),
              (this.pa = 1),
              (this.D = []),
              (this.l = {
                Gd: "",
                type: "",
                profiles: [],
                zb: null,
                Na: 0,
                Ca: null,
                cd: 0,
              }),
              (this.s = new Map()),
              (this.o = new Map()),
              (this.B = new Map()),
              (this.la = new Map()),
              (this.m = new ru()),
              (this.J = 0),
              (this.oa = new V(5)),
              (this.K = new je(function () {
                e.G &&
                !e.g.continueLoadingWhenPaused &&
                (e.F.sb(e.G, "timeupdate"), e.G.paused)
                  ? e.F.Ea(e.G, "timeupdate", function () {
                      return bl(e);
                    })
                  : bl(e);
              })),
              (this.S = new Jo()),
              (this.O = null),
              (this.C = []),
              (this.da = 1 / 0),
              (this.ga = !1),
              (this.h = null),
              (this.L = 0),
              (this.W = !1),
              (this.F = new $()),
              (this.G = null),
              (this.X = !1),
              (this.ca = ""),
              (this.fa = function () {
                return !1;
              }),
              (this.Y = []);
          }
          function al(e) {
            var t, n, i, r, a, o, s, u, d, h, f;
            return P(function (p) {
              return 1 == p.g
                ? ((t = 4),
                  (n = "MPD"),
                  (i = (function (e) {
                    var t = e.l.cd;
                    if (!e.l.Gd || !t || !e.D.length) return [];
                    var n = Date.now() / 1e3,
                      i = e.D.filter(function (e) {
                        return !(e = Nn(e.attributes.ttl)) || t + e > n;
                      })
                        .map(xn)
                        .filter(Yi);
                    return i.length ? Ct(e.A, i) : [];
                  })(e)),
                  (r = e.A),
                  i.length
                    ? ((r = i), (n = "Patch"), (t = 6))
                    : 1 < e.A.length &&
                      e.h &&
                      (a = nu(e.h, "Location", !0)).length &&
                      (r = a),
                  (o = es(r, e.g.retryParameters)),
                  (s = Date.now()),
                  w(p, Il(e, o, 0, { type: t }), 2))
                : 3 != p.g
                ? ((u = p.h),
                  e.j
                    ? (u.uri &&
                        u.uri != u.originalUri &&
                        !e.A.includes(u.uri) &&
                        e.A.unshift(u.uri),
                      (d = new oe(u.uri)),
                      (e.ca = d.g.toString()),
                      w(
                        p,
                        (function (e, t, n, i) {
                          var r, a, o, s, u, d, h, f;
                          return P(function (p) {
                            if (1 == p.g) {
                              if (
                                ((r = t),
                                (a = e.g.dash.manifestPreprocessor) != el)
                              ) {
                                if (
                                  (te(
                                    "manifest.dash.manifestPreprocessor configuration",
                                    "Please Use manifest.dash.manifestPreprocessorTXml instead."
                                  ),
                                  !(o = nl(r, i)))
                                )
                                  throw new Me(2, 4, 4001, n);
                                a(o), (r = gt(o.outerHTML));
                              }
                              if (!(s = pn(r, i))) throw new Me(2, 4, 4001, n);
                              return (
                                (u = e.g.dash.manifestPreprocessorTXml) != tl &&
                                  u(s),
                                "Patch" === i
                                  ? p.return(
                                      (function (e, t) {
                                        var n,
                                          i,
                                          r,
                                          a,
                                          o,
                                          s,
                                          u,
                                          d,
                                          h,
                                          f,
                                          p,
                                          g,
                                          m,
                                          v,
                                          y,
                                          b,
                                          S,
                                          T,
                                          A,
                                          k,
                                          I,
                                          C,
                                          M,
                                          E;
                                        return P(function (D) {
                                          if (1 == D.g) {
                                            if (
                                              ((n = t.attributes.mpdId),
                                              (i = kn(
                                                t,
                                                "originalPublishTime",
                                                En
                                              )),
                                              !n ||
                                                n !== e.l.Gd ||
                                                i !== e.l.cd)
                                            )
                                              throw (
                                                ((e.D = []), new Me(1, 4, 4052))
                                              );
                                            for (
                                              r = [],
                                                a = [],
                                                o = new Set(),
                                                s = l(yn(t)),
                                                u = s.next();
                                              !u.done;
                                              u = s.next()
                                            )
                                              if (
                                                ((d = u.value),
                                                (h = On(
                                                  d.attributes.sel || ""
                                                )),
                                                (f = h[h.length - 1]),
                                                (p = xn(d) || ""),
                                                "MPD" === f.name)
                                              )
                                                if (
                                                  "mediaPresentationDuration" ===
                                                  f.Db
                                                ) {
                                                  var P = Dn(xn(d) || "");
                                                  if (null != P) {
                                                    e.l.zb = P;
                                                    for (
                                                      var L = l(e.s.values()),
                                                        R = L.next();
                                                      !R.done;
                                                      R = L.next()
                                                    )
                                                      R.value.zb = P;
                                                  }
                                                } else if ("type" === f.Db) {
                                                  for (
                                                    e.i.presentationTimeline.Sd(
                                                      "static" == p
                                                    ),
                                                      e.l.type = p,
                                                      L = (P = l(
                                                        e.s.values()
                                                      )).next();
                                                    !L.done;
                                                    L = P.next()
                                                  )
                                                    L.value.wb = "dynamic" == p;
                                                  "static" == p && (e.J = -1);
                                                } else
                                                  "publishTime" === f.Db
                                                    ? (e.l.cd = En(p) || 0)
                                                    : null === f.Db &&
                                                      "add" === d.tagName &&
                                                      a.push(d);
                                              else if (
                                                "PatchLocation" === f.name
                                              )
                                                Bn(e.D, d);
                                              else if ("Period" === f.name)
                                                "add" === d.tagName
                                                  ? a.push(d)
                                                  : "remove" === d.tagName &&
                                                    f.id &&
                                                    ll(e, f.id);
                                              else if (
                                                "SegmentTemplate" === f.name
                                              ) {
                                                if (
                                                  (P = (L = On(
                                                    d.attributes.sel || ""
                                                  ))[L.length - 1]).Db
                                                ) {
                                                  (L = cl(e, L)),
                                                    (R = xn(d) || "");
                                                  for (
                                                    var N = l(L), _ = N.next();
                                                    !_.done;
                                                    _ = N.next()
                                                  )
                                                    Hn(
                                                      (_ = e.s.get(_.value)).I
                                                        .Lb,
                                                      d.tagName,
                                                      P.Db,
                                                      R
                                                    );
                                                  P = L;
                                                } else P = [];
                                                for (
                                                  g = l(P), m = g.next();
                                                  !m.done;
                                                  m = g.next()
                                                )
                                                  (v = m.value), o.add(v);
                                              } else if (
                                                "SegmentTimeline" === f.name ||
                                                "S" === f.name
                                              ) {
                                                for (
                                                  P = On(
                                                    d.attributes.sel || ""
                                                  ),
                                                    R = (L = l(
                                                      (P = cl(e, P))
                                                    )).next();
                                                  !R.done;
                                                  R = L.next()
                                                )
                                                  Bn(
                                                    (N = bn(
                                                      (R = hs(
                                                        (R = e.s.get(R.value)),
                                                        Vs,
                                                        "SegmentTimeline"
                                                      )),
                                                      "S"
                                                    )),
                                                    d
                                                  ),
                                                    (R.children = N);
                                                for (
                                                  y = l(P), b = y.next();
                                                  !b.done;
                                                  b = y.next()
                                                )
                                                  (S = b.value), o.add(S);
                                              }
                                            for (
                                              T = l(o), A = T.next();
                                              !A.done;
                                              A = T.next()
                                            )
                                              (k = A.value), dl(e, k);
                                            for (
                                              I = l(a), C = I.next();
                                              !C.done;
                                              C = I.next()
                                            )
                                              (M = C.value),
                                                r.push.apply(r, c(ul(e, M)));
                                            return r.length
                                              ? ((e.i.periodCount += r.length),
                                                (e.i.gapCount = e.L),
                                                w(D, sl(e, r, !0), 2))
                                              : D.u(2);
                                          }
                                          "static" == e.l.type &&
                                            ((E = e.l.zb),
                                            e.i.presentationTimeline.nb(
                                              E || 1 / 0
                                            )),
                                            x(D);
                                        });
                                      })(e, s)
                                    )
                                  : e.g.dash.disableXlinkProcessing
                                  ? p.return(ol(e, s, n))
                                  : ((d = e.g.dash.xlinkFailGracefully),
                                    (h = fs(
                                      s,
                                      e.g.retryParameters,
                                      d,
                                      n,
                                      e.j.networkingEngine
                                    )),
                                    $o(e.S, h),
                                    w(p, h.promise, 2))
                              );
                            }
                            return (f = p.h), p.return(ol(e, f, n));
                          });
                        })(e, u.data, u.uri, n),
                        3
                      ))
                    : p.return(0))
                : ((h = Date.now()),
                  (f = (h - s) / 1e3),
                  e.oa.sample(1, f),
                  p.return(f));
            });
          }
          function ol(e, t, n) {
            var i,
              r,
              a,
              o,
              s,
              u,
              c,
              d,
              h,
              f,
              p,
              g,
              m,
              v,
              y,
              b,
              k,
              I,
              C,
              M,
              E,
              D,
              L,
              R,
              N,
              _,
              U,
              j,
              O,
              B,
              F,
              H,
              V,
              z,
              G,
              q,
              K,
              X,
              Y,
              J,
              $,
              Z,
              Q,
              ee,
              te,
              ne,
              ie,
              re,
              ae,
              oe,
              se,
              ue;
            return P(function (le) {
              switch (le.g) {
                case 1:
                  for (
                    e.h && e.h.l.clear(),
                      i = [n],
                      r = [],
                      a = new Map(),
                      o = bn(t, "Location"),
                      s = l(o),
                      u = s.next();
                    !u.done;
                    u = s.next()
                  )
                    (c = u.value),
                      (d = c.attributes.serviceLocation),
                      (h = xn(c)) &&
                        ((f = Ct(i, [h])[0]),
                        d && (e.h ? tu(e.h, "Location", d, f) : a.set(d, f)),
                        r.push(f));
                  if (
                    (e.h
                      ? 0 < (p = nu(e.h, "Location", !0)).length &&
                        (i = e.A = p)
                      : r.length && (i = e.A = r),
                    (e.l.Gd = t.attributes.id || ""),
                    (e.l.cd = kn(t, "publishTime", En) || 0),
                    (e.D = bn(t, "PatchLocation")),
                    (g = Promise.resolve()),
                    (m = Tn(t, "ContentSteering")) && e.j)
                  )
                    for (
                      v = m.attributes.defaultServiceLocation,
                        e.h
                          ? ((e.h.j = i), (e.h.h = v))
                          : ((e.h = new Zs(e.j)),
                            e.h.configure(e.g),
                            e.h.setManifestType("DASH"),
                            (e.h.j = i),
                            (e.h.h = v),
                            (y = xn(m)) &&
                              (kn(m, "queryBeforeStart", Un, !1)
                                ? (g = Qs(e.h, y))
                                : Qs(e.h, y))),
                        b = l(a.keys()),
                        k = b.next();
                      !k.done;
                      k = b.next()
                    )
                      (I = k.value), (C = a.get(I)), tu(e.h, "Location", I, C);
                  if (((M = bn(t, "BaseURL")), (E = !1), e.h))
                    for (D = l(M), L = D.next(); !L.done; L = D.next())
                      (R = L.value),
                        (N = R.attributes.serviceLocation),
                        (_ = xn(R)),
                        N && _ && (tu(e.h, "BaseURL", N, _), (E = !0));
                  if (
                    ((e.Y = null),
                    (E && e.h) || ((U = M.map(xn)), (e.Y = Ct(i, U))),
                    (j = function () {
                      return e.h && E ? nu(e.h, "BaseURL") : e.Y ? e.Y : [];
                    }),
                    (e.l.Ca = j),
                    (O = 0),
                    M &&
                      M.length &&
                      (O = kn(M[0], "availabilityTimeOffset", _n) || 0),
                    (e.l.Na = O),
                    (e.J = kn(t, "minimumUpdatePeriod", Dn, -1)),
                    (B = kn(t, "availabilityStartTime", En)),
                    (F = kn(t, "timeShiftBufferDepth", Dn)),
                    (H = e.g.dash.ignoreSuggestedPresentationDelay),
                    (V = null),
                    H || (V = kn(t, "suggestedPresentationDelay", Dn)),
                    (z = e.g.dash.ignoreMaxSegmentDuration),
                    (G = null),
                    z || (G = kn(t, "maxSegmentDuration", Dn)),
                    (q = t.attributes.type || "static"),
                    e.i &&
                      e.i.presentationTimeline &&
                      (e.X = e.i.presentationTimeline.R() && "static" == q),
                    (e.l.type = q),
                    e.i)
                  )
                    for (
                      K = e.i.presentationTimeline,
                        X = K.xb(),
                        Y = l(e.o.values()),
                        J = Y.next();
                      !J.done;
                      J = Y.next()
                    )
                      ($ = J.value).segmentIndex && $.segmentIndex.Ba(X);
                  else
                    (Z = e.g.dash.ignoreMinBufferTime),
                      (Q = 0),
                      Z || (Q = kn(t, "minBufferTime", Dn) || 0),
                      0,
                      (ee =
                        null != V
                          ? Math.min(V, F || 1 / 0)
                          : 0 < e.g.defaultPresentationDelay
                          ? e.g.defaultPresentationDelay
                          : Math.min(1.5 * Q, F || 1 / 0)),
                      (K = new Js(B, ee, e.g.dash.autoCorrectDrift));
                  return (
                    K.Sd("static" == q),
                    K.R() &&
                      !isNaN(e.g.availabilityWindowOverride) &&
                      (F = e.g.availabilityWindowOverride),
                    null == F && (F = 1 / 0),
                    K.pf(F),
                    (te = t.attributes.profiles || ""),
                    (e.l.profiles = te.split(",")),
                    (ne = {
                      wb: "static" != q,
                      presentationTimeline: K,
                      ia: null,
                      $: null,
                      Z: null,
                      I: null,
                      bandwidth: 0,
                      Re: !1,
                      Na: O,
                      zb: null,
                      profiles: te.split(","),
                      roles: null,
                      eb: function () {
                        return "";
                      },
                    }),
                    w(le, g, 2)
                  );
                case 2:
                  return (
                    (e.L = 0),
                    (ie = pl(e, ne, j, t, !1)),
                    (re = ie.duration),
                    (ae = ie.periods),
                    (("static" != q || e.X) && ie.Of) || K.nb(re || 1 / 0),
                    e.W && e.ga && K.vg(e.da),
                    K.Xe(G || 1),
                    e.W &&
                      e.ga &&
                      ((oe = null != V ? V : e.g.defaultPresentationDelay),
                      K.xg(oe)),
                    e.i
                      ? ((e.i.periodCount = ae.length),
                        (e.i.gapCount = e.L),
                        w(le, sl(e, ae, !1), 4))
                      : w(le, e.m.re(ae, ne.wb), 6)
                  );
                case 6:
                  if (
                    ((e.i = {
                      presentationTimeline: K,
                      variants: e.m.l,
                      textStreams: e.m.Qe(),
                      imageStreams: e.m.i,
                      offlineSessionIds: [],
                      sequenceMode: e.g.dash.sequenceMode,
                      ignoreManifestTimestampsInSegmentsMode: !1,
                      type: "DASH",
                      serviceDescription: hl(t),
                      nextUrl: fl(t),
                      periodCount: ae.length,
                      gapCount: e.L,
                      isLowLatency: e.W,
                      startTime: null,
                    }),
                    !K.Hg())
                  ) {
                    le.u(7);
                    break;
                  }
                  return (
                    (se = bn(t, "UTCTiming")),
                    w(
                      le,
                      (function (e, t, n) {
                        var i, r, a, o, s, u, c, d;
                        return P(function (h) {
                          switch (h.g) {
                            case 1:
                              (i = n.map(function (e) {
                                return {
                                  scheme: e.attributes.schemeIdUri,
                                  value: e.attributes.value,
                                };
                              })),
                                (r = e.g.dash.clockSyncUri),
                                !i.length &&
                                  r &&
                                  i.push({
                                    scheme: "urn:mpeg:dash:utc:http-head:2014",
                                    value: r,
                                  }),
                                (a = l(i)),
                                (o = a.next());
                            case 2:
                              if (o.done) {
                                h.u(4);
                                break;
                              }
                              switch (
                                ((s = o.value),
                                S(h, 5),
                                (u = s.scheme),
                                (c = s.value),
                                u)
                              ) {
                                case "urn:mpeg:dash:utc:http-head:2014":
                                case "urn:mpeg:dash:utc:http-head:2012":
                                  return h.u(7);
                                case "urn:mpeg:dash:utc:http-xsdate:2014":
                                case "urn:mpeg:dash:utc:http-iso:2014":
                                case "urn:mpeg:dash:utc:http-xsdate:2012":
                                case "urn:mpeg:dash:utc:http-iso:2012":
                                  return h.u(8);
                                case "urn:mpeg:dash:utc:direct:2014":
                                case "urn:mpeg:dash:utc:direct:2012":
                                  return (
                                    (d = Date.parse(c)),
                                    h.return(isNaN(d) ? 0 : d - Date.now())
                                  );
                                case "urn:mpeg:dash:utc:http-ntp:2014":
                                case "urn:mpeg:dash:utc:ntp:2014":
                                case "urn:mpeg:dash:utc:sntp:2014":
                                  W("NTP UTCTiming scheme is not supported");
                                  break;
                                default:
                                  W(
                                    "Unrecognized scheme in UTCTiming element",
                                    u
                                  );
                              }
                              h.u(9);
                              break;
                            case 7:
                              return w(h, Sl(e, t, c, "HEAD"), 10);
                            case 10:
                              return h.return(h.h);
                            case 8:
                              return w(h, Sl(e, t, c, "GET"), 11);
                            case 11:
                              return h.return(h.h);
                            case 9:
                              T(h, 3);
                              break;
                            case 5:
                              A(h);
                            case 3:
                              (o = a.next()), h.u(2);
                              break;
                            case 4:
                              return (
                                W(
                                  "A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"
                                ),
                                h.return(0)
                              );
                          }
                        });
                      })(e, j, se),
                      8
                    )
                  );
                case 8:
                  if (((ue = le.h), !e.j)) return le.return();
                  K.wg(ue);
                case 7:
                  K.Ve(), e.m && !e.i.presentationTimeline.R() && e.m.release();
                case 4:
                  e.j.makeTextStreamsForClosedCaptions(e.i),
                    (function (e) {
                      for (
                        var t = Array.from(e.B.keys()).filter(function (t) {
                            return !e.C.includes(t);
                          }),
                          n = (t = l(t)).next();
                        !n.done;
                        n = t.next()
                      ) {
                        n = n.value;
                        for (
                          var i = !0, r = l(e.B.get(n)), a = r.next();
                          !a.done;
                          a = r.next()
                        ) {
                          a = a.value;
                          var o = e.o.get(a);
                          o &&
                            (o.segmentIndex &&
                            0 != o.segmentIndex.getNumReferences()
                              ? (i = !1)
                              : (e.m && e.m.Lf(o, n), e.o.delete(a)));
                        }
                        i && e.B.delete(n);
                      }
                    })(e),
                    x(le);
              }
            });
          }
          function sl(e, t, n) {
            var i;
            return P(function (r) {
              if (1 == r.g) return w(r, e.m.re(t, !0, n), 2);
              (e.i.variants = e.m.l),
                0 < (i = e.m.Qe()).length && (e.i.textStreams = i),
                (e.i.imageStreams = e.m.i),
                e.j.filter(e.i),
                x(r);
            });
          }
          function ul(e, t) {
            return pl(
              e,
              {
                wb: "dynamic" == e.l.type,
                presentationTimeline: e.i.presentationTimeline,
                ia: null,
                $: null,
                Z: null,
                I: null,
                bandwidth: 0,
                Re: !1,
                Na: e.l.Na,
                profiles: e.l.profiles,
                zb: e.l.zb,
                roles: null,
                eb: function () {
                  return "";
                },
              },
              e.l.Ca,
              t,
              !0
            ).periods;
          }
          function ll(e, t) {
            e.i.periodCount--;
            for (var n = l(e.s.keys()), i = n.next(); !i.done; i = n.next())
              if ((i = i.value).startsWith(t)) {
                (hs(e.s.get(i), Vs, "SegmentTimeline").children = []),
                  dl(e, i),
                  e.s.delete(i);
              }
            e.C = e.C.filter(function (e) {
              return e !== t;
            });
          }
          function cl(e, t) {
            for (
              var n = "", i = "", r = -1, a = "", o = (t = l(t)).next();
              !o.done;
              o = t.next()
            )
              "Period" === (o = o.value).name
                ? (n = o.id)
                : "AdaptationSet" === o.name
                ? ((i = o.id), null !== o.position && (r = o.position))
                : "Representation" === o.name && (a = o.id);
            if (((t = []), a)) t.push(n + "," + a);
            else if (i)
              for (r = l(e.s.values()), e = r.next(); !e.done; e = r.next())
                (e = e.value).ia.id === n &&
                  e.Z.id === i &&
                  e.I.id &&
                  t.push(n + "," + e.I.id);
            else if (-1 < r)
              for (i = l(e.s.values()), e = i.next(); !e.done; e = i.next())
                (e = e.value).ia.id === n &&
                  e.Z.position === r &&
                  e.I.id &&
                  t.push(n + "," + e.I.id);
            return t;
          }
          function dl(e, t) {
            var n = e.s.get(t),
              i = e.o.get(t);
            i.segmentIndex && i.segmentIndex.Ba(e.i.presentationTimeline.xb());
            try {
              var r = Hs(
                n,
                function (t, n, i, r) {
                  return Al(e, t, n, i, r);
                },
                e.o,
                !0,
                e.g.dash.initialSegmentLimit,
                e.la,
                n.I.aesKey,
                null,
                !0
              );
              i.createSegmentIndex = function () {
                return P(function (e) {
                  if (1 == e.g)
                    return i.segmentIndex ? e.u(0) : w(e, r.Vb(), 3);
                  (i.segmentIndex = e.h), x(e);
                });
              };
            } catch (e) {
              if (
                ((t = n.I.contentType) != Lt &&
                  "application" != t &&
                  "image" != t) ||
                4002 != e.code
              )
                throw e;
            }
          }
          function hl(e) {
            var t = Tn(e, "ServiceDescription");
            if (!t) return null;
            if (((e = Tn(t, "Latency")), (t = Tn(t, "PlaybackRate")), !e && !t))
              return null;
            var n = {};
            return (
              e &&
                ("target" in e.attributes &&
                  (n.targetLatency = parseInt(e.attributes.target, 10) / 1e3),
                "max" in e.attributes &&
                  (n.maxLatency = parseInt(e.attributes.max, 10) / 1e3),
                "min" in e.attributes &&
                  (n.minLatency = parseInt(e.attributes.min, 10) / 1e3)),
              t &&
                ("max" in t.attributes &&
                  (n.maxPlaybackRate = parseFloat(t.attributes.max)),
                "min" in t.attributes &&
                  (n.minPlaybackRate = parseFloat(t.attributes.min))),
              n
            );
          }
          function fl(e) {
            if (!(e = bn(e, "SupplementalProperty")).length) return null;
            for (var t = (e = l(e)).next(); !t.done; t = e.next())
              if (
                "urn:mpeg:dash:chaining:2016" ==
                (t = t.value).attributes.schemeIdUri
              )
                return t.attributes.value;
            return null;
          }
          function pl(e, t, n, i, r) {
            var a = t.zb;
            a || ((a = kn(i, "mediaPresentationDuration", Dn)), (e.l.zb = a));
            var o = 0;
            e.i &&
              e.i.presentationTimeline &&
              e.X &&
              (o = e.i.presentationTimeline.pb());
            var s = [],
              u = o;
            i = bn(i, "Period");
            for (var c = 0; c < i.length; c++) {
              var d = i[c],
                h = i[c + 1],
                f = kn(d, "start", Dn, u),
                p = d.attributes.id,
                g = kn(d, "duration", Dn);
              f = 0 == c && 0 == f && e.X ? o : f;
              var m = null;
              if (h) {
                var v = kn(h, "start", Dn);
                null != v && (m = v - f + o);
              } else null != a && (m = a - f + o);
              if (
                ((v = Nt),
                m && g && Math.abs(m - g) > v && m > g && e.L++,
                null == m && (m = g),
                !(null !== e.O && null !== p && null !== f && f < e.O) ||
                  e.C.includes(p) ||
                  c + 1 == i.length)
              ) {
                if (
                  (null !== f && (null === e.O || f > e.O) && (e.O = f),
                  (u = gl(e, t, n, {
                    start: f,
                    duration: m,
                    node: d,
                    ag: null == m || !h,
                  })),
                  s.push(u),
                  t.ia.id && m && e.la.set(t.ia.id, m),
                  null == m)
                ) {
                  u = null;
                  break;
                }
                u = f + m;
              }
            }
            if (r)
              for (n = (t = l(s)).next(); !n.done; n = t.next())
                (n = n.value.id), e.C.includes(n) || e.C.push(n);
            else
              e.C = s.map(function (e) {
                return e.id;
              });
            return null != a
              ? { periods: s, duration: a + o, Of: !1 }
              : { periods: s, duration: u, Of: !0 };
          }
          function gl(e, t, n, i) {
            (t.ia = xl(e, i.node, null, n)),
              (t.$ = i),
              (t.ia.Na = t.Na),
              t.ia.id || (t.ia.id = "__shaka_period_" + i.start);
            var r = bn(i.node, "EventStream");
            n = t.presentationTimeline.xb();
            for (var a = (r = l(r)).next(); !a.done; a = r.next())
              Tl(e, i.start, i.duration, a.value, n);
            for (
              r = (n = l((n = bn(i.node, "SupplementalProperty")))).next();
              !r.done;
              r = n.next()
            )
              "urn:mpeg:dash:urlparam:2014" ==
                (r = r.value).attributes.schemeIdUri &&
                (r = yl(e, r)) &&
                (t.eb = r);
            if (
              ((n = bn(i.node, "AdaptationSet")
                .map(function (n, i) {
                  return vl(e, t, i, n);
                })
                .filter(Yi)),
              t.wb)
            ) {
              r = [];
              for (var o = (a = l(n)).next(); !o.done; o = a.next())
                for (var s = (o = l(o.value.li)).next(); !s.done; s = o.next())
                  r.push(s.value);
              if (r.length != new Set(r).size) throw new Me(2, 4, 4018);
            }
            for (r = new Map(), o = (a = l(n)).next(); !o.done; o = a.next())
              for (s = (o = l(o.value.Zg)).next(); !s.done; s = o.next()) {
                var u = l(s.value);
                (s = u.next().value), (u = u.next().value), r.set(s, u);
              }
            if (r.size)
              for (a = null, s = (o = l(n)).next(); !s.done; s = o.next()) {
                u = [];
                for (
                  var d = l((s = s.value).streams), h = d.next(), f = {};
                  !h.done;
                  f = { rf: void 0 }, h = d.next()
                )
                  if (((f.rf = h.value), r.has(f.rf.originalId))) {
                    a ||
                      (a = bn(i.node, "AdaptationSet")
                        .map(function (n, i) {
                          return vl(e, t, i, n);
                        })
                        .filter(Yi));
                    for (var p = (h = l(a)).next(); !p.done; p = h.next())
                      (p = p.value.streams.find(
                        (function (e) {
                          return function (t) {
                            return t.originalId == e.rf.originalId;
                          };
                        })(f)
                      )) &&
                        ((p.dependencyStream = r.get(p.originalId)),
                        (p.originalId += p.dependencyStream.originalId),
                        u.push(p));
                  }
                u.length && s.streams.push.apply(s.streams, c(u));
              }
            if (
              ((i = n.filter(function (e) {
                return !e.xf;
              })),
              (n = n.filter(function (e) {
                return e.xf;
              })),
              !e.g.disableIFrames)
            )
              for (r = (n = l(n)).next(); !r.done; r = n.next())
                for (
                  a = (r = r.value).xf.split(" "), s = (o = l(i)).next();
                  !s.done;
                  s = o.next()
                )
                  if (((s = s.value), a.includes(s.id)))
                    for (u = (s = l(s.streams)).next(); !u.done; u = s.next())
                      Cr(u.value, r.streams);
            if (
              ((n = ml(e.g.disableAudio, i, "audio")),
              (r = ml(e.g.disableVideo, i, "video")),
              (a = ml(e.g.disableText, i, Lt)),
              (i = ml(e.g.disableThumbnails, i, "image")),
              0 === r.length && 0 === n.length)
            )
              throw new Me(2, 4, 4004);
            return {
              id: t.ia.id,
              audioStreams: n,
              videoStreams: r,
              textStreams: a,
              imageStreams: i,
            };
          }
          function ml(e, t, n) {
            return e || !t.length
              ? []
              : t.reduce(function (e, t) {
                  return t.contentType != n || e.push.apply(e, c(t.streams)), e;
                }, []);
          }
          function vl(t, n, i, r) {
            function a(e) {
              var i = e.attributes["dvb:fontFamily"];
              (e = e.attributes["dvb:url"]),
                i &&
                  e &&
                  ((e = Ct(n.Z.Ca(), [e], n.eb())), t.j.addFont(i, e[0]));
            }
            function o(e) {
              switch (e) {
                case 1:
                case 5:
                case 6:
                case 7:
                  return "srgb";
                case 9:
                  return "rec2020";
                case 11:
                case 12:
                  return "p3";
              }
            }
            function s(e) {
              switch (e) {
                case 1:
                case 6:
                case 13:
                case 14:
                case 15:
                  return "SDR";
                case 16:
                  return "PQ";
                case 18:
                  return "HLG";
              }
            }
            (n.Z = xl(t, r, n.ia, null)), (n.Z.position = i);
            var u = !1,
              d = (i = bn(r, "Role"))
                .map(function (e) {
                  return e.attributes.value;
                })
                .filter(Yi),
              h = void 0,
              f = n.Z.contentType == Lt;
            f && (h = "subtitle");
            for (var p = (i = l(i)).next(); !p.done; p = i.next()) {
              var g = (p = p.value).attributes.schemeIdUri;
              if (null == g || "urn:mpeg:dash:role:2011" == g)
                switch (((p = p.attributes.value), p)) {
                  case "main":
                    u = !0;
                    break;
                  case "caption":
                  case "subtitle":
                    h = p;
                }
            }
            var m = bn(r, "EssentialProperty");
            i = null;
            var v = !1;
            (p = null), (g = !1);
            for (var y = (m = l(m)).next(); !y.done; y = m.next()) {
              var b = (y = y.value).attributes.schemeIdUri;
              if ("http://dashif.org/guidelines/trickmode" == b)
                i = y.attributes.value;
              else if ("urn:mpeg:mpegB:cicp:TransferCharacteristics" == b)
                var S = s(parseInt(y.attributes.value, 10));
              else if ("urn:mpeg:mpegB:cicp:ColourPrimaries" == b)
                var T = o(parseInt(y.attributes.value, 10));
              else
                "urn:mpeg:mpegB:cicp:MatrixCoefficients" != b &&
                  ("urn:mpeg:dash:ssr:2023" == b && t.g.dash.enableFastSwitching
                    ? (v = !0)
                    : "urn:dvb:dash:fontdownload:2014" == b
                    ? a(y)
                    : ("urn:mpeg:dash:urlparam:2014" == b && (p = yl(t, y))) ||
                      (g = !0));
            }
            if (g) return null;
            var A = null;
            for (
              m = (g = l((g = bn(r, "SupplementalProperty")))).next();
              !m.done;
              m = g.next()
            )
              "http://dashif.org/guidelines/last-segment-number" ==
              (y = (m = m.value).attributes.schemeIdUri)
                ? (A = parseInt(m.attributes.value, 10) - 1)
                : "urn:mpeg:mpegB:cicp:TransferCharacteristics" == y
                ? (S = s(parseInt(m.attributes.value, 10)))
                : "urn:mpeg:mpegB:cicp:ColourPrimaries" == y
                ? (T = o(parseInt(m.attributes.value, 10)))
                : "urn:dvb:dash:fontdownload:2014" == y
                ? a(m)
                : "urn:mpeg:dash:urlparam:2014" == y && (p = yl(t, m));
            p && (n.eb = p), (p = bn(r, "Accessibility"));
            var k,
              I = new Map();
            for (g = (p = l(p)).next(); !g.done; g = p.next())
              if (
                ((g = (m = g.value).attributes.schemeIdUri),
                (m = m.attributes.value),
                "urn:scte:dash:cc:cea-608:2015" != g || t.g.disableText)
              )
                if ("urn:scte:dash:cc:cea-708:2015" != g || t.g.disableText)
                  "urn:mpeg:dash:role:2011" == g
                    ? null != m &&
                      (d.push(m), "captions" == m && (h = "caption"))
                    : "urn:tva:metadata:cs:AudioPurposeCS:2007" == g &&
                      ("1" == m
                        ? (k = "visually impaired")
                        : "2" == m && (k = "hard of hearing"));
                else if (((g = 1), null != m))
                  for (
                    y = (m = l(m.split(";"))).next();
                    !y.done;
                    y = m.next()
                  ) {
                    b = y.value;
                    var C = (y = void 0);
                    b.includes("=")
                      ? ((y = "svc" + (b = b.split("="))[0]),
                        (C = b[1].split(",")[0].split(":").pop()))
                      : ((y = "svc" + g), g++, (C = b)),
                      I.set(y, tr(C));
                  }
                else I.set("svc1", "und");
              else if (((g = 1), null != m))
                for (
                  b = (y = l((m = m.split(";")))).next();
                  !b.done;
                  b = y.next()
                ) {
                  C = b.value;
                  var M = (b = void 0);
                  C.includes("=")
                    ? ((b = (C = C.split("="))[0].startsWith("CC")
                        ? C[0]
                        : "CC" + C[0]),
                      (M = C[1] || "und"))
                    : ((b = "CC" + g), 2 == m.length ? (g += 2) : g++, (M = C)),
                    I.set(b, tr(M));
                }
              else I.set("CC1", "und");
            var E = _o(
              (p = bn(r, "ContentProtection")),
              t.g.ignoreDrmInfo,
              t.g.dash.keySystemsByURI
            );
            n.Z.encrypted = 0 < p.length;
            var D = tr(n.Z.language || "und"),
              L = n.Z.label,
              R = new Map();
            if (
              ((r = bn(r, "Representation")), !t.g.ignoreSupplementalCodecs)
            ) {
              for (p = [], m = (g = l(r)).next(); !m.done; m = g.next())
                (m = In(
                  (y = m.value),
                  "urn:scte:dash:scte214-extensions",
                  "supplementalCodecs"
                )) &&
                  (((y = dn(y)).attributes.codecs = m.split(" ").join(",")),
                  y.attributes.id &&
                    (y.attributes.supplementalId =
                      y.attributes.id + "_supplementalCodecs"),
                  p.push(y));
              r.push.apply(r, c(p));
            }
            if (
              ((p = r
                .map(function (i) {
                  var r = (function (t, n, i, r, a, o, s, u, l, c, d, h) {
                    n.I = xl(t, c, n.Z, null);
                    var f = n.I.id;
                    if (
                      ((t.da = Math.min(t.da, n.I.Na)),
                      (t.W = 0 < t.da),
                      !(function (e) {
                        var t = e.Ec ? 1 : 0;
                        return (
                          (t += e.Bb ? 1 : 0),
                          (t += e.Lb ? 1 : 0),
                          0 == t
                            ? e.contentType == Lt ||
                              "application" == e.contentType
                            : (1 != t && (e.Ec && (e.Bb = null), (e.Lb = null)),
                              !0)
                        );
                      })(n.I))
                    )
                      return null;
                    var p = n.$.start;
                    (n.bandwidth = kn(c, "bandwidth", Rn) || 0), (n.roles = u);
                    var g = bn(c, "SupplementalProperty"),
                      m = bn(c, "EssentialProperty"),
                      v = bn(c, "ContentProtection");
                    c = null;
                    var y,
                      b,
                      S = m.find(function (e) {
                        return (
                          "urn:mpeg:dash:urlparam:2014" ==
                          e.attributes.schemeIdUri
                        );
                      });
                    (S ||
                      (S = g.find(function (e) {
                        return (
                          "urn:mpeg:dash:urlparam:2014" ==
                          e.attributes.schemeIdUri
                        );
                      }))) &&
                      (c = yl(t, S)),
                      c && (n.eb = c),
                      (S = n.I.contentType),
                      (c = S == Lt || "application" == S),
                      (S = "image" == S),
                      v.length && (n.Z.encrypted = !0);
                    try {
                      var T = void 0;
                      if (i.ne) {
                        var A = n.I.Ca,
                          k = n.eb,
                          I = es(Ct(A(), [i.ne.Sh], k()), t.g.retryParameters);
                        T = {
                          bitsKey: 128,
                          blockCipherMode: "CBC",
                          iv: i.ne.iv,
                          firstMediaSequenceNumber: 0,
                          fetchKey: function () {
                            var n, i, r;
                            return P(function (a) {
                              if (1 == a.g) return w(a, Il(t, I, 6), 2);
                              if (3 != a.g) {
                                if (!(n = a.h).data || 16 != n.data.byteLength)
                                  throw new Me(2, 4, 4049);
                                return (
                                  (i = { name: "AES-CBC" }),
                                  (r = T),
                                  w(
                                    a,
                                    e.crypto.subtle.importKey(
                                      "raw",
                                      n.data,
                                      i,
                                      !0,
                                      ["decrypt"]
                                    ),
                                    3
                                  )
                                );
                              }
                              (r.cryptoKey = a.h), (T.fetchKey = void 0), x(a);
                            });
                          },
                        };
                      }
                      if (
                        ((n.I.aesKey = T),
                        (A = function (e, n, i, r) {
                          return Al(t, e, n, i, r);
                        }),
                        n.I.Ec)
                      )
                        var C = Rs(n, A, T);
                      else if (n.I.Bb) C = Bs(n, t.o, T);
                      else if (n.I.Lb)
                        C = Hs(
                          n,
                          A,
                          t.o,
                          !!t.i,
                          t.g.dash.initialSegmentLimit,
                          t.la,
                          T,
                          h,
                          !1
                        );
                      else {
                        var M = n.$.duration || 0,
                          E = n.I.Ca,
                          D = n.I.mimeType,
                          L = n.I.codecs;
                        C = {
                          Vb: function () {
                            var e = Es(p, M, E());
                            return (
                              e.Tb(function (e) {
                                (e.mimeType = D), (e.codecs = L);
                              }),
                              Promise.resolve(e)
                            );
                          },
                        };
                      }
                    } catch (e) {
                      if ((c || S) && 4002 == e.code) return null;
                      throw e;
                    }
                    if (
                      ((h = (function (e, t, n, i) {
                        var r = _o(e, n, i);
                        if (t.Qf)
                          (e =
                            1 == t.drmInfos.length && !t.drmInfos[0].keySystem),
                            (n = 0 == r.drmInfos.length),
                            (0 == t.drmInfos.length || (e && !n)) &&
                              (t.drmInfos = r.drmInfos),
                            (t.Qf = !1);
                        else if (
                          0 < r.drmInfos.length &&
                          ((t.drmInfos = t.drmInfos.filter(function (e) {
                            return r.drmInfos.some(function (t) {
                              return t.keySystem == e.keySystem;
                            });
                          })),
                          0 == t.drmInfos.length)
                        )
                          throw new Me(2, 4, 4008);
                        return r.Kf || t.Kf;
                      })(v, i, t.g.ignoreDrmInfo, t.g.dash.keySystemsByURI)),
                      (h = new Set(h ? [h] : [])),
                      (v = !1),
                      g.some(function (e) {
                        return (
                          "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" ==
                            e.attributes.schemeIdUri &&
                          "JOC" == e.attributes.value
                        );
                      }) && (v = !0),
                      (g = !1),
                      c &&
                        (g =
                          u.includes("forced_subtitle") ||
                          u.includes("forced-subtitle")),
                      S &&
                        ((m = m.find(function (e) {
                          return [
                            "http://dashif.org/thumbnail_tile",
                            "http://dashif.org/guidelines/thumbnail_tile",
                          ].includes(e.attributes.schemeIdUri);
                        })) && (y = m.attributes.value),
                        !y))
                    )
                      return null;
                    (c = n.I.codecs),
                      n.profiles.includes(
                        "http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10"
                      ) &&
                        (c.includes("hvc1.2.4.L153.B0") ||
                          c.includes("hev1.2.4.L153.B0")) &&
                        (b = "PQ"),
                      (m = n.I.id ? n.ia.id + "," + n.I.id : ""),
                      t.D.length &&
                        f &&
                        t.s.set(
                          n.ia.id + "," + f,
                          (function (e) {
                            function t(e) {
                              return e
                                ? (((e = hn(e)).Ec = null),
                                  (e.Bb = null),
                                  (e.Lb = zn(e.Lb)),
                                  e)
                                : null;
                            }
                            return (
                              (e = hn(e)),
                              (e.ia = t(e.ia)),
                              (e.Z = t(e.Z)),
                              (e.I = t(e.I)),
                              e.$ && ((e.$ = hn(e.$)), (e.$.node = null)),
                              e
                            );
                          })(n)
                        );
                    var R =
                      m && t.o.has(m)
                        ? t.o.get(m)
                        : {
                            id: t.pa++,
                            originalId: n.I.id,
                            groupId: null,
                            createSegmentIndex: function () {
                              return Promise.resolve();
                            },
                            closeSegmentIndex: function () {
                              R.segmentIndex &&
                                (R.segmentIndex.release(),
                                (R.segmentIndex = null));
                            },
                            segmentIndex: null,
                            mimeType: n.I.mimeType,
                            codecs: c,
                            frameRate: n.I.frameRate,
                            pixelAspectRatio: n.I.pixelAspectRatio,
                            bandwidth: n.bandwidth,
                            width: n.I.width,
                            height: n.I.height,
                            kind: r,
                            encrypted: 0 < i.drmInfos.length,
                            drmInfos: i.drmInfos,
                            keyIds: h,
                            language: a,
                            originalLanguage: n.Z.language,
                            label: o,
                            type: n.Z.contentType,
                            primary: s,
                            trickModeVideo: null,
                            dependencyStream: null,
                            emsgSchemeIdUris: n.I.emsgSchemeIdUris,
                            roles: u,
                            forced: g,
                            channelsCount: n.I.Id,
                            audioSamplingRate: n.I.audioSamplingRate,
                            spatialAudio: v,
                            closedCaptions: l,
                            hdr: b,
                            colorGamut: void 0,
                            videoLayout: void 0,
                            tilesLayout: y,
                            accessibilityPurpose: d,
                            external: !1,
                            fastSwitching: !1,
                            fullMimeTypes: new Set([
                              Ci(n.I.mimeType, n.I.codecs),
                            ]),
                            isAudioMuxedInVideo: !1,
                            baseOriginalId: null,
                          };
                    return (
                      (R.createSegmentIndex = function () {
                        var e;
                        return P(function (t) {
                          if (1 == t.g)
                            return R.segmentIndex
                              ? t.u(0)
                              : ((e = R), w(t, C.Vb(), 3));
                          (e.segmentIndex = t.h), x(t);
                        });
                      }),
                      m &&
                        n.wb &&
                        !t.o.has(m) &&
                        ((n = n.ia.id || ""),
                        t.B.has(n) || t.B.set(n, []),
                        t.o.set(m, R),
                        t.B.get(n).push(m)),
                      R
                    );
                  })(t, n, E, h, D, L, u, d, I, i, k, A);
                  return r &&
                    ((r.hdr = r.hdr || S),
                    (r.colorGamut = r.colorGamut || T),
                    (r.fastSwitching = v),
                    (i = i.attributes.dependencyId))
                    ? ((r.baseOriginalId = i), R.set(i, r), null)
                    : r;
                })
                .filter(function (e) {
                  return !!e;
                })),
              0 == p.length && 0 == R.size)
            ) {
              if (
                ((i = "image" == n.Z.contentType),
                t.g.dash.ignoreEmptyAdaptationSet || f || i)
              )
                return null;
              throw new Me(2, 4, 4003);
            }
            if (!n.Z.contentType || "application" == n.Z.contentType)
              for (
                n.Z.contentType = kl(p[0].mimeType, p[0].codecs),
                  g = (f = l(p)).next();
                !g.done;
                g = f.next()
              )
                g.value.type = n.Z.contentType;
            for (
              f = n.Z.id || "__fake__" + t.pa++, m = (g = l(p)).next();
              !m.done;
              m = g.next()
            ) {
              for (
                m = m.value, b = (y = l(E.drmInfos)).next();
                !b.done;
                b = y.next()
              )
                (b = b.value).keyIds =
                  b.keyIds && m.keyIds
                    ? new Set([].concat(c(b.keyIds), c(m.keyIds)))
                    : b.keyIds || m.keyIds;
              m.groupId = f;
            }
            return (
              (r = r
                .map(function (e) {
                  return e.attributes.supplementalId || e.attributes.id;
                })
                .filter(Yi)),
              {
                id: f,
                contentType: n.Z.contentType,
                language: D,
                Si: u,
                streams: p,
                drmInfos: E.drmInfos,
                xf: i,
                li: r,
                Zg: R,
              }
            );
          }
          function yl(e, t) {
            if (
              (t = An(
                t,
                "urn:mpeg:dash:schema:urlparam:2014",
                "UrlQueryInfo"
              )) &&
              kn(t, "useMPDUrlQuery", Un, !1)
            ) {
              var n = t.attributes.queryTemplate;
              if (n)
                return function () {
                  return "$querypart$" == n
                    ? e.ca
                    : n
                        .split("&")
                        .map(function (t) {
                          if ("$querypart$" == t) return e.ca;
                          var n = /\$query:(.*?)\$/g.exec(t);
                          if (n && 2 == n.length) {
                            n = n[1];
                            var i = new be(e.ca).get(n);
                            if (i.length) return n + "=" + i[0];
                          }
                          return t;
                        })
                        .join("&");
                };
            }
            return null;
          }
          function bl(e) {
            var t, n;
            return P(function (i) {
              switch (i.g) {
                case 1:
                  return (t = 0), S(i, 2), w(i, al(e), 4);
                case 4:
                  (t = i.h), T(i, 3);
                  break;
                case 2:
                  if (((n = A(i)), e.j)) {
                    if (e.g.raiseFatalErrorOnManifestUpdateRequestFailure)
                      return e.j.onError(n), i.return();
                    (n.severity = 1), e.j.onError(n);
                  }
                case 3:
                  if (!e.j) return i.return();
                  e.j.onManifestUpdated(), wl(e, t), x(i);
              }
            });
          }
          function wl(e, t) {
            if (!(0 > e.J)) {
              var n = e.J;
              0 <= e.g.updatePeriod && (n = e.g.updatePeriod),
                e.K.ea(Math.max(n - t, z(e.oa)));
            }
          }
          function xl(e, t, n, i) {
            (n = n || {
              contentType: "",
              mimeType: "",
              codecs: "",
              emsgSchemeIdUris: [],
              frameRate: void 0,
              pixelAspectRatio: void 0,
              Id: null,
              audioSamplingRate: null,
              Na: 0,
              Qd: 0,
              encrypted: !1,
            }),
              (i = i || n.Ca);
            var r,
              a = t.attributes.id,
              o = t.attributes.supplementalId,
              s = bn(t, "BaseURL"),
              u = !1;
            if (e.h)
              for (var c = l(s), d = c.next(); !d.done; d = c.next()) {
                var h = d.value;
                (d = h.attributes.serviceLocation),
                  (h = xn(h)),
                  d && h && (tu(e.h, a, d, h), (u = !0));
              }
            (u && e.h) || (r = s.map(xn)),
              (c = t.attributes.contentType || n.contentType),
              (d = t.attributes.mimeType || n.mimeType),
              (h = $s([t.attributes.codecs || n.codecs]).join(","));
            var f = kn(t, "frameRate", jn) || n.frameRate,
              p = t.attributes.sar || n.pixelAspectRatio,
              g = (function (e, t) {
                t = t.slice();
                for (var n = (e = l(e)).next(); !n.done; n = e.next())
                  (n = n.value.attributes.schemeIdUri),
                    t.includes(n) || t.push(n);
                return t;
              })(bn(t, "InbandEventStream"), n.emsgSchemeIdUris),
              m = bn(t, "AudioChannelConfiguration");
            m =
              (function (e) {
                for (var t = (e = l(e)).next(); !t.done; t = e.next()) {
                  var n = (t = t.value).attributes.schemeIdUri;
                  if (n && (t = t.attributes.value))
                    switch (n) {
                      case "urn:mpeg:dash:outputChannelPositionList:2012":
                        return t.trim().split(/ +/).length;
                      case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
                      case "urn:dts:dash:audio_channel_configuration:2012":
                        if (!(t = parseInt(t, 10))) continue;
                        return t;
                      case "tag:dolby.com,2015:dash:audio_channel_configuration:2015":
                        if (
                          ((n = [
                            2, 1, 2, 2, 2, 2, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2,
                            2,
                          ]),
                          !(t = parseInt(t, 16)))
                        )
                          continue;
                        for (var i = 0, r = 0; r < n.length; r++)
                          t & (1 << r) && (i += n[r]);
                        if (i) return i;
                        continue;
                      case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
                      case "urn:dolby:dash:audio_channel_configuration:2011":
                        if (
                          ((n = [
                            1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1,
                          ].reverse()),
                          !(t = parseInt(t, 16)))
                        )
                          continue;
                        for (r = i = 0; r < n.length; r++)
                          t & (1 << r) && (i += n[r]);
                        if (i) return i;
                        continue;
                      case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                        if (
                          ((n = [
                            0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12,
                            10, 12, 14, 12, 14,
                          ]),
                          (t = parseInt(t, 10)) && 0 < t && t < n.length)
                        )
                          return n[t];
                    }
                }
                return null;
              })(m) || n.Id;
            var v = kn(t, "audioSamplingRate", Nn) || n.audioSamplingRate;
            c || (c = kl(d, h));
            var y = Tn(t, "SegmentBase"),
              b = Tn(t, "SegmentTemplate"),
              w = (y && kn(y, "availabilityTimeOffset", _n)) || 0,
              x = (b && kn(b, "availabilityTimeOffset", _n)) || 0,
              S =
                (s && s.length && kn(s[0], "availabilityTimeOffset", _n)) || 0;
            (w = n.Na + S + w + x),
              (x = null),
              (S = Tn(t, "SegmentSequenceProperties")) &&
                (S = Tn(S, "SAP")) &&
                (x = kn(S, "cadence", Ln)),
              (S = t.attributes.label);
            var T = bn(t, "Label");
            return (
              T && T.length && wn((T = T[0])) && (S = wn(T)),
              {
                Ca: function () {
                  return Ct(
                    i(),
                    s.length ? (e.h && u ? nu(e.h, a) : r || []) : []
                  );
                },
                Ec: y || n.Ec,
                Bb: Tn(t, "SegmentList") || n.Bb,
                Lb: b || n.Lb,
                width: kn(t, "width", Nn) || n.width,
                height: kn(t, "height", Nn) || n.height,
                contentType: c,
                mimeType: d,
                codecs: h,
                frameRate: f,
                pixelAspectRatio: p,
                emsgSchemeIdUris: g,
                id: o || a,
                originalId: a,
                language: t.attributes.lang,
                Id: m,
                audioSamplingRate: v,
                Na: w,
                yd: null,
                Qd: x || n.Qd,
                label: S || null,
                encrypted: !1,
              }
            );
          }
          function Sl(e, t, n, i) {
            var r, a, o, s, u, l, c;
            return P(function (d) {
              if (1 == d.g)
                return (
                  (r = [yt(n)]),
                  (a = Ct(t(), r)),
                  ((o = es(a, e.g.retryParameters)).method = i),
                  (s = e.j.networkingEngine.request(4, o, {
                    isPreload: e.fa(),
                  })),
                  $o(e.S, s),
                  w(d, s.promise, 2)
                );
              if (((u = d.h), "HEAD" == i)) {
                if (!u.headers || !u.headers.date) return d.return(0);
                l = u.headers.date;
              } else l = ht(u.data);
              return (
                (c = Date.parse(l)),
                isNaN(c) ? d.return(0) : d.return(c - Date.now())
              );
            });
          }
          function Tl(e, t, n, i, r) {
            for (
              var a = i.attributes.schemeIdUri || "",
                o = i.attributes.value || "",
                s = kn(i, "timescale", Nn) || 1,
                u = kn(i, "presentationTimeOffset", Nn) || 0,
                c = (i = l(bn(i, "Event"))).next();
              !c.done;
              c = i.next()
            ) {
              var d = kn((c = c.value), "presentationTime", Nn) || 0,
                h = kn(c, "duration", Nn) || 0;
              (h = (d = Math.max((d - u) / s + t, t)) + h / s),
                null != n &&
                  ((d = Math.min(d, t + n)), (h = Math.min(h, t + n))),
                h < r ||
                  ((c = {
                    schemeIdUri: a,
                    value: o,
                    startTime: d,
                    endTime: h,
                    id: c.attributes.id || "",
                    timescale: s,
                    eventElement: Vn(c),
                    eventNode: zn(c),
                  }),
                  e.j.onTimelineRegionAdded(c));
            }
          }
          function Al(e, t, n, i, r) {
            var a, o, s, u;
            return P(function (l) {
              return 1 == l.g
                ? ((a = as),
                  (o = r ? 0 : 1),
                  (s = iu(t, n, i, e.g.retryParameters)),
                  w(l, Il(e, s, a, { type: o }), 2))
                : ((u = l.h), l.return(u.data));
            });
          }
          function kl(e, t) {
            return zi((t = Ci(e, t))) ? Lt : e.split("/")[0];
          }
          function Il(e, t, n, i) {
            return (
              i || (i = {}),
              (i.isPreload = e.fa()),
              (t = e.j.networkingEngine.request(n, t, i)),
              $o(e.S, t),
              t.promise
            );
          }
          function Cl() {}
          ((i = rl.prototype).configure = function (e, t) {
            var n =
              this.j &&
              e.updatePeriod != this.g.updatePeriod &&
              0 <= e.updatePeriod;
            (this.g = e),
              t && (this.fa = t),
              n && this.i && this.i.presentationTimeline.R() && this.K.Nb(),
              this.h && this.h.configure(this.g),
              this.m &&
                (this.m.ug(this.g.dash.multiTypeVariantsAllowed && Ht()),
                this.m.Ag(this.g.dash.useStreamOnceInPeriodFlattening));
          }),
            (i.start = function (e, t) {
              var n,
                i = this;
              return P(function (r) {
                if (1 == r.g)
                  return (
                    (i.ga = t.isLowLatencyMode()),
                    (i.A = [e]),
                    (i.j = t),
                    w(r, al(i), 2)
                  );
                if (((n = r.h), i.j && wl(i, n), !i.j))
                  throw new Me(2, 7, 7001);
                return r.return(i.i);
              });
            }),
            (i.stop = function () {
              for (
                var e = l(this.o.values()), t = e.next();
                !t.done;
                t = e.next()
              )
                (t = t.value).segmentIndex && t.segmentIndex.release();
              return (
                this.m && this.m.release(),
                (this.g = this.j = null),
                (this.A = []),
                (this.i = null),
                this.o.clear(),
                this.B.clear(),
                this.s.clear(),
                (this.l = {
                  Gd: "",
                  type: "",
                  profiles: [],
                  zb: null,
                  Na: 0,
                  Ca: null,
                  cd: 0,
                }),
                (this.m = null),
                null != this.K && (this.K.stop(), (this.K = null)),
                this.h && this.h.destroy(),
                this.F && (this.F.release(), (this.F = null)),
                this.S.destroy()
              );
            }),
            (i.update = function () {
              var e,
                t = this;
              return P(function (n) {
                return 1 == n.g
                  ? (S(n, 2), w(n, al(t), 4))
                  : 2 != n.g
                  ? T(n, 0)
                  : ((e = A(n)),
                    t.j && e ? (t.j.onError(e), void x(n)) : n.return());
              });
            }),
            (i.onExpirationUpdated = function () {}),
            (i.onInitialVariantChosen = function (e) {
              if (this.i && this.i.presentationTimeline.R()) {
                var t = e.video || e.audio;
                if (t && t.segmentIndex) {
                  e = this.i.presentationTimeline.Gb();
                  var n = t.segmentIndex.find(e);
                  null != n &&
                    (t = t.segmentIndex.get(n)) &&
                    ((this.J = t.endTime - e), wl(this, 0));
                }
              }
            }),
            (i.banLocation = function (e) {
              this.h && this.h.banLocation(e);
            }),
            (i.setMediaElement = function (e) {
              this.G = e;
            }),
            B("shaka.dash.DashParser", rl),
            Xs("application/dash+xml", function () {
              return new rl();
            }),
            Xs("video/vnd.mpeg.dash.mpd", function () {
              return new rl();
            }),
            B("shaka.dependencies", Cl),
            (Cl.has = function (e) {
              return Dl.has(e);
            }),
            (Cl.add = function (e, t) {
              if (!El[e]) throw Error(e + " is not supported");
              e == Ml
                ? te("mux.js", "mux.js is no longer used in Shaka Player.")
                : Dl.set(e, function () {
                    return t;
                  });
            });
          var Ml = "muxjs",
            El = { Ti: Ml, ISOBoxer: "ISOBoxer" };
          Cl.Allowed = El;
          var Dl = new Map([
            [
              "ISOBoxer",
              function () {
                return e.ISOBoxer;
              },
            ],
          ]);
          function Pl(e) {
            (this.g = !1), (this.h = new Ho()), (this.i = e);
          }
          function Ll(e, t) {
            if (e.g) {
              if (t instanceof Me && 7003 == t.code) throw t;
              throw new Me(2, 7, 7003, t);
            }
          }
          function Rl(e) {
            for (
              var t = new Map(), n = l(Object.keys(e)), i = n.next();
              !i.done;
              i = n.next()
            )
              (i = i.value), t.set(i, e[i]);
            return t;
          }
          function Nl(e) {
            var t = {};
            return (
              e.forEach(function (e, n) {
                t[n] = e;
              }),
              t
            );
          }
          function _l(e) {
            var t = this;
            (this.C = e),
              (this.i = this.A = null),
              (this.fa = !1),
              (this.G = 0),
              (this.h = null),
              (this.o = new $()),
              (this.j = new Map()),
              (this.W = []),
              (this.B = new Map()),
              (this.K = !1),
              (this.m = new Ho()),
              (this.g = null),
              (this.s = function (n) {
                2 == n.severity && t.m.reject(n), e.onError(n);
              }),
              (this.Y = new Map()),
              (this.ga = new Map()),
              (this.L = new je(function () {
                return (function (e) {
                  var t = e.Y,
                    n = e.ga;
                  n.clear(),
                    t.forEach(function (e, t) {
                      return n.set(t, e);
                    }),
                    (t = Array.from(n.values())),
                    t.length &&
                      t.every(function (e) {
                        return "expired" == e;
                      }) &&
                      e.s(new Me(2, 6, 6014)),
                    e.C.kg(Nl(n));
                })(t);
              })),
              (this.da = !1),
              (this.O = []),
              (this.X = !1),
              (this.J = new je(function () {
                !(function (e) {
                  e.j.forEach(function (t, n) {
                    var i = t.$e,
                      r = n.expiration;
                    isNaN(r) && (r = 1 / 0),
                      r != i &&
                        (e.C.onExpirationUpdated(n.sessionId, r), (t.$e = r));
                  });
                })(t);
              })),
              this.m.catch(function () {}),
              (this.l = new Pl(function () {
                return (function (e) {
                  return P(function (t) {
                    switch (t.g) {
                      case 1:
                        return (
                          e.o.release(),
                          (e.o = null),
                          e.m.reject(),
                          e.J.stop(),
                          (e.J = null),
                          e.L.stop(),
                          (e.L = null),
                          w(t, Gl(e), 2)
                        );
                      case 2:
                        if (!e.i) {
                          t.u(3);
                          break;
                        }
                        return S(t, 4), w(t, e.i.setMediaKeys(null), 6);
                      case 6:
                        T(t, 5);
                        break;
                      case 4:
                        A(t);
                      case 5:
                        e.i = null;
                      case 3:
                        (e.h = null),
                          (e.A = null),
                          (e.B = new Map()),
                          (e.g = null),
                          (e.s = function () {}),
                          (e.C = null),
                          (e.ca = !1),
                          (e.F = null),
                          x(t);
                    }
                  });
                })(t);
              })),
              (this.ca = !1),
              (this.D = this.F = null),
              (this.S = function () {
                return !1;
              });
          }
          function Ul(t, n, i, r) {
            (r = void 0 === r || r), (t.B = new Map());
            for (var a = (i = l(i)).next(); !a.done; a = i.next())
              t.B.set(a.value, { initData: null, initDataType: null });
            for (
              a = (i = l(t.g.persistentSessionsMetadata)).next();
              !a.done;
              a = i.next()
            )
              (a = a.value),
                t.B.set(a.sessionId, {
                  initData: a.initData,
                  initDataType: a.initDataType,
                });
            return (
              (t.da = 0 < t.B.size),
              (function (t, n, i) {
                var r, a, o, s, u, c, d, h, f, p, g, m, v, y, b, x, k, I;
                return P(function (C) {
                  if (1 == C.g) {
                    for (
                      (function (t, n) {
                        if (((t = Rl(t)), 0 != t.size)) {
                          t = (function (t) {
                            var n = void 0 === n ? "cenc" : n,
                              i = [],
                              r = [],
                              a = [];
                            t.forEach(function (e, t) {
                              var n = t;
                              22 != n.length && (n = St(At(t), !1));
                              var o = e;
                              22 != o.length && (o = St(At(e), !1)),
                                (e = { kty: "oct", kid: n, k: o }),
                                i.push(e),
                                r.push(e.kid),
                                a.push(t);
                            }),
                              (t = JSON.stringify({ keys: i }));
                            var o = JSON.stringify({ kids: r });
                            return (
                              (o = [
                                { initData: Ae(gt(o)), initDataType: "keyids" },
                              ]),
                              {
                                keySystem: "org.w3.clearkey",
                                encryptionScheme: n,
                                licenseServerUri:
                                  "data:application/json;base64," + e.btoa(t),
                                distinctiveIdentifierRequired: !1,
                                persistentStateRequired: !1,
                                audioRobustness: "",
                                videoRobustness: "",
                                serverCertificate: null,
                                serverCertificateUri: "",
                                sessionType: "",
                                initData: o,
                                keyIds: new Set(a),
                              }
                            );
                          })(t);
                          for (var i = (n = l(n)).next(); !i.done; i = n.next())
                            (i = i.value).video && (i.video.drmInfos = [t]),
                              i.audio && (i.audio.drmInfos = [t]);
                        }
                      })(t.g.clearKeys, n),
                        !(r = n.some(function (e) {
                          return !!(
                            (e.video && e.video.drmInfos.length) ||
                            (e.audio && e.audio.drmInfos.length)
                          );
                        })) &&
                          i &&
                          ((a = Rl(t.g.servers)),
                          (function (e, t) {
                            var n = [];
                            for (
                              t.forEach(function (e, t) {
                                n.push({
                                  keySystem: t,
                                  licenseServerUri: e,
                                  distinctiveIdentifierRequired: !1,
                                  persistentStateRequired: !1,
                                  audioRobustness: "",
                                  videoRobustness: "",
                                  serverCertificate: null,
                                  serverCertificateUri: "",
                                  initData: [],
                                  keyIds: new Set(),
                                });
                              }),
                                e = l(e),
                                t = e.next();
                              !t.done;
                              t = e.next()
                            )
                              (t = t.value).video && (t.video.drmInfos = n),
                                t.audio && (t.audio.drmInfos = n);
                          })(n, a)),
                        o = new Set(),
                        s = l(n),
                        u = s.next();
                      !u.done;
                      u = s.next()
                    )
                      for (
                        c = u.value, d = ql(c), h = l(d), f = h.next();
                        !f.done;
                        f = h.next()
                      )
                        (p = f.value), o.add(p);
                    for (g = l(o), m = g.next(); !m.done; m = g.next())
                      Xl(
                        m.value,
                        Rl(t.g.servers),
                        Rl(t.g.advanced || {}),
                        t.g.keySystemsMapping
                      );
                    for (
                      v = function (e, n) {
                        for (
                          var i = [], r = (e = l(e)).next();
                          !r.done;
                          r = e.next()
                        ) {
                          var a,
                            o =
                              (r = r.value)[n] ||
                              (t.g.advanced &&
                                t.g.advanced[r.keySystem] &&
                                t.g.advanced[r.keySystem][n]) ||
                              "";
                          if (
                            ((a = "" == o) &&
                              (a =
                                !!(a = r.keySystem) &&
                                !!a.match(/^com\.widevine\.alpha/)),
                            a &&
                              ("audioRobustness" == n
                                ? (o = [t.g.defaultAudioRobustnessForWidevine])
                                : "videoRobustness" == n &&
                                  (o = [
                                    t.g.defaultVideoRobustnessForWidevine,
                                  ])),
                            "string" == typeof o)
                          )
                            i.push(r);
                          else if (Array.isArray(o))
                            for (
                              0 === o.length && (o = [""]),
                                a = (o = l(o)).next();
                              !a.done;
                              a = o.next()
                            ) {
                              var s = {};
                              i.push(
                                Object.assign({}, r, ((s[n] = a.value), s))
                              );
                            }
                        }
                        return i;
                      },
                        y = new Set(),
                        b = l(n),
                        x = b.next();
                      !x.done;
                      x = b.next()
                    )
                      (k = x.value).video &&
                        !y.has(k.video) &&
                        ((k.video.drmInfos = v(
                          k.video.drmInfos,
                          "videoRobustness"
                        )),
                        (k.video.drmInfos = v(
                          k.video.drmInfos,
                          "audioRobustness"
                        )),
                        y.add(k.video)),
                        k.audio &&
                          !y.has(k.audio) &&
                          ((k.audio.drmInfos = v(
                            k.audio.drmInfos,
                            "videoRobustness"
                          )),
                          (k.audio.drmInfos = v(
                            k.audio.drmInfos,
                            "audioRobustness"
                          )),
                          y.add(k.audio));
                    return (
                      y.clear(),
                      w(C, fr(n, t.da, t.ca, t.g.preferredKeySystems), 2)
                    );
                  }
                  return (
                    Ll(t.l),
                    r || Object.keys(t.g.servers).length
                      ? ((I = (function (e, t) {
                          var n, i, r, a, o, s, u;
                          return P(function (c) {
                            switch (c.g) {
                              case 1:
                                if (((n = new Map()), t.length)) {
                                  (i = (function (e, t, n) {
                                    for (
                                      var i = l(t), r = i.next();
                                      !r.done;
                                      r = i.next()
                                    )
                                      for (
                                        var a = (r = l(ql(r.value))).next();
                                        !a.done;
                                        a = r.next()
                                      )
                                        (a = a.value),
                                          n.has(a.keySystem) ||
                                            n.set(a.keySystem, []),
                                          n.get(a.keySystem).push(a);
                                    if (1 == n.size && n.has(""))
                                      throw new Me(2, 6, 6e3);
                                    (i = e.g.preferredKeySystems),
                                      i.length ||
                                        ((r = Rl(e.g.servers)),
                                        1 == r.size &&
                                          (i = Array.from(r.keys()))),
                                      (r = l(i));
                                    var o = r.next();
                                    for (
                                      a = {};
                                      !o.done;
                                      a = { ng: void 0 }, o = r.next()
                                    ) {
                                      a.ng = o.value;
                                      for (
                                        var s = (o = l(t)).next();
                                        !s.done;
                                        s = o.next()
                                      )
                                        if (
                                          (s = s.value.decodingInfos.find(
                                            (function (e) {
                                              return function (t) {
                                                return (
                                                  t.supported &&
                                                  null != t.keySystemAccess &&
                                                  t.keySystemAccess.keySystem ==
                                                    e.ng
                                                );
                                              };
                                            })(a)
                                          ))
                                        )
                                          return s.keySystemAccess;
                                    }
                                    for (
                                      r = l([!0, !1]), a = r.next();
                                      !a.done;
                                      a = r.next()
                                    )
                                      for (
                                        a = a.value, o = l(t), s = o.next();
                                        !s.done;
                                        s = o.next()
                                      )
                                        for (
                                          var u = (s = l(
                                            s.value.decodingInfos
                                          )).next();
                                          !u.done;
                                          u = s.next()
                                        )
                                          if (
                                            (u = u.value).supported &&
                                            u.keySystemAccess
                                          ) {
                                            var c = u.keySystemAccess.keySystem;
                                            if (!i.includes(c)) {
                                              var d = n.get(c);
                                              for (
                                                !d &&
                                                  e.g.keySystemsMapping[c] &&
                                                  (d = n.get(
                                                    e.g.keySystemsMapping[c]
                                                  )),
                                                  d = (c = l(d)).next();
                                                !d.done;
                                                d = c.next()
                                              )
                                                if (
                                                  !!d.value.licenseServerUri ==
                                                  a
                                                )
                                                  return u.keySystemAccess;
                                            }
                                          }
                                    return null;
                                  })(e, t, n)),
                                    c.u(2);
                                  break;
                                }
                                return w(
                                  c,
                                  (function (e) {
                                    var t,
                                      n,
                                      i,
                                      r,
                                      a,
                                      o,
                                      s,
                                      u,
                                      c,
                                      d,
                                      h,
                                      f,
                                      p,
                                      g,
                                      m,
                                      v;
                                    return P(function (y) {
                                      switch (y.g) {
                                        case 1:
                                          if (
                                            1 == (void 0).size &&
                                            (void 0).has("")
                                          )
                                            throw new Me(2, 6, 6e3);
                                          for (
                                            n = l((void 0).values()),
                                              i = n.next();
                                            !i.done;
                                            i = n.next()
                                          )
                                            0 ==
                                              (r = i.value).audioCapabilities
                                                .length &&
                                              delete r.audioCapabilities,
                                              0 == r.videoCapabilities.length &&
                                                delete r.videoCapabilities;
                                          (a = l(e.g.preferredKeySystems)),
                                            (o = a.next());
                                        case 2:
                                          if (o.done) {
                                            y.u(4);
                                            break;
                                          }
                                          if (
                                            ((s = o.value), !(void 0).has(s))
                                          ) {
                                            y.u(3);
                                            break;
                                          }
                                          return (
                                            (u = (void 0).get(s)),
                                            S(y, 6),
                                            w(
                                              y,
                                              navigator.requestMediaKeySystemAccess(
                                                s,
                                                [u]
                                              ),
                                              8
                                            )
                                          );
                                        case 8:
                                          return (t = y.h), y.return(t);
                                        case 6:
                                          A(y);
                                        case 7:
                                          Ll(e.l);
                                        case 3:
                                          (o = a.next()), y.u(2);
                                          break;
                                        case 4:
                                          (c = l([!0, !1])), (d = c.next());
                                        case 9:
                                          if (d.done) {
                                            y.u(11);
                                            break;
                                          }
                                          (h = d.value),
                                            (f = l((void 0).keys())),
                                            (p = f.next());
                                        case 12:
                                          if (p.done) {
                                            (d = c.next()), y.u(9);
                                            break;
                                          }
                                          if (
                                            ((g = p.value),
                                            (m = (void 0).get(g)),
                                            (v = m.drmInfos.some(function (e) {
                                              return !!e.licenseServerUri;
                                            })),
                                            v != h)
                                          ) {
                                            y.u(13);
                                            break;
                                          }
                                          return (
                                            S(y, 15),
                                            w(
                                              y,
                                              navigator.requestMediaKeySystemAccess(
                                                g,
                                                [m]
                                              ),
                                              17
                                            )
                                          );
                                        case 17:
                                          return (t = y.h), y.return(t);
                                        case 15:
                                          A(y);
                                        case 16:
                                          Ll(e.l);
                                        case 13:
                                          (p = f.next()), y.u(12);
                                          break;
                                        case 11:
                                          return y.return(t);
                                      }
                                    });
                                  })(e),
                                  3
                                );
                              case 3:
                                i = c.h;
                              case 2:
                                if (!(r = i)) {
                                  if (!navigator.requestMediaKeySystemAccess)
                                    throw new Me(2, 6, 6020);
                                  throw new Me(2, 6, 6001);
                                }
                                if (
                                  (Ll(e.l),
                                  S(c, 4),
                                  r.getConfiguration(),
                                  (a =
                                    e.g.keySystemsMapping[r.keySystem] ||
                                    r.keySystem),
                                  t.length)
                                ) {
                                  var d = a,
                                    h = n.get(a),
                                    f = [],
                                    p = [],
                                    g = [],
                                    m = [],
                                    v = [],
                                    y = new Set(),
                                    b = new Set();
                                  Wl(h, f, p, m, g, v, y, b);
                                  var x = e.da
                                    ? "persistent-license"
                                    : "temporary";
                                  for (
                                    d = {
                                      keySystem: d,
                                      encryptionScheme: f[0],
                                      licenseServerUri: p[0],
                                      distinctiveIdentifierRequired:
                                        h[0].distinctiveIdentifierRequired,
                                      persistentStateRequired:
                                        h[0].persistentStateRequired,
                                      sessionType: h[0].sessionType || x,
                                      audioRobustness:
                                        h[0].audioRobustness || "",
                                      videoRobustness:
                                        h[0].videoRobustness || "",
                                      serverCertificate: m[0],
                                      serverCertificateUri: g[0],
                                      initData: v,
                                      keyIds: y,
                                    },
                                      0 < b.size && (d.keySystemUris = b),
                                      b = (h = l(h)).next();
                                    !b.done;
                                    b = h.next()
                                  )
                                    (b = b.value)
                                      .distinctiveIdentifierRequired &&
                                      (d.distinctiveIdentifierRequired =
                                        b.distinctiveIdentifierRequired),
                                      b.persistentStateRequired &&
                                        (d.persistentStateRequired =
                                          b.persistentStateRequired);
                                  h = d;
                                } else (h = a), (b = (void 0).get(a)), (d = []), (f = []), (p = []), (g = []), (m = []), (v = new Set()), Wl(b.drmInfos, d, f, g, p, m, v), (h = { keySystem: h, encryptionScheme: d[0], licenseServerUri: f[0], distinctiveIdentifierRequired: "required" == b.distinctiveIdentifier, persistentStateRequired: "required" == b.persistentState, sessionType: b.sessionTypes[0] || "temporary", audioRobustness: (b.audioCapabilities ? b.audioCapabilities[0].robustness : "") || "", videoRobustness: (b.videoCapabilities ? b.videoCapabilities[0].robustness : "") || "", serverCertificate: g[0], serverCertificateUri: p[0], initData: m, keyIds: v });
                                if (((e.h = h), !e.h.licenseServerUri))
                                  throw new Me(2, 6, 6012, e.h.keySystem);
                                return w(c, r.createMediaKeys(), 6);
                              case 6:
                                if (
                                  ((o = c.h),
                                  Ll(e.l),
                                  (e.A = o),
                                  "" == e.g.minHdcpVersion ||
                                    !("getStatusForPolicy" in e.A))
                                ) {
                                  c.u(7);
                                  break;
                                }
                                return (
                                  S(c, 8),
                                  w(
                                    c,
                                    e.A.getStatusForPolicy({
                                      minHdcpVersion: e.g.minHdcpVersion,
                                    }),
                                    10
                                  )
                                );
                              case 10:
                                if ("usable" != c.h) throw new Me(2, 6, 6018);
                                Ll(e.l), T(c, 7, 4);
                                break;
                              case 8:
                                if ((s = A(c, 4)) instanceof Me) throw s;
                                throw new Me(2, 6, 6019, s.message);
                              case 7:
                                return (
                                  (e.fa = !0),
                                  w(
                                    c,
                                    (function (e) {
                                      var t, n;
                                      return P(function (i) {
                                        switch (i.g) {
                                          case 1:
                                            if (!e.A || !e.h) return i.return();
                                            if (
                                              !e.h.serverCertificateUri ||
                                              (e.h.serverCertificate &&
                                                e.h.serverCertificate.length)
                                            ) {
                                              i.u(2);
                                              break;
                                            }
                                            return (
                                              (t = es(
                                                [e.h.serverCertificateUri],
                                                e.g.retryParameters
                                              )),
                                              S(i, 3),
                                              w(
                                                i,
                                                e.C.cc.request(5, t, {
                                                  isPreload: e.S(),
                                                }).promise,
                                                5
                                              )
                                            );
                                          case 5:
                                            (n = i.h),
                                              (e.h.serverCertificate = Ae(
                                                n.data
                                              )),
                                              T(i, 4);
                                            break;
                                          case 3:
                                            throw new Me(2, 6, 6017, A(i));
                                          case 4:
                                            if (e.l.g) return i.return();
                                          case 2:
                                            return e.h.serverCertificate &&
                                              e.h.serverCertificate.length
                                              ? (S(i, 6),
                                                w(
                                                  i,
                                                  e.A.setServerCertificate(
                                                    e.h.serverCertificate
                                                  ),
                                                  8
                                                ))
                                              : i.return();
                                          case 8:
                                            T(i, 0);
                                            break;
                                          case 6:
                                            throw new Me(
                                              2,
                                              6,
                                              6004,
                                              A(i).message
                                            );
                                        }
                                      });
                                    })(e),
                                    11
                                  )
                                );
                              case 11:
                                Ll(e.l), T(c, 0);
                                break;
                              case 4:
                                if (
                                  ((u = A(c)),
                                  Ll(e.l, u),
                                  (e.h = null),
                                  u instanceof Me)
                                )
                                  throw u;
                                throw new Me(2, 6, 6002, u.message);
                            }
                          });
                        })(t, n)),
                        C.return(r ? I : I.catch(function () {})))
                      : ((t.fa = !0), C.return(Promise.resolve()))
                  );
                });
              })(t, n, r)
            );
          }
          function jl(e) {
            var t;
            return P(function (n) {
              switch (n.g) {
                case 1:
                  if (e.i.mediaKeys) return n.return();
                  if (!e.F) {
                    n.u(2);
                    break;
                  }
                  return w(n, e.F, 3);
                case 3:
                  return Ll(e.l), n.return();
                case 2:
                  return S(n, 4), (e.F = e.i.setMediaKeys(e.A)), w(n, e.F, 6);
                case 6:
                  T(n, 5);
                  break;
                case 4:
                  (t = A(n)), e.s(new Me(2, 6, 6003, t.message));
                case 5:
                  Ll(e.l), x(n);
              }
            });
          }
          function Ol(e, t, n) {
            if (n.length) {
              if (e.g.ignoreDuplicateInitData) {
                for (
                  var i = e.j.values(), r = (i = l(i)).next();
                  !r.done;
                  r = i.next()
                )
                  if (Se(n, r.value.initData)) return;
                var a = !1;
                if (
                  (e.B.forEach(function (e) {
                    !a && Se(n, e.initData) && (a = !0);
                  }),
                  a)
                )
                  return;
              }
              (e.K = !0),
                0 < e.j.size &&
                  Kl(e) &&
                  (e.m.resolve(),
                  (e.K = !1),
                  (e.m = new Ho()),
                  e.m.catch(function () {})),
                (function (e, t, n, i) {
                  try {
                    var r = e.A.createSession(i);
                  } catch (t) {
                    return void e.s(new Me(2, 6, 6005, t.message));
                  }
                  e.o.H(r, "message", function (t) {
                    e.i &&
                    e.g.delayLicenseRequestUntilPlayed &&
                    e.i.paused &&
                    !e.X
                      ? e.O.push(t)
                      : Hl(e, t);
                  }),
                    e.o.H(r, "keystatuseschange", function (t) {
                      return Vl(e, t);
                    }),
                    e.j.set(r, {
                      initData: n,
                      initDataType: t,
                      loaded: !1,
                      $e: 1 / 0,
                      ub: null,
                      type: i,
                    });
                  try {
                    n = e.g.initDataTransform(n, t, e.h);
                  } catch (n) {
                    return (
                      (t = n),
                      n instanceof Me || (t = new Me(2, 6, 6016, n)),
                      void e.s(t)
                    );
                  }
                  e.g.logLicenseExchange && St(n),
                    r.generateRequest(t, n).catch(function (t) {
                      if (!e.l.g) {
                        e.j.delete(r);
                        var n = t.errorCode;
                        if (n && n.systemCode) {
                          var i = n.systemCode;
                          0 > i && (i += Math.pow(2, 32)),
                            (i = "0x" + i.toString(16));
                        }
                        e.s(new Me(2, 6, 6006, t.message, t, i));
                      }
                    });
                })(e, t, n, e.h.sessionType);
            }
          }
          function Bl(e) {
            Kl(e) && e.m.resolve();
          }
          function Fl(e, t) {
            new je(function () {
              (t.loaded = !0), Bl(e);
            }).ea(Jl);
          }
          function Hl(e, t) {
            var n, i, r, a, o, s, u, c, d, h, f, p, g, m;
            P(function (v) {
              switch (v.g) {
                case 1:
                  if (
                    ((n = t.target),
                    e.g.logLicenseExchange && St(t.message),
                    (i = e.j.get(n)),
                    (r = e.h.licenseServerUri),
                    (a = e.g.advanced[e.h.keySystem]),
                    "individualization-request" == t.messageType &&
                      a &&
                      a.individualizationServer &&
                      (r = a.individualizationServer),
                    ((o = es([r], e.g.retryParameters)).body = t.message),
                    (o.method = "POST"),
                    (o.licenseRequestType = t.messageType),
                    (o.sessionId = n.sessionId),
                    (o.drmInfo = e.h),
                    i &&
                      ((o.initData = i.initData),
                      (o.initDataType = i.initDataType)),
                    a && a.headers)
                  )
                    for (s in a.headers) o.headers[s] = a.headers[s];
                  if ("org.w3.clearkey" === e.h.keySystem) {
                    var y = o,
                      b = e.h;
                    try {
                      var k = pt(y.body);
                      if (k) {
                        var I = JSON.parse(k);
                        I.type ||
                          ((I.type = b.sessionType),
                          (y.body = gt(JSON.stringify(I))));
                      }
                    } catch (e) {}
                  }
                  if (Le(e.h.keySystem))
                    if (
                      (y = ft(o.body, !0, !0)).includes("PlayReadyKeyMessage")
                    ) {
                      for (
                        k = (b = l(
                          (b = Sn(
                            (y = gn(y, "PlayReadyKeyMessage")),
                            "HttpHeader"
                          ))
                        )).next();
                        !k.done;
                        k = b.next()
                      )
                        (k = Sn((I = k.value), "name")[0]),
                          (I = Sn(I, "value")[0]),
                          (o.headers[wn(k)] = wn(I));
                      (y = Sn(y, "Challenge")[0]), (o.body = Tt(wn(y)));
                    } else
                      o.headers["Content-Type"] = "text/xml; charset=utf-8";
                  return (
                    (u = Date.now()),
                    S(v, 2),
                    (d = e.C.cc.request(2, o, { isPreload: e.S() })),
                    e.W.push(d),
                    w(v, d.promise, 4)
                  );
                case 4:
                  (c = v.h), nn(e.W, d), T(v, 3);
                  break;
                case 2:
                  return (
                    (h = A(v)),
                    e.l.g
                      ? v.return()
                      : ((f = new Me(2, 6, 6007, h)),
                        1 == e.j.size
                          ? (e.s(f), i && i.ub && i.ub.reject(f))
                          : (i && i.ub && i.ub.reject(f),
                            e.j.delete(n),
                            Kl(e) && (e.m.resolve(), e.L.ea(0.1))),
                        v.return())
                  );
                case 3:
                  return e.l.g
                    ? v.return()
                    : ((e.G += (Date.now() - u) / 1e3),
                      e.g.logLicenseExchange && St(c.data),
                      S(v, 5),
                      w(v, n.update(c.data), 7));
                case 7:
                  T(v, 6);
                  break;
                case 5:
                  return (
                    (p = A(v)),
                    (g = new Me(2, 6, 6008, p.message)),
                    e.s(g),
                    i && i.ub && i.ub.reject(g),
                    v.return()
                  );
                case 6:
                  if (e.l.g) return v.return();
                  (m = new Xo("drmsessionupdate")),
                    e.C.onEvent(m),
                    i && (i.ub && i.ub.resolve(), Fl(e, i)),
                    x(v);
              }
            });
          }
          function Vl(e, t) {
            t = t.target;
            var n = e.j.get(t),
              i = !1;
            t.keyStatuses.forEach(function (t, r) {
              if ("string" == typeof r) {
                var a = r;
                (r = t), (t = a);
              }
              if (
                Le(e.h.keySystem) &&
                16 == r.byteLength &&
                (Fe() || Je() || it("sony.hbbtv.tv.G5"))
              ) {
                var o = (a = Ie(r)).getUint32(0, !0),
                  s = a.getUint16(4, !0),
                  u = a.getUint16(6, !0);
                a.setUint32(0, o, !1),
                  a.setUint16(4, s, !1),
                  a.setUint16(6, u, !1);
              }
              "status-pending" != t && (n.loaded = !0),
                "expired" == t && (i = !0),
                (r = kt(r).slice(0, 32)),
                e.Y.set(r, t);
            });
            var r = t.expiration - Date.now();
            (0 > r || (i && 1e3 > r)) && n && !n.ub && (e.j.delete(t), zl(t)),
              Kl(e) && (e.m.resolve(), e.L.ea($l));
          }
          function zl(e) {
            return P(function (t) {
              return 1 == t.g
                ? (S(t, 2),
                  w(
                    t,
                    Ji(
                      Yl,
                      Promise.all([e.close().catch(function () {}), e.closed])
                    ),
                    4
                  ))
                : 2 != t.g
                ? T(t, 0)
                : (A(t), void x(t));
            });
          }
          function Gl(e) {
            var t;
            return P(function (n) {
              return (
                (t = Array.from(e.j.entries())),
                e.j.clear(),
                w(
                  n,
                  Promise.all(
                    t.map(function (t) {
                      var n = (t = l(t)).next().value,
                        i = t.next().value;
                      return P(function (t) {
                        return 1 == t.g
                          ? (S(t, 2),
                            e.B.has(n.sessionId) ||
                            "persistent-license" !== i.type ||
                            e.g.persistentSessionOnlinePlayback
                              ? w(t, zl(n), 5)
                              : w(t, n.remove(), 5))
                          : 2 != t.g
                          ? T(t, 0)
                          : (A(t), void x(t));
                      });
                    })
                  ),
                  0
                )
              );
            });
          }
          function ql(e) {
            return (e.video ? e.video.drmInfos : []).concat(
              e.audio ? e.audio.drmInfos : []
            );
          }
          function Kl(e) {
            return (function (e, t) {
              for (var n = (e = l(e)).next(); !n.done; n = e.next())
                if (!t(n.value)) return !1;
              return !0;
            })((e = e.j.values()), function (e) {
              return e.loaded;
            });
          }
          function Wl(t, n, i, r, a, o, s, u) {
            for (
              var d = [], h = (t = l(t)).next(), f = {};
              !h.done;
              f = { ma: void 0 }, h = t.next()
            ) {
              if (
                ((f.ma = h.value),
                n.includes(f.ma.encryptionScheme) ||
                  n.push(f.ma.encryptionScheme),
                "org.w3.clearkey" == f.ma.keySystem &&
                f.ma.licenseServerUri.startsWith(
                  "data:application/json;base64,"
                )
                  ? d.includes(f.ma.licenseServerUri) ||
                    d.push(f.ma.licenseServerUri)
                  : i.includes(f.ma.licenseServerUri) ||
                    i.push(f.ma.licenseServerUri),
                a.includes(f.ma.serverCertificateUri) ||
                  a.push(f.ma.serverCertificateUri),
                f.ma.serverCertificate &&
                  (r.some(
                    (function (e) {
                      return function (t) {
                        return Se(t, e.ma.serverCertificate);
                      };
                    })(f)
                  ) ||
                    r.push(f.ma.serverCertificate)),
                f.ma.initData)
              )
                for (
                  var p = (h = l(f.ma.initData)).next(), g = {};
                  !p.done;
                  g = { Se: void 0 }, p = h.next()
                )
                  (g.Se = p.value),
                    o.some(
                      (function (e) {
                        return function (t) {
                          var n = e.Se;
                          return (
                            !(!t.keyId || t.keyId != n.keyId) ||
                            (t.initDataType == n.initDataType &&
                              Se(t.initData, n.initData))
                          );
                        };
                      })(g)
                    ) || o.push(g.Se);
              if (f.ma.keyIds)
                for (p = (h = l(f.ma.keyIds)).next(); !p.done; p = h.next())
                  s.add(p.value);
              if (f.ma.keySystemUris && u)
                for (
                  h = (f = l(f.ma.keySystemUris)).next();
                  !h.done;
                  h = f.next()
                )
                  u.add(h.value);
            }
            if (1 == d.length) i.push(d[0]);
            else if (0 < d.length) {
              for (n = [], r = (d = l(d)).next(); !r.done; r = d.next())
                (r = e.atob(
                  r.value.split("data:application/json;base64,").pop()
                )),
                  (r = JSON.parse(r)),
                  n.push.apply(n, c(r.keys));
              (d = JSON.stringify({ keys: n })),
                i.push("data:application/json;base64," + e.btoa(d));
            }
          }
          function Xl(t, n, i, r) {
            var a = t.keySystem;
            !a ||
              ("org.w3.clearkey" == a && t.licenseServerUri) ||
              (n.size && n.get(a) && ((n = n.get(a)), (t.licenseServerUri = n)),
              t.keyIds || (t.keyIds = new Set()),
              (i = i.get(a)) &&
                (t.distinctiveIdentifierRequired ||
                  (t.distinctiveIdentifierRequired =
                    i.distinctiveIdentifierRequired),
                t.persistentStateRequired ||
                  (t.persistentStateRequired = i.persistentStateRequired),
                t.serverCertificate ||
                  (t.serverCertificate = i.serverCertificate),
                i.sessionType && (t.sessionType = i.sessionType),
                t.serverCertificateUri ||
                  (t.serverCertificateUri = i.serverCertificateUri)),
              r[a] && (t.keySystem = r[a]),
              e.cast &&
                e.cast.__platform__ &&
                "com.microsoft.playready" == a &&
                (t.keySystem = "com.chromecast.playready"));
          }
          (Pl.prototype.destroy = function () {
            var e = this;
            return this.g
              ? this.h
              : ((this.g = !0),
                this.i().then(
                  function () {
                    e.h.resolve();
                  },
                  function () {
                    e.h.resolve();
                  }
                ));
          }),
            ((i = _l.prototype).destroy = function () {
              return this.l.destroy();
            }),
            (i.configure = function (e, t) {
              (this.g = e),
                t && (this.S = t),
                this.J && this.J.ta(this.g.updateExpirationTime);
            }),
            (i.Cb = function (e) {
              var t,
                n = this;
              return P(function (i) {
                if (1 == i.g)
                  return n.i === e
                    ? i.return()
                    : n.A
                    ? ((n.i = e),
                      n.o.Ea(n.i, "play", function () {
                        for (
                          var e = l(n.O), t = e.next();
                          !t.done;
                          t = e.next()
                        )
                          Hl(n, t.value);
                        (n.X = !0), (n.O = []);
                      }),
                      n.i.remote
                        ? (n.o.H(n.i.remote, "connect", function () {
                            return Gl(n);
                          }),
                          n.o.H(n.i.remote, "connecting", function () {
                            return Gl(n);
                          }),
                          n.o.H(n.i.remote, "disconnect", function () {
                            return Gl(n);
                          }))
                        : "webkitCurrentPlaybackTargetIsWireless" in n.i &&
                          n.o.H(
                            n.i,
                            "webkitcurrentplaybacktargetiswirelesschanged",
                            function () {
                              return Gl(n);
                            }
                          ),
                      (n.D =
                        (n.h &&
                          n.h.initData.find(function (e) {
                            return 0 < e.initData.length;
                          })) ||
                        null),
                      (t = n.h.keySystem),
                      t.startsWith("com.microsoft.playready.recommendation") ||
                      "com.apple.fps" == t ||
                      !(n.D || n.B.size || n.g.parseInbandPsshEnabled)
                        ? (n.o.H(n.i, "encrypted", function (e) {
                            return (function (e, t) {
                              return P(function (n) {
                                if (1 == n.g) return w(n, jl(e), 2);
                                Ol(e, t.initDataType, Ae(t.initData)), x(n);
                              });
                            })(n, e);
                          }),
                          i.u(2))
                        : w(i, jl(n), 2))
                    : (n.o.Ea(e, "encrypted", function () {
                        n.s(new Me(2, 6, 6010));
                      }),
                      i.return());
                (function (e) {
                  var t, n, i, r;
                  return P(function (a) {
                    if (1 == a.g)
                      return e.B.size
                        ? (e.B.forEach(function (t, n) {
                            !(function (e, t, n) {
                              var i, r, a, o, s, u, l;
                              P(function (c) {
                                switch (c.g) {
                                  case 1:
                                    try {
                                      i =
                                        e.A.createSession("persistent-license");
                                    } catch (t) {
                                      return (
                                        (r = new Me(2, 6, 6005, t.message)),
                                        e.s(r),
                                        c.return(Promise.reject(r))
                                      );
                                    }
                                    return (
                                      e.o.H(i, "message", function (t) {
                                        e.i &&
                                        e.g.delayLicenseRequestUntilPlayed &&
                                        e.i.paused &&
                                        !e.X
                                          ? e.O.push(t)
                                          : Hl(e, t);
                                      }),
                                      e.o.H(
                                        i,
                                        "keystatuseschange",
                                        function (t) {
                                          return Vl(e, t);
                                        }
                                      ),
                                      (a = {
                                        initData: n.initData,
                                        initDataType: n.initDataType,
                                        loaded: !1,
                                        $e: 1 / 0,
                                        ub: null,
                                        type: "persistent-license",
                                      }),
                                      e.j.set(i, a),
                                      S(c, 2),
                                      w(c, i.load(t), 4)
                                    );
                                  case 4:
                                    return (
                                      (o = c.h),
                                      Ll(e.l),
                                      o ||
                                        (e.j.delete(i),
                                        (s = e.g.persistentSessionOnlinePlayback
                                          ? 1
                                          : 2),
                                        e.s(new Me(s, 6, 6013)),
                                        (a.loaded = !0)),
                                      Fl(e, a),
                                      Bl(e),
                                      c.return(i)
                                    );
                                  case 2:
                                    (u = A(c)),
                                      Ll(e.l, u),
                                      e.j.delete(i),
                                      (l = e.g.persistentSessionOnlinePlayback
                                        ? 1
                                        : 2),
                                      e.s(new Me(l, 6, 6005, u.message)),
                                      (a.loaded = !0),
                                      Bl(e);
                                  case 3:
                                    return c.return(Promise.resolve());
                                }
                              });
                            })(e, n, t);
                          }),
                          w(a, e.m, 3))
                        : a.u(2);
                    if (2 != a.g) {
                      if (
                        0 < ((e.h && e.h.keyIds) || new Set([])).size &&
                        (function (e) {
                          for (
                            var t = l((e.h && e.h.keyIds) || new Set([])),
                              n = t.next();
                            !n.done;
                            n = t.next()
                          )
                            if ("usable" !== e.Y.get(n.value)) return !1;
                          return !0;
                        })(e)
                      )
                        return a.return(e.m);
                      (e.K = !1), (e.m = new Ho()), e.m.catch(function () {});
                    }
                    for (
                      t = (e.h ? e.h.initData : []) || [],
                        n = l(t),
                        i = n.next();
                      !i.done;
                      i = n.next()
                    )
                      (r = i.value), Ol(e, r.initDataType, r.initData);
                    return Kl(e) && e.m.resolve(), a.return(e.m);
                  });
                })(n).catch(function () {}),
                  x(i);
              });
            }),
            (i.Me = function () {
              var e = this,
                t = this.j.keys();
              return (
                (t = (function (e, t) {
                  for (var n = [], i = (e = l(e)).next(); !i.done; i = e.next())
                    n.push(t(i.value));
                  return n;
                })(t, function (t) {
                  var n = e.j.get(t);
                  return {
                    sessionId: t.sessionId,
                    sessionType: n.type,
                    initData: n.initData,
                    initDataType: n.initDataType,
                  };
                })),
                Array.from(t)
              );
            }),
            (i.Ne = function () {
              for (
                var e = 1 / 0, t = this.j.keys(), n = (t = l(t)).next();
                !n.done;
                n = t.next()
              )
                (n = n.value),
                  isNaN(n.expiration) || (e = Math.min(e, n.expiration));
              return e;
            }),
            (i.sd = function () {
              return Nl(this.ga);
            });
          var Yl = 1,
            Jl = 5,
            $l = 0.5;
          function Zl() {
            (this.g = ec),
              (this.i = new Map().set(ec, 2).set(Ql, 1)),
              (this.h = 0);
          }
          var Ql = 0,
            ec = 1;
          function tc(e) {
            if (!fc) {
              fc = !0;
              var t = new Uint8Array([105, 115, 111, 109]),
                n = new Uint8Array([97, 118, 99, 49]),
                i = new Uint8Array([0, 0, 0, 1]);
              (kc = hc("ftyp", t, i, t, n)),
                (t = hc("dref", Ic)),
                (Cc = hc("dinf", t));
            }
            this.g = e;
          }
          function nc(e) {
            for (var t = [], n = l(e.g), i = n.next(); !i.done; i = n.next()) {
              var r = t,
                a = r.push,
                o = i.value;
              i = hc;
              var s = o.id + 1,
                u = o.stream.width || 0,
                d = o.stream.height || 0;
              "audio" == o.type && (d = u = 0);
              var h = o.duration * o.timescale,
                f = Math.floor(h / (pc + 1));
              switch (
                ((h = Math.floor(h % (pc + 1))),
                (s = hc(
                  "tkhd",
                  (s = new Uint8Array(
                    [
                      1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0,
                      3,
                    ].concat(
                      c(lc(s, 4)),
                      [0, 0, 0, 0],
                      c(lc(f, 4)),
                      c(lc(h, 4)),
                      [
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0,
                      ],
                      c(lc(u, 2)),
                      [0, 0],
                      c(lc(d, 2)),
                      [0, 0]
                    )
                  ))
                )),
                (u = hc),
                (f = o.duration * o.timescale),
                (d = Math.floor(f / (pc + 1))),
                (f = Math.floor(f % (pc + 1))),
                (h =
                  (((h = o.stream.language).charCodeAt(0) - 96) << 10) |
                  ((h.charCodeAt(1) - 96) << 5) |
                  (h.charCodeAt(2) - 96)),
                (d = hc(
                  "mdhd",
                  (d = new Uint8Array(
                    [
                      1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0,
                      3,
                    ].concat(
                      c(lc(o.timescale, 4)),
                      c(lc(d, 4)),
                      c(lc(f, 4)),
                      c(lc(h, 2)),
                      [0, 0]
                    )
                  ))
                )),
                (f = o),
                (h = new Uint8Array([])),
                f.type)
              ) {
                case "video":
                  h = mc;
                  break;
                case "audio":
                  h = vc;
              }
              f = hc("hdlr", h);
              e: {
                switch (o.type) {
                  case "video":
                    o = hc("minf", hc("vmhd", Sc), Cc, ic(o));
                    break e;
                  case "audio":
                    o = hc("minf", hc("smhd", Tc), Cc, ic(o));
                    break e;
                }
                o = new Uint8Array([]);
              }
              (i = i("trak", s, (o = u("mdia", d, f, o)))), a.call(r, i);
            }
            for (
              t = It.apply(wt, c(t)),
                n = hc,
                i = (a = e.g[0]).duration * a.timescale,
                r = Math.floor(i / (pc + 1)),
                i = Math.floor(i % (pc + 1)),
                r = hc(
                  "mvhd",
                  (r = new Uint8Array(
                    [
                      1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0,
                      3,
                    ].concat(
                      c(lc(a.timescale, 4)),
                      c(lc(r, 4)),
                      c(lc(i, 4)),
                      [
                        0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 255, 255, 255, 255,
                      ]
                    )
                  ))
                ),
                i = [],
                u = (e = l(e.g)).next();
              !u.done;
              u = e.next()
            )
              (s = (o = i).push),
                (u = hc(
                  "trex",
                  (u = new Uint8Array(
                    [0, 0, 0, 0].concat(
                      c(lc(u.value.id + 1, 4)),
                      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    )
                  ))
                )),
                s.call(o, u);
            if (
              ((e = hc("mvex", (e = It.apply(wt, c(i))))),
              (i = []),
              a.encrypted)
            ) {
              for (o = (a = l(a.stream.drmInfos)).next(); !o.done; o = a.next())
                if ((o = o.value).initData)
                  for (s = (o = l(o.initData)).next(); !s.done; s = o.next())
                    i.push(s.value.initData);
              a = It.apply(wt, c(i));
            } else a = new Uint8Array([]);
            return (
              (e = n("moov", r, t, e, a)),
              (t = new Uint8Array(kc.byteLength + e.byteLength)).set(kc),
              t.set(e, kc.byteLength),
              t
            );
          }
          function ic(e) {
            var t = hc,
              n = "aac";
            e.codecs.includes("mp3")
              ? (n = "mp3")
              : e.codecs.includes("ac-3")
              ? (n = ze() ? "ec-3" : "ac-3")
              : e.codecs.includes("ec-3")
              ? (n = "ec-3")
              : e.codecs.includes("opus") && (n = "opus");
            var i = new Uint8Array([]);
            switch (e.type) {
              case "video":
                if (e.codecs.includes("avc1")) {
                  if (
                    ((n = e.stream.width || 0),
                    (i = e.stream.height || 0),
                    0 < e.qa.byteLength)
                  )
                    var r = hc("avcC", e.qa);
                  else {
                    r = hc;
                    for (
                      var a = 7, o = [], s = [], u = 0, l = 0, d = 0, h = 0;
                      h < e.Wa.length;
                      h++
                    ) {
                      var f = cc(e.Wa[h]);
                      switch (31 & f[0]) {
                        case 7:
                          o.push(f), (a += f.length + 2);
                          break;
                        case 8:
                          s.push(f), (a += f.length + 2);
                      }
                    }
                    for (
                      0 < o.length &&
                        ((u = o[0][1]), (d = o[0][2]), (l = o[0][3])),
                        h = 0,
                        (a = new Uint8Array(a))[h++] = 1,
                        a[h++] = u,
                        a[h++] = d,
                        a[h++] = l,
                        a[h++] = 255,
                        a[h++] = 224 | o.length,
                        u = 0;
                      u < o.length;
                      u++
                    )
                      (a[h++] = (65280 & o[u].length) >> 8),
                        (a[h++] = 255 & o[u].length),
                        a.set(o[u], h),
                        (h += o[u].length);
                    for (a[h++] = s.length, o = 0; o < s.length; o++)
                      (a[h++] = (65280 & s[o].length) >> 8),
                        (a[h++] = 255 & s[o].length),
                        a.set(s[o], h),
                        (h += s[o].length);
                    r = r("avcC", a);
                  }
                  (n = new Uint8Array(
                    [
                      0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                      0, 0, 0, 0, 0,
                    ].concat(
                      c(lc(n, 2)),
                      c(lc(i, 2)),
                      [
                        0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118,
                        105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116,
                        114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 24, 17, 17,
                      ]
                    )
                  )),
                    (i = "avc1"),
                    (s = rc(e)),
                    (o = new Uint8Array([])),
                    e.encrypted &&
                      ((o = oc(0, e.stream, e.codecs)), (i = "encv")),
                    (i = hc(i, n, r, s, o));
                } else
                  e.codecs.includes("hvc1") &&
                    ((i = e.stream.width || 0),
                    (r = e.stream.height || 0),
                    (n = new Uint8Array([])),
                    0 < e.qa.byteLength && (n = hc("hvcC", e.qa)),
                    (i = new Uint8Array(
                      [
                        0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 0,
                      ].concat(
                        c(lc(i, 2)),
                        c(lc(r, 2)),
                        [
                          0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118,
                          105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116,
                          114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0,
                          0, 0, 0, 0, 0, 0, 24, 17, 17,
                        ]
                      )
                    )),
                    (r = "hvc1"),
                    (s = rc(e)),
                    (o = new Uint8Array([])),
                    e.encrypted &&
                      ((o = oc(0, e.stream, e.codecs)), (r = "encv")),
                    (i = hc(r, i, n, s, o)));
                break;
              case "audio":
                "mp3" == n
                  ? (e = hc(".mp3", ac(e)))
                  : "ac-3" == n
                  ? ((n = hc("dac3", e.ka)),
                    (i = "ac-3"),
                    (r = new Uint8Array([])),
                    e.encrypted &&
                      ((r = oc(0, e.stream, e.codecs)), (i = "enca")),
                    (e = hc(i, ac(e), n, r)))
                  : "ec-3" == n
                  ? ((n = hc("dec3", e.ka)),
                    (i = "ec-3"),
                    (r = new Uint8Array([])),
                    e.encrypted &&
                      ((r = oc(0, e.stream, e.codecs)), (i = "enca")),
                    (e = hc(i, ac(e), n, r)))
                  : "opus" == n
                  ? ((n = hc("dOps", e.ka)),
                    (i = "Opus"),
                    (r = new Uint8Array([])),
                    e.encrypted &&
                      ((r = oc(0, e.stream, e.codecs)), (i = "enca")),
                    (e = hc(i, ac(e), n, r)))
                  : (0 < e.ka.byteLength
                      ? (n = hc("esds", e.ka))
                      : ((n = hc),
                        (i = e.id + 1),
                        (r = e.stream.channelsCount || 2),
                        (o = e.stream.audioSamplingRate || 44100),
                        (u = Et("audio", e.codecs.split(","))),
                        (s = (l = {
                          96e3: 0,
                          88200: 1,
                          64e3: 2,
                          48e3: 3,
                          44100: 4,
                          32e3: 5,
                          24e3: 6,
                          22050: 7,
                          16e3: 8,
                          12e3: 9,
                          11025: 10,
                          8e3: 11,
                          7350: 12,
                        })[o]),
                        ("mp4a.40.5" !== u && "mp4a.40.29" !== u) ||
                          (s = l[2 * o]),
                        (o = parseInt(u.split(".").pop(), 10)),
                        (n = n(
                          "esds",
                          (i = new Uint8Array(
                            [0, 0, 0, 0, 3, 25].concat(c(lc(i, 2)), [
                              0,
                              4,
                              17,
                              64,
                              21,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              5,
                              2,
                              (o << 3) | (s >>> 1),
                              (s << 7) | (r << 3),
                              6,
                              1,
                              2,
                            ])
                          ))
                        ))),
                    (i = "mp4a"),
                    (r = new Uint8Array([])),
                    e.encrypted &&
                      ((r = oc(0, e.stream, e.codecs)), (i = "enca")),
                    (e = hc(i, ac(e), n, r))),
                  (i = e);
            }
            return t(
              "stbl",
              (e = hc("stsd", Ac, i)),
              hc("stts", yc),
              hc("stsc", bc),
              hc("stsz", xc),
              hc("stco", wc)
            );
          }
          function rc(e) {
            if (!e.va && !e.wa) return new Uint8Array([]);
            var t = e.wa;
            return hc(
              "pasp",
              (e = new Uint8Array([].concat(c(lc(e.va, 4)), c(lc(t, 4)))))
            );
          }
          function ac(e) {
            return new Uint8Array(
              [
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                e.stream.channelsCount || 2,
                0,
                16,
                0,
                0,
                0,
                0,
              ].concat(c(lc(e.stream.audioSamplingRate || 44100, 2)), [0, 0])
            );
          }
          function oc(e, t, n) {
            (e = hc),
              (n = hc(
                "frma",
                (n = new Uint8Array([].concat(c(lc(dc(n.split(".")[0]), 4)))))
              ));
            var i = "cenc",
              r = t.drmInfos[0];
            r && r.encryptionScheme && (i = r.encryptionScheme),
              (i = hc(
                "schm",
                (i = new Uint8Array(
                  [0, 0, 0, 0].concat(c(lc(dc(i), 4)), [0, 1, 0, 0])
                ))
              )),
              (r = hc);
            for (
              var a = new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                ]),
                o = (t = l(t.drmInfos)).next();
              !o.done;
              o = t.next()
            )
              if ((o = o.value) && o.keyIds && o.keyIds.size)
                for (var s = (o = l(o.keyIds)).next(); !s.done; s = o.next())
                  a = cc(s.value);
            return e(
              "sinf",
              n,
              i,
              r(
                "schi",
                (t = hc(
                  "tenc",
                  (t = new Uint8Array([0, 0, 0, 0, 0, 0, 1, 8])),
                  a
                ))
              )
            );
          }
          function sc(e) {
            for (var t = [], n = (e = l(e.g)).next(); !n.done; n = e.next()) {
              n = n.value;
              var i,
                r = t.push,
                a = r.apply,
                o = hc,
                s = new Uint8Array(
                  [0, 0, 0, 0].concat(c(lc(n.data ? n.data.mb : 0, 4)))
                );
              s = hc("mfhd", s);
              var u = n.data ? n.data.Ua : [],
                d = new Uint8Array(4 + u.length);
              for (i = 0; i < u.length; i++) {
                var h = u[i].flags;
                d[i + 4] = (h.Ha << 4) | (h.Ja << 2) | h.Ia;
              }
              var f = (u = hc("sdtp", d)).length + 92;
              (d = hc),
                (i = hc(
                  "tfhd",
                  (i = new Uint8Array(
                    [0, 0, 0, 58].concat(
                      c(lc(n.id + 1, 4)),
                      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    )
                  ))
                )),
                (h = n.data ? n.data.baseMediaDecodeTime : 0);
              var p = Math.floor(h % (pc + 1));
              h = hc(
                "tfdt",
                (h = new Uint8Array(
                  [1, 0, 0, 0].concat(
                    c(lc(Math.floor(h / (pc + 1)), 4)),
                    c(lc(p, 4))
                  )
                ))
              );
              var g = f,
                m = 12 + 16 * (p = (f = n.data ? n.data.Ua : []).length),
                v = new Uint8Array(m);
              for (
                g += 8 + m,
                  v.set(
                    ["video" === n.type ? 1 : 0, 0, 15, 1].concat(
                      c(lc(p, 4)),
                      c(lc(g, 4))
                    ),
                    0
                  ),
                  g = 0;
                g < p;
                g++
              ) {
                var y = f[g];
                m = lc(y.duration, 4);
                var b = lc(y.size, 4),
                  w = y.flags;
                (y = lc(y.Qa, 4)),
                  v.set(
                    [].concat(
                      c(m),
                      c(b),
                      [
                        (w.Sa << 2) | w.Ha,
                        (w.Ja << 6) | (w.Ia << 4) | w.Ta,
                        61440 & w.Ga,
                        15 & w.Ga,
                      ],
                      c(y)
                    ),
                    12 + 16 * g
                  );
              }
              (o = o("moof", s, (u = d("traf", i, h, (f = hc("trun", v)), u)))),
                a.call(r, t, [o, uc(n)]);
            }
            return It.apply(wt, c(t));
          }
          function uc(e) {
            return (
              (e = (e.data ? e.data.Ua : []).map(function (e) {
                return e.data;
              })),
              hc("mdat", (e = It.apply(wt, c(e))))
            );
          }
          function lc(e, t) {
            var n = [];
            for (--t; 0 <= t; t--) n.push((e >> (8 * t)) & 255);
            return n;
          }
          function cc(e) {
            for (
              var t = new Uint8Array(e.length / 2), n = 0;
              n < e.length / 2;
              n += 1
            )
              t[n] = parseInt(String(e[2 * n] + e[2 * n + 1]), 16);
            return t;
          }
          function dc(e) {
            for (var t = 0, n = 0; n < e.length; n += 1)
              t |= e.charCodeAt(n) << (8 * (e.length - n - 1));
            return t;
          }
          function hc(e) {
            var t = L.apply(1, arguments),
              n = gc.get(e);
            n ||
              ((n = [
                e.charCodeAt(0),
                e.charCodeAt(1),
                e.charCodeAt(2),
                e.charCodeAt(3),
              ]),
              gc.set(e, n));
            for (var i = 8, r = t.length - 1; 0 <= r; r--) i += t[r].byteLength;
            for (
              (r = new Uint8Array(i))[0] = (i >> 24) & 255,
                r[1] = (i >> 16) & 255,
                r[2] = (i >> 8) & 255,
                r[3] = 255 & i,
                r.set(n, 4),
                n = 0,
                i = 8;
              n < t.length;
              n++
            )
              r.set(t[n], i), (i += t[n].byteLength);
            return r;
          }
          var fc = !1,
            pc = Math.pow(2, 32) - 1,
            gc = new Map(),
            mc = new Uint8Array([
              0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0,
              0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101,
              114, 0,
            ]),
            vc = new Uint8Array([
              0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0,
              0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101,
              114, 0,
            ]),
            yc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            bc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            wc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            xc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
            Sc = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]),
            Tc = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            Ac = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]),
            kc = new Uint8Array([]),
            Ic = new Uint8Array([
              0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0,
              1,
            ]),
            Cc = new Uint8Array([]);
          function Mc(e) {
            function t(e) {
              o.push(e), Na(e);
            }
            var n,
              i,
              r,
              a,
              o = [];
            if (
              (new Ra()
                .box("moof", t)
                .box("traf", t)
                .N("tfhd", function (e) {
                  (n = e), (r = Ga(e.reader, e.flags));
                })
                .N("trun", function (e) {
                  (i = e), (a = Wa(e.reader, e.version, e.flags));
                })
                .parse(e),
              r && 2 !== r.qg)
            ) {
              var s = n.start + Ha(n) + 4 + (null !== r.Tg ? 8 : 0),
                u = Ie(e);
              if (null !== r.qg) u.setUint32(s, 2);
              else {
                Dc(e, n.start, n.size + 4);
                var c = u.getUint32(n.start + 8);
                u.setUint32(n.start + 8, 2 | c),
                  a &&
                    null !== a.xe &&
                    u.setInt32(i.start + Ha(i) + 4, a.xe + 4),
                  (c = e.subarray(0, s)),
                  (u = e.subarray(s)),
                  (e = new Uint8Array(e.byteLength + 4)).set(c),
                  (c = []);
                for (var d = 3; 0 <= d; d--) c.push((2 >> (8 * d)) & 255);
                for (
                  e.set(new Uint8Array(c), s),
                    e.set(u, s + 4),
                    u = (s = l(o)).next();
                  !u.done;
                  u = s.next()
                )
                  Dc(e, (u = u.value).start, u.size + 4);
              }
            }
            return e;
          }
          function Ec(e, t, n, i, r, a) {
            var o = oc(new tc([]), e, i.name),
              s = t.subarray(i.start, i.start + i.size);
            for (
              (e = new Uint8Array(i.size + o.byteLength)).set(s, 0),
                Ie(e).setUint32(4, a),
                e.set(o, i.size),
                Dc(e, 0, e.byteLength),
                a = new Uint8Array(t.byteLength + e.byteLength),
                i = Xe() || He() || Fe() ? i.start : i.start + i.size,
                o = t.subarray(i),
                a.set(t.subarray(0, i)),
                a.set(e, i),
                a.set(o, i + e.byteLength),
                r = (t = l(r)).next();
              !r.done;
              r = t.next()
            )
              Dc(a, (r = r.value).start, r.size + e.byteLength);
            return (
              (e = Ie(a, n.start)),
              (n = Ha(n)),
              (t = e.getUint32(n)),
              e.setUint32(n, t + 1),
              a
            );
          }
          function Dc(e, t, n) {
            0 != (t = (e = Ie(e, t)).getUint32(0)) &&
              (1 == t
                ? (e.setUint32(8, n >> 32), e.setUint32(12, 4294967295 & n))
                : e.setUint32(0, n));
          }
          function Pc(e) {
            return 1 == e.length && 1e-4 > e.end(0) - e.start(0);
          }
          function Lc(e) {
            return !e || Pc(e) ? null : e.length ? e.end(e.length - 1) : null;
          }
          function Rc(e, t) {
            return (
              !(!e || !e.length || Pc(e) || t > e.end(e.length - 1)) &&
              t >= e.start(0)
            );
          }
          function Nc(e, t) {
            if (!e || !e.length || Pc(e)) return 0;
            for (var n = 0, i = (e = l(_c(e))).next(); !i.done; i = e.next()) {
              var r = i.value;
              (i = r.start), (r = r.end) > t && (n += r - Math.max(i, t));
            }
            return n;
          }
          function _c(e) {
            if (!e) return [];
            for (var t = [], n = 0; n < e.length; n++)
              t.push({ start: e.start(n), end: e.end(n) });
            return t;
          }
          function Uc(e, t, n, i) {
            var r = this;
            (this.s = i),
              (this.g = e),
              (this.B = t),
              (this.h = n),
              (this.o = new $()),
              (this.l = !1),
              (this.D = e.readyState),
              (this.F = this.C = this.j = 0),
              (this.m = (function (e) {
                if (!e.h.stallEnabled) return null;
                var t = e.h.stallSkip;
                return new Oc(new Bc(e.g), e.h.stallThreshold, function () {
                  return P(function (n) {
                    if (1 == n.g)
                      return _c(e.g.buffered).length
                        ? t
                          ? ((e.g.currentTime += t), n.u(2))
                          : w(n, e.g.play(), 3)
                        : n.return();
                    if (2 != n.g) {
                      if (!e.g) return n.return();
                      e.g.pause(), e.g.play();
                    }
                    e.F++, e.s(new Xo("stalldetected")), x(n);
                  });
                });
              })(this)),
              (this.A = !1),
              this.o.H(e, "waiting", function () {
                return jc(r);
              }),
              (this.i = new je(function () {
                jc(r);
              }).ta(this.h.gapJumpTimerTime));
          }
          function jc(e) {
            if (0 != e.g.readyState) {
              if (e.g.seeking) {
                if (!e.l) return;
              } else e.l = !1;
              if (
                !e.g.paused ||
                (e.g.currentTime == e.j &&
                  (e.g.autoplay || e.g.currentTime != e.j))
              ) {
                var t;
                if (
                  (e.g.readyState != e.D && (e.D = e.g.readyState), !(t = !e.m))
                ) {
                  var n = (t = e.m).j,
                    i = Fc(n),
                    r = n.g.currentTime,
                    a = Date.now() / 1e3;
                  (t.g == r && t.m == i) ||
                    ((t.l = a), (t.g = r), (t.m = i), (t.h = !1)),
                    (i = (r = a - t.l) >= t.o && i && !t.h) &&
                      (t.i && t.i(t.g, r), (t.h = !0), (t.g = n.g.currentTime)),
                    (t = !i);
                }
                t &&
                  ((t = e.g.currentTime),
                  (i = (function (e, t, n) {
                    return e &&
                      e.length &&
                      !Pc(e) &&
                      0 <=
                        (e = _c(e).findIndex(function (e, i, r) {
                          return (
                            e.start > t && (0 == i || r[i - 1].end - t <= n)
                          );
                        }))
                      ? e
                      : null;
                  })((n = e.g.buffered), t, e.h.gapDetectionThreshold)),
                  null == i ||
                    (0 == i && !e.A) ||
                    ((r = n.start(i)),
                    (a = e.h.gapPadding) &&
                      (r = Math.ceil(100 * (r + a)) / 100),
                    r >= e.B.bb() ||
                      0.001 > r - t ||
                      (0 != i && n.end(i - 1),
                      (e.g.currentTime = r),
                      t == e.j && (e.j = r),
                      e.C++,
                      e.s(new Xo("gapjumped")))));
              }
            }
          }
          function Oc(e, t, n) {
            (this.j = e),
              (this.m = Fc(e)),
              (this.g = e.g.currentTime),
              (this.l = Date.now() / 1e3),
              (this.h = !1),
              (this.o = t),
              (this.i = n);
          }
          function Bc(e) {
            this.g = e;
          }
          function Fc(e) {
            if (e.g.paused || 0 == e.g.playbackRate || 0 == e.g.buffered.length)
              var t = !1;
            else
              e: {
                t = e.g.currentTime;
                for (
                  var n = (e = l(_c(e.g.buffered))).next();
                  !n.done;
                  n = e.next()
                )
                  if (!(t < (n = n.value).start - 0.1 || t > n.end - 0.5)) {
                    t = !0;
                    break e;
                  }
                t = !1;
              }
            return t;
          }
          function Hc(e, t, n) {
            (this.g = e), (this.i = t), (this.h = n);
          }
          function Vc(e, t) {
            return P(function (n) {
              if (1 == n.g)
                return w(
                  n,
                  cr(
                    e.h,
                    t,
                    e.g.drm.preferredKeySystems,
                    e.g.drm.keySystemsMapping
                  ),
                  2
                );
              if (
                (e.g.streaming.dontChooseCodecs ||
                  ur(
                    t,
                    e.g.preferredVideoCodecs,
                    e.g.preferredAudioCodecs,
                    e.g.preferredDecodingAttributes,
                    e.g.preferredTextFormats
                  ),
                !t.variants.some(Tr))
              )
                throw new Me(2, 4, 4032);
              return n.return(Gc(e, t));
            });
          }
          function zc(e, t) {
            var n = e.g.restrictions;
            e = e.i;
            for (
              var i = !1, r = (t = l(t.variants)).next();
              !r.done;
              r = t.next()
            ) {
              var a = (r = r.value).allowedByApplication;
              (r.allowedByApplication = lr(r, n, e)),
                a != r.allowedByApplication && (i = !0);
            }
            return i;
          }
          function Gc(e, t) {
            var n = zc(e, t);
            if (t) {
              var i = e.h ? e.h.h : null;
              if (i && e.h.A) {
                for (
                  var r = new Set(), a = l(t.variants), o = a.next();
                  !o.done;
                  o = a.next()
                )
                  (o = o.value).audio && r.add(o.audio),
                    o.video && r.add(o.video);
                for (a = (r = l(r)).next(); !a.done; a = r.next())
                  qc(e, i.keySystem, a.value);
              }
              Kc(e, t);
            }
            return n;
          }
          function qc(e, t, n) {
            for (var i = (n = l(n.drmInfos)).next(); !i.done; i = n.next())
              if ((i = i.value).keySystem == t)
                for (
                  var r = (i = l(i.initData || [])).next();
                  !r.done;
                  r = i.next()
                )
                  (r = r.value), Ol(e.h, r.initDataType, r.initData);
          }
          function Kc(e, t) {
            e = e.h ? e.h.sd() : {};
            var n = Object.keys(e);
            n = n.length && "00" == n[0];
            for (
              var i = !1,
                r = !1,
                a = new Set(),
                o = new Set(),
                s = new Set(),
                u = (t = l(t.variants)).next();
              !u.done;
              u = t.next()
            )
              (u = u.value).audio && s.add(u.audio),
                u.video && s.add(u.video),
                u.allowedByApplication
                  ? u.allowedByKeySystem && (i = !0)
                  : (r = !0);
            for (t = (s = l(s)).next(); !t.done; t = s.next())
              if ((t = t.value).keyIds.size)
                for (u = (t = l(t.keyIds)).next(); !u.done; u = t.next()) {
                  u = u.value;
                  var c = e[n ? "00" : u];
                  c ? Wc.includes(c) && o.add(c) : a.add(u);
                }
            if (!i)
              throw new Me(
                2,
                4,
                4012,
                (e = {
                  hasAppRestrictions: r,
                  missingKeys: Array.from(a),
                  restrictedKeyStatuses: Array.from(o),
                })
              );
          }
          (Uc.prototype.release = function () {
            this.o && (this.o.release(), (this.o = null)),
              null != this.i && (this.i.stop(), (this.i = null)),
              this.m && (this.m.release(), (this.m = null)),
              (this.g = this.B = this.s = null);
          }),
            (Uc.prototype.Jd = function () {
              (this.A = !0),
                this.i && this.i.ta(this.h.gapJumpTimerTime),
                jc(this);
            }),
            (Oc.prototype.release = function () {
              this.i = this.j = null;
            });
          var Wc = ["output-restricted", "internal-error"];
          function Xc() {}
          function Yc(e, t) {
            var n = document.createElement("source");
            return (n.src = e), (n.type = void 0 === t ? "" : t), n;
          }
          function Jc(e) {
            for (; e.firstChild; ) e.removeChild(e.firstChild);
          }
          function $c(e, t, n, i) {
            var r = this;
            (this.g = e),
              (this.L = n),
              (this.A = null),
              (this.fa = t),
              (this.l = new Map()),
              (this.B = new Map()),
              (this.Aa = new Map()),
              (this.h = null),
              (this.Xa = !1),
              (this.K = i || null),
              (this.o = new Map()),
              (this.s = new $()),
              (this.j = new Map()),
              (this.S = null),
              (this.J = new Ho()),
              (this.Oa = ""),
              (this.ab = !1),
              (this.xa = !0),
              (this.O = !1),
              (this.C = this.W = null),
              (this.i = Zc(this, this.J)),
              (this.za = this.F = !1),
              (this.G = new Pl(function () {
                return (function (e) {
                  var t, n, i, r, a, o, s, u, c, d, h, f, p;
                  return P(function (g) {
                    if (1 == g.g) {
                      for (
                        t = [], n = l(e.o), i = n.next();
                        !i.done;
                        i = n.next()
                      )
                        for (
                          r = i.value,
                            a = l(r),
                            o = a.next().value,
                            s = a.next().value,
                            u = s[0],
                            c = o,
                            e.o.set(c, s.slice(0, 1)),
                            u && t.push(u.p.catch(Xi)),
                            d = l(s.slice(1)),
                            h = d.next();
                          !h.done;
                          h = d.next()
                        )
                          h.value.p.reject(new Me(2, 7, 7003, void 0));
                      return (
                        e.h && t.push(e.h.destroy()), w(g, Promise.all(t), 2)
                      );
                    }
                    for (
                      f = l(e.j.values()), p = f.next();
                      !p.done;
                      p = f.next()
                    )
                      p.value.destroy();
                    e.s && (e.s.release(), (e.s = null)),
                      e.g && e.C && e.g.removeChild(e.C),
                      e.g &&
                        e.W &&
                        (e.g.removeChild(e.W),
                        e.g.load(),
                        (e.g.disableRemotePlayback = !1)),
                      (e.g = null),
                      (e.W = null),
                      (e.C = null),
                      (e.A = null),
                      (e.i = null),
                      (e.h = null),
                      (e.fa = null),
                      e.l.clear(),
                      e.Aa.clear(),
                      e.j.clear(),
                      (e.S = null),
                      e.o.clear(),
                      (e.K = null),
                      e.da.clear(),
                      (e.L = null),
                      x(g);
                  });
                })(r);
              })),
              (this.D = !1),
              (this.X = "UNKNOWN"),
              (this.Ya = this.$a = !1),
              (this.Ma = new Ho()),
              (this.m = !1),
              (this.pa = null),
              (this.da = new Map()),
              (this.la = this.Y = this.oa = this.ca = null),
              (this.ga = new Ho()),
              this.g.remote &&
                ((this.O = "disconnected" != this.g.remote.state),
                this.s.H(this.g.remote, "connect", function () {
                  r.O = "disconnected" != r.g.remote.state;
                }),
                this.s.H(this.g.remote, "connecting", function () {
                  r.O = "disconnected" != r.g.remote.state;
                }),
                this.s.H(this.g.remote, "disconnect", function () {
                  r.O = "disconnected" != r.g.remote.state;
                }));
          }
          function Zc(t, n) {
            if (((t.xa = !0), e.ManagedMediaSource)) {
              t.C || (t.g.disableRemotePlayback = !0);
              var i = new ManagedMediaSource();
              t.s.H(i, "startstreaming", function () {
                t.xa = !0;
              }),
                t.s.H(i, "endstreaming", function () {
                  t.xa = !1;
                });
            } else i = new MediaSource();
            return (
              t.s.Ea(i, "sourceopen", function () {
                URL.revokeObjectURL(t.Oa), n.resolve();
              }),
              t.s.Ea(t.g, "playing", function () {
                t.ab = !0;
              }),
              (t.Oa = xd(i)),
              t.g.removeAttribute("src"),
              t.W && t.g.removeChild(t.W),
              t.C && t.g.removeChild(t.C),
              (t.W = Yc(t.Oa)),
              t.g.appendChild(t.W),
              t.C && t.g.appendChild(t.C),
              t.g.load(),
              i
            );
          }
          function Qc(e, t, n, i) {
            var r, a, o, s, u, c, d, h, f, p, g, m;
            return P(function (v) {
              switch (v.g) {
                case 1:
                  return (
                    (r = Rt),
                    (a = F),
                    (o = H),
                    w(
                      v,
                      (function (e, t) {
                        var n, i, r, a, o, s, u, c, d, h;
                        return P(function (f) {
                          if (1 == f.g)
                            return e.createSegmentIndex
                              ? w(f, e.createSegmentIndex(), 2)
                              : f.u(2);
                          if (!e.segmentIndex) return f.return(!1);
                          if (0 == e.segmentIndex.getNumReferences())
                            return f.return(!0);
                          for (
                            n = Rt,
                              i = new Set(),
                              r = l(e.segmentIndex),
                              a = r.next();
                            !a.done;
                            a = r.next()
                          )
                            if (
                              ((o = a.value),
                              (s = o.mimeType || e.mimeType || ""),
                              (u = o.codecs || e.codecs || ""),
                              !(
                                (s == e.mimeType && u == e.codecs) ||
                                ((c = s + ":" + u), i.has(c))
                              ))
                            )
                              if ((i.add(c), t == n.ua)) {
                                if (!zi(Ci(s, u))) return f.return(!1);
                              } else if (
                                (t == n.ja
                                  ? (u = mr(u))
                                  : t == n.P && (u = gr(u, s)),
                                (d = Di(e, s, u)),
                                (h = Mi(s, u)),
                                !Ft(d) && !wi(h))
                              )
                                return f.return(!1);
                          return f.return(!0);
                        });
                      })(n, t),
                      2
                    )
                  );
                case 2:
                  if (
                    (o.call(
                      a,
                      v.h,
                      "Type negotiation should happen before MediaSourceEngine.init!"
                    ),
                    t == r.P && i && (i = gr(i, n.mimeType)),
                    (s = Ci(n.mimeType, i)),
                    t == r.ua)
                  ) {
                    td(e, s, e.D, n.external), v.u(0);
                    break;
                  }
                  if (
                    ((u = e.A.forceTransmux),
                    (!Ft(s) || (!e.D && Bi.includes(s))) && (u = !0),
                    (c = Mi(n.mimeType, i)),
                    !u)
                  ) {
                    v.u(4);
                    break;
                  }
                  if (
                    ((d = Dt(r.P, (i || "").split(","))),
                    (h = Dt(r.ja, (i || "").split(","))),
                    !d || !h)
                  ) {
                    v.u(5);
                    break;
                  }
                  return (e.m = !0), w(v, Qc(e, r.P, n, d), 6);
                case 6:
                  return w(v, Qc(e, r.ja, n, h), 7);
                case 7:
                  return v.return();
                case 5:
                  (f = wi(c)) &&
                    ((p = f()), e.j.set(t, p), (s = p.convertCodecs(t, c)));
                case 4:
                  (g = s + e.A.addExtraFeaturesToSourceBuffer(s)), Ll(e.G);
                  try {
                    m = e.i.addSourceBuffer(g);
                  } catch (t) {
                    throw new Me(
                      2,
                      3,
                      3015,
                      t,
                      "The mediaSource_ status was " +
                        e.i.readyState +
                        " expected 'open'",
                      null
                    );
                  }
                  e.D && (m.mode = Sd),
                    e.s.H(m, "error", function () {
                      var n = e.o.get(t)[0];
                      n.p.reject(
                        new Me(
                          2,
                          3,
                          3014,
                          e.g.error ? e.g.error.code : 0,
                          n.uri
                        )
                      );
                    }),
                    e.s.H(m, "updateend", function () {
                      return pd(e, t);
                    }),
                    e.l.set(t, m),
                    e.B.set(t, s),
                    e.Aa.set(t, !!n.drmInfos.length),
                    x(v);
              }
            });
          }
          function ed(e) {
            return e.xa && !e.O && !e.F;
          }
          function td(e, t, n, i) {
            e.h ||
              ((e.h = new Fi(e.fa)), e.h && (e.h.A = e.A.modifyCueCallback));
            var r = e.h;
            (i = i || e.Xa),
              (e = e.X),
              "application/cea-608" == t || "application/cea-708" == t
                ? (r.i = null)
                : ((r.i = Ki.get(t)()),
                  r.i.setSequenceMode
                    ? r.i.setSequenceMode(n)
                    : te(
                        "Text parsers w/ setSequenceMode",
                        'Text parsers should have a "setSequenceMode" method!'
                      ),
                  r.i.setManifestType
                    ? r.i.setManifestType(e)
                    : te(
                        "Text parsers w/ setManifestType",
                        'Text parsers should have a "setManifestType" method!'
                      ),
                  (r.B = i));
          }
          function nd(e) {
            return !e.F && (!e.i || "ended" == e.i.readyState);
          }
          function id(e) {
            return !e.F && (!e.i || "closed" == e.i.readyState);
          }
          function rd(e, t) {
            return (
              e.l.size
                ? t == Lt
                  ? (e = e.h.g)
                  : (e =
                      !(e = od(e, t)) || Pc(e)
                        ? null
                        : 1 == e.length && 0 > e.start(0)
                        ? 0
                        : e.length
                        ? e.start(0)
                        : null)
                : (e = null),
              e
            );
          }
          function ad(e, t) {
            return e.l.size ? (t == Lt ? e.h.h : Lc(od(e, t))) : null;
          }
          function od(e, t) {
            if (e.F || e.O) return null;
            try {
              return e.l.get(t).buffered;
            } catch (n) {
              return e.l.has(t), null;
            }
          }
          function sd(e, t, n, i, r, a, o, s, u, d) {
            var h, f, p, g, m, v, y, b, S, T, A, k, I, C, M, E;
            return (
              (o = void 0 !== o && o),
              (s = void 0 !== s && s),
              (u = void 0 !== u && u),
              (d = void 0 !== d && d),
              P(function (D) {
                switch (D.g) {
                  case 1:
                    if (t != (h = Rt).ua) {
                      D.u(2);
                      break;
                    }
                    if ("HLS" != e.X) {
                      D.u(3);
                      break;
                    }
                    return w(D, e.Ma, 4);
                  case 4:
                    (f = D.h), (e.h.s = f);
                  case 3:
                    return w(
                      D,
                      (function (e, t, n, i, r) {
                        var a, o, s, u, c, d, h;
                        return P(function (f) {
                          if (1 == f.g) return w(f, Promise.resolve(), 2);
                          if (!e.i || !e.j) return f.return();
                          if (null == n || null == i)
                            return e.i.parseInit(Ae(t)), f.return();
                          for (
                            a = e.B ? n : e.s,
                              o = {
                                periodStart: e.s,
                                segmentStart: n,
                                segmentEnd: i,
                                vttOffset: a,
                              },
                              s = e.i.parseMedia(Ae(t), o, r, []),
                              u = l(s),
                              c = u.next();
                            !c.done;
                            c = u.next()
                          )
                            (d = c.value), e.A(d, r || null, o);
                          (h = s.filter(function (t) {
                            return t.startTime >= e.l && t.startTime < e.m;
                          })),
                            e.j.append(h),
                            null == e.g && (e.g = Math.max(n, e.l)),
                            (e.h = Math.min(i, e.m)),
                            x(f);
                        });
                      })(
                        e.h,
                        n,
                        i ? i.startTime : null,
                        i ? i.endTime : null,
                        i ? i.T()[0] : null
                      ),
                      5
                    );
                  case 5:
                    return D.return();
                  case 2:
                    if (d || !e.m) {
                      D.u(6);
                      break;
                    }
                    return w(D, sd(e, h.P, n, i, r, a, o, s, u, !0), 7);
                  case 7:
                    return w(D, sd(e, h.ja, n, i, r, a, o, s, u, !0), 8);
                  case 8:
                    return D.return();
                  case 6:
                    if (!e.l.has(t)) return D.return();
                    if (
                      ((p = e.l.get(t).timestampOffset),
                      (g = e.B.get(t)),
                      e.j.has(t) && (g = e.j.get(t).getOriginalMimeType()),
                      i &&
                        ((m = (function (e, t, n, i, r, a) {
                          var o = null,
                            s = [],
                            u = Ae(n);
                          if (Bi.includes(a))
                            (t = wo(u)).length &&
                              i &&
                              ((n = t.find(function (e) {
                                return (
                                  "com.apple.streaming.transportStreamTimestamp" ===
                                  e.description
                                );
                              })) && (o = Math.round(n.data) / 1e3),
                              e.L.onMetadata(
                                [
                                  {
                                    cueTime: i.startTime,
                                    data: u,
                                    frames: t,
                                    dts: i.startTime,
                                    pts: i.startTime,
                                  },
                                ],
                                0,
                                i.endTime
                              ));
                          else if (
                            a.includes("/mp4") &&
                            i &&
                            i.ha &&
                            i.ha.timescale
                          ) {
                            var l = i.ha.timescale;
                            if (!isNaN(l)) {
                              var c =
                                  (null != r.emsgSchemeIdUris &&
                                    0 < r.emsgSchemeIdUris.length) ||
                                  e.A.dispatchAllEmsgBoxes,
                                d = 0,
                                h = !1;
                              (u = new Ra()),
                                c &&
                                  u.N("emsg", function (t) {
                                    var n = r.emsgSchemeIdUris;
                                    if (0 === t.version)
                                      var a = t.reader.dc(),
                                        o = t.reader.dc(),
                                        s = t.reader.M(),
                                        u = t.reader.M(),
                                        l = t.reader.M(),
                                        c = t.reader.M(),
                                        d = i.startTime + u / s;
                                    else
                                      (s = t.reader.M()),
                                        (u =
                                          (d = t.reader.Cc() / s + i.l) -
                                          i.startTime),
                                        (l = t.reader.M()),
                                        (c = t.reader.M()),
                                        (a = t.reader.dc()),
                                        (o = t.reader.dc());
                                    (t = t.reader.Ib(
                                      t.reader.getLength() - t.reader.ra()
                                    )),
                                      ((n && n.includes(a)) ||
                                        e.A.dispatchAllEmsgBoxes) &&
                                        ("urn:mpeg:dash:event:2012" == a
                                          ? e.L.ci()
                                          : ((s = {
                                              startTime: d,
                                              endTime: (n = d + l / s),
                                              schemeIdUri: a,
                                              value: o,
                                              timescale: s,
                                              presentationTimeDelta: u,
                                              eventDuration: l,
                                              id: c,
                                              messageData: t,
                                            }),
                                            (new Xo(
                                              "emsg",
                                              (c = new Map().set("detail", s))
                                            ).cancelable = !0),
                                            e.L.ai(s),
                                            ("https://aomedia.org/emsg/ID3" ==
                                              a ||
                                              "https://developer.apple.com/streaming/emsg-id3" ==
                                                a) &&
                                              (a = wo(t)).length &&
                                              e.L.onMetadata(
                                                [
                                                  {
                                                    cueTime: d,
                                                    data: t,
                                                    frames: a,
                                                    dts: d,
                                                    pts: d,
                                                  },
                                                ],
                                                0,
                                                n
                                              )));
                                  }),
                                u
                                  .N("prft", function (t) {
                                    var n = t.reader,
                                      i = t.version;
                                    n.M(),
                                      (t =
                                        1e3 * (t = n.M()) +
                                        (n.M() / Math.pow(2, 32)) * 1e3),
                                      0 === i
                                        ? (n = n.M())
                                        : ((i = n.M()),
                                          (n = n.M()),
                                          (n = i * Math.pow(2, 32) + n)),
                                      (t = new Date(
                                        new Date(
                                          Date.UTC(1900, 0, 1, 0, 0, 0)
                                        ).getTime() + t
                                      ).getTime()),
                                      (n = new Xo(
                                        "prft",
                                        (n = new Map().set("detail", {
                                          wallClockTime: t,
                                          programStartDate: new Date(
                                            t - (n / l) * 1e3
                                          ),
                                        }))
                                      )),
                                      e.L.onEvent(n);
                                  })
                                  .box("moof", Na)
                                  .box("traf", Na)
                                  .N("tfdt", function (e) {
                                    h ||
                                      ((d =
                                        qa(e.reader, e.version)
                                          .baseMediaDecodeTime / l),
                                      (h = !0),
                                      c || e.parser.stop());
                                  })
                                  .parse(n, !0),
                                h && 0 == i.l && (o = d);
                            }
                          } else
                            a.includes("/mp4") ||
                              a.includes("/webm") ||
                              !Io(u) ||
                              (e.da.has(t)
                                ? e.da.get(t).clearData()
                                : e.da.set(t, new So()),
                              null !=
                                (u = (s = e.da.get(t).parse(u)).getStartTime(
                                  t
                                )) && (o = u),
                              (s = s.getMetadata()));
                          return { timestamp: o, metadata: s };
                        })(e, t, n, i, r, g)),
                        (v = m.timestamp),
                        (y = m.metadata),
                        null != v &&
                          (null == e.ca &&
                            t == h.ja &&
                            ((e.ca = v),
                            (e.oa = i.startTime),
                            null != e.Y &&
                              ((b = 0),
                              e.oa == e.la && (b = e.ca - e.Y),
                              e.ga.resolve(b))),
                          null == e.Y &&
                            t == h.P &&
                            ((e.Y = v),
                            (e.la = i.startTime),
                            null != e.ca &&
                              ((S = 0),
                              e.oa == e.la && (S = e.ca - e.Y),
                              e.ga.resolve(S))),
                          (T = v),
                          (A = Bi),
                          !e.D && A.includes(e.B.get(t)) && (T = 0),
                          (k = i.startTime - T),
                          (0.001 <= Math.abs(p - k) || o || s) &&
                            (!u || 0 < k || !p) &&
                            ((p = k),
                            e.Ya &&
                              (gd(
                                e,
                                t,
                                function () {
                                  return hd(e, t);
                                },
                                null
                              ),
                              gd(
                                e,
                                t,
                                function () {
                                  return fd(e, t, p);
                                },
                                null
                              ))),
                          (t == h.ja || !e.l.has(h.ja)) && e.Ma.resolve(p)),
                        y.length) &&
                        e.L.onMetadata(y, p, i ? i.endTime : null),
                      a &&
                        t == h.ja &&
                        (e.h || td(e, "application/cea-608", e.D, !1),
                        e.S || ((I = g.split(";", 1)[0]), (e.S = new Wt(I))),
                        i
                          ? (C = e.S.j(n)).length &&
                            (function (e, t, n, i, r) {
                              for (
                                var a = n + " " + i,
                                  o = new Map(),
                                  s = (t = l(t)).next();
                                !s.done;
                                s = t.next()
                              ) {
                                var u = s.value;
                                (s = u.stream),
                                  (u = u.cue),
                                  o.has(s) || o.set(s, new Map()),
                                  o.get(s).has(a) || o.get(s).set(a, []),
                                  qi(e, u, r),
                                  u.startTime >= e.l &&
                                    u.startTime < e.m &&
                                    (o.get(s).get(a).push(u),
                                    s == e.C && e.j.append([u]));
                              }
                              for (
                                a = (r = l(o.keys())).next();
                                !a.done;
                                a = r.next()
                              )
                                for (
                                  a = a.value,
                                    e.o.has(a) || e.o.set(a, new Map()),
                                    s = (t = l(o.get(a).keys())).next();
                                  !s.done;
                                  s = t.next()
                                )
                                  (s = s.value),
                                    (u = o.get(a).get(s)),
                                    e.o.get(a).set(s, u);
                              (e.g =
                                null == e.g
                                  ? Math.max(n, e.l)
                                  : Math.min(e.g, Math.max(n, e.l))),
                                (e.h = Math.max(e.h, Math.min(i, e.m)));
                            })(e.h, C, i.startTime, i.endTime, p)
                          : e.S.init(n, s)),
                      !e.j.has(t))
                    ) {
                      D.u(9);
                      break;
                    }
                    return w(
                      D,
                      e.j.get(t).transmux(n, r, i, e.i.duration, t),
                      10
                    );
                  case 10:
                    n = D.h;
                  case 9:
                    if (
                      ((n = (function (e, t, n, i, r) {
                        if ("mp4" != Pi(e.B.get(r))) return n;
                        var a = null === i,
                          o = e.Aa.get(r),
                          s = e.L.oh(),
                          u = !1;
                        i && i.ha && (u = i.ha.encrypted),
                          (i = i ? i.T()[0] : null),
                          e.A.correctEc3Enca &&
                            a &&
                            "audio" === r &&
                            (n = (function (e) {
                              e = Ae(e);
                              var t = null;
                              return (
                                new Ra()
                                  .box("moov", Na)
                                  .box("trak", Na)
                                  .box("mdia", Na)
                                  .box("minf", Na)
                                  .box("stbl", Na)
                                  .N("stsd", _a)
                                  .box("enca", function (e) {
                                    return (t = e.reader.h), ja(e);
                                  })
                                  .box("sinf", Na)
                                  .box("frma", function (e) {
                                    e.parser.stop(),
                                      "ec-3" === Xa(e.reader).codec &&
                                        t &&
                                        2 !== t.getUint16(16) &&
                                        t.setUint16(16, 2);
                                  })
                                  .parse(e),
                                e
                              );
                            })(n)),
                          (e = e.A.insertFakeEncryptionInInit && o) &&
                            ((s = Le(s)),
                            (e =
                              (Xe() && "audio" === r) ||
                              Ve() ||
                              He() ||
                              it("SOPOpenBrowser") ||
                              (Fe() && et() && s)));
                        e &&
                          (a
                            ? (n = (function (e, t, n) {
                                function i(e) {
                                  h.push({ box: e, gg: 1701733217 });
                                }
                                function r(e) {
                                  h.push({ box: e, gg: 1701733238 });
                                }
                                function a(e) {
                                  (c = !0), e.parser.stop();
                                }
                                function o(e) {
                                  d.push(e), Na(e);
                                }
                                var s,
                                  u = (t = Ae(t)),
                                  c = !1,
                                  d = [],
                                  h = [];
                                if (
                                  (new Ra()
                                    .box("moov", o)
                                    .box("trak", o)
                                    .box("mdia", o)
                                    .box("minf", o)
                                    .box("stbl", o)
                                    .N("stsd", function (e) {
                                      (s = e), d.push(e), _a(e);
                                    })
                                    .N("encv", a)
                                    .N("enca", a)
                                    .N("dvav", r)
                                    .N("dva1", r)
                                    .N("dvh1", r)
                                    .N("dvhe", r)
                                    .N("dvc1", r)
                                    .N("dvi1", r)
                                    .N("hev1", r)
                                    .N("hvc1", r)
                                    .N("avc1", r)
                                    .N("avc3", r)
                                    .N("ac-3", i)
                                    .N("ec-3", i)
                                    .N("ac-4", i)
                                    .N("Opus", i)
                                    .N("fLaC", i)
                                    .N("mp4a", i)
                                    .parse(t),
                                  c)
                                )
                                  return t;
                                if (0 == h.length || !s)
                                  throw (kt(t), new Me(2, 3, 3019, n));
                                h.reverse();
                                for (
                                  var f = (n = l(h)).next();
                                  !f.done;
                                  f = n.next()
                                )
                                  (f = f.value),
                                    (u = Ec(e, u, s, f.box, d, f.gg));
                                return Fe() && et() && !He()
                                  ? ((e = new Uint8Array(
                                      t.byteLength + u.byteLength
                                    )).set(u),
                                    e.set(t, u.byteLength),
                                    e)
                                  : u;
                              })(t, n, i))
                            : ((t = !u) && (t = Xe() && "audio" === r),
                              t &&
                                (n = (function (e) {
                                  e = Ae(e);
                                  var t = [];
                                  new Ra()
                                    .box("mdat", function (e) {
                                      t.push(e);
                                    })
                                    .parse(e);
                                  for (var n = [], i = 0; i < t.length; i++) {
                                    var r = t[i - 1],
                                      a = t[i];
                                    n.push(
                                      Mc(
                                        e.subarray(
                                          r ? r.start + r.size : 0,
                                          a.start + a.size
                                        )
                                      )
                                    );
                                  }
                                  return It.apply(wt, c(n));
                                })(n))));
                        return (
                          a &&
                            ze() &&
                            (n = (function (e) {
                              function t(e) {
                                i.push({ start: e.start, size: e.size }), Na(e);
                              }
                              var n = Ae(e),
                                i = [];
                              return (
                                new Ra()
                                  .box("moov", t)
                                  .box("trak", t)
                                  .box("mdia", t)
                                  .box("minf", t)
                                  .box("stbl", t)
                                  .box("stsd", function (e) {
                                    i.push({ start: e.start, size: e.size });
                                    for (
                                      var t = Ie(n, e.start), r = 0;
                                      r < e.size - 3;
                                      r++
                                    ) {
                                      var a = t.getUint32(r);
                                      1633889587 == a
                                        ? t.setUint32(r, 1700998451)
                                        : 1684103987 == a &&
                                          t.setUint32(r, 1684366131);
                                    }
                                  })
                                  .parse(n),
                                n
                              );
                            })(n)),
                          n
                        );
                      })(e, r, n, i, t)),
                      !i || !e.D || t == h.ua)
                    ) {
                      D.u(11);
                      break;
                    }
                    if (!o && !s) {
                      D.u(11);
                      break;
                    }
                    if (
                      ((M = i.startTime),
                      "HLS" != e.X || e.m || t != h.P || !e.l.has(h.ja))
                    ) {
                      D.u(13);
                      break;
                    }
                    return w(D, e.ga, 14);
                  case 14:
                    (E = D.h), 0.15 < Math.abs(E) && (M -= E);
                  case 13:
                    gd(
                      e,
                      t,
                      function () {
                        return hd(e, t);
                      },
                      null
                    ),
                      gd(
                        e,
                        t,
                        function () {
                          return fd(e, t, M);
                        },
                        null
                      );
                  case 11:
                    return w(
                      D,
                      gd(
                        e,
                        t,
                        function () {
                          var i = n;
                          e.K && jt(e.K, i, p, r), e.l.get(t).appendBuffer(i);
                        },
                        i ? i.T()[0] : null
                      ),
                      15
                    );
                  case 15:
                    x(D);
                }
              })
            );
          }
          function ud(e, t) {
            var n;
            return P(function (i) {
              return 1 == i.g
                ? t == (n = Rt).ua
                  ? e.h
                    ? w(i, e.h.remove(0, 1 / 0), 0)
                    : i.return()
                  : w(
                      i,
                      gd(
                        e,
                        t,
                        function () {
                          return dd(e, t, 0, e.i.duration);
                        },
                        null
                      ),
                      4
                    )
                : e.m
                ? w(
                    i,
                    gd(
                      e,
                      n.P,
                      function () {
                        return dd(e, n.P, 0, e.i.duration);
                      },
                      null
                    ),
                    0
                  )
                : i.u(0);
            });
          }
          function ld(e, t, n, i, r, a, o, s, u) {
            var l, c;
            return P(function (d) {
              return 1 == d.g
                ? t == (l = Rt).ua
                  ? (a || (e.h.s = n),
                    (function (e, t, n) {
                      (e.l = t), (e.m = n);
                    })(e.h, i, r),
                    d.return())
                  : ((c = []),
                    w(
                      d,
                      (function (e, t, n, i, r) {
                        var a, o, s, u, l, c, d, h, f, p, g, m, v, y;
                        return P(function (b) {
                          return 1 == b.g
                            ? t == (a = Rt).ua
                              ? b.return(!1)
                              : ((o = Li(_i(e.B.get(t)))),
                                (s = Ni(e.B.get(t))),
                                (u = wd(e, t, n, i)),
                                (l = u.wf),
                                (c = u.Ai),
                                (d = u.Gf),
                                (h = u.codec),
                                (f = u.mimeType),
                                (p = !0),
                                c &&
                                  e.B.has(a.P) &&
                                  ((g = wd(e, a.P, n, i)),
                                  (m = Li(_i(e.B.get(a.P)))),
                                  (v = Ni(e.B.get(a.P))),
                                  (p = m == g.codec && v == g.Gf),
                                  g.wf && g.wf.destroy()),
                                o === h && s === d && p
                                  ? (e.j.has(t) && !l
                                      ? (e.j.get(t).destroy(), e.j.delete(t))
                                      : !e.j.has(t) && l
                                      ? e.j.set(t, l)
                                      : l &&
                                        (e.j.has(t) &&
                                        e.j.get(t).transmux != l.transmux
                                          ? (e.j.get(t).destroy(),
                                            e.j.delete(t),
                                            e.j.set(t, l))
                                          : l.destroy()),
                                    b.return(!1))
                                  : ((y = !0),
                                    (e.m || (c && l && !e.j.has(t))) &&
                                      (y = !1),
                                    y &&
                                    "smooth" === e.A.codecSwitchingStrategy &&
                                    Ht()
                                      ? w(
                                          b,
                                          (function (e, t, n, i) {
                                            return gd(
                                              e,
                                              t,
                                              function () {
                                                if (t !== Lt) {
                                                  if ((e.B.get(t), Ht())) {
                                                    e.j.has(t) &&
                                                      (e.j.get(t).destroy(),
                                                      e.j.delete(t)),
                                                      i && e.j.set(t, i);
                                                    var r =
                                                      n +
                                                      e.A.addExtraFeaturesToSourceBuffer(
                                                        n
                                                      );
                                                    e.l.get(t).changeType(r),
                                                      e.B.set(t, n);
                                                  }
                                                  pd(e, t);
                                                }
                                              },
                                              null
                                            );
                                          })(e, t, f, l),
                                          3
                                        )
                                      : (l && l.destroy(), w(b, bd(e, r), 3))))
                            : b.return(!0);
                        });
                      })(e, t, o, s, u),
                      2
                    ))
                : (d.h ||
                    (c.push(
                      gd(
                        e,
                        t,
                        function () {
                          return hd(e, t);
                        },
                        null
                      )
                    ),
                    e.m &&
                      c.push(
                        gd(
                          e,
                          l.P,
                          function () {
                            return hd(e, l.P);
                          },
                          null
                        )
                      )),
                  a ||
                    (c.push(
                      gd(
                        e,
                        t,
                        function () {
                          return fd(e, t, n);
                        },
                        null
                      )
                    ),
                    e.m &&
                      c.push(
                        gd(
                          e,
                          l.P,
                          function () {
                            return fd(e, l.P, n);
                          },
                          null
                        )
                      )),
                  (0 == i && 1 / 0 == r) ||
                    (c.push(
                      gd(
                        e,
                        t,
                        function () {
                          var n = e.l.get(t);
                          (n.appendWindowStart = 0),
                            (n.appendWindowEnd = r),
                            (n.appendWindowStart = i),
                            pd(e, t);
                        },
                        null
                      )
                    ),
                    e.m &&
                      c.push(
                        gd(
                          e,
                          l.P,
                          function () {
                            var t = l.P,
                              n = e.l.get(t);
                            (n.appendWindowStart = 0),
                              (n.appendWindowEnd = r),
                              (n.appendWindowStart = i),
                              pd(e, t);
                          },
                          null
                        )
                      )),
                  c.length ? w(d, Promise.all(c), 0) : d.u(0));
            });
          }
          function cd(e) {
            P(function (t) {
              return e.G.g || e.g.error || e.O || e.F || nd(e) || id(e)
                ? t.return()
                : w(
                    t,
                    md(e, function () {
                      nd(e) || id(e) || e.i.clearLiveSeekableRange();
                    }),
                    0
                  );
            });
          }
          function dd(e, t, n, i) {
            i <= n ? pd(e, t) : e.l.get(t).remove(n, i);
          }
          function hd(e, t) {
            var n = e.l.get(t),
              i = n.appendWindowStart,
              r = n.appendWindowEnd;
            n.abort(),
              (n.appendWindowStart = i),
              (n.appendWindowEnd = r),
              pd(e, t);
          }
          function fd(e, t, n) {
            0 > n && (n += 0.001);
            var i = !0;
            "HLS" == e.X && (i = !(i = ad(e, t)) || 0.15 < Math.abs(i - n)),
              i && (e.l.get(t).timestampOffset = n),
              pd(e, t);
          }
          function pd(e, t) {
            if (e.F || e.G.g) {
              var n = e.o.get(t);
              n &&
                n.length &&
                ((n = n[0]) && n.p && n.p.resolve(), e.o.set(t, []));
            } else (n = e.o.get(t)[0]) && (n.p.resolve(), vd(e, t));
          }
          function gd(e, t, n, i) {
            return (
              Ll(e.G),
              (n = { start: n, p: new Ho(), uri: i }),
              e.o.get(t).push(n),
              1 == e.o.get(t).length && yd(e, t),
              n.p
            );
          }
          function md(e, t) {
            var n, i, r, a, o, s, u, c, d, h, f;
            return P(function (p) {
              switch (p.g) {
                case 1:
                  for (
                    Ll(e.G),
                      n = [],
                      i = Array.from(e.l.keys()),
                      r = l(i),
                      a = r.next(),
                      o = {};
                    !a.done;
                    o = { ready: void 0 }, a = r.next()
                  )
                    (s = a.value),
                      (o.ready = new Ho()),
                      (u = {
                        start: (function (e) {
                          return function () {
                            return e.ready.resolve();
                          };
                        })(o),
                        p: o.ready,
                        uri: null,
                      }),
                      (c = e.o.get(s)).push(u),
                      n.push(o.ready),
                      1 == c.length && u.start();
                  return S(p, 2), w(p, Promise.all(n), 4);
                case 4:
                  T(p, 3);
                  break;
                case 2:
                  throw A(p);
                case 3:
                  return S(p, 5, 6), w(p, t(), 6);
                case 6:
                  for (k(p), d = l(i), h = d.next(); !h.done; h = d.next())
                    (f = h.value), vd(e, f);
                  I(p, 0);
                  break;
                case 5:
                  throw new Me(
                    2,
                    3,
                    3015,
                    A(p),
                    e.g.error || "No error in the media element",
                    null
                  );
              }
            });
          }
          function vd(e, t) {
            e.o.get(t).shift(), yd(e, t);
          }
          function yd(e, t) {
            var n = e.o.get(t)[0];
            if (n)
              try {
                n.start();
              } catch (i) {
                "QuotaExceededError" == i.name
                  ? n.p.reject(new Me(2, 3, 3017, t))
                  : ed(e)
                  ? n.p.reject(
                      new Me(
                        2,
                        3,
                        3015,
                        i,
                        e.g.error || "No error in the media element",
                        n.uri
                      )
                    )
                  : n.p.reject(new Me(2, 3, 3024, t)),
                  vd(e, t);
              }
          }
          function bd(e, t) {
            return md(e, function () {
              return (function (e, t) {
                var n, i, r, a, o, s, u, c, d, h, f, p, g, m, v, y, b, x, S;
                return P(function (T) {
                  switch (T.g) {
                    case 1:
                      if (e.F) return T.return();
                      for (
                        n = Rt,
                          e.F = !0,
                          e.m = !1,
                          i = e.g.currentTime,
                          r = e.g.autoplay,
                          e.g.paused || (e.za = !0),
                          e.ab && (e.g.autoplay = !1),
                          T.l = 0,
                          T.j = 2,
                          e.s.qb(),
                          a = l(e.j.values()),
                          o = a.next();
                        !o.done;
                        o = a.next()
                      )
                        o.value.destroy();
                      for (
                        s = l(e.l.values()), u = s.next();
                        !u.done;
                        u = s.next()
                      ) {
                        c = u.value;
                        try {
                          e.i.removeSourceBuffer(c);
                        } catch (e) {}
                      }
                      return (
                        e.j.clear(),
                        e.l.clear(),
                        (d = e.i.duration),
                        (e.J = new Ho()),
                        (e.i = Zc(e, e.J)),
                        w(T, e.J, 4)
                      );
                    case 4:
                      !isNaN(d) && d
                        ? (e.i.duration = d)
                        : !isNaN(e.pa) && e.pa && (e.i.duration = e.pa),
                        (h = new Ho()),
                        (f = e.i.sourceBuffers),
                        (p = t.size),
                        (g = 0),
                        (m = function () {
                          ++g === p &&
                            (h.resolve(), e.s.sb(f, "addsourcebuffer", m));
                        }),
                        e.s.H(f, "addsourcebuffer", m),
                        (v = l(t.keys())),
                        (y = v.next());
                    case 5:
                      return y.done
                        ? ((S = t.get(n.P)) &&
                            S.isAudioMuxedInVideo &&
                            (e.m = !0),
                          e.m && !e.o.has(n.P) && e.o.set(n.P, []),
                          (e.g.currentTime = i),
                          w(T, h, 2))
                        : ((b = y.value),
                          (x = t.get(b)),
                          w(T, Qc(e, b, x, x.codecs), 6));
                    case 6:
                      (y = v.next()), T.u(5);
                      break;
                    case 2:
                      k(T),
                        (e.F = !1),
                        Ll(e.G),
                        e.s.Ea(e.g, "canplaythrough", function () {
                          e.G.g ||
                            ((e.g.autoplay = r),
                            e.za && ((e.za = !1), e.g.play()));
                        }),
                        I(T, 0);
                  }
                });
              })(e, t);
            });
          }
          function wd(e, t, n, i) {
            var r = !1,
              a = Dt("audio", (i || "").split(",")),
              o = Dt("video", (i || "").split(",")),
              s = o;
            "audio" == t && (s = a), s || (s = i), (i = Ci(n, s));
            var u = e.A.forceTransmux;
            if (
              ((!Ft(i) || (!e.D && Bi.includes(i))) && (u = !0),
              u && (n = wi((e = Mi(n, s)))))
            ) {
              var l = n();
              a && o && (r = !0), (i = l.convertCodecs(t, e));
            }
            return (
              (t = Li(_i(i))),
              { wf: l, Ai: r, Gf: Ni(i), codec: t, mimeType: i }
            );
          }
          B("shaka.util.Dom", Xc),
            (Xc.removeAllChildren = Jc),
            ((i = $c.prototype).destroy = function () {
              return this.G.destroy();
            }),
            (i.init = function (e, t, n, i) {
              (t = void 0 !== t && t),
                (n = void 0 === n ? "UNKNOWN" : n),
                (i = void 0 !== i && i);
              var r,
                a,
                o,
                s,
                u,
                c,
                d = this;
              return P(function (h) {
                switch (h.g) {
                  case 1:
                    return (r = Rt), w(h, d.J, 2);
                  case 2:
                    if (!nd(d) && !id(d)) {
                      h.u(3);
                      break;
                    }
                    return (
                      K(
                        "Expected MediaSource to be open during init(); reopening the media source."
                      ),
                      (d.J = new Ho()),
                      (d.i = Zc(d, d.J)),
                      w(h, d.J, 3)
                    );
                  case 3:
                    (d.D = t),
                      (d.X = n),
                      (d.$a = i),
                      (d.Ya = !d.D && "HLS" == d.X && !d.$a),
                      d.da.clear(),
                      (d.ca = null),
                      (d.oa = null),
                      (d.Y = null),
                      (d.la = null),
                      (d.ga = new Ho()),
                      (a = l(e.keys())),
                      (o = a.next());
                  case 5:
                    if (o.done) {
                      h.u(7);
                      break;
                    }
                    return (
                      (s = o.value),
                      (u = e.get(s)),
                      w(h, Qc(d, s, u, u.codecs), 8)
                    );
                  case 8:
                    d.m
                      ? (d.o.set(r.P, []), d.o.set(r.ja, []))
                      : d.o.set(s, []),
                      (o = a.next()),
                      h.u(5);
                    break;
                  case 7:
                    (c = e.get(r.P)) && c.isAudioMuxedInVideo && (d.m = !0),
                      x(h);
                }
              });
            }),
            (i.configure = function (e) {
              (this.A = e), this.h && (this.h.A = e.modifyCueCallback);
            }),
            (i.hb = function () {
              var e = {
                total: this.F ? [] : _c(this.g.buffered),
                audio: _c(od(this, "audio")),
                video: _c(od(this, "video")),
                text: [],
              };
              if (this.h) {
                var t = this.h.g,
                  n = this.h.h;
                null != t && null != n && e.text.push({ start: t, end: n });
              }
              return e;
            }),
            (i.remove = function (e, t, n) {
              var i,
                r = this;
              return P(function (a) {
                return 1 == a.g
                  ? e == (i = Rt).ua
                    ? w(a, r.h.remove(t, n), 0)
                    : n > t
                    ? w(
                        a,
                        gd(
                          r,
                          e,
                          function () {
                            return dd(r, e, t, n);
                          },
                          null
                        ),
                        5
                      )
                    : a.u(0)
                  : r.m
                  ? w(
                      a,
                      gd(
                        r,
                        i.P,
                        function () {
                          return dd(r, i.P, t, n);
                        },
                        null
                      ),
                      0
                    )
                  : a.u(0);
              });
            }),
            (i.flush = function (e) {
              var t,
                n = this;
              return P(function (i) {
                return 1 == i.g
                  ? e == (t = Rt).ua
                    ? i.return()
                    : w(
                        i,
                        gd(
                          n,
                          e,
                          function () {
                            (n.g.currentTime -= 0.001), pd(n, e);
                          },
                          null
                        ),
                        2
                      )
                  : n.m
                  ? w(
                      i,
                      gd(
                        n,
                        t.P,
                        function () {
                          var e = t.P;
                          (n.g.currentTime -= 0.001), pd(n, e);
                        },
                        null
                      ),
                      0
                    )
                  : i.u(0);
              });
            }),
            (i.endOfStream = function (e) {
              var t = this;
              return P(function (n) {
                return w(
                  n,
                  md(t, function () {
                    nd(t) ||
                      id(t) ||
                      (e ? t.i.endOfStream(e) : t.i.endOfStream());
                  }),
                  0
                );
              });
            }),
            (i.nb = function (e) {
              var t = this;
              return P(function (n) {
                return w(
                  n,
                  md(t, function () {
                    if (e < t.i.duration)
                      for (
                        var n = l(t.l.keys()), i = n.next();
                        !i.done;
                        i = n.next()
                      ) {
                        i = i.value;
                        var r = {
                          start: function () {},
                          p: new Ho(),
                          uri: null,
                        };
                        t.o.get(i).unshift(r);
                      }
                    (t.i.duration = e), (t.pa = e);
                  }),
                  0
                );
              });
            }),
            (i.getDuration = function () {
              return this.i.duration;
            });
          var xd = e.URL.createObjectURL,
            Sd = "sequence";
          function Td(e) {
            var t = this;
            (this.g = e),
              (this.j = !1),
              (this.i = this.g.ud()),
              (this.h = new je(function () {
                t.g.fg(0.25 * t.i);
              }));
          }
          function Ad(e) {
            e.h.stop();
            var t = e.j ? 0 : e.i;
            if (0 <= t)
              try {
                return void (e.g.ud() != t && e.g.nf(t));
              } catch (e) {}
            e.h.ta(0.25), 0 != e.g.ud() && e.g.nf(0);
          }
          function kd(e, t, n, i) {
            t == HTMLMediaElement.HAVE_NOTHING || e.readyState >= t
              ? i()
              : ((t = Id.value().get(t)), n.Ea(e, t, i));
          }
          (Td.prototype.release = function () {
            this.set(this.Wb()),
              this.h && (this.h.stop(), (this.h = null)),
              (this.g = null);
          }),
            (Td.prototype.set = function (e) {
              (this.i = e), Ad(this);
            }),
            (Td.prototype.Wb = function () {
              return this.g.Wb();
            });
          var Id = new De(function () {
            return new Map([
              [HTMLMediaElement.HAVE_METADATA, "loadedmetadata"],
              [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"],
              [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"],
              [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"],
            ]);
          });
          function Cd(e, t, n, i) {
            var r = this;
            (this.g = e),
              (this.m = t),
              (this.s = n),
              (this.l = null),
              (this.j = function () {
                return null == r.l && (r.l = i()), r.l;
              }),
              (this.o = !1),
              (this.h = new $()),
              (this.i = new Ld(e)),
              kd(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function () {
                Dd(r, r.j());
              });
          }
          function Md(e) {
            return e.o ? e.g.currentTime : e.j();
          }
          function Ed(e, t) {
            0 < e.g.readyState
              ? Rd(e.i, t)
              : kd(e.g, HTMLMediaElement.HAVE_METADATA, e.h, function () {
                  Dd(e, e.j());
                });
          }
          function Dd(e, t) {
            0.001 > Math.abs(e.g.currentTime - t)
              ? Pd(e)
              : (e.h.Ea(e.g, "seeking", function () {
                  Pd(e);
                }),
                Rd(
                  e.i,
                  e.g.currentTime && 0 != e.g.currentTime ? e.g.currentTime : t
                ));
          }
          function Pd(e) {
            (e.o = !0),
              e.h.H(e.g, "seeking", function () {
                return e.m();
              }),
              e.s(e.g.currentTime);
          }
          function Ld(e) {
            var t = this;
            (this.g = e),
              (this.m = 10),
              (this.j = this.l = this.i = 0),
              (this.h = new je(function () {
                0 >= t.i || t.g.currentTime != t.l || t.g.currentTime === t.j
                  ? t.h.stop()
                  : ((t.g.currentTime = t.j), t.i--);
              }));
          }
          function Rd(e, t) {
            (e.l = e.g.currentTime),
              (e.j = t),
              (e.i = e.m),
              (e.g.currentTime = t),
              e.h.ta(0.1);
          }
          function Nd(e) {
            (this.h = e), (this.j = !1), (this.g = null), (this.i = new $());
          }
          function _d(e, t, n, i, r, a) {
            var o = this;
            (this.i = e),
              (this.g = t.presentationTimeline),
              (this.l = n),
              (this.s = r),
              (this.o = null),
              (this.j = new Uc(e, t.presentationTimeline, n, a)),
              (this.h = new Cd(
                e,
                function () {
                  e: {
                    var e = o.j;
                    (e.l = !0),
                      (e.A = !1),
                      e.i && e.i.ta(e.h.gapJumpTimerTime),
                      jc(e);
                    var t = Md(o.h);
                    if (((e = jd(o, t)), !Vt() && 0.001 < Math.abs(e - t))) {
                      if (((t = !1), !Ke() || (Ke() && tt()))) t = !0;
                      else {
                        var n = Date.now() / 1e3,
                          i = Ke() && nt() ? 3 : 1;
                        (!o.o || o.o < n - i) && ((o.o = n), (t = !0));
                      }
                      if (t) {
                        Ed(o.h, e), (e = void 0);
                        break e;
                      }
                    }
                    o.s(), (e = void 0);
                  }
                  return e;
                },
                function (e) {
                  var t = o.j;
                  t.g.seeking && !t.l && ((t.l = !0), (t.j = e)),
                    t.i && t.i.ta(t.h.gapJumpTimerTime),
                    jc(t);
                },
                function () {
                  var e = i;
                  return (
                    null == e
                      ? (e = 1 / 0 > o.g.getDuration() ? o.g.pb() : o.g.bb())
                      : 0 > e && (e = o.g.bb() + e),
                    Ud(o, Od(o, e))
                  );
                }
              )),
              (this.m = new je(function () {
                if (0 != o.i.readyState && !o.i.paused) {
                  var e = Md(o.h),
                    t = o.g.pb(),
                    n = o.g.bb();
                  3 > n - t && (t = n - 3),
                    e < t && ((e = jd(o, e)), (o.i.currentTime = e));
                }
              }));
          }
          function Ud(e, t) {
            var n = e.g.getDuration();
            return t >= n ? n - e.l.durationBackoff : t;
          }
          function jd(e, t) {
            var n = e.l.rebufferingGoal,
              i = e.l.safeSeekOffset,
              r = e.g.pb(),
              a = e.g.bb(),
              o = e.g.getDuration();
            3 > a - r && (r = a - 3);
            var s = e.g.Oc(n),
              u = e.g.Oc(i);
            return (
              (n = e.g.Oc(n + i)),
              t >= o
                ? Ud(e, t)
                : t > a
                ? a - e.l.safeSeekEndOffset
                : t < r
                ? Rc(e.i.buffered, u)
                  ? u
                  : n
                : t >= s || Rc(e.i.buffered, t)
                ? t
                : n
            );
          }
          function Od(e, t) {
            var n = e.g.pb();
            return t < n ? n : t > (e = e.g.bb()) ? e : t;
          }
          function Bd(e) {
            var t = this;
            (this.j = e),
              (this.h = new $()),
              (this.g = new Set()),
              (this.i = new je(function () {
                Fd(t, !1);
              }).Nb()),
              e.paused || this.i.ta(0.25),
              this.h.H(e, "playing", function () {
                t.i.Nb().ta(0.25);
              }),
              this.h.H(e, "pause", function () {
                t.i.stop();
              });
          }
          function Fd(e, t) {
            for (
              var n = e.j.currentTime, i = (e = l(e.g)).next();
              !i.done;
              i = e.next()
            )
              i.value.j(n, t);
          }
          function Hd(e) {
            Yo.call(this), (this.g = new Map()), (this.h = e);
          }
          function Vd(e, t, n) {
            return !!(
              (e = e.h()[n]) &&
              0 < e.length &&
              ((n = e[e.length - 1].end), t >= e[0].start && t < n)
            );
          }
          function zd(e) {
            Yo.call(this), (this.h = new Map()), (this.i = e), (this.g = null);
          }
          function Gd(e, t) {
            var n =
              t.schemeIdUri +
              "_" +
              t.id +
              "_" +
              t.startTime.toFixed(1) +
              "_" +
              t.endTime.toFixed(1);
            e.h.has(n) ||
              (e.h.set(n, t),
              (t = new Xo("regionadd", new Map([["region", t]]))),
              e.dispatchEvent(t),
              (function (e) {
                e.g ||
                  (e.g = new je(function () {
                    for (
                      var t = e.i(), n = l(e.h), i = n.next();
                      !i.done;
                      i = n.next()
                    ) {
                      var r = l(i.value);
                      (i = r.next().value),
                        (r = r.next().value).endTime < t.start &&
                          (e.h.delete(i),
                          (i = new Xo(
                            "regionremove",
                            new Map([["region", r]])
                          )),
                          e.dispatchEvent(i));
                    }
                    !e.h.size && e.g && (e.g.stop(), (e.g = null));
                  }).ta(2));
              })(e));
          }
          function qd(e, t, n, i) {
            (this.m = e),
              (this.i = t),
              (this.l = n),
              (this.h = new Map()),
              (this.j = new Map()),
              (this.g = null),
              (this.o = i);
          }
          function Kd(e, t) {
            e.l = t;
            for (var n = (e = l(e.h.values())).next(); !n.done; n = e.next())
              n.value.g = t;
          }
          function Wd(e, t, n) {
            if (((n = void 0 !== n && n), !e.i.segmentIndex))
              return Promise.resolve();
            if ((e.g || (e.g = e.i.segmentIndex.ob(t, !0, e.o)), !e.g))
              return Promise.resolve();
            for (
              n && e.g.next(), t = [];
              e.h.size < e.m && (n = e.g.next().value);

            ) {
              var i = !0;
              n.isPreload() && null != n.endByte && (i = !1),
                2 == n.Pc() && (i = !1),
                n.Xb(!1) && (i = !1),
                i && n.ha && t.push(Xd(e, n.ha)),
                i &&
                  !e.h.has(n) &&
                  ((i = new eh(e.l)), t.push(th(i, n, e.i)), e.h.set(n, i));
            }
            return $d(e), Promise.all(t);
          }
          function Xd(e, t) {
            if (
              !e.i.segmentIndex ||
              t.Xb() ||
              Array.from(e.j.keys()).some(function (e) {
                return gs(e, t);
              })
            )
              return Promise.resolve();
            var n = new eh(e.l),
              i = th(n, t, e.i);
            return e.j.set(t, n), i;
          }
          function Yd(e, t) {
            for (var n = (t = l(t.keys())).next(); !n.done; n = t.next())
              (n = n.value) && Qd(e, n);
          }
          function Jd(e) {
            Yd(e, e.h), Yd(e, e.j), (e.g = null);
          }
          function $d(e) {
            for (
              var t = Array.from(e.h.keys()),
                n = l(e.j.keys()),
                i = n.next(),
                r = {};
              !i.done;
              r = { Te: void 0 }, i = n.next()
            )
              (r.Te = i.value),
                t.some(
                  (function (e) {
                    return function (t) {
                      return gs(t.ha, e.Te);
                    };
                  })(r)
                ) || Qd(e, r.Te);
          }
          function Zd(e, t) {
            e.m = t;
            for (var n = Array.from(e.h.keys()); n.length > t; ) {
              var i = n.pop();
              i && Qd(e, i);
            }
            $d(e);
          }
          function Qd(e, t) {
            var n = e.h;
            t instanceof ps && (n = e.j),
              (e = n.get(t)),
              n.delete(t),
              e && e.abort();
          }
          function eh(e) {
            (this.g = e), (this.ad = this.tf = null);
          }
          function th(e, t, n) {
            var i = new Uint8Array(0);
            return (
              (e.ad = e.g(t, n, function (t) {
                return P(function (n) {
                  if (1 == n.g)
                    return (
                      (i = 0 < i.byteLength ? It(i, t) : t),
                      e.tf ? w(n, e.tf(i), 3) : n.u(0)
                    );
                  (i = new Uint8Array(0)), x(n);
                });
              })),
              e.ad.promise.catch(function (e) {
                return e instanceof Me && 7001 == e.code
                  ? Promise.resolve()
                  : Promise.reject(e);
              })
            );
          }
          function nh(e, t) {
            var n = this;
            (this.g = t),
              (this.j = e),
              (this.h = null),
              (this.K = new Map()),
              (this.C = 1),
              (this.s = this.l = null),
              (this.S = 0),
              (this.i = new Map()),
              (this.J = !1),
              (this.W = null),
              (this.B = !1),
              (this.m = new Pl(function () {
                return (function (e) {
                  var t, n, i, r, a, o;
                  return P(function (s) {
                    if (1 == s.g) {
                      for (
                        e.A && e.A.stop(),
                          e.A = null,
                          e.G && e.G.stop(),
                          e.G = null,
                          t = [],
                          n = l(e.i.values()),
                          i = n.next();
                        !i.done;
                        i = n.next()
                      )
                        bh((r = i.value)),
                          t.push(wh(r)),
                          r.V && (Jd(r.V), (r.V = null));
                      for (
                        a = l(e.o.values()), o = a.next();
                        !o.done;
                        o = a.next()
                      )
                        Jd(o.value);
                      return w(s, Promise.all(t), 2);
                    }
                    e.i.clear(),
                      e.o.clear(),
                      (e.g = null),
                      (e.j = null),
                      (e.h = null),
                      (e.F = null),
                      x(s);
                  });
                })(n);
              })),
              (this.L = Date.now() / 1e3),
              (this.o = new Map()),
              (this.O = { projection: null, hfov: null }),
              (this.Y = 0),
              (this.X = 1 / 0),
              (this.D = null),
              (this.A = new je(function () {
                if (n.j && n.g)
                  if (n.j.presentationTimeline.R()) {
                    var e = n.j.presentationTimeline.pb(),
                      t = n.j.presentationTimeline.bb();
                    1 < t - e
                      ? (function (e, t, n) {
                          P(function (i) {
                            return e.G.g ||
                              e.g.error ||
                              e.O ||
                              e.F ||
                              nd(e) ||
                              id(e)
                              ? i.return()
                              : w(
                                  i,
                                  md(e, function () {
                                    nd(e) ||
                                      id(e) ||
                                      e.i.setLiveSeekableRange(t, n);
                                  }),
                                  0
                                );
                          });
                        })(n.g.U, e, t)
                      : cd(n.g.U);
                  } else cd(n.g.U), n.A && n.A.stop();
                else n.A && n.A.stop();
              })),
              (this.F = null),
              (this.G = new je(function () {
                var e = n.g.video;
                !e.ended && n.F && ((e.currentTime = n.F), (n.F = null));
              }));
          }
          function ih(e, t) {
            for (
              var n = 0 > e.g.Ra(), i = l(e.i.values()), r = i.next();
              !r.done;
              r = i.next()
            )
              (r = r.value).ba && r.ba.Fc(n), r.V && r.V.Fc(n);
            for (r = (i = l(e.o.values())).next(); !r.done; r = i.next())
              r.value.Fc(n);
            (n = e.i.get("video")) &&
              (i = n.stream) &&
              (t
                ? (t = i.trickModeVideo) &&
                  !n.Jb &&
                  (oh(e, t, !1, 0, !1), (n.Jb = i))
                : (t = n.Jb) && ((n.Jb = null), oh(e, t, !0, 0, !1)));
          }
          function rh(e, t, n, i, r, a) {
            (n = void 0 !== n && n),
              (i = void 0 === i ? 0 : i),
              (r = void 0 !== r && r),
              (a = void 0 !== a && a),
              (e.l = t),
              e.J &&
                (t.video && oh(e, t.video, n, i, r, a),
                t.audio && oh(e, t.audio, n, i, r, a));
          }
          function ah(e, t) {
            P(function (n) {
              if (1 == n.g)
                return (
                  (e.D = null),
                  (e.s = t),
                  e.J
                    ? t.segmentIndex
                      ? n.u(2)
                      : w(n, t.createSegmentIndex(), 2)
                    : n.return()
                );
              oh(e, t, !0, 0, !1), x(n);
            });
          }
          function oh(e, t, n, i, r, a) {
            var o = e.i.get(t.type);
            o || t.type != Lt
              ? o &&
                (o.Jb &&
                  (t.trickModeVideo
                    ? ((o.Jb = t), (t = t.trickModeVideo))
                    : (o.Jb = null)),
                o.stream != t || r) &&
                (e.o.has(t)
                  ? (o.V = e.o.get(t))
                  : o.V &&
                    (function (e, t) {
                      t && t !== e.i && (Jd(e), (e.i = t));
                    })(o.V, t),
                t.type == Lt &&
                  ((r = Ci(t.mimeType, t.codecs)),
                  td(e.g.U, r, e.j.sequenceMode, t.external)),
                !e.o.has(o.stream) &&
                  o.stream.closeSegmentIndex &&
                  (o.sa
                    ? ((r = "(" + o.type + ":" + o.stream.id + ")"),
                      e.K.has(r) || e.K.set(r, o.stream.closeSegmentIndex))
                    : o.stream.closeSegmentIndex()),
                (r = o.stream.isAudioMuxedInVideo != t.isAudioMuxedInVideo),
                (o.stream = t),
                (o.ba = null),
                (o.me = !!a),
                t.dependencyStream
                  ? (o.Mc = uh(e, t.dependencyStream))
                  : (o.Mc = null),
                r
                  ? Sh(e, !0, !1)
                  : (n
                      ? o.Qb
                        ? (o.de = !0)
                        : o.sa
                        ? ((o.Ob = !0), (o.nd = i), (o.de = !0))
                        : (bh(o),
                          vh(e, o, !0, i).catch(function (t) {
                            e.g && e.g.onError(t);
                          }))
                      : o.sa || o.Va || yh(e, o, 0),
                    (function (e, t) {
                      var n, i;
                      return P(function (r) {
                        if (1 == r.g)
                          return t.cb
                            ? ((n = t.stream),
                              (i = t.cb),
                              n.segmentIndex
                                ? r.u(2)
                                : w(r, n.createSegmentIndex(), 2))
                            : r.return();
                        if (t.cb != i || t.stream != n) return r.return();
                        var a = e.g.pc(),
                          o = ad(e.g.U, t.type),
                          s = t.stream.segmentIndex.find(
                            t.na ? t.na.endTime : a
                          ),
                          u = null == s ? null : t.stream.segmentIndex.get(s);
                        (s = u && u.endByte ? u.endByte - u.startByte : null),
                          u &&
                            !s &&
                            (s =
                              ((u.endTime - u.getStartTime()) *
                                (t.stream.bandwidth || 0)) /
                              8),
                          s
                            ? ((u = u.ha) &&
                                (s +=
                                  (u.endByte
                                    ? u.endByte - u.startByte
                                    : null) || 0),
                              (a =
                                (8 * s) / (u = e.g.getBandwidthEstimate()) <
                                  (o || 0) - a - e.h.rebufferingGoal ||
                                t.cb.h.g > s))
                            : (a = !1),
                          a && t.cb.abort(),
                          x(r);
                      });
                    })(e, o).catch(function (t) {
                      e.g && e.g.onError(t);
                    })))
              : (function (e, t) {
                  var n, i, r, a, o;
                  P(function (s) {
                    switch (s.g) {
                      case 1:
                        return (
                          (n = Rt),
                          e.S++,
                          (i = e.S),
                          S(s, 2),
                          w(s, ud(e.g.U, n.ua), 4)
                        );
                      case 4:
                        T(s, 3);
                        break;
                      case 2:
                        (r = A(s)), e.g && e.g.onError(r);
                      case 3:
                        (a = Ci(t.mimeType, t.codecs)),
                          td(e.g.U, a, e.j.sequenceMode, t.external),
                          (e.g.U.fa.isTextVisible() || e.h.alwaysStreamText) &&
                            e.S == i &&
                            ((o = uh(e, t)), e.i.set(n.ua, o), yh(e, o, 0)),
                          x(s);
                    }
                  });
                })(e, t);
          }
          function sh(e, t) {
            t.Qb ||
              t.Ob ||
              (t.sa
                ? ((t.Ob = !0), (t.nd = 0))
                : null == rd(e.g.U, t.type)
                ? null == t.Va && yh(e, t, 0)
                : (bh(t),
                  vh(e, t, !1, 0).catch(function (t) {
                    e.g && e.g.onError(t);
                  })));
          }
          function uh(e, t) {
            var n = {
              stream: t,
              type: t.type,
              ba: null,
              V: lh(e, t),
              na: null,
              ib: null,
              Cd: null,
              bc: null,
              ac: null,
              zd: null,
              Bd: null,
              Jb: null,
              endOfStream: !1,
              sa: !1,
              Va: null,
              Ob: !1,
              nd: 0,
              de: !1,
              Qb: !1,
              fc: !0,
              me: !1,
              ff: !1,
              Qc: !1,
              cb: null,
              Mc: null,
            };
            return t.dependencyStream && (n.Mc = uh(e, t.dependencyStream)), n;
          }
          function lh(e, t) {
            if (
              ("video" === t.type && e.h.disableVideoPrefetch) ||
              ("audio" === t.type && e.h.disableAudioPrefetch) ||
              (t.type === Lt &&
                ("application/cea-608" == t.mimeType ||
                  "application/cea-708" == t.mimeType)) ||
              (t.type === Lt && e.h.disableTextPrefetch)
            )
              return null;
            if (e.o.has(t)) return e.o.get(t);
            var n = e.i.get(t.type);
            return (n = n && n.V) && t === n.i
              ? n
              : 0 < e.h.segmentPrefetchLimit
              ? new qd(
                  e.h.segmentPrefetchLimit,
                  t,
                  function (t, n, i) {
                    return mh(t, n, i || null, e.h.retryParameters, e.g.cc);
                  },
                  0 > e.g.Ra()
                )
              : null;
          }
          function ch(t, n) {
            var i, r, a, o, s, u;
            return P(function (c) {
              switch (c.g) {
                case 1:
                  if ((Ll(t.m), n.sa || null == n.Va || n.Qb))
                    return c.return();
                  if (((n.Va = null), !n.Ob)) {
                    c.u(2);
                    break;
                  }
                  return w(c, vh(t, n, n.de, n.nd), 3);
                case 3:
                  return c.return();
                case 2:
                  if (
                    ((function (e, t) {
                      for (
                        var n = l(e.K.entries()), i = n.next();
                        !i.done;
                        i = n.next()
                      ) {
                        var r = l(i.value);
                        (i = r.next().value),
                          (r = r.next().value),
                          i.includes(t.type) && (r(), e.K.delete(i));
                      }
                    })(t, n),
                    n.stream.segmentIndex)
                  ) {
                    c.u(4);
                    break;
                  }
                  return (
                    (i = n.stream),
                    S(c, 5),
                    w(c, n.stream.createSegmentIndex(), 7)
                  );
                case 7:
                  T(c, 6);
                  break;
                case 5:
                  return (r = A(c)), w(c, xh(t, n, r), 8);
                case 8:
                  return c.return();
                case 6:
                  if (i != n.stream)
                    return (
                      i.closeSegmentIndex && i.closeSegmentIndex(),
                      n.sa || n.Va || yh(t, n, 0),
                      c.return()
                    );
                case 4:
                  S(c, 9),
                    (a = (function (t, n) {
                      if (ph(n))
                        return (
                          (function (e, t) {
                            var n = ad(e, "video") || 0;
                            Gi(e.h, t, n);
                          })(t.g.U, n.stream.originalId || ""),
                          null
                        );
                      if (
                        (n.type == Lt &&
                          (function (e) {
                            e.h && Gi(e.h, "", 0);
                          })(t.g.U),
                        n.stream.isAudioMuxedInVideo)
                      )
                        return null;
                      var i =
                        t.h.updateIntervalSeconds /
                        Math.max(1, Math.abs(t.g.Ra()));
                      if (!ed(t.g.U) && n.type != Lt) return i / 2;
                      var r = t.g.pc();
                      if ("audio" === n.type)
                        for (
                          var a = l(t.o.keys()), o = a.next();
                          !o.done;
                          o = a.next()
                        )
                          (o = t.o.get(o.value)).Ba(r, !0), Wd(o, r);
                      a = n.na ? n.na.endTime : r;
                      var s = (function (e, t, n) {
                          return t == Lt
                            ? null == (e = e.h).h || e.h < n
                              ? 0
                              : e.h - Math.max(n, e.g)
                            : Nc((e = od(e, t)), n);
                        })(t.g.U, n.type, r),
                        u = Math.max(
                          1,
                          Math.max(t.h.rebufferingGoal, t.h.bufferingGoal) * t.C
                        ),
                        c = t.j.presentationTimeline.getDuration() - a;
                      if (((o = ad(t.g.U, n.type)), 1e-6 > c && o))
                        return (
                          (n.endOfStream = !0),
                          "video" == n.type &&
                            (t = t.i.get(Lt)) &&
                            ph(t) &&
                            (t.endOfStream = !0),
                          null
                        );
                      if (((n.endOfStream = !1), s >= u)) return i / 2;
                      if (
                        ((u = !n.ba),
                        (o = (function (e, t, n, i) {
                          if (t.ba)
                            return (
                              (n = t.ba.current()) &&
                                t.na &&
                                0.001 >
                                  Math.abs(t.na.startTime - n.startTime) &&
                                (n = t.ba.next().value),
                              n
                            );
                          if (t.na || i)
                            return (
                              (n = t.na ? t.na.endTime : i),
                              (e = 0 > e.g.Ra()),
                              t.stream.segmentIndex &&
                                (t.ba = t.stream.segmentIndex.ob(n, !1, e)),
                              t.ba && t.ba.next().value
                            );
                          i = e.j.sequenceMode
                            ? 0
                            : e.h.inaccurateManifestTolerance;
                          var r = Math.max(n - i, 0);
                          e = 0 > e.g.Ra();
                          var a = null;
                          return (
                            i &&
                              (t.stream.segmentIndex &&
                                (t.ba = t.stream.segmentIndex.ob(r, !1, e)),
                              (a = t.ba && t.ba.next().value)),
                            a ||
                              (t.stream.segmentIndex &&
                                (t.ba = t.stream.segmentIndex.ob(n, !1, e)),
                              (a = t.ba && t.ba.next().value)),
                            a
                          );
                        })(t, n, r, o)),
                        !o)
                      )
                        return i;
                      (s = !1),
                        u && n.me && ((s = !0), (n.me = !1)),
                        (u = 1 / 0);
                      for (
                        var d = (c = l((c = Array.from(t.i.values())))).next();
                        !d.done;
                        d = c.next()
                      )
                        ph((d = d.value)) ||
                          (d.ba && !d.ba.current()) ||
                          (u = Math.min(u, d.na ? d.na.endTime : r));
                      return a >= u + t.j.presentationTimeline.h
                        ? i
                        : (("keep" !== t.h.crossBoundaryStrategy &&
                            (function (e, t, n) {
                              if (t.type === Lt) return !1;
                              var i = t.ib;
                              if (!i) return !1;
                              n = n.ha;
                              var r = i.g !== n.g;
                              if (
                                ("reset_to_encrypted" ===
                                  e.h.crossBoundaryStrategy &&
                                  (i.encrypted || n.encrypted || (r = !1),
                                  i.encrypted &&
                                    (e.h.crossBoundaryStrategy = "keep")),
                                "RESET_ON_ENCRYPTION_CHANGE" ===
                                  e.h.crossBoundaryStrategy &&
                                  i.encrypted == n.encrypted &&
                                  (r = !1),
                                r && t.fc)
                              ) {
                                var a = e.g.video,
                                  o = a.paused;
                                Sh(e, !0).then(function () {
                                  e.g.onEvent(new Xo("boundarycrossed")),
                                    o || a.play();
                                });
                              }
                              return r;
                            })(t, n, o)) ||
                            (n.V &&
                              n.ba &&
                              !t.o.has(n.stream) &&
                              (n.V.Ba(o.startTime + 0.001),
                              Wd(n.V, o.startTime).catch(function () {})),
                            (function (t, n, i, r, a) {
                              var o,
                                s,
                                u,
                                l,
                                c,
                                d,
                                h,
                                f,
                                p,
                                g,
                                m,
                                v,
                                y,
                                b,
                                k,
                                I;
                              return P(function (C) {
                                switch (C.g) {
                                  case 1:
                                    if (
                                      ((o = Rt),
                                      (s = n.stream),
                                      (u = n.ba),
                                      (n.sa = !0),
                                      S(C, 2),
                                      2 == r.Pc())
                                    )
                                      throw new Me(1, 1, 1011);
                                    return w(
                                      C,
                                      (function (e, t, n, i) {
                                        var r,
                                          a,
                                          o,
                                          s,
                                          u,
                                          l,
                                          c,
                                          d,
                                          h,
                                          f,
                                          p,
                                          g,
                                          m,
                                          v,
                                          y,
                                          b;
                                        return P(function (x) {
                                          switch (x.g) {
                                            case 1:
                                              if (
                                                ((r = Rt),
                                                (a = null == t.na),
                                                (o = []),
                                                (s = Math.max(
                                                  0,
                                                  Math.max(n.F, e.Y) - 0.1
                                                )),
                                                (u = Math.min(n.D, e.X) + 0.01),
                                                (l =
                                                  n.codecs || t.stream.codecs),
                                                (c = Ri(l)),
                                                (d = Ni(
                                                  n.mimeType ||
                                                    t.stream.mimeType
                                                )),
                                                (h = n.l) == t.Cd &&
                                                  s == t.bc &&
                                                  u == t.ac &&
                                                  c == t.zd &&
                                                  d == t.Bd)
                                              ) {
                                                x.u(2);
                                                break;
                                              }
                                              if (
                                                ((f =
                                                  t.zd &&
                                                  t.Bd &&
                                                  (function (e, t, n, i) {
                                                    if (t == Lt) var r = !1;
                                                    else {
                                                      r = Li(_i(e.B.get(t)));
                                                      var a = Ni(e.B.get(t)),
                                                        o = Ci(n, i),
                                                        s = e.A.forceTransmux;
                                                      (!Ft(o) ||
                                                        (!e.D &&
                                                          Bi.includes(o))) &&
                                                        (s = !0),
                                                        (n = Mi(n, i)),
                                                        s &&
                                                          (s = wi(n)) &&
                                                          ((o = (s =
                                                            s()).convertCodecs(
                                                            t,
                                                            n
                                                          )),
                                                          s.destroy()),
                                                        (t = Li(_i(o))),
                                                        (o = Ni(o)),
                                                        (r =
                                                          r !== t || a !== o);
                                                    }
                                                    return (
                                                      !!r &&
                                                      ("smooth" !==
                                                        e.A
                                                          .codecSwitchingStrategy ||
                                                        !Ht() ||
                                                        e.m)
                                                    );
                                                  })(e.g.U, t.type, d, l)),
                                                !f)
                                              ) {
                                                x.u(3);
                                                break;
                                              }
                                              if (
                                                ((p = null),
                                                t.type === r.ja
                                                  ? (p = e.i.get(r.P))
                                                  : t.type === r.P &&
                                                    (p = e.i.get(r.ja)),
                                                !p)
                                              ) {
                                                x.u(3);
                                                break;
                                              }
                                              return w(
                                                x,
                                                wh(p).catch(function () {}),
                                                5
                                              );
                                            case 5:
                                              (p.ib = null),
                                                (p.bc = null),
                                                (p.ac = null),
                                                sh(e, p);
                                            case 3:
                                              return w(
                                                x,
                                                dh(e, t, h, s, u, n, c, d),
                                                2
                                              );
                                            case 2:
                                              return (
                                                gs(n.ha, t.ib) ||
                                                  ((t.ib = n.ha),
                                                  n.j &&
                                                    n.ha &&
                                                    ((g = gh(e, t, n.ha)),
                                                    (m = function () {
                                                      var a, o, s, u, l, c;
                                                      return P(function (d) {
                                                        switch (d.g) {
                                                          case 1:
                                                            return (
                                                              S(d, 2),
                                                              w(d, g, 4)
                                                            );
                                                          case 4:
                                                            return (
                                                              (a = d.h),
                                                              Ll(e.m),
                                                              (o = null),
                                                              (s = new Map()),
                                                              (u = {
                                                                projection:
                                                                  null,
                                                                hfov: null,
                                                              }),
                                                              new Ra()
                                                                .box("moov", Na)
                                                                .box("trak", Na)
                                                                .box("mdia", Na)
                                                                .N(
                                                                  "mdhd",
                                                                  function (e) {
                                                                    o = Ka(
                                                                      e.reader,
                                                                      e.version
                                                                    ).timescale;
                                                                  }
                                                                )
                                                                .box(
                                                                  "hdlr",
                                                                  function (e) {
                                                                    switch (
                                                                      ((e =
                                                                        e.reader).skip(
                                                                        8
                                                                      ),
                                                                      e.dc())
                                                                    ) {
                                                                      case "soun":
                                                                        s.set(
                                                                          r.P,
                                                                          o
                                                                        );
                                                                        break;
                                                                      case "vide":
                                                                        s.set(
                                                                          r.ja,
                                                                          o
                                                                        );
                                                                    }
                                                                    o = null;
                                                                  }
                                                                )
                                                                .box("minf", Na)
                                                                .box("stbl", Na)
                                                                .N("stsd", _a)
                                                                .box("encv", Ua)
                                                                .box("avc1", Ua)
                                                                .box("avc3", Ua)
                                                                .box("hev1", Ua)
                                                                .box("hvc1", Ua)
                                                                .box("dvav", Ua)
                                                                .box("dva1", Ua)
                                                                .box("dvh1", Ua)
                                                                .box("dvhe", Ua)
                                                                .box("dvc1", Ua)
                                                                .box("dvi1", Ua)
                                                                .box("vexu", Na)
                                                                .box("proj", Na)
                                                                .N(
                                                                  "prji",
                                                                  function (e) {
                                                                    (e =
                                                                      e.reader.dc()),
                                                                      (u.projection =
                                                                        e);
                                                                  }
                                                                )
                                                                .box(
                                                                  "hfov",
                                                                  function (e) {
                                                                    (e =
                                                                      e.reader.M() /
                                                                      1e3),
                                                                      (u.hfov =
                                                                        e);
                                                                  }
                                                                )
                                                                .parse(a),
                                                              t.type === r.ja &&
                                                                (function (
                                                                  e,
                                                                  t
                                                                ) {
                                                                  if (
                                                                    e.O
                                                                      .projection !=
                                                                      t.projection ||
                                                                    e.O.hfov !=
                                                                      t.hfov
                                                                  ) {
                                                                    if (
                                                                      null !=
                                                                        t.projection ||
                                                                      null !=
                                                                        t.hfov
                                                                    ) {
                                                                      var n =
                                                                        new Map().set(
                                                                          "detail",
                                                                          t
                                                                        );
                                                                      n =
                                                                        new Xo(
                                                                          "spatialvideoinfo",
                                                                          n
                                                                        );
                                                                    } else
                                                                      n =
                                                                        new Xo(
                                                                          "nospatialvideoinfo"
                                                                        );
                                                                    (n.cancelable =
                                                                      !0),
                                                                      e.g.onEvent(
                                                                        n
                                                                      ),
                                                                      (e.O = t);
                                                                  }
                                                                })(e, u),
                                                              s.has(t.type)
                                                                ? (n.ha.timescale =
                                                                    s.get(
                                                                      t.type
                                                                    ))
                                                                : null != o &&
                                                                  (n.ha.timescale =
                                                                    o),
                                                              (l =
                                                                t.stream
                                                                  .closedCaptions &&
                                                                0 <
                                                                  t.stream
                                                                    .closedCaptions
                                                                    .size),
                                                              w(
                                                                d,
                                                                e.g.Hf(
                                                                  t.type,
                                                                  a
                                                                ),
                                                                5
                                                              )
                                                            );
                                                          case 5:
                                                            return w(
                                                              d,
                                                              sd(
                                                                e.g.U,
                                                                t.type,
                                                                a,
                                                                null,
                                                                t.stream,
                                                                l,
                                                                t.fc,
                                                                i
                                                              ),
                                                              6
                                                            );
                                                          case 6:
                                                            T(d, 0);
                                                            break;
                                                          case 2:
                                                            throw (
                                                              ((c = A(d)),
                                                              (t.ib = null),
                                                              c)
                                                            );
                                                        }
                                                      });
                                                    }),
                                                    (v = n.startTime),
                                                    a &&
                                                      null !=
                                                        (y = ad(
                                                          e.g.U,
                                                          t.type
                                                        )) &&
                                                      (v = y),
                                                    e.g.bi(v, n.ha),
                                                    o.push(m()))),
                                                (b = t.na ? t.na.h : -1),
                                                n.h != b &&
                                                  o.push(
                                                    (function (e, t, n) {
                                                      var i, r;
                                                      return P(function (a) {
                                                        return 1 == a.g
                                                          ? t == (i = Rt).ua
                                                            ? a.return()
                                                            : (t == i.ja &&
                                                                (e.Ma =
                                                                  new Ho()),
                                                              !e.D ||
                                                              ((r = ad(e, t)) &&
                                                                0.1 >
                                                                  Math.abs(
                                                                    r - n
                                                                  ))
                                                                ? a.return()
                                                                : (gd(
                                                                    e,
                                                                    t,
                                                                    function () {
                                                                      return hd(
                                                                        e,
                                                                        t
                                                                      );
                                                                    },
                                                                    null
                                                                  ),
                                                                  e.m &&
                                                                    gd(
                                                                      e,
                                                                      i.P,
                                                                      function () {
                                                                        return hd(
                                                                          e,
                                                                          i.P
                                                                        );
                                                                      },
                                                                      null
                                                                    ),
                                                                  w(
                                                                    a,
                                                                    gd(
                                                                      e,
                                                                      t,
                                                                      function () {
                                                                        return fd(
                                                                          e,
                                                                          t,
                                                                          n
                                                                        );
                                                                      },
                                                                      null
                                                                    ),
                                                                    2
                                                                  )))
                                                          : e.m
                                                          ? w(
                                                              a,
                                                              gd(
                                                                e,
                                                                i.P,
                                                                function () {
                                                                  return fd(
                                                                    e,
                                                                    i.P,
                                                                    n
                                                                  );
                                                                },
                                                                null
                                                              ),
                                                              0
                                                            )
                                                          : a.u(0);
                                                      });
                                                    })(
                                                      e.g.U,
                                                      t.type,
                                                      n.startTime
                                                    )
                                                  ),
                                                w(x, Promise.all(o), 0)
                                              );
                                          }
                                        });
                                      })(t, n, r, a),
                                      4
                                    );
                                  case 4:
                                    return (
                                      Ll(t.m),
                                      t.B
                                        ? C.return()
                                        : ((l =
                                            "video/mp4" == s.mimeType ||
                                            "audio/mp4" == s.mimeType),
                                          (c = e.ReadableStream),
                                          t.h.lowLatencyMode &&
                                          t.j.isLowLatency &&
                                          c &&
                                          l &&
                                          ("HLS" != t.j.type || r.A)
                                            ? ((h = new Uint8Array(0)),
                                              (p = f = !1),
                                              (m = function (e) {
                                                var o, u, l;
                                                return P(function (c) {
                                                  switch (c.g) {
                                                    case 1:
                                                      if (f) return c.return();
                                                      if (
                                                        ((p = !0), Ll(t.m), t.B)
                                                      )
                                                        return c.return();
                                                      if (
                                                        (S(c, 2),
                                                        (h = (function (e, t) {
                                                          var n =
                                                            new Uint8Array(
                                                              e.length +
                                                                t.length
                                                            );
                                                          return (
                                                            n.set(e),
                                                            n.set(t, e.length),
                                                            n
                                                          );
                                                        })(h, e)),
                                                        (o = !1),
                                                        (u = 0),
                                                        new Ra()
                                                          .box(
                                                            "mdat",
                                                            function (e) {
                                                              (u =
                                                                e.size +
                                                                e.start),
                                                                (o = !0);
                                                            }
                                                          )
                                                          .parse(h, !1, !0),
                                                        !o)
                                                      ) {
                                                        c.u(4);
                                                        break;
                                                      }
                                                      return (
                                                        (l = h.subarray(0, u)),
                                                        (h = h.subarray(u)),
                                                        w(
                                                          c,
                                                          hh(
                                                            t,
                                                            n,
                                                            i,
                                                            s,
                                                            r,
                                                            l,
                                                            !0,
                                                            a
                                                          ),
                                                          5
                                                        )
                                                      );
                                                    case 5:
                                                      n.V &&
                                                        n.ba &&
                                                        Wd(
                                                          n.V,
                                                          r.startTime,
                                                          !0
                                                        );
                                                    case 4:
                                                      T(c, 0);
                                                      break;
                                                    case 2:
                                                      (g = A(c)), x(c);
                                                  }
                                                });
                                              }),
                                              w(C, gh(t, n, r, m), 9))
                                            : w(C, gh(t, n, r), 7))
                                    );
                                  case 7:
                                    return (
                                      (d = C.h),
                                      Ll(t.m),
                                      t.B
                                        ? C.return()
                                        : (Ll(t.m),
                                          n.Ob
                                            ? ((n.sa = !1),
                                              yh(t, n, 0),
                                              C.return())
                                            : w(
                                                C,
                                                hh(t, n, i, s, r, d, !1, a),
                                                6
                                              ))
                                    );
                                  case 9:
                                    if (((v = C.h), g)) throw g;
                                    if (p) {
                                      C.u(10);
                                      break;
                                    }
                                    return (
                                      (f = !0),
                                      Ll(t.m),
                                      t.B
                                        ? C.return()
                                        : n.Ob
                                        ? ((n.sa = !1), yh(t, n, 0), C.return())
                                        : w(C, hh(t, n, i, s, r, v, !1, a), 10)
                                    );
                                  case 10:
                                    n.V && n.ba && Wd(n.V, r.startTime, !0);
                                  case 6:
                                    if ((Ll(t.m), t.B)) return C.return();
                                    (n.na = r),
                                      u.next(),
                                      (n.sa = !1),
                                      (n.ff = !1),
                                      (y = t.g.U.hb()),
                                      (b = y[n.type]),
                                      JSON.stringify(b),
                                      n.Ob ||
                                        ((k = null),
                                        n.type === o.ja
                                          ? (k = t.i.get(o.P))
                                          : n.type === o.P &&
                                            (k = t.i.get(o.ja)),
                                        k && k.type == o.P
                                          ? t.g.Jd(
                                              r,
                                              n.stream,
                                              k.stream.isAudioMuxedInVideo
                                            )
                                          : t.g.Jd(
                                              r,
                                              n.stream,
                                              n.stream.codecs.includes(",")
                                            )),
                                      yh(t, n, 0),
                                      T(C, 0);
                                    break;
                                  case 2:
                                    if (((I = A(C)), Ll(t.m, I), t.B))
                                      return C.return();
                                    if (((n.sa = !1), 7001 == I.code))
                                      (n.sa = !1), bh(n), yh(t, n, 0), C.u(0);
                                    else {
                                      if (
                                        n.type != o.ua ||
                                        !t.h.ignoreTextStreamFailures
                                      )
                                        return 3017 == I.code
                                          ? w(
                                              C,
                                              (function (e, t, n) {
                                                var i, r, a, o;
                                                return P(function (s) {
                                                  if (1 == s.g) {
                                                    if (
                                                      ((i = Array.from(
                                                        e.i.values()
                                                      )),
                                                      i.some(function (e) {
                                                        return e != t && e.ff;
                                                      }))
                                                    )
                                                      return s.u(2);
                                                    if (
                                                      ((r =
                                                        0 ===
                                                          e.h.maxDisabledTime &&
                                                        1011 == n.code
                                                          ? 1
                                                          : e.h
                                                              .maxDisabledTime),
                                                      e.g.disableStream(
                                                        t.stream,
                                                        r
                                                      ))
                                                    )
                                                      return s.return();
                                                    if (
                                                      e.h
                                                        .avoidEvictionOnQuotaExceededError
                                                    )
                                                      return (
                                                        yh(e, t, 4), s.return()
                                                      );
                                                    if (
                                                      20 <
                                                      (a = Math.round(
                                                        100 * e.C
                                                      ))
                                                    )
                                                      e.C -= 0.2;
                                                    else {
                                                      if (!(4 < a))
                                                        return (
                                                          (t.Qc = !0),
                                                          (e.B = !0),
                                                          e.g.onError(n),
                                                          s.return()
                                                        );
                                                      e.C -= 0.04;
                                                    }
                                                    return (
                                                      (t.ff = !0),
                                                      (o = e.g.pc()),
                                                      w(s, fh(e, t, o), 2)
                                                    );
                                                  }
                                                  yh(e, t, 4), x(s);
                                                });
                                              })(t, n, I),
                                              0
                                            )
                                          : ((n.Qc = !0),
                                            1 == I.category &&
                                              n.V &&
                                              Qd(n.V, r),
                                            (I.severity = 2),
                                            w(C, xh(t, n, I), 0));
                                      t.i.delete(o.ua), C.u(0);
                                    }
                                }
                              });
                            })(t, n, r, o, s).catch(function () {}),
                            n.Mc &&
                              (function (e, t, n) {
                                var i, r, a, o, s, u, l, c;
                                P(function (d) {
                                  switch (d.g) {
                                    case 1:
                                      if (
                                        ((i = t.stream),
                                        !(a =
                                          (r = i.segmentIndex.ob(n)) &&
                                          r.next().value))
                                      ) {
                                        d.u(0);
                                        break;
                                      }
                                      if (!(o = a.ha) || gs(o, t.ib)) {
                                        d.u(3);
                                        break;
                                      }
                                      return (
                                        (t.ib = o),
                                        S(d, 4),
                                        w(d, gh(e, t, o), 6)
                                      );
                                    case 6:
                                      s = d.h;
                                      var h = e.g.U;
                                      h.K && jt(h.K, s, 0, i), T(d, 3);
                                      break;
                                    case 4:
                                      throw ((u = A(d)), (t.ib = null), u);
                                    case 3:
                                      if (t.na && t.na == a) {
                                        d.u(0);
                                        break;
                                      }
                                      return (
                                        (t.na = a),
                                        S(d, 8),
                                        w(d, gh(e, t, a), 10)
                                      );
                                    case 10:
                                      (l = d.h),
                                        (h = e.g.U).K && jt(h.K, l, 0, i),
                                        T(d, 0);
                                      break;
                                    case 8:
                                      throw ((c = A(d)), (t.na = null), c);
                                  }
                                });
                              })(t, n.Mc, r)),
                          null);
                    })(t, n)),
                    null != a && (yh(t, n, a), (n.Qc = !1)),
                    T(c, 10);
                  break;
                case 9:
                  return (o = A(c)), w(c, xh(t, n, o), 11);
                case 11:
                  return c.return();
                case 10:
                  if (
                    ((s = Array.from(t.i.values())),
                    !t.J ||
                      !s.every(function (e) {
                        return e.endOfStream;
                      }))
                  ) {
                    c.u(0);
                    break;
                  }
                  return w(c, t.g.U.endOfStream(), 13);
                case 13:
                  Ll(t.m),
                    0 != (u = t.g.U.getDuration()) &&
                      u < t.j.presentationTimeline.getDuration() &&
                      t.j.presentationTimeline.nb(u),
                    x(c);
              }
            });
          }
          function dh(e, t, n, i, r, a, o, s) {
            var u, l, c, d;
            return P(function (h) {
              if (1 == h.g)
                return (
                  (u = Rt),
                  (l = new Map()),
                  e.l.audio && l.set(u.P, e.l.audio),
                  e.l.video && l.set(u.ja, e.l.video),
                  S(h, 2),
                  (t.bc = i),
                  (t.ac = r),
                  o && (t.zd = o),
                  s && (t.Bd = s),
                  (t.Cd = n),
                  (c = e.j.sequenceMode || "HLS" == e.j.type),
                  w(
                    h,
                    ld(
                      e.g.U,
                      t.type,
                      n,
                      i,
                      r,
                      c,
                      a.mimeType || t.stream.mimeType,
                      a.codecs || t.stream.codecs,
                      l
                    ),
                    4
                  )
                );
              if (2 != h.g) return T(h, 0);
              throw (
                ((d = A(h)),
                (t.bc = null),
                (t.ac = null),
                (t.zd = null),
                (t.Bd = null),
                (t.Cd = null),
                d)
              );
            });
          }
          function hh(e, t, n, i, r, a, o, s) {
            var u, l, c, d, h, f;
            return (
              (o = void 0 !== o && o),
              (s = void 0 !== s && s),
              P(function (p) {
                switch (p.g) {
                  case 1:
                    return (
                      (u = i.closedCaptions && 0 < i.closedCaptions.size),
                      e.h.shouldFixTimestampOffset &&
                        ((c =
                          "video/mp4" == i.mimeType ||
                          "audio/mp4" == i.mimeType),
                        (d = null),
                        r.ha && (d = r.ha.timescale),
                        (h =
                          c && d && "video" === i.type && "DASH" == e.j.type) &&
                          (l = new Ra()),
                        h &&
                          l
                            .box("moof", Na)
                            .box("traf", Na)
                            .N("tfdt", function (n) {
                              var i, a, o, s, u;
                              return P(function (l) {
                                return (
                                  (i = qa(n.reader, n.version)),
                                  (a = i.baseMediaDecodeTime)
                                    ? ((o = -a / d),
                                      (Number(t.Cd) || 0) < o
                                        ? ((s = t.bc),
                                          (u = t.ac),
                                          w(l, dh(e, t, o, s, u, r), 0))
                                        : l.u(0))
                                    : l.return()
                                );
                              });
                            }),
                        h && l.parse(a, !1, o)),
                      w(p, fh(e, t, n), 2)
                    );
                  case 2:
                    return (
                      Ll(e.m),
                      (f = t.fc),
                      (t.fc = !1),
                      w(p, e.g.Hf(t.type, a), 3)
                    );
                  case 3:
                    return w(p, sd(e.g.U, t.type, a, r, i, u, f, s, o), 4);
                  case 4:
                    Ll(e.m), x(p);
                }
              })
            );
          }
          function fh(e, t, n) {
            var i, r, a, o, s, u, l, c;
            return P(function (d) {
              return 1 == d.g
                ? ((i = t.stream.segmentIndex) instanceof Ps &&
                    i.Ba(e.j.presentationTimeline.xb()),
                  (r = Math.max(
                    e.h.bufferBehind * e.C,
                    e.j.presentationTimeline.h
                  )),
                  null == (a = rd(e.g.U, t.type))
                    ? (e.D == t && (e.D = null), d.return())
                    : ((o = n - a),
                      (s = e.h.evictionGoal),
                      (u = e.j.presentationTimeline.pb()),
                      (l = e.j.presentationTimeline.bb()),
                      (c = o - r),
                      l - u > s && (c = Math.max(o - r, u - s - a)),
                      c <= s
                        ? d.return()
                        : w(d, e.g.U.remove(t.type, a, a + c), 2)))
                : 4 != d.g
                ? (Ll(e.m), e.D ? w(d, fh(e, e.D, n), 4) : d.u(0))
                : (Ll(e.m), void x(d));
            });
          }
          function ph(e) {
            return (
              e &&
              e.type == Lt &&
              ("application/cea-608" == e.stream.mimeType ||
                "application/cea-708" == e.stream.mimeType)
            );
          }
          function gh(t, n, i, r) {
            var a, o, s, u, l;
            return P(function (c) {
              switch (c.g) {
                case 1:
                  if ((a = i.Xb())) return c.return(a);
                  if (((o = null), n.V)) {
                    var d = n.V,
                      h = d.h;
                    i instanceof ps && (h = d.j),
                      h.has(i)
                        ? ((d = h.get(i)), r && (d.tf = r), (o = d.ad))
                        : (o = null);
                  }
                  return (
                    o ||
                      (o = mh(
                        i,
                        n.stream,
                        r || null,
                        t.h.retryParameters,
                        t.g.cc
                      )),
                    (s = 0),
                    n.ba && (s = n.ba.h),
                    (n.cb = o),
                    w(c, o.promise, 2)
                  );
                case 2:
                  if (((u = c.h), (n.cb = null), (l = u.data), !i.aesKey)) {
                    c.u(3);
                    break;
                  }
                  return w(
                    c,
                    (function (t, n, i) {
                      var r, a, o, s, u;
                      return P(function (l) {
                        if (1 == l.g)
                          return (r = n).cryptoKey
                            ? l.u(2)
                            : w(l, r.fetchKey(), 3);
                        if (!(a = r.iv))
                          for (
                            a = Ae(new ArrayBuffer(16)),
                              o = r.firstMediaSequenceNumber + i,
                              s = a.byteLength - 1;
                            0 <= s;
                            s--
                          )
                            (a[s] = 255 & o), (o >>= 8);
                        return (
                          (u =
                            "CBC" == n.blockCipherMode
                              ? { name: "AES-CBC", iv: a }
                              : { name: "AES-CTR", counter: a, length: 64 }),
                          l.return(e.crypto.subtle.decrypt(u, r.cryptoKey, t))
                        );
                      });
                    })(l, i.aesKey, s),
                    4
                  );
                case 4:
                  l = c.h;
                case 3:
                  return c.return(l);
              }
            });
          }
          function mh(e, t, n, i, r, a) {
            a = void 0 !== a && a;
            var o = e instanceof ms ? e : void 0,
              s = o ? 1 : 0;
            return (
              ((e = iu(e.T(), e.startByte, e.endByte, i, n)).contentType =
                t.type),
              r.request(as, e, { type: s, stream: t, segment: o, isPreload: a })
            );
          }
          function vh(e, t, n, i) {
            var r, a;
            return P(function (o) {
              return 1 == o.g
                ? ((t.Ob = !1),
                  (t.de = !1),
                  (t.nd = 0),
                  (t.Qb = !0),
                  (t.na = null),
                  (t.ba = null),
                  t.V && !e.o.has(t.stream) && Jd(t.V),
                  i
                    ? ((r = e.g.pc()),
                      (a = e.g.U.getDuration()),
                      w(o, e.g.U.remove(t.type, r + i, a), 3))
                    : w(o, ud(e.g.U, t.type), 4))
                : 3 != o.g
                ? (Ll(e.m), n ? w(o, e.g.U.flush(t.type), 3) : o.u(3))
                : (Ll(e.m),
                  (t.Qb = !1),
                  (t.endOfStream = !1),
                  t.sa || t.Va || yh(e, t, 0),
                  void x(o));
            });
          }
          function yh(e, t, n) {
            var i = t.type;
            (i != Lt || e.i.has(i)) &&
              (t.Va = new Ue(function () {
                var n;
                return P(function (i) {
                  return 1 == i.g
                    ? (S(i, 2), w(i, ch(e, t), 4))
                    : 2 != i.g
                    ? T(i, 0)
                    : ((n = A(i)), e.g && e.g.onError(n), void x(i));
                });
              }).ea(n));
          }
          function bh(e) {
            null != e.Va && (e.Va.stop(), (e.Va = null));
          }
          function wh(e) {
            return P(function (t) {
              return e.cb ? w(t, e.cb.abort(), 0) : t.u(0);
            });
          }
          function xh(e, t, n) {
            var i;
            return P(function (r) {
              if (1 == r.g)
                return 3024 == n.code
                  ? ((t.sa = !1), bh(t), yh(e, t, 0), r.return())
                  : w(r, Fo(e.W), 2);
              if ((Ll(e.m), 1 === n.category && 1003 != n.code)) {
                if (t.Jb) return ih(e, !1), r.return();
                (i =
                  0 === e.h.maxDisabledTime && 1011 == n.code
                    ? 1
                    : e.h.maxDisabledTime),
                  (n.handled = e.g.disableStream(t.stream, i)),
                  n.handled && (n.severity = 1);
              }
              (n.handled && 1011 == n.code) || e.g.onError(n),
                n.handled || e.h.failureCallback(n),
                x(r);
            });
          }
          function Sh(e, t, n) {
            var i, r, a, o, s, u;
            return (
              (t = void 0 !== t && t),
              (n = void 0 === n || n),
              P(function (l) {
                if (1 == l.g) {
                  if (
                    ((i = Date.now() / 1e3),
                    (r = e.h.minTimeBetweenRecoveries),
                    !t)
                  ) {
                    if (!e.h.allowMediaSourceRecoveries || i - e.L < r)
                      return l.return(!1);
                    e.L = i;
                  }
                  return (
                    (a = Rt),
                    (o = e.i.get(a.P)) &&
                      ((o.ib = null),
                      (o.bc = null),
                      (o.ac = null),
                      n && sh(e, o),
                      wh(o).catch(function () {}),
                      o.ba && o.ba.gf()),
                    (s = e.i.get(a.ja)) &&
                      ((s.ib = null),
                      (s.bc = null),
                      (s.ac = null),
                      n && sh(e, s),
                      wh(s).catch(function () {}),
                      s.ba && s.ba.gf()),
                    (u = new Map()),
                    e.l.audio && u.set(a.P, e.l.audio),
                    e.l.video && u.set(a.ja, e.l.video),
                    w(l, bd(e.g.U, u), 2)
                  );
                }
                return (
                  !s || s.Qb || s.sa || s.Va || yh(e, s, 0),
                  !o || o.Qb || o.sa || o.Va || yh(e, o, 0),
                  l.return(!0)
                );
              })
            );
          }
          function Th(e) {
            if ("keep" !== e.h.crossBoundaryStrategy) {
              e.G.stop();
              var t = e.g.pc(),
                n = e.i.get("video") || e.i.get("audio");
              n &&
                (n = n.ib) &&
                null !== n.g &&
                (0 > (t = n.g - t) || 1 < t || ((e.F = n.g + 0.01), e.G.ea(t)));
            }
          }
          function Ah() {
            (this.g = null), (this.h = []);
          }
          function kh(e, t) {
            var n = 0;
            e.g && e.g.state == t && (n += e.g.duration);
            for (var i = (e = l(e.h)).next(); !i.done; i = e.next())
              n += (i = i.value).state == t ? i.duration : 0;
            return n;
          }
          function Ih() {
            (this.i = this.h = null), (this.g = []);
          }
          function Ch(e, t, n) {
            e.i != t &&
              ((e.i = t),
              e.g.push({
                timestamp: Date.now() / 1e3,
                id: t.id,
                type: "text",
                fromAdaptation: n,
                bandwidth: null,
              }));
          }
          function Mh() {
            (this.Pb =
              this.cg =
              this.s =
              this.A =
              this.J =
              this.B =
              this.o =
              this.j =
              this.G =
              this.C =
              this.i =
              this.W =
              this.X =
              this.L =
              this.O =
              this.S =
              this.l =
              this.m =
                NaN),
              (this.K = 0),
              (this.D = this.F = NaN),
              (this.g = new Ah()),
              (this.h = new Ih());
          }
          function Eh(e, t, n, i) {
            Yo.call(this),
              (this.S = e),
              (this.ca = t),
              (this.Ma = i.networkingEngine),
              (this.B = n),
              (this.o = null),
              (this.za = 0),
              (this.$a = i.od),
              (this.D = i.Th),
              (this.ab = i.Uh),
              (this.g = i.config),
              (this.l = this.F = this.h = null),
              (this.pa = !1),
              (this.G = i.gi),
              (this.xa = !1),
              (this.i = null),
              (this.la = !1),
              (this.j = this.C = null),
              (this.fa = !1),
              (this.O = new Map()),
              (this.Aa = !1),
              (this.Oa = i.fi),
              (this.da = new Mh()),
              (this.oa = new Ho()),
              (this.m = new Ho()),
              (this.W = null),
              (this.s = !1),
              (this.ga = i.Rg),
              (this.Y = this.K = null),
              (this.Ya = i.Qg),
              (this.X = !1),
              (this.L = []),
              (this.J = []),
              (this.A = !0);
          }
          function Dh(e, t, n) {
            (e = t ? e.J : e.L) ? e.push(n) : n();
          }
          function Ph(e, t) {
            if (((e.W = t), (e.X = !0), e.L))
              for (var n = (t = l(e.L)).next(); !n.done; n = t.next())
                (n = n.value)();
            e.L = null;
          }
          function Lh(e) {
            if (e.s) throw new Me(2, 7, 7003);
          }
          function Rh(e, t) {
            e.dispatchEvent(new Xo("onstatechange", new Map().set("state", t)));
          }
          function Nh(e, t) {
            var n, i, r, a;
            return P(function (o) {
              switch (o.g) {
                case 1:
                  if (!e.h || e.i) return o.return();
                  if (
                    (Rh(e, "drm-engine"),
                    (e.za = Date.now() / 1e3),
                    (e.i = e.$a()),
                    (e.D.h = e.i),
                    e.i.configure(e.g.drm, function () {
                      return e.A;
                    }),
                    !zc(e.D, e.h))
                  ) {
                    o.u(2);
                    break;
                  }
                  return (
                    (n = new Xo("trackschanged", void 0)),
                    w(o, Promise.resolve(), 3)
                  );
                case 3:
                  Lh(e), e.dispatchEvent(n);
                case 2:
                  return (
                    (i = Ar(e.h.variants)),
                    (r = !0),
                    e.h &&
                      e.h.presentationTimeline &&
                      "HLS" != e.h.type &&
                      (r = e.h.presentationTimeline.R()),
                    w(o, Ul(e.i, i, e.h.offlineSessionIds, r), 4)
                  );
                case 4:
                  if ((Lh(e), !t)) {
                    o.u(5);
                    break;
                  }
                  return w(o, e.i.Cb(t), 6);
                case 6:
                  Lh(e);
                case 5:
                  return w(o, Vc(e.D, e.h), 7);
                case 7:
                  if (!o.h) {
                    o.u(0);
                    break;
                  }
                  return (
                    (a = new Xo("trackschanged", void 0)),
                    w(o, Promise.resolve(), 9)
                  );
                case 9:
                  e.dispatchEvent(a), x(o);
              }
            });
          }
          function _h(e, t, n) {
            var i, r, a, o, s;
            return P(function (u) {
              return 1 == u.g
                ? ((i = e.g.streaming.segmentPrefetchLimit || 2),
                  (r = new qd(
                    i,
                    t,
                    function (t, n, i) {
                      return mh(
                        t,
                        n,
                        i || null,
                        e.g.streaming.retryParameters,
                        e.Ma,
                        e.A
                      );
                    },
                    !1
                  )),
                  e.O.set(t.id, r),
                  t.segmentIndex ? u.u(2) : w(u, t.createSegmentIndex(), 2))
                : ((a = e.B || 0),
                  (o = t.segmentIndex.ob(a)),
                  (s = null),
                  o && ((s = o.current()) || (s = o.next().value)),
                  s || (s = t.segmentIndex.g[0] || null),
                  s
                    ? n
                      ? s.ha
                        ? w(u, Xd(r, s.ha), 0)
                        : u.u(0)
                      : w(u, Wd(r, s.startTime), 0)
                    : u.u(0));
            });
          }
          function Uh(e, t) {
            Yo.call(this);
            var n = this;
            (this.i = e),
              (this.l = t),
              (this.g = new Map()),
              (this.m = [
                {
                  jc: null,
                  ic: Bh,
                  $b: function (e, t) {
                    return jh(n, "enter", e, t);
                  },
                },
                {
                  jc: Oh,
                  ic: Bh,
                  $b: function (e, t) {
                    return jh(n, "enter", e, t);
                  },
                },
                {
                  jc: Fh,
                  ic: Bh,
                  $b: function (e, t) {
                    return jh(n, "enter", e, t);
                  },
                },
                {
                  jc: Bh,
                  ic: Oh,
                  $b: function (e, t) {
                    return jh(n, "exit", e, t);
                  },
                },
                {
                  jc: Bh,
                  ic: Fh,
                  $b: function (e, t) {
                    return jh(n, "exit", e, t);
                  },
                },
                {
                  jc: Oh,
                  ic: Fh,
                  $b: function (e, t) {
                    t
                      ? jh(n, "skip", e, t)
                      : (jh(n, "enter", e, t), jh(n, "exit", e, t));
                  },
                },
                {
                  jc: Fh,
                  ic: Oh,
                  $b: function (e, t) {
                    return jh(n, "skip", e, t);
                  },
                },
              ]),
              (this.h = new $()),
              this.h.H(this.i, "regionremove", function (e) {
                n.g.delete(e.region);
              });
          }
          function jh(e, t, n, i) {
            (t = new Xo(
              t,
              new Map([
                ["region", n],
                ["seeking", i],
              ])
            )),
              e.dispatchEvent(t);
          }
          (Cd.prototype.release = function () {
            this.h && (this.h.release(), (this.h = null)),
              null != this.i && (this.i.release(), (this.i = null)),
              (this.m = function () {}),
              (this.g = null);
          }),
            (Ld.prototype.release = function () {
              this.h && (this.h.stop(), (this.h = null)), (this.g = null);
            }),
            ((i = Nd.prototype).ready = function () {
              var e = this;
              kd(
                this.h,
                HTMLMediaElement.HAVE_CURRENT_DATA,
                this.i,
                function () {
                  !(function () {
                    if (null == e.g || (0 == e.g && 1 / 0 != e.h.duration))
                      e.j = !0;
                    else {
                      var t = e.h.currentTime,
                        n = e.g;
                      0 > e.g && (n = Math.max(0, t + e.g)),
                        t != n
                          ? (e.i.Ea(e.h, "seeking", function () {
                              e.j = !0;
                            }),
                            (e.h.currentTime = n))
                          : (e.j = !0);
                    }
                  })();
                }
              );
            }),
            (i.release = function () {
              this.i && (this.i.release(), (this.i = null)), (this.h = null);
            }),
            (i.le = function (e) {
              this.g = this.j ? this.g : e;
            }),
            (i.kd = function () {
              return (this.j ? this.h.currentTime : this.g) || 0;
            }),
            (i.Df = function () {
              return 0;
            }),
            (i.Cf = function () {
              return 0;
            }),
            (i.hg = function () {}),
            ((i = _d.prototype).ready = function () {
              this.m.ta(0.25);
            }),
            (i.release = function () {
              this.h && (this.h.release(), (this.h = null)),
                this.j && (this.j.release(), (this.j = null)),
                this.m && (this.m.stop(), (this.m = null)),
                (this.i = this.h = this.g = this.l = null),
                (this.s = function () {});
            }),
            (i.le = function (e) {
              Ed(this.h, e);
            }),
            (i.kd = function () {
              var e = Md(this.h);
              return 0 < this.i.readyState && !this.i.paused ? Od(this, e) : e;
            }),
            (i.Df = function () {
              return this.j.F;
            }),
            (i.Cf = function () {
              return this.j.C;
            }),
            (i.hg = function () {
              this.j.Jd();
            }),
            (Bd.prototype.release = function () {
              this.h && (this.h.release(), (this.h = null)), this.i.stop();
              for (var e = l(this.g), t = e.next(); !t.done; t = e.next())
                t.value.release();
              this.g.clear();
            }),
            m(Hd, Yo),
            (Hd.prototype.release = function () {
              this.g.clear(), Yo.prototype.release.call(this);
            }),
            (Hd.prototype.j = function (e) {
              for (
                var t = l(this.g.values()), n = t.next();
                !n.done;
                n = t.next()
              ) {
                var i = (n = n.value).we;
                e: {
                  for (var r = n.ed, a = r.length - 1; 0 <= a; a--) {
                    var o = r[a];
                    if (o.position <= e) {
                      r = o.We;
                      break e;
                    }
                  }
                  r = null;
                }
                (a =
                  r &&
                  !(
                    i === r ||
                    (i &&
                      r &&
                      i.bandwidth == r.bandwidth &&
                      i.audioSamplingRate == r.audioSamplingRate &&
                      i.codecs == r.codecs &&
                      i.contentType == r.contentType &&
                      i.frameRate == r.frameRate &&
                      i.height == r.height &&
                      i.mimeType == r.mimeType &&
                      i.channelsCount == r.channelsCount &&
                      i.pixelAspectRatio == r.pixelAspectRatio &&
                      i.width == r.width)
                  )),
                  (o = r && i && r.label && i.label && i.label !== r.label);
                var s =
                  r &&
                  i &&
                  r.language &&
                  i.language &&
                  i.language !== r.language;
                (i = r && i && r.roles && i.roles && !rn(i.roles, r.roles)),
                  (o || s || i) &&
                    Vd(this, e, r.contentType) &&
                    ((n.we = r),
                    (i = new Xo(
                      "audiotrackchange",
                      new Map([
                        ["quality", r],
                        ["position", e],
                      ])
                    )),
                    this.dispatchEvent(i)),
                  a &&
                    Vd(this, e, r.contentType) &&
                    ((n.we = r),
                    JSON.stringify(r),
                    (n = new Xo(
                      "qualitychange",
                      new Map([
                        ["quality", r],
                        ["position", e],
                      ])
                    )),
                    this.dispatchEvent(n));
              }
            }),
            m(zd, Yo),
            (zd.prototype.release = function () {
              this.h.clear(),
                this.g && (this.g.stop(), (this.g = null)),
                Yo.prototype.release.call(this);
            }),
            (qd.prototype.Ba = function (e, t) {
              t = void 0 !== t && t;
              for (
                var n = l(this.h.keys()), i = n.next();
                !i.done;
                i = n.next()
              )
                e > (i = i.value).endTime && Qd(this, i);
              t && $d(this);
            }),
            (qd.prototype.Fc = function (e) {
              (this.o = e), this.g && this.g.Fc(e);
            }),
            (eh.prototype.abort = function () {
              this.ad && this.ad.abort();
            }),
            ((i = nh.prototype).destroy = function () {
              return this.m.destroy();
            }),
            (i.configure = function (e) {
              if (
                ((this.h = e),
                (this.W = new Bo(
                  {
                    maxAttempts: Math.max(e.retryParameters.maxAttempts, 2),
                    baseDelay: e.retryParameters.baseDelay,
                    backoffFactor: e.retryParameters.backoffFactor,
                    fuzzFactor: e.retryParameters.fuzzFactor,
                    timeout: 0,
                    stallTimeout: 0,
                    connectionTimeout: 0,
                  },
                  !0
                )),
                e.disableAudioPrefetch)
              ) {
                var t = this.i.get("audio");
                t && t.V && (Jd(t.V), (t.V = null));
                for (
                  var n = (t = l(this.o.keys())).next();
                  !n.done;
                  n = t.next()
                )
                  (n = n.value), Jd(this.o.get(n)), this.o.delete(n);
              }
              for (
                e.disableTextPrefetch &&
                  (t = this.i.get(Lt)) &&
                  t.V &&
                  (Jd(t.V), (t.V = null)),
                  e.disableVideoPrefetch &&
                    (t = this.i.get("video")) &&
                    t.V &&
                    (Jd(t.V), (t.V = null)),
                  n = (t = l(this.i.keys())).next();
                !n.done;
                n = t.next()
              )
                (n = this.i.get(n.value)).V
                  ? (Zd(n.V, e.segmentPrefetchLimit),
                    0 < e.segmentPrefetchLimit || (Jd(n.V), (n.V = null)))
                  : 0 < e.segmentPrefetchLimit && (n.V = lh(this, n.stream));
              e.disableAudioPrefetch ||
                (function (e) {
                  for (
                    var t = e.h.segmentPrefetchLimit,
                      n = e.h.prefetchAudioLanguages,
                      i = l(e.j.variants),
                      r = i.next(),
                      a = {};
                    !r.done;
                    a = { fb: void 0 }, r = i.next()
                  )
                    if (((a.fb = r.value), a.fb.audio))
                      if (e.o.has(a.fb.audio)) {
                        if (
                          (Zd((r = e.o.get(a.fb.audio)), t),
                          !(
                            0 < t &&
                            n.some(
                              (function (e) {
                                return function (t) {
                                  return Zi(e.fb.audio.language, t);
                                };
                              })(a)
                            )
                          ))
                        ) {
                          var o = e.i.get(a.fb.audio.type);
                          r !== (o && o.V) && Jd(r), e.o.delete(a.fb.audio);
                        }
                      } else
                        0 >= t ||
                          !n.some(
                            (function (e) {
                              return function (t) {
                                return Zi(e.fb.audio.language, t);
                              };
                            })(a)
                          ) ||
                          !(r = lh(e, a.fb.audio)) ||
                          (a.fb.audio.segmentIndex ||
                            a.fb.audio.createSegmentIndex(),
                          e.o.set(a.fb.audio, r));
                })(this);
            }),
            (i.start = function (e) {
              var t = this;
              return P(function (n) {
                if (1 == n.g)
                  return w(
                    n,
                    (function (e, t) {
                      var n, i, r, a, o, s, u, c, d;
                      return P(function (h) {
                        if (1 == h.g) {
                          if (((n = Rt), !e.l)) throw new Me(2, 5, 5006);
                          return (
                            (i = new Map()),
                            (r = new Set()),
                            e.l.audio &&
                              (i.set(n.P, e.l.audio), r.add(e.l.audio)),
                            e.l.video &&
                              (i.set(n.ja, e.l.video), r.add(e.l.video)),
                            e.s && (i.set(n.ua, e.s), r.add(e.s)),
                            w(
                              h,
                              e.g.U.init(
                                i,
                                e.j.sequenceMode,
                                e.j.type,
                                e.j.ignoreManifestTimestampsInSegmentsMode
                              ),
                              2
                            )
                          );
                        }
                        for (
                          Ll(e.m),
                            e.updateDuration(),
                            a = l(i.keys()),
                            o = a.next();
                          !o.done;
                          o = a.next()
                        )
                          (s = o.value),
                            (u = i.get(s)),
                            e.i.has(s) ||
                              ((c = uh(e, u)),
                              t.has(u.id) &&
                                (Kd((d = t.get(u.id)), function (t, n, i) {
                                  return mh(
                                    t,
                                    n,
                                    i || null,
                                    e.h.retryParameters,
                                    e.g.cc
                                  );
                                }),
                                (c.V = d)),
                              e.i.set(s, c),
                              yh(e, c, 0));
                        x(h);
                      });
                    })(t, e || new Map()),
                    2
                  );
                Ll(t.m), (t.J = !0), x(n);
              });
            }),
            (i.fc = function () {
              if (this.g) {
                for (
                  var e = this.g.pc(), t = l(this.i.keys()), n = t.next();
                  !n.done;
                  n = t.next()
                ) {
                  var i = n.value;
                  n = this.i.get(i);
                  var r = this.g.U;
                  if (
                    (i == Lt
                      ? (r =
                          null != (r = r.h).g &&
                          null != r.h &&
                          e >= r.g &&
                          e < r.h)
                      : (r = Rc((r = od(r, i)), e)),
                    !r)
                  ) {
                    if (
                      ((this.L = 0), n.V && (n.V.g = null), "audio" === n.type)
                    )
                      for (
                        var a = (r = l(this.o.values())).next();
                        !a.done;
                        a = r.next()
                      )
                        a.value.g = null;
                    (n.ba = null),
                      (null != ad(this.g.U, i) || n.sa) && sh(this, n),
                      n.cb && (n.cb.abort(), (n.cb = null)),
                      i === Lt && (i = this.g.U).S && i.S.h(),
                      (n.fc = !0);
                  }
                }
                "keep" !== this.h.crossBoundaryStrategy && Th(this);
              }
            }),
            (i.updateDuration = function () {
              var e = Vt(),
                t = this.j.presentationTimeline.getDuration();
              1 / 0 > t
                ? (e && (this.A && this.A.stop(), cd(this.g.U)), this.g.U.nb(t))
                : e
                ? (this.A && this.A.ta(0.5), this.g.U.nb(1 / 0))
                : this.g.U.nb(Math.pow(2, 32));
            }),
            m(Eh, Yo),
            ((i = Eh.prototype).getStartTime = function () {
              return this.B;
            }),
            (i.qd = function () {
              return this.S;
            }),
            (i.Oe = function () {
              return this.h;
            }),
            (i.getStats = function () {
              return this.da;
            }),
            (i.xh = function () {
              return this.K ? vr(this.K) : null;
            }),
            (i.wh = function () {
              return this.Y ? yr(this.Y) : null;
            }),
            (i.start = function () {
              var t,
                n = this;
              P(function (i) {
                switch (i.g) {
                  case 1:
                    return w(i, Promise.resolve(), 2);
                  case 2:
                    return (
                      S(i, 3),
                      w(
                        i,
                        (function (e) {
                          var t, n, i, r, a, o, s, u, c;
                          return P(function (d) {
                            switch (d.g) {
                              case 1:
                                if (
                                  (Rh(e, "manifest-parser"),
                                  e.l ||
                                    ((e.F = (function (e, t) {
                                      if (t) {
                                        var n = Ys.get(t.toLowerCase());
                                        if (n) return n;
                                      }
                                      throw new Me(2, 4, 4e3, e, t);
                                    })(e.S, e.ca)),
                                    (e.l = e.F()),
                                    e.l.configure(e.g.manifest, function () {
                                      return e.A;
                                    })),
                                  (t = Date.now() / 1e3),
                                  Rh(e, "manifest"),
                                  e.h)
                                ) {
                                  d.u(2);
                                  break;
                                }
                                return w(d, e.l.start(e.S, e.ab), 3);
                              case 3:
                                if (((e.h = d.h), 1 != e.h.variants.length)) {
                                  d.u(2);
                                  break;
                                }
                                for (
                                  n = [],
                                    i = e.h.variants[0],
                                    r = l([i.video, i.audio]),
                                    a = r.next();
                                  !a.done;
                                  a = r.next()
                                )
                                  (o = a.value) &&
                                    !o.segmentIndex &&
                                    n.push(o.createSegmentIndex());
                                if (!(0 < n.length)) {
                                  d.u(2);
                                  break;
                                }
                                return w(d, Promise.all(n), 2);
                              case 2:
                                return (
                                  e.oa.resolve(),
                                  (s = new Xo("manifestparsed", void 0)),
                                  w(d, Promise.resolve(), 7)
                                );
                              case 7:
                                if (
                                  (e.dispatchEvent(s), 0 == e.h.variants.length)
                                )
                                  throw new Me(2, 4, 4036);
                                !(function (e) {
                                  function t(e) {
                                    return (
                                      (e.video && e.audio) ||
                                      (e.video && e.video.codecs.includes(","))
                                    );
                                  }
                                  e.variants.some(t) &&
                                    (e.variants = e.variants.filter(t));
                                })(e.h),
                                  (u = Date.now() / 1e3),
                                  (c = u - t),
                                  (e.da.G = c),
                                  x(d);
                            }
                          });
                        })(n),
                        5
                      )
                    );
                  case 5:
                    if ((Lh(n), "webkit" === e.shakaMediaKeysPolyfill)) {
                      i.u(6);
                      break;
                    }
                    return w(i, Nh(n), 7);
                  case 7:
                    Lh(n);
                  case 6:
                    return w(
                      i,
                      (function (e) {
                        var t, n, i, r, a, o, s;
                        return P(function (u) {
                          return (
                            e.o ||
                              ((e.o = e.g.adaptationSetCriteriaFactory()),
                              e.o.configure({
                                language: e.g.preferredAudioLanguage,
                                role: e.g.preferredVariantRole,
                                channelCount: e.g.preferredAudioChannelCount,
                                sc: e.g.preferredVideoHdrLevel,
                                spatialAudio: e.g.preferSpatialAudio,
                                videoLayout: e.g.preferredVideoLayout,
                                kc: e.g.preferredAudioLabel,
                                Gc: e.g.preferredVideoLabel,
                                codecSwitchingStrategy:
                                  e.g.mediaSource.codecSwitchingStrategy,
                                audioCodec: "",
                              })),
                            e.Ya &&
                              ((t = e.g.abrFactory),
                              (e.C = t),
                              (e.j = t()),
                              e.j.configure(e.g.abr)),
                            e.ga
                              ? ((n = e.h.presentationTimeline.R()),
                                (i = Ar(e.h.variants)),
                                (r = e.o.create(i)),
                                e.j.configure(e.g.abr),
                                e.j.setVariants(Array.from(r.values())),
                                (a = e.j.chooseVariant())
                                  ? ((o = []),
                                    (e.K = a),
                                    a.video && o.push(_h(e, a.video, n)),
                                    a.audio && o.push(_h(e, a.audio, n)),
                                    (s =
                                      kr(
                                        e.h.textStreams,
                                        e.g.preferredTextLanguage,
                                        e.g.preferredTextRole,
                                        e.g.preferForcedSubs
                                      )[0] || null) &&
                                      Er(a.audio, s, e.g) &&
                                      (o.push(_h(e, s, n)), (e.Y = s)),
                                    w(u, Promise.all(o), 0))
                                  : u.u(0))
                              : u.u(0)
                          );
                        });
                      })(n),
                      8
                    );
                  case 8:
                    if ((Lh(n), !n.ga || !n.i)) {
                      i.u(9);
                      break;
                    }
                    return w(
                      i,
                      (function (e) {
                        return P(function (t) {
                          return 1 == t.g
                            ? e.K
                              ? w(t, e.m, 3)
                              : t.u(0)
                            : w(
                                t,
                                Promise.all(
                                  e.W.map(function (e) {
                                    return e.promise;
                                  })
                                ),
                                0
                              );
                        });
                      })(n.i),
                      10
                    );
                  case 10:
                    Lh(n);
                  case 9:
                    n.m.resolve(), T(i, 0);
                    break;
                  case 3:
                    ((t = A(i)) instanceof Me &&
                      (7001 == t.code || 7003 == t.code)) ||
                      n.m.reject(t),
                      x(i);
                }
              });
            }),
            (i.dispatchEvent = function (e) {
              return this.W
                ? this.W.dispatchEvent(e)
                : Yo.prototype.dispatchEvent.call(this, e);
            }),
            (i.onError = function (e) {
              2 === e.severity && (this.m.reject(e), this.destroy());
              var t = new Map().set("detail", e);
              (t = new Xo("error", t)),
                this.dispatchEvent(t),
                t.defaultPrevented && (e.handled = !0);
            }),
            (i.configure = function (e, t) {
              (e = Wu(e, t)), Qu(this.g, e);
            }),
            (i.getConfiguration = function () {
              return dn(this.g);
            }),
            (i.Gi = function () {
              return this.m;
            }),
            (i.destroy = function () {
              var e,
                t,
                n = this;
              return P(function (i) {
                switch (i.g) {
                  case 1:
                    if (((n.s = !0), !n.l || n.pa)) {
                      i.u(2);
                      break;
                    }
                    return w(i, n.l.stop(), 2);
                  case 2:
                    if (!n.j || n.fa) {
                      i.u(4);
                      break;
                    }
                    return w(i, n.j.stop(), 4);
                  case 4:
                    if ((n.G && !n.xa && n.G.release(), !n.i || n.la)) {
                      i.u(6);
                      break;
                    }
                    return w(i, n.i.destroy(), 6);
                  case 6:
                    if (0 < n.O.size && !n.Aa)
                      for (
                        e = l(n.O.values()), t = e.next();
                        !t.done;
                        t = e.next()
                      )
                        Jd(t.value);
                    x(i);
                }
              });
            }),
            B("shaka.media.PreloadManager", Eh),
            (Eh.prototype.destroy = Eh.prototype.destroy),
            (Eh.prototype.waitForFinish = Eh.prototype.Gi),
            (Eh.prototype.getPrefetchedTextTrack = Eh.prototype.wh),
            (Eh.prototype.getPrefetchedVariantTrack = Eh.prototype.xh),
            m(Uh, Yo),
            (Uh.prototype.release = function () {
              (this.i = null),
                this.g.clear(),
                this.h.release(),
                (this.h = null),
                Yo.prototype.release.call(this);
            }),
            (Uh.prototype.j = function (e, t) {
              if (!this.l || 0 != e) {
                this.l = !1;
                for (
                  var n = l(this.i.h.values()), i = n.next();
                  !i.done;
                  i = n.next()
                ) {
                  i = i.value;
                  var r = this.g.get(i),
                    a = e < i.startTime ? Oh : e > i.endTime ? Fh : Bh;
                  this.g.set(i, a);
                  for (var o = l(this.m), s = o.next(); !s.done; s = o.next())
                    (s = s.value).jc == r && s.ic == a && s.$b(i, t);
                }
              }
            });
          var Oh = 1,
            Bh = 2,
            Fh = 3;
          function Hh(e) {
            return Po(e);
          }
          var Vh = new Map()
            .set("com.microsoft.playready", Hh)
            .set("com.microsoft.playready.recommendation", Hh)
            .set("com.microsoft.playready.software", Hh)
            .set("com.microsoft.playready.hardware", Hh);
          function zh() {
            var e = this;
            (this.h = this.g = null),
              (this.l = []),
              (this.j = null),
              (this.s = 1),
              (this.i = null),
              (this.C = new V(5)),
              (this.o = new je(function () {
                !(function (e) {
                  var t;
                  P(function (n) {
                    switch (n.g) {
                      case 1:
                        return S(n, 2), w(n, Gh(e), 4);
                      case 4:
                        T(n, 3);
                        break;
                      case 2:
                        (t = A(n)), e.h && ((t.severity = 1), e.h.onError(t));
                      case 3:
                        if (!e.h) return n.return();
                        x(n);
                    }
                  });
                })(e);
              })),
              (this.B = new Jo()),
              (this.m = new Map()),
              (this.A = function () {
                return !1;
              });
          }
          function Gh(e) {
            var t, n, i, r, a, o, s;
            return P(function (u) {
              if (1 == u.g)
                return (
                  (t = es(e.l, e.g.retryParameters)),
                  (n = e.h.networkingEngine),
                  (i = Date.now()),
                  (r = n.request(0, t, { type: 5, isPreload: e.A() })),
                  $o(e.B, r),
                  w(u, r.promise, 2)
                );
              if (((a = u.h), !e.h)) return u.return();
              a.uri && !e.l.includes(a.uri) && e.l.unshift(a.uri);
              var d = a.uri,
                h = a.data,
                f = e.g.mss.manifestPreprocessor;
              if (f != el) {
                if (
                  (te(
                    "manifest.mss.manifestPreprocessor configuration",
                    "Please Use manifest.mss.manifestPreprocessorTXml instead."
                  ),
                  !(h = nl(h, "SmoothStreamingMedia")))
                )
                  throw new Me(2, 4, 4046, d);
                f(h), (h = gt(h.outerHTML));
              }
              var p = pn(h, "SmoothStreamingMedia");
              if (!p) throw new Me(2, 4, 4046, d);
              if (
                ((d = e.g.mss.manifestPreprocessorTXml) != tl && d(p),
                e.i || (e.i = new Js(null, 0)),
                (d = kn(p, "IsLive", Un, !1)))
              )
                throw new Me(2, 4, 4047);
              e.i.Sd(!d),
                (f = kn(p, "TimeScale", Nn, 1e7)),
                (h = kn(p, "DVRWindowLength", Nn)),
                d && (0 === h || isNaN(h)) && (h = 1 / 0);
              var g,
                m = kn(p, "CanSeek", Un, !1);
              for (
                0 === h && m && (h = 1 / 0),
                  m = null,
                  h && 0 < h && (m = h / f),
                  d &&
                    !isNaN(e.g.availabilityWindowOverride) &&
                    (m = e.g.availabilityWindowOverride),
                  null == m && (m = 1 / 0),
                  e.i.pf(m),
                  h = kn(p, "Duration", Nn, 1 / 0),
                  d || e.i.nb(h / f),
                  d = {
                    variants: [],
                    textStreams: [],
                    timescale: f,
                    duration: h / f,
                  },
                  m = bn(p, "Protection"),
                  f = e.g.mss.keySystemsBySystemId,
                  h = [],
                  g = (m = l(m)).next();
                !g.done;
                g = m.next()
              )
                h = h.concat(bn(g.value, "ProtectionHeader"));
              if (h.length) {
                for (m = [], g = 0; g < h.length; g++) {
                  var v = h[g],
                    y = v.attributes.SystemID.toLowerCase(),
                    b = f[y];
                  if (b) {
                    var S;
                    e: {
                      if ((S = Do(v)))
                        for (
                          var T = (S = l(Sn(S, "DATA"))).next();
                          !T.done;
                          T = S.next()
                        )
                          if ((T = Tn(T.value, "KID"))) {
                            (S = Tt(wn(T))),
                              (S = kt(
                                (S = new Uint8Array(
                                  [
                                    S[3],
                                    S[2],
                                    S[1],
                                    S[0],
                                    S[5],
                                    S[4],
                                    S[7],
                                    S[6],
                                  ].concat(c(S.slice(8)))
                                ))
                              ));
                            break e;
                          }
                      S = null;
                    }
                    (y = Mt(
                      b,
                      "cenc",
                      (y = [
                        {
                          initData: No(
                            (T = Tt(wn(v))),
                            (y = At(y.replace(/-/g, ""))),
                            new Set(),
                            0
                          ),
                          initDataType: "cenc",
                          keyId: S,
                        },
                      ])
                    )),
                      S && y.keyIds.add(S),
                      (b = Vh.get(b)) && (y.licenseServerUri = b(v)),
                      m.push(y);
                  }
                }
                f = m;
              } else f = [];
              for (
                g = f,
                  m = [],
                  f = [],
                  h = [],
                  v = (p = l((p = bn(p, "StreamIndex")))).next();
                !v.done;
                v = p.next()
              ) {
                (b = bn((v = v.value), "QualityLevel")),
                  (y = d.timescale),
                  (S = d.duration),
                  (T = bn(v, "c"));
                for (var A = [], k = 0, I = 0; I < T.length; ++I) {
                  var C = T[I],
                    M = T[I + 1],
                    E = kn(C, "t", Nn),
                    D = kn(C, "d", Nn);
                  if (((C = kn(C, "r", Ln)), !D)) break;
                  if (((E = null != E ? E : k), (C = C || 0) && C--, 0 > C))
                    if (M) {
                      if (null == (M = kn(M, "t", Nn))) break;
                      if (E >= M) break;
                      C = Math.ceil((M - E) / D) - 1;
                    } else {
                      if (1 / 0 == S) break;
                      if (E / y >= S) break;
                      C = Math.ceil((S * y - E) / D) - 1;
                    }
                  for (M = 0; M <= C; ++M)
                    (k = E + D),
                      A.push({ start: E / y, end: k / y, zf: E }),
                      (E = k);
                }
                for (y = A, S = (b = l(b)).next(); !S.done; S = b.next())
                  (S = qh(e, v, S.value, y, g, d)) &&
                    ("audio" != S.type || e.g.disableAudio
                      ? "video" != S.type || e.g.disableVideo
                        ? S.type != Lt || e.g.disableText || h.push(S)
                        : f.push(S)
                      : m.push(S));
              }
              for (
                p = [], g = (m = l(0 < m.length ? m : [null])).next();
                !g.done;
                g = m.next()
              )
                for (
                  g = g.value, A = (v = l(0 < f.length ? f : [null])).next();
                  !A.done;
                  A = v.next()
                )
                  (y = (b = p).push),
                    (S = e),
                    (T = g),
                    (A = A.value),
                    (I = 0),
                    T && T.bandwidth && 0 < T.bandwidth && (I += T.bandwidth),
                    A && A.bandwidth && 0 < A.bandwidth && (I += A.bandwidth),
                    (S = {
                      id: S.s++,
                      language: T ? T.language : "und",
                      disabledUntilTime: 0,
                      primary: (!!T && T.primary) || (!!A && A.primary),
                      audio: T,
                      video: A,
                      bandwidth: I,
                      allowedByApplication: !0,
                      allowedByKeySystem: !0,
                      decodingInfos: [],
                    }),
                    y.call(b, S);
              (d.variants = p),
                (d.textStreams = h),
                e.j
                  ? ((e.j.variants = d.variants),
                    (e.j.textStreams = d.textStreams),
                    e.h.filter(e.j))
                  : ((e.j = {
                      presentationTimeline: e.i,
                      variants: d.variants,
                      textStreams: d.textStreams,
                      imageStreams: [],
                      offlineSessionIds: [],
                      sequenceMode: e.g.mss.sequenceMode,
                      ignoreManifestTimestampsInSegmentsMode: !1,
                      type: "MSS",
                      serviceDescription: null,
                      nextUrl: null,
                      periodCount: 1,
                      gapCount: 0,
                      isLowLatency: !1,
                      startTime: null,
                    }),
                    e.i.Ve()),
                Promise.resolve(),
                (o = Date.now()),
                (s = (o - i) / 1e3),
                e.C.sample(1, s),
                x(u);
            });
          }
          function qh(e, t, n, i, r, a) {
            var o = t.attributes.Type;
            if ("audio" !== o && "video" !== o && "text" !== o)
              return W("Ignoring unrecognized type:", o), null;
            var s = t.attributes.Language,
              u = e.s++,
              c = kn(n, "Bitrate", Rn),
              d = kn(n, "MaxWidth", Rn),
              h = kn(n, "MaxHeight", Rn),
              f = kn(n, "Channels", Rn),
              p = kn(n, "SamplingRate", Rn),
              g = a.duration;
            i.length && (g = i[i.length - 1].end - i[0].start);
            var m = e.i.getDuration();
            e.i.nb(Math.min(g, m));
            var v = {
              id: u,
              originalId: t.attributes.Name || String(u),
              groupId: null,
              createSegmentIndex: function () {
                return Promise.resolve();
              },
              closeSegmentIndex: function () {
                return Promise.resolve();
              },
              segmentIndex: null,
              mimeType: "",
              codecs: "",
              frameRate: void 0,
              pixelAspectRatio: void 0,
              bandwidth: c || 0,
              width: d || void 0,
              height: h || void 0,
              kind: "",
              encrypted: 0 < r.length,
              drmInfos: r,
              keyIds: new Set(),
              language: tr(s || "und"),
              originalLanguage: s,
              label: "",
              type: "",
              primary: !1,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: [],
              roles: [],
              forced: !1,
              channelsCount: f,
              audioSamplingRate: p,
              spatialAudio: !1,
              closedCaptions: null,
              hdr: void 0,
              colorGamut: void 0,
              videoLayout: void 0,
              tilesLayout: void 0,
              matchedStreams: [],
              mssPrivateData: {
                duration: g,
                timescale: a.timescale,
                codecPrivateData: null,
              },
              accessibilityPurpose: null,
              external: !1,
              fastSwitching: !1,
              fullMimeTypes: new Set(),
              isAudioMuxedInVideo: !1,
              baseOriginalId: null,
            };
            if (
              ((r = t.attributes.Subtype) &&
                ((r = Wh.get(r)) && v.roles.push(r),
                "main" === r && (v.primary = !0)),
              (null !== (r = n.attributes.FourCC) && "" !== r) ||
                (r = t.attributes.FourCC),
              !r)
            )
              if ("audio" === o) r = "AAC";
              else if ("video" === o)
                return (
                  W(
                    'FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'
                  ),
                  null
                );
            if (!Kh.includes(r.toUpperCase()))
              return W("Codec not supported:", r), null;
            switch (
              ((n = (function (e, t, n, i) {
                if ((e = e.attributes.CodecPrivateData)) return e;
                if ("audio" !== t) return null;
                (t = i.channelsCount || 2), (e = i.audioSamplingRate || 44100);
                var r = {
                  96e3: 0,
                  88200: 1,
                  64e3: 2,
                  48e3: 3,
                  44100: 4,
                  32e3: 5,
                  24e3: 6,
                  22050: 7,
                  16e3: 8,
                  12e3: 9,
                  11025: 10,
                  8e3: 11,
                  7350: 12,
                };
                return (
                  (i = r[e]),
                  "AACH" === n
                    ? ((n = new Uint8Array(4)),
                      (e = r[2 * e]),
                      (n[0] = 40 | (i >> 1)),
                      (n[1] = (i << 7) | (t << 3) | (e >> 1)),
                      (n[2] = (e << 7) | 8),
                      (n[3] = 0),
                      (t = new Uint16Array(2)),
                      (t[0] = (n[0] << 8) + n[1]),
                      (t[1] = (n[2] << 8) + n[3]),
                      t[0].toString(16) + t[1].toString(16))
                    : ((n = new Uint8Array(2)),
                      (n[0] = 16 | (i >> 1)),
                      (n[1] = (i << 7) | (t << 3)),
                      (t = new Uint16Array(1)),
                      (t[0] = (n[0] << 8) + n[1]),
                      t[0].toString(16))
                );
              })(n, o, r, v)),
              (v.mssPrivateData.codecPrivateData = n),
              o)
            ) {
              case "audio":
                if (!n)
                  return (
                    W("Quality unsupported without CodecPrivateData", o), null
                  );
                (v.type = "audio"),
                  (v.mimeType = "mss/audio/mp4"),
                  (v.codecs = (function (e, t) {
                    var n = 0;
                    return (
                      "AACH" === e && (n = 5),
                      t
                        ? 0 === n &&
                          (n = (248 & parseInt(t.substr(0, 2), 16)) >> 3)
                        : ((n = 2), "AACH" === e && (n = 5)),
                      "mp4a.40." + n
                    );
                  })(r, n));
                break;
              case "video":
                if (!n)
                  return (
                    W("Quality unsupported without CodecPrivateData", o), null
                  );
                (v.type = "video"),
                  (v.mimeType = "mss/video/mp4"),
                  (v.codecs = (function (e) {
                    var t = /00000001[0-9]7/.exec(e);
                    return t.length && e
                      ? "avc1." + e.substr(e.indexOf(t[0]) + 10, 6)
                      : "";
                  })(n));
                break;
              case "text":
                (v.type = Lt),
                  (v.mimeType = "application/mp4"),
                  ("TTML" === r || "DFXP" === r) && (v.codecs = "stpp");
            }
            return (
              v.fullMimeTypes.add(Ci(v.mimeType, v.codecs)),
              (v.createSegmentIndex = function () {
                if (v.segmentIndex) return Promise.resolve();
                if (e.m.has(v.id)) var n = e.m.get(v.id);
                else
                  (n = []),
                    "video" == v.type &&
                      (n = v.mssPrivateData.codecPrivateData
                        .split("00000001")
                        .slice(1)),
                    (n = nc(
                      new tc([
                        (n = {
                          id: v.id,
                          type: v.type,
                          codecs: v.codecs,
                          encrypted: v.encrypted,
                          timescale: v.mssPrivateData.timescale,
                          duration: v.mssPrivateData.duration,
                          Wa: n,
                          ka: new Uint8Array([]),
                          qa: new Uint8Array([]),
                          va: 0,
                          wa: 0,
                          data: null,
                          stream: v,
                        }),
                      ])
                    )),
                    e.m.set(v.id, n);
                return (
                  (n = (function (e, t, n, i, r) {
                    var a = i.attributes.Url.replace(
                      "{bitrate}",
                      String(n.bandwidth)
                    );
                    i = [];
                    for (
                      var o = (r = l(r)).next(), s = {};
                      !o.done;
                      s = { Ud: void 0 }, o = r.next()
                    )
                      (s.Ud = o.value),
                        i.push(
                          new ms(
                            s.Ud.start,
                            s.Ud.end,
                            (function (t) {
                              return function () {
                                return Ct(e.l, [
                                  a.replace("{start time}", String(t.Ud.zf)),
                                ]);
                              };
                            })(s),
                            0,
                            null,
                            t,
                            0,
                            0,
                            n.mssPrivateData.duration
                          )
                        );
                    return i;
                  })(
                    e,
                    new ps(
                      function () {
                        return [];
                      },
                      0,
                      null,
                      (function (e) {
                        var t = {
                          bandwidth: e.bandwidth || 0,
                          audioSamplingRate: null,
                          codecs: e.codecs,
                          contentType: e.type,
                          frameRate: null,
                          height: null,
                          mimeType: e.mimeType,
                          channelsCount: null,
                          pixelAspectRatio: null,
                          width: null,
                          label: null,
                          roles: e.roles,
                          language: null,
                        };
                        return (
                          "video" == e.type &&
                            ((t.frameRate = e.frameRate || null),
                            (t.height = e.height || null),
                            (t.pixelAspectRatio = e.pixelAspectRatio || null),
                            (t.width = e.width || null)),
                          "audio" == e.type &&
                            ((t.audioSamplingRate = e.audioSamplingRate),
                            (t.channelsCount = e.channelsCount),
                            (t.label = e.label || null),
                            (t.language = e.language)),
                          t
                        );
                      })(v),
                      v.mssPrivateData.timescale,
                      n,
                      null,
                      v.encrypted
                    ),
                    v,
                    t,
                    i
                  )),
                  (v.segmentIndex = new Ms(n)),
                  Promise.resolve()
                );
              }),
              (v.closeSegmentIndex = function () {
                v.segmentIndex &&
                  (v.segmentIndex.release(), (v.segmentIndex = null));
              }),
              v
            );
          }
          ((i = zh.prototype).configure = function (e, t) {
            (this.g = e), t && (this.A = t);
          }),
            (i.start = function (e, t) {
              var n = this;
              return P(function (i) {
                if (1 == i.g) return (n.l = [e]), (n.h = t), w(i, Gh(n), 2);
                if (!n.h) throw new Me(2, 7, 7001);
                return i.return(n.j);
              });
            }),
            (i.stop = function () {
              return (
                (this.g = this.h = null),
                (this.l = []),
                (this.j = null),
                null != this.o && (this.o.stop(), (this.o = null)),
                this.m.clear(),
                this.B.destroy()
              );
            }),
            (i.update = function () {
              var e,
                t = this;
              return P(function (n) {
                return 1 == n.g
                  ? (S(n, 2), w(n, Gh(t), 4))
                  : 2 != n.g
                  ? T(n, 0)
                  : ((e = A(n)),
                    t.h && e ? (t.h.onError(e), void x(n)) : n.return());
              });
            }),
            (i.onExpirationUpdated = function () {}),
            (i.onInitialVariantChosen = function () {}),
            (i.banLocation = function () {}),
            (i.setMediaElement = function () {}),
            B("shaka.mss.MssParser", zh);
          var Kh = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),
            Wh = new Map()
              .set("CAPT", "main")
              .set("SUBT", "alternate")
              .set("DESC", "main");
          function Xh(e, t, n, i, r, a, o) {
            if ((200 <= n && 299 >= n && 202 != n) || 304 == n)
              return {
                uri: r || i,
                originalUri: i,
                data: t,
                status: n,
                headers: e,
                fromCache: !!e["x-shaka-from-cache"],
                originalRequest: a,
              };
            a = null;
            try {
              a = pt(t);
            } catch (e) {}
            throw new Me(
              401 == n || 403 == n ? 2 : 1,
              1,
              1001,
              i,
              n,
              a,
              e,
              o,
              r || i
            );
          }
          function Yh() {}
          function Jh(e, t, n, i, r, a) {
            var o = new nf();
            Rl(t.headers).forEach(function (e, t) {
              o.append(t, e);
            });
            var s = new ef(),
              u = { If: !1, Gg: !1 };
            if (
              ((e = (function (e, t, n, i, r, a, o, s, u) {
                var l, c, d, h, f, p, g, m, v, y, b, k, I;
                return P(function (C) {
                  switch (C.g) {
                    case 1:
                      return (
                        (l = Qh),
                        (c = tf),
                        (h = new ArrayBuffer(0)),
                        (p = f = 0),
                        (g = Date.now()),
                        S(C, 2),
                        w(C, l(e, i), 4)
                      );
                    case 4:
                      if (((d = C.h), o($h(d.headers)), "HEAD" == i.method)) {
                        C.u(5);
                        break;
                      }
                      return (
                        (v = (m = d.headers.get("Content-Length"))
                          ? parseInt(m, 10)
                          : 0),
                        d.body
                          ? ((y = d.clone().body.getReader()),
                            new c({
                              start: function (e) {
                                function t() {
                                  var n, i, r, o;
                                  return P(function (l) {
                                    switch (l.g) {
                                      case 1:
                                        return S(l, 2), w(l, y.read(), 4);
                                      case 4:
                                        (n = l.h), T(l, 3);
                                        break;
                                      case 2:
                                        return A(l), l.return();
                                      case 3:
                                        if (n.done) {
                                          l.u(5);
                                          break;
                                        }
                                        if (((f += n.value.byteLength), !s)) {
                                          l.u(5);
                                          break;
                                        }
                                        return w(l, s(n.value), 5);
                                      case 5:
                                        (i = Date.now()),
                                          (r = f - p),
                                          ((100 < i - g && r >= u) || n.done) &&
                                            ((o = n.done ? 0 : v - f),
                                            a(i - g, r, o),
                                            (p = f),
                                            (g = i)),
                                          n.done
                                            ? e.close()
                                            : (e.enqueue(n.value), t()),
                                          x(l);
                                    }
                                  });
                                }
                                t();
                              },
                            }),
                            w(C, d.arrayBuffer(), 8))
                          : w(C, d.arrayBuffer(), 9)
                      );
                    case 8:
                      (h = C.h), C.u(5);
                      break;
                    case 9:
                      (h = C.h), (b = Date.now()), a(b - g, h.byteLength, 0);
                    case 5:
                      T(C, 3);
                      break;
                    case 2:
                      if (((k = A(C)), r.If)) throw new Me(1, 1, 7001, e, n);
                      if (r.Gg) throw new Me(1, 1, 1003, e, n);
                      throw new Me(1, 1, 1002, e, k, n);
                    case 3:
                      return (
                        (I = $h(d.headers)),
                        C.return(Xh(I, h, d.status, e, d.url, t, n))
                      );
                  }
                });
              })(
                e,
                t,
                n,
                {
                  body: t.body || void 0,
                  headers: o,
                  method: t.method,
                  signal: s.signal,
                  credentials: t.allowCrossSiteCredentials ? "include" : void 0,
                },
                u,
                i,
                r,
                t.streamDataCallback,
                a.minBytesForProgressEvents || 0
              )),
              (e = new Vo(e, function () {
                return (u.If = !0), s.abort(), Promise.resolve();
              })),
              (t = t.retryParameters.timeout))
            ) {
              var l = new je(function () {
                (u.Gg = !0), s.abort();
              });
              l.ea(t / 1e3),
                e.finally(function () {
                  l.stop();
                });
            }
            return e;
          }
          function $h(e) {
            var t = {};
            return (
              e.forEach(function (e, n) {
                t[n.trim()] = e;
              }),
              t
            );
          }
          function Zh() {
            if (!e.ReadableStream) return !1;
            try {
              new ReadableStream({});
            } catch (e) {
              return !1;
            }
            return (
              !!e.Response &&
              !!new Response("").body &&
              !(!e.fetch || "polyfill" in e.fetch || !e.AbortController)
            );
          }
          Xs("application/vnd.ms-sstr+xml", function () {
            return new zh();
          }),
            B("shaka.net.HttpFetchPlugin", Yh),
            (Yh.isSupported = Zh),
            (Yh.parse = Jh);
          var Qh = e.fetch,
            ef = e.AbortController,
            tf = e.ReadableStream,
            nf = e.Headers;
          function rf() {}
          function af(e, t, n, i, r, a) {
            var o = new sf(),
              s = Date.now(),
              u = 0;
            return new Vo(
              new Promise(function (l, c) {
                o.open(t.method, e, !0),
                  (o.responseType = "arraybuffer"),
                  (o.timeout = t.retryParameters.timeout),
                  (o.withCredentials = t.allowCrossSiteCredentials),
                  (o.onabort = function () {
                    c(new Me(1, 1, 7001, e, n));
                  });
                var d = !1;
                for (var h in ((o.onreadystatechange = function () {
                  if (2 == o.readyState && !d) {
                    var e = of(o);
                    r(e), (d = !0);
                  }
                }),
                (o.onload = function (r) {
                  var a = of(o),
                    d = o.response;
                  try {
                    i(Date.now() - s, r.loaded - u, 0);
                    var h = Xh(a, d, o.status, e, o.responseURL, t, n);
                    l(h);
                  } catch (e) {
                    c(e);
                  }
                }),
                (o.onerror = function (t) {
                  c(new Me(1, 1, 1002, e, t, n));
                }),
                (o.ontimeout = function () {
                  c(new Me(1, 1, 1003, e, n));
                }),
                (o.onprogress = function (e) {
                  var t = Date.now(),
                    n = a.minBytesForProgressEvents || 0,
                    r = e.loaded - u;
                  ((100 < t - s && r >= n) ||
                    (e.lengthComputable && e.loaded == e.total)) &&
                    (i(t - s, r, 4 == o.readyState ? 0 : e.total - e.loaded),
                    (u = e.loaded),
                    (s = t));
                }),
                t.headers))
                  o.setRequestHeader(h.toLowerCase(), t.headers[h]);
                o.send(t.body);
              }),
              function () {
                return o.abort(), Promise.resolve();
              }
            );
          }
          function of(e) {
            var t = e.getAllResponseHeaders().trim().split("\r\n");
            e = {};
            for (var n = (t = l(t)).next(); !n.done; n = t.next())
              e[(n = n.value.split(": "))[0].toLowerCase()] = n
                .slice(1)
                .join(": ");
            return e;
          }
          Zh() &&
            (Qo("http", Jh, 2, !0),
            Qo("https", Jh, 2, !0),
            Qo("blob", Jh, 2, !0)),
            B("shaka.net.HttpXHRPlugin", rf),
            (rf.parse = af);
          var sf = e.XMLHttpRequest;
          function uf(e, t, n) {
            var i, r, a, o, s, u, l;
            return P(function (c) {
              switch (c.g) {
                case 1:
                  var d = new oe(e).jb.split("/").pop().split(".");
                  return (
                    (i = 1 == d.length ? "" : d.pop().toLowerCase()),
                    (r = lf.get(i))
                      ? c.return(r)
                      : ((a = 0),
                        (o = es([e], n)),
                        S(c, 2),
                        (o.method = "HEAD"),
                        w(c, t.request(a, o).promise, 4))
                  );
                case 4:
                  (s = c.h), (r = s.headers["content-type"]), T(c, 3);
                  break;
                case 2:
                  if (!(u = A(c)) || (1002 != u.code && 1001 != u.code)) {
                    c.u(3);
                    break;
                  }
                  return (o.method = "GET"), w(c, t.request(a, o).promise, 6);
                case 6:
                  (l = c.h), (r = l.headers["content-type"]);
                case 3:
                  return c.return(r ? r.toLowerCase().split(";").shift() : "");
              }
            });
          }
          Qo("http", af, 1, !0), Qo("https", af, 1, !0), Qo("blob", af, 1, !0);
          var lf = new Map()
            .set("mp4", "video/mp4")
            .set("m4v", "video/mp4")
            .set("m4a", "audio/mp4")
            .set("webm", "video/webm")
            .set("weba", "audio/webm")
            .set("mkv", "video/webm")
            .set("ts", "video/mp2t")
            .set("ogv", "video/ogg")
            .set("ogg", "audio/ogg")
            .set("mpg", "video/mpeg")
            .set("mpeg", "video/mpeg")
            .set("mov", "video/quicktime")
            .set("m3u8", "application/x-mpegurl")
            .set("mpd", "application/dash+xml")
            .set("ism", "application/vnd.ms-sstr+xml")
            .set("mp3", "audio/mpeg")
            .set("aac", "audio/aac")
            .set("flac", "audio/flac")
            .set("wav", "audio/wav")
            .set("sbv", "text/x-subviewer")
            .set("srt", "text/srt")
            .set("vtt", "text/vtt")
            .set("webvtt", "text/vtt")
            .set("ttml", "application/ttml+xml")
            .set("lrc", "application/x-subtitle-lrc")
            .set("ssa", "text/x-ssa")
            .set("ass", "text/x-ssa")
            .set("jpeg", "image/jpeg")
            .set("jpg", "image/jpeg")
            .set("png", "image/png")
            .set("svg", "image/svg+xml")
            .set("webp", "image/webp")
            .set("avif", "image/avif")
            .set("html", "text/html")
            .set("htm", "text/html");
          function cf(e, t) {
            if (e.lineBreak) return "\n";
            if (e.nestedCues.length)
              return e.nestedCues
                .map(function (t) {
                  return cf(t, e);
                })
                .join("");
            if (!e.payload) return e.payload;
            var n = [],
              i = e.fontWeight >= hi,
              r = e.fontStyle == pi,
              a = e.textDecoration.includes(mi);
            return (
              i && n.push(["b"]),
              r && n.push(["i"]),
              a && n.push(["u"]),
              "" == (r = e.color) && t && (r = t.color),
              (i = ""),
              (r = df(r)) && (i += "." + r),
              "" == (r = e.backgroundColor) && t && (r = t.backgroundColor),
              (t = df(r)) && (i += ".bg_" + t),
              i && n.push(["c", i]),
              n.reduceRight(function (e, t) {
                var n = l(t);
                return (
                  "<" +
                  (t = n.next().value) +
                  (void 0 === (n = n.next().value) ? "" : n) +
                  ">" +
                  e +
                  "</" +
                  t +
                  ">"
                );
              }, e.payload)
            );
          }
          function df(e) {
            var t = (e = e.toLowerCase())
              .replace(/\s/g, "")
              .match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
            switch (
              (t
                ? (e =
                    "#" +
                    (256 | parseInt(t[1], 10)).toString(16).slice(1) +
                    (256 | parseInt(t[2], 10)).toString(16).slice(1) +
                    (256 | parseInt(t[3], 10)).toString(16).slice(1))
                : e.startsWith("#") && 7 < e.length && (e = e.slice(0, 7)),
              e)
            ) {
              case "white":
              case "#fff":
              case "#ffffff":
                return "white";
              case "lime":
              case "#0f0":
              case "#00ff00":
                return "lime";
              case "cyan":
              case "#0ff":
              case "#00ffff":
                return "cyan";
              case "red":
              case "#f00":
              case "#ff0000":
                return "red";
              case "yellow":
              case "#ff0":
              case "#ffff00":
                return "yellow";
              case "magenta":
              case "#f0f":
              case "#ff00ff":
                return "magenta";
              case "blue":
              case "#00f":
              case "#0000ff":
                return "blue";
              case "black":
              case "#000":
              case "#000000":
                return "black";
            }
            return null;
          }
          function hf(e, t) {
            for (var n = [], i = (e = l(ff(e))).next(); !i.done; i = e.next())
              if ((i = i.value).isContainer)
                n.push.apply(n, c(hf(i.nestedCues, i)));
              else {
                var r = i.clone();
                (r.nestedCues = []), (r.payload = cf(i, t)), n.push(r);
              }
            return n;
          }
          function ff(e) {
            for (
              var t = [], n = (e = l(e)).next(), i = {};
              !n.done;
              i = { te: void 0 }, n = e.next()
            )
              (i.te = n.value),
                t.some(
                  (function (e) {
                    return function (t) {
                      return Xn(e.te, t);
                    };
                  })(i)
                ) || t.push(i.te);
            return t;
          }
          function pf(e) {
            function t(e) {
              for (var t = 5381, n = e.length; n; )
                t = (33 * t) ^ e.charCodeAt(--n);
              return (t >>> 0).toString();
            }
            if (e.startTime >= e.endTime) return null;
            var n = new VTTCue(e.startTime, e.endTime, e.payload);
            (n.id =
              t(e.startTime.toString()) +
              t(e.endTime.toString()) +
              t(e.payload)),
              (n.lineAlign = e.lineAlign),
              (n.positionAlign = e.positionAlign),
              e.size && (n.size = e.size);
            try {
              n.align = e.textAlign;
            } catch (e) {}
            return (
              "center" == e.textAlign &&
                "center" != n.align &&
                (n.align = "middle"),
              "vertical-lr" == e.writingMode
                ? (n.vertical = "lr")
                : "vertical-rl" == e.writingMode && (n.vertical = "rl"),
              1 == e.lineInterpretation && (n.snapToLines = !1),
              null != e.line && (n.line = e.line),
              null != e.position && (n.position = e.position),
              n
            );
          }
          function gf(e, t) {
            for (
              this.h = e,
                this.i = t,
                this.g = null,
                t = (e = l(Array.from(this.h.textTracks))).next();
              !t.done;
              t = e.next()
            )
              "metadata" !== (t = t.value).kind &&
                "chapters" !== t.kind &&
                ((t.mode = "disabled"), t.label == this.i && (this.g = t));
            this.g && (this.g.mode = "hidden");
          }
          function mf(e) {
            e.h &&
              !e.g &&
              ((e.g = e.h.addTextTrack("subtitles", e.i)),
              (e.g.mode = "hidden"));
          }
          function vf(e, t) {
            var n = e.mode;
            e.mode = "showing" == n ? "showing" : "hidden";
            for (
              var i = l(Array.from(e.cues)), r = i.next();
              !r.done;
              r = i.next()
            )
              (r = r.value) && t(r) && e.removeCue(r);
            e.mode = n;
          }
          function yf() {}
          function bf(t, n) {
            var i = this;
            document.fullscreenEnabled ||
              W(
                "Using UITextDisplayer in a browser without Fullscreen API support causes subtitles to not be rendered in fullscreen"
              ),
              (this.A = !1),
              (this.h = []),
              (this.j = t),
              (this.C = n),
              (this.s = this.m = null),
              (this.g = document.createElement("div")),
              this.g.classList.add("shaka-text-container"),
              (this.g.style.textAlign = "center"),
              (this.g.style.display = "flex"),
              (this.g.style.flexDirection = "column"),
              (this.g.style.alignItems = "center"),
              (this.g.style.justifyContent = "flex-end"),
              this.C.appendChild(this.g),
              (this.o = new je(function () {
                i.j.paused || Tf(i);
              })),
              wf(this),
              (this.l = new Map()),
              (this.i = new $()),
              this.i.H(document, "fullscreenchange", function () {
                Tf(i, !0);
              }),
              this.i.H(this.j, "seeking", function () {
                Tf(i, !0);
              }),
              this.i.H(this.j, "ratechange", function () {
                wf(i);
              }),
              this.i.H(this.j, "resize", function () {
                var e = i.j,
                  t = e.videoWidth;
                (e = e.videoHeight), (i.m = t && e ? t / e : null);
              }),
              (this.B = null),
              "ResizeObserver" in e &&
                ((this.B = new ResizeObserver(function () {
                  Tf(i, !0);
                })),
                this.B.observe(this.g)),
              (this.D = new Map());
          }
          function wf(e) {
            e.o &&
              (e.h.length
                ? e.o.ta(
                    (e.s ? e.s.captionsUpdatePeriod : 0.25) /
                      Math.max(1, Math.abs(e.j.playbackRate))
                  )
                : e.o.stop());
          }
          function xf(e, t) {
            for (; null != t; ) {
              if (t == e.g) return !0;
              t = t.parentElement;
            }
            return !1;
          }
          function Sf(e, t, n, i, r) {
            for (
              var a = !1, o = [], s = [], u = (t = l(t)).next();
              !u.done;
              u = t.next()
            ) {
              (u = u.value), r.push(u);
              var c = e.l.get(u),
                d = u.startTime <= i && u.endTime > i,
                h = c ? c.Kg : null;
              c &&
                (o.push(c.ve),
                c.ec && o.push(c.ec),
                d || ((a = !0), e.l.delete(u), (c = null))),
                d &&
                  (s.push(u),
                  c
                    ? xf(e, h) || (a = !0)
                    : (Af(e, u, r), (h = (c = e.l.get(u)).Kg), (a = !0))),
                0 < u.nestedCues.length && h && Sf(e, u.nestedCues, h, i, r),
                r.pop();
            }
            if (a) {
              for (r = (i = l(o)).next(); !r.done; r = i.next())
                (r = r.value).parentElement && r.parentElement.removeChild(r);
              for (
                s.sort(function (e, t) {
                  return e.startTime != t.startTime
                    ? e.startTime - t.startTime
                    : e.endTime - t.endTime;
                }),
                  i = (s = l(s)).next();
                !i.done;
                i = s.next()
              )
                (i = e.l.get(i.value)).ec
                  ? (i.ec.contains(n) && i.ec.removeChild(n),
                    n.appendChild(i.ec),
                    i.ec.appendChild(i.ve))
                  : n.appendChild(i.ve);
            }
          }
          function Tf(e, t) {
            if (e.g) {
              var n = e.j.currentTime;
              if (!e.A || (void 0 !== t && t)) {
                for (
                  var i = (t = l(e.D.values())).next();
                  !i.done;
                  i = t.next()
                )
                  Jc(i.value);
                Jc(e.g), e.l.clear(), e.D.clear();
              }
              e.A && Sf(e, e.h, e.g, n, []);
            }
          }
          function Af(e, t, n) {
            var i = 1 < n.length,
              r = i ? "span" : "div";
            t.lineBreak && (r = "br"),
              t.rubyTag && (r = t.rubyTag),
              (i = !i && 0 < t.nestedCues.length);
            var a = document.createElement(r);
            if (
              ("br" != r &&
                (function (e, t, n, i, r) {
                  var a = t.style,
                    o = 0 == n.nestedCues.length,
                    s = 1 < i.length;
                  a.whiteSpace = "pre-wrap";
                  var u = n.payload.replace(/\s+$/g, function (e) {
                    return " ".repeat(e.length);
                  });
                  if (
                    ((a.webkitTextStrokeColor = n.textStrokeColor),
                    (a.webkitTextStrokeWidth = n.textStrokeWidth),
                    (a.color = n.color),
                    (a.direction = n.direction),
                    (a.opacity = n.opacity),
                    (a.paddingLeft = kf(n.linePadding, n, e.C)),
                    (a.paddingRight = kf(n.linePadding, n, e.C)),
                    (a.textCombineUpright = n.textCombineUpright),
                    (a.textShadow = n.textShadow),
                    n.backgroundImage)
                  )
                    (a.backgroundImage = "url('" + n.backgroundImage + "')"),
                      (a.backgroundRepeat = "no-repeat"),
                      (a.backgroundSize = "contain"),
                      (a.backgroundPosition = "center"),
                      n.backgroundColor &&
                        (a.backgroundColor = n.backgroundColor),
                      (a.width = "100%"),
                      (a.height = "100%");
                  else {
                    if (n.nestedCues.length) var l = t;
                    else (l = document.createElement("span")), t.appendChild(l);
                    n.border && (l.style.border = n.border),
                      r ||
                        ((t = (function (e, t) {
                          for (var n = e.length - 1; 0 <= n; n--) {
                            var i = t(e[n]);
                            if (i || 0 === i) return i;
                          }
                          return null;
                        })(i, function (e) {
                          return e.backgroundColor;
                        }))
                          ? (l.style.backgroundColor = t)
                          : u &&
                            (l.style.backgroundColor = "rgba(0, 0, 0, 0.8)")),
                      u && (l.textContent = u);
                  }
                  s && !i[i.length - 1].isContainer
                    ? (a.display = "inline")
                    : ((a.display = "flex"),
                      (a.flexDirection = "column"),
                      (a.alignItems = "center"),
                      "left" == n.textAlign || "start" == n.textAlign
                        ? ((a.width = "100%"), (a.alignItems = "start"))
                        : ("right" != n.textAlign && "end" != n.textAlign) ||
                          ((a.width = "100%"), (a.alignItems = "end")),
                      (a.justifyContent =
                        "before" == n.displayAlign
                          ? "flex-start"
                          : "center" == n.displayAlign
                          ? "center"
                          : "flex-end"));
                  o || (a.margin = "0"),
                    (a.fontFamily = n.fontFamily),
                    (a.fontWeight = n.fontWeight.toString()),
                    (a.fontStyle = n.fontStyle),
                    (a.letterSpacing = n.letterSpacing),
                    (a.fontSize = kf(
                      n.fontSize,
                      n,
                      e.C,
                      e.s ? e.s.fontScaleFactor : 1
                    )),
                    (i = n.line),
                    null != i &&
                      ((o = n.lineInterpretation),
                      o == oi &&
                        ((o = 1),
                        (s = 16),
                        e.m && 1 > e.m && (s = 32),
                        (i = 0 > i ? 100 + (i / s) * 100 : (i / s) * 100)),
                      1 == o &&
                        ((a.position = "absolute"),
                        n.writingMode == ai
                          ? ((a.width = "100%"),
                            n.lineAlign == si
                              ? (a.top = i + "%")
                              : "end" == n.lineAlign &&
                                (a.bottom = 100 - i + "%"))
                          : "vertical-lr" == n.writingMode
                          ? ((a.height = "100%"),
                            n.lineAlign == si
                              ? (a.left = i + "%")
                              : "end" == n.lineAlign &&
                                (a.right = 100 - i + "%"))
                          : ((a.height = "100%"),
                            n.lineAlign == si
                              ? (a.right = i + "%")
                              : "end" == n.lineAlign &&
                                (a.left = 100 - i + "%")))),
                    (a.lineHeight = n.lineHeight),
                    (e = (function (e) {
                      var t = e.direction,
                        n = e.positionAlign;
                      return (
                        (e = e.textAlign),
                        n !== Qn
                          ? n
                          : "left" === e ||
                            ("start" === e && t === ri) ||
                            ("end" === e && "rtl" === t)
                          ? "line-left"
                          : "right" === e ||
                            ("start" === e && "rtl" === t) ||
                            ("end" === e && t === ri)
                          ? "line-right"
                          : "center"
                      );
                    })(n)),
                    "line-left" == e
                      ? ((a.cssFloat = "left"),
                        null !== n.position &&
                          ((a.position = "absolute"),
                          n.writingMode == ai
                            ? ((a.left = n.position + "%"), (a.width = "auto"))
                            : (a.top = n.position + "%")))
                      : "line-right" == e
                      ? ((a.cssFloat = "right"),
                        null !== n.position &&
                          ((a.position = "absolute"),
                          n.writingMode == ai
                            ? ((a.right = 100 - n.position + "%"),
                              (a.width = "auto"))
                            : (a.bottom = n.position + "%")))
                      : null !== n.position &&
                        50 != n.position &&
                        ((a.position = "absolute"),
                        n.writingMode == ai
                          ? ((a.left = n.position + "%"), (a.width = "auto"))
                          : (a.top = n.position + "%")),
                    (a.textAlign = n.textAlign),
                    (a.textDecoration = n.textDecoration.join(" ")),
                    (a.writingMode = n.writingMode),
                    ("writingMode" in document.documentElement.style &&
                      a.writingMode == n.writingMode) ||
                      (a.webkitWritingMode = n.writingMode),
                    n.size &&
                      (n.writingMode == ai
                        ? (a.width = n.size + "%")
                        : (a.height = n.size + "%"));
                })(e, a, t, n, i),
              (n = null),
              t.region && t.region.id)
            ) {
              var o = t.region,
                s = e.m === 4 / 3 ? 2.5 : 1.9;
              if (
                ((n =
                  o.id +
                  "_" +
                  o.width +
                  "x" +
                  o.height +
                  (o.heightUnits == Qt ? "%" : "px") +
                  "-" +
                  o.viewportAnchorX +
                  "x" +
                  o.viewportAnchorY +
                  (o.viewportAnchorUnits == Qt ? "%" : "px")),
                e.D.has(n))
              )
                n = e.D.get(n);
              else {
                r = document.createElement("span");
                var u = o.heightUnits == Qt ? "%" : "px",
                  l = o.widthUnits == Qt ? "%" : "px",
                  c = o.viewportAnchorUnits == Qt ? "%" : "px";
                (r.id = "shaka-text-region---" + n),
                  r.classList.add("shaka-text-region"),
                  (r.style.position = "absolute");
                var d = o.height,
                  h = o.width;
                2 === o.heightUnits && ((d = 5.33 * o.height), (u = "%")),
                  2 === o.widthUnits && ((h = o.width * s), (l = "%")),
                  (r.style.height = d + u),
                  (r.style.width = h + l),
                  2 === o.viewportAnchorUnits
                    ? ((s = (o.viewportAnchorY / 75) * 100),
                      (u =
                        (o.viewportAnchorX / (e.m === 4 / 3 ? 160 : 210)) *
                        100),
                      (s -= (o.regionAnchorY * d) / 100),
                      (u -= (o.regionAnchorX * h) / 100),
                      (r.style.top = s + "%"),
                      (r.style.left = u + "%"))
                    : ((r.style.top =
                        o.viewportAnchorY - (o.regionAnchorY * d) / 100 + c),
                      (r.style.left =
                        o.viewportAnchorX - (o.regionAnchorX * h) / 100 + c)),
                  0 !== o.heightUnits &&
                    0 !== o.widthUnits &&
                    0 !== o.viewportAnchorUnits &&
                    ((o = Math.max(
                      0,
                      Math.min(
                        100 - (parseInt(r.style.width.slice(0, -1), 10) || 0),
                        parseInt(r.style.left.slice(0, -1), 10) || 0
                      )
                    )),
                    (r.style.top =
                      Math.max(
                        0,
                        Math.min(
                          100 -
                            (parseInt(r.style.height.slice(0, -1), 10) || 0),
                          parseInt(r.style.top.slice(0, -1), 10) || 0
                        )
                      ) + "%"),
                    (r.style.left = o + "%")),
                  (r.style.display = "flex"),
                  (r.style.flexDirection = "column"),
                  (r.style.alignItems = "center"),
                  (r.style.justifyContent =
                    "before" == t.displayAlign
                      ? "flex-start"
                      : "center" == t.displayAlign
                      ? "center"
                      : "flex-end"),
                  e.D.set(n, r),
                  (n = r);
              }
            }
            (r = a),
              i &&
                ((r = document.createElement("span")).classList.add(
                  "shaka-text-wrapper"
                ),
                (r.style.backgroundColor = t.backgroundColor),
                (r.style.lineHeight = "normal"),
                a.appendChild(r)),
              e.l.set(t, { ve: a, Kg: r, ec: n });
          }
          function kf(e, t, n, i) {
            i = void 0 === i ? 1 : i;
            var r = (r = new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))
              ? { value: Number(r[1]), unit: r[2] }
              : null;
            if (!r) return e;
            switch (((e = r.unit), (i *= r.value), e)) {
              case "%":
                return (
                  ((i / 100) * n.clientHeight) / t.cellResolution.rows + "px"
                );
              case "c":
                return (n.clientHeight * i) / t.cellResolution.rows + "px";
              default:
                return i + e;
            }
          }
          function If(e, t) {
            (this.h = e),
              (this.g = t),
              (this.i = void 0),
              (this.s = !1),
              (this.D = !0),
              (this.l = this.B = !1),
              (this.o = this.m = void 0),
              (this.A = 0),
              (this.F = !1),
              (this.C = new $()),
              (this.j = null);
          }
          function Cf(t) {
            return (
              t.g.sessionId || (t.g.sessionId = e.crypto.randomUUID()),
              {
                v: t.g.version,
                sf: t.i,
                sid: t.g.sessionId,
                cid: t.g.contentId,
                mtp: t.h.getBandwidthEstimate() / 1e3,
              }
            );
          }
          function Mf(e, t, n) {
            n = void 0 === n ? {} : n;
            var i = void 0 === i ? e.g.useHeaders : i;
            if (e.g.enabled) {
              Object.assign(n, Cf(e)), (n.pr = e.h.Ra());
              var r = n.ot === Nf || n.ot === _f;
              if (
                (e.B && r && ((n.bs = !0), (n.su = !0), (e.B = !1)),
                null == n.su && (n.su = e.D),
                n.v === Bf &&
                  (e.h.R() && (n.ltc = e.h.td()),
                  null !=
                    (r = !e.F && e.o && e.m ? e.o - (e.A || e.m) : void 0) &&
                    ((n.msd = r), (e.F = !0))),
                (e = (function (e, t) {
                  var n = e.g.includeKeys;
                  return n.length
                    ? Object.keys(t).reduce(function (e, i) {
                        return n.includes(i) && (e[i] = t[i]), e;
                      }, {})
                    : t;
                })(e, n)),
                i)
              )
                (i = (function (e) {
                  for (
                    var t = Object.keys(e),
                      n = {},
                      i = ["Object", "Request", "Session", "Status"],
                      r = [{}, {}, {}, {}],
                      a = {
                        br: 0,
                        d: 0,
                        ot: 0,
                        tb: 0,
                        bl: 1,
                        dl: 1,
                        mtp: 1,
                        nor: 1,
                        nrr: 1,
                        su: 1,
                        ltc: 1,
                        cid: 2,
                        pr: 2,
                        sf: 2,
                        sid: 2,
                        st: 2,
                        v: 2,
                        msd: 2,
                        bs: 3,
                        rtp: 3,
                      },
                      o = (t = l(t)).next();
                    !o.done;
                    o = t.next()
                  )
                    (o = o.value), (r[null != a[o] ? a[o] : 1][o] = e[o]);
                  for (e = 0; e < r.length; e++)
                    (a = Df(r[e])) && (n["CMCD-" + i[e]] = a);
                  return n;
                })(e)),
                  Object.keys(i).length && Object.assign(t.headers, i);
              else {
                var a = Df(e);
                a &&
                  (t.uris = t.uris.map(function (e) {
                    return Pf(e, a);
                  }));
              }
            }
          }
          function Ef(e, t) {
            if (!(t = e.h.hb()[t]).length) return 0;
            var n = e.h.getCurrentTime();
            return (e = t.find(function (e) {
              return e.start <= n && e.end >= n;
            }))
              ? 1e3 * (e.end - n)
              : 0;
          }
          function Df(e) {
            function t(e) {
              return 100 * n(e / 100);
            }
            function n(e) {
              return Math.round(e);
            }
            for (
              var i,
                r = [],
                a = {
                  br: n,
                  d: n,
                  bl: t,
                  dl: t,
                  mtp: t,
                  nor: function (e) {
                    return encodeURIComponent(e);
                  },
                  rtp: t,
                  tb: n,
                },
                o = Object.keys(e || {}).sort(),
                s = (o = l(o)).next();
              !s.done;
              s = o.next()
            ) {
              var u = e[(s = s.value)];
              if (
                !((i = u),
                Number.isNaN(i) ||
                  null == i ||
                  "" === i ||
                  !1 === i ||
                  ("v" === s && 1 === u) ||
                  ("pr" == s && 1 === u))
              ) {
                var c = a[s];
                c && (u = c(u));
                var d;
                (d =
                  "string" === (c = typeof u) &&
                  "ot" !== s &&
                  "sf" !== s &&
                  "st" !== s
                    ? s + "=" + JSON.stringify(u)
                    : "boolean" === c
                    ? s
                    : "symbol" === c
                    ? s + "=" + u.description
                    : s + "=" + u),
                  r.push(d);
              }
            }
            return r.join(",");
          }
          function Pf(e, t) {
            return !t || e.includes("offline:")
              ? e
              : ((e = new oe(e)).g.set("CMCD", t), e.toString());
          }
          ((i = gf.prototype).configure = function () {}),
            (i.remove = function (e, t) {
              return (
                !!this.g &&
                (vf(this.g, function (n) {
                  return n.startTime < t && n.endTime > e;
                }),
                !0)
              );
            }),
            (i.append = function (e) {
              if (this.g) {
                var t = hf(e),
                  n = [];
                e = this.g.cues ? Array.from(this.g.cues) : [];
                for (
                  var i = (t = l(t)).next(), r = {};
                  !i.done;
                  r = { uc: void 0 }, i = t.next()
                )
                  (r.uc = i.value),
                    !e.some(
                      (function (e) {
                        return function (t) {
                          return (
                            t.startTime == e.uc.startTime &&
                            t.endTime == e.uc.endTime &&
                            t.text == e.uc.payload
                          );
                        };
                      })(r)
                    ) &&
                      r.uc.payload &&
                      (i = pf(r.uc)) &&
                      n.push(i);
                for (
                  t = (e = l(
                    (e = n.slice().sort(function (e, t) {
                      return e.startTime != t.startTime
                        ? e.startTime - t.startTime
                        : e.endTime != t.endTime
                        ? e.endTime - t.startTime
                        : ("line" in VTTCue.prototype)
                        ? n.indexOf(t) - n.indexOf(e)
                        : n.indexOf(e) - n.indexOf(t);
                    }))
                  )).next();
                  !t.done;
                  t = e.next()
                )
                  this.g.addCue(t.value);
              }
            }),
            (i.destroy = function () {
              return (
                this.g &&
                  (vf(this.g, function () {
                    return !0;
                  }),
                  (this.g.mode = "disabled")),
                (this.g = this.h = null),
                Promise.resolve()
              );
            }),
            (i.isTextVisible = function () {
              return !!this.g && "showing" == this.g.mode;
            }),
            (i.setTextVisibility = function (e) {
              e && !this.g && mf(this),
                this.g && (this.g.mode = e ? "showing" : "hidden");
            }),
            (i.setTextLanguage = function () {}),
            (i.enableTextDisplayer = function () {
              mf(this);
            }),
            B("shaka.text.SimpleTextDisplayer", gf),
            (gf.prototype.enableTextDisplayer =
              gf.prototype.enableTextDisplayer),
            (gf.prototype.setTextLanguage = gf.prototype.setTextLanguage),
            (gf.prototype.setTextVisibility = gf.prototype.setTextVisibility),
            (gf.prototype.isTextVisible = gf.prototype.isTextVisible),
            (gf.prototype.destroy = gf.prototype.destroy),
            (gf.prototype.append = gf.prototype.append),
            (gf.prototype.remove = gf.prototype.remove),
            (gf.prototype.configure = gf.prototype.configure),
            ((i = yf.prototype).configure = function () {}),
            (i.remove = function () {}),
            (i.append = function () {}),
            (i.destroy = function () {}),
            (i.isTextVisible = function () {
              return !1;
            }),
            (i.setTextVisibility = function () {}),
            (i.setTextLanguage = function () {}),
            (i.enableTextDisplayer = function () {}),
            B("shaka.text.StubTextDisplayer", yf),
            (yf.prototype.enableTextDisplayer =
              yf.prototype.enableTextDisplayer),
            (yf.prototype.setTextLanguage = yf.prototype.setTextLanguage),
            (yf.prototype.setTextVisibility = yf.prototype.setTextVisibility),
            (yf.prototype.isTextVisible = yf.prototype.isTextVisible),
            (yf.prototype.destroy = yf.prototype.destroy),
            (yf.prototype.append = yf.prototype.append),
            (yf.prototype.remove = yf.prototype.remove),
            (yf.prototype.configure = yf.prototype.configure),
            ((i = bf.prototype).configure = function (e) {
              (this.s = e), wf(this), Tf(this, !0);
            }),
            (i.append = function (e) {
              for (
                var t = [].concat(c(this.h)), n = (e = l(ff(e))).next(), i = {};
                !n.done;
                i = { ue: void 0 }, n = e.next()
              )
                (i.ue = n.value),
                  t.some(
                    (function (e) {
                      return function (t) {
                        return Xn(t, e.ue);
                      };
                    })(i)
                  ) || this.h.push(i.ue);
              this.h.length && wf(this), Tf(this);
            }),
            (i.destroy = function () {
              return this.g
                ? (this.C.removeChild(this.g),
                  (this.g = null),
                  (this.A = !1),
                  (this.h = []),
                  this.o && (this.o.stop(), (this.o = null)),
                  this.l.clear(),
                  this.i && (this.i.release(), (this.i = null)),
                  this.B && (this.B.disconnect(), (this.B = null)),
                  Promise.resolve())
                : Promise.resolve();
            }),
            (i.remove = function (e, t) {
              if (!this.g) return !1;
              var n = this.h.length;
              return (
                (this.h = this.h.filter(function (n) {
                  return n.startTime < e || n.endTime >= t;
                })),
                Tf(this, n > this.h.length),
                this.h.length || wf(this),
                !0
              );
            }),
            (i.isTextVisible = function () {
              return this.A;
            }),
            (i.setTextVisibility = function (e) {
              (this.A = e), Tf(this, !0);
            }),
            (i.setTextLanguage = function (e) {
              e && "und" != e
                ? this.g.setAttribute("lang", e)
                : this.g.setAttribute("lang", "");
            }),
            (i.enableTextDisplayer = function () {}),
            B("shaka.text.UITextDisplayer", bf),
            (bf.prototype.enableTextDisplayer =
              bf.prototype.enableTextDisplayer),
            (bf.prototype.setTextLanguage = bf.prototype.setTextLanguage),
            (bf.prototype.setTextVisibility = bf.prototype.setTextVisibility),
            (bf.prototype.isTextVisible = bf.prototype.isTextVisible),
            (bf.prototype.remove = bf.prototype.remove),
            (bf.prototype.destroy = bf.prototype.destroy),
            (bf.prototype.append = bf.prototype.append),
            (bf.prototype.configure = bf.prototype.configure),
            B("shaka.text.WebVttGenerator", function () {}),
            (If.prototype.setMediaElement = function (e) {
              (this.j = e),
                (function (e) {
                  e.C.Ea(e.j, "play", function () {
                    e.m || (e.m = Date.now());
                  }),
                    e.C.Ea(e.j, "playing", function () {
                      e.o || (e.o = Date.now());
                    });
                })(this);
            }),
            (If.prototype.configure = function (e) {
              this.g = e;
            });
          var Lf = "m",
            Rf = "a",
            Nf = "v",
            _f = "av",
            Uf = "i",
            jf = "c",
            Of = "tt",
            Bf = 2,
            Ff = "d",
            Hf = "ld",
            Vf = "h",
            zf = "lh";
          function Gf(e) {
            (this.h = e), (this.g = null);
          }
          function qf(e) {
            return (
              !e ||
              ("false" !== e.toLowerCase() &&
                (/^[-0-9]/.test(e) ? parseInt(e, 10) : e.replace(/["]+/g, "")))
            );
          }
          B("shaka.util.CmcdManager.StreamingFormat", {
            DASH: Ff,
            Li: Hf,
            HLS: Vf,
            Mi: zf,
            Oi: "s",
            OTHER: "o",
          }),
            ((i = Gf.prototype).configure = function (e) {
              this.h = e;
            }),
            (i.Uf = function () {
              return this.h.enabled &&
                this.h.applyMaximumSuggestedBitrate &&
                this.g &&
                this.g.has(Wf)
                ? 1e3 * this.g.get(Wf)
                : null;
            }),
            (i.Sf = function () {
              return this.h.enabled && this.g && this.g.has(Kf)
                ? 1e3 * this.g.get(Kf)
                : null;
            }),
            (i.zh = function () {
              return this.h.enabled && this.g && this.g.has(Xf)
                ? this.g.get(Xf)
                : null;
            }),
            (i.Ah = function () {
              return this.h.enabled && this.g && this.g.has(Yf)
                ? this.g.get(Yf)
                : null;
            }),
            (i.getBandwidthEstimate = function (e) {
              var t = this.Sf();
              if (!t) return e;
              var n = this.h.estimatedThroughputWeightRatio;
              return 0 < n && 1 >= n ? e * (1 - n) + t * n : e;
            }),
            B("shaka.util.CmsdManager", Gf),
            (Gf.prototype.getBandwidthEstimate =
              Gf.prototype.getBandwidthEstimate),
            (Gf.prototype.getRoundTripTime = Gf.prototype.Ah),
            (Gf.prototype.getResponseDelay = Gf.prototype.zh),
            (Gf.prototype.getEstimatedThroughput = Gf.prototype.Sf),
            (Gf.prototype.getMaxBitrate = Gf.prototype.Uf);
          var Kf = "etp",
            Wf = "mb",
            Xf = "rd",
            Yf = "rtt";
          function Jf() {
            (this.g = null), (this.h = []);
          }
          function $f(e, t) {
            return P(function (n) {
              if (1 == n.g)
                return e.g
                  ? w(
                      n,
                      new Promise(function (t) {
                        return e.h.push(t);
                      }),
                      2
                    )
                  : n.u(2);
              (e.g = t), x(n);
            });
          }
          function Zf(t, n, i) {
            (n = void 0 === n ? null : n), Yo.call(this);
            var r = this;
            (this.m = eg),
              (this.h = null),
              (this.Nd = n),
              (this.oa = !1),
              (this.ce = new $()),
              (this.Wc = new $()),
              (this.l = new $()),
              (this.ab = new $()),
              (this.rc = new $()),
              (this.F = this.J = this.C = this.D = null),
              (this.ge = 0),
              (this.da = new Jf()),
              (this.ca =
                this.mc =
                this.X =
                this.i =
                this.nc =
                this.G =
                this.j =
                this.Uc =
                this.S =
                this.Bf =
                this.ga =
                this.L =
                this.Oa =
                this.Aa =
                this.Vc =
                this.O =
                this.pa =
                this.K =
                this.Ya =
                  null),
              (this.xa = !1),
              (this.Ma = this.o = null),
              (this.fe = 1e9),
              (this.ae = []),
              (this.dd = []),
              (this.he = -1),
              (this.g = Ip(this)),
              (this.ie = {
                streaming: {
                  inaccurateManifestTolerance: 0,
                  segmentPrefetchLimit: 2,
                  updateIntervalSeconds: 0.1,
                  maxDisabledTime: 1,
                  retryParameters: { baseDelay: 100 },
                },
                manifest: {
                  dash: { autoCorrectDrift: !1 },
                  retryParameters: { baseDelay: 100 },
                },
                drm: { retryParameters: { baseDelay: 100 } },
              }),
              (this.W = null),
              (this.jd = -1),
              (this.$a = null),
              (this.la = { width: 1 / 0, height: 1 / 0 }),
              (this.Md = new Hc(this.g, this.la, null)),
              (this.Vd = []),
              (this.A = null),
              (this.Y = this.g.adaptationSetCriteriaFactory()),
              this.Y.configure({
                language: this.g.preferredAudioLanguage,
                role: this.g.preferredVariantRole,
                channelCount: this.g.preferredAudioChannelCount,
                sc: this.g.preferredVideoHdrLevel,
                spatialAudio: this.g.preferSpatialAudio,
                videoLayout: this.g.preferredVideoLayout,
                kc: this.g.preferredAudioLabel,
                Gc: this.g.preferredVideoLabel,
                codecSwitchingStrategy:
                  this.g.mediaSource.codecSwitchingStrategy,
                audioCodec: "",
              }),
              (this.tc = this.g.preferredTextLanguage),
              (this.bd = this.g.preferredTextRole),
              (this.$c = this.g.preferForcedSubs),
              (this.Yc = []),
              i && i(this),
              (this.L = (function (e) {
                return new If(
                  {
                    getBandwidthEstimate: function () {
                      return e.o ? e.o.getBandwidthEstimate() : NaN;
                    },
                    hb: function () {
                      return e.hb();
                    },
                    getCurrentTime: function () {
                      return e.h ? e.h.currentTime : 0;
                    },
                    Ra: function () {
                      return e.Ra();
                    },
                    Pe: function () {
                      return e.Pe();
                    },
                    yb: function () {
                      return e.yb();
                    },
                    R: function () {
                      return e.R();
                    },
                    td: function () {
                      return e.td();
                    },
                  },
                  e.g.cmcd
                );
              })(this)),
              (this.ga = new Gf(this.g.cmsd)),
              (this.D = hp(this)),
              this.D.lf(this.g.streaming.forceHTTP),
              this.D.mf(this.g.streaming.forceHTTPS),
              (this.D.o = this.g.streaming.minBytesForProgressEvents),
              (this.xc = this.fa = this.B = null),
              (this.ke = !1),
              (this.je = new je(function () {
                return P(function (e) {
                  return 1 == e.g
                    ? r.fa
                      ? w(e, r.Cb(r.xc, !0), 3)
                      : e.u(0)
                    : 4 != e.g
                    ? w(e, r.load(r.fa), 4)
                    : (r.ke ? r.xc.pause() : r.xc.play(),
                      (r.fa = null),
                      (r.ke = !1),
                      void x(e));
                });
              })),
              ag &&
                ((this.B = ag()),
                this.B.configure(this.g.ads),
                this.rc.H(this.B, "ad-content-pause-requested", function (e) {
                  var t;
                  return P(function (n) {
                    if (1 == n.g)
                      return (
                        r.je.stop(),
                        r.fa
                          ? n.u(0)
                          : ((r.xc = r.h),
                            (r.ke = r.vc()),
                            (t = e.saveLivePosition || !1),
                            w(n, r.Nf(!0, t), 3))
                      );
                    (r.fa = n.h), x(n);
                  });
                }),
                this.rc.H(this.B, "ad-content-resume-requested", function (e) {
                  if (((e = e.offset || 0), r.fa)) {
                    var t = r.fa;
                    t.B && e && (t.B += e);
                  }
                  r.je.ea(0.1);
                }),
                this.rc.H(this.B, "ad-content-attach-requested", function () {
                  return P(function (e) {
                    return r.h || !r.xc ? e.u(0) : w(e, r.Cb(r.xc, !0), 0);
                  });
                })),
              this.ce.H(e, "online", function () {
                Gp(r), r.hf();
              }),
              (this.Td = new je(function () {
                for (
                  var e = Date.now() / 1e3,
                    t = !1,
                    n = !0,
                    i = l(r.i.variants),
                    a = i.next();
                  !a.done;
                  a = i.next()
                )
                  0 < (a = a.value).disabledUntilTime &&
                    a.disabledUntilTime <= e &&
                    ((a.disabledUntilTime = 0), (t = !0)),
                    0 < a.disabledUntilTime && (n = !1);
                n && r.Td.stop(), t && Rp(r, !1, void 0, !1, !1);
              })),
              (this.za = null),
              t &&
                (te(
                  "Player w/ mediaElement",
                  "Please migrate from initializing Player with a mediaElement; use the attach method instead."
                ),
                this.Cb(t, !0)),
              (this.s = null);
          }
          function Qf(e) {
            null != e.S && (Ot(e.S), e.S.release(), (e.S = null));
          }
          function ep(e, t) {
            return new Xo(e, t);
          }
          function tp(e, t) {
            e.dispatchEvent(ep("onstatechange", new Map().set("state", t)));
          }
          function np(e, t) {
            var n;
            return P(function (i) {
              return 1 == i.g
                ? ((n = ++e.ge), w(i, $f(e.da, t), 2))
                : n != e.ge
                ? (e.da.release(), i.return(!0))
                : i.return(!1);
            });
          }
          function ip(e, t) {
            var n, i;
            return (
              (t = void 0 !== t && t),
              P(function (r) {
                if (1 == r.g)
                  return (
                    (n = null),
                    e.i && e.G && e.nc && e.X
                      ? ((i = e.h.currentTime),
                        e.R() && !t && (i = null),
                        w(r, ap(e, e.X, i, e.mc, !0, !1, !1), 3))
                      : r.u(2)
                  );
                if (2 != r.g) {
                  (n = r.h),
                    e.Vd.push(n),
                    e.G && e.G.setMediaElement && e.G.setMediaElement(null);
                  var a = n,
                    o = e.G,
                    s = e.nc;
                  (a.h = e.i),
                    (a.l = o),
                    (a.F = s),
                    (a = n),
                    (o = e.Ma),
                    (a.j = e.o),
                    (a.C = o),
                    (n.o = e.Y),
                    n.start(),
                    (e.i = null),
                    (e.G = null),
                    (e.nc = null),
                    (e.o = null),
                    (e.Ma = null);
                }
                return r.return(n);
              })
            );
          }
          function rp(e, t, n, i, r) {
            var a, o, s;
            return (
              (r = void 0 !== r && r),
              P(function (u) {
                return 1 == u.g
                  ? i
                    ? u.u(2)
                    : w(u, op(e, t), 3)
                  : (2 != u.g && (i = u.h),
                    (function (e, t) {
                      if (!Oe()) return !0;
                      if (t) {
                        if ("" == (e.h || at()).canPlayType(t)) return !1;
                        if (!Oe() || !Ys.has(t)) return !0;
                        if (Ui(t))
                          return Xe() &&
                            (e.g.drm.servers["com.apple.fps"] ||
                              e.g.drm.servers["com.apple.fps.1_0"])
                            ? e.g.streaming.useNativeHlsForFairPlay
                            : e.g.streaming.preferNativeHls;
                        if (
                          "application/dash+xml" === t ||
                          "video/vnd.mpeg.dash.mpd" === t
                        )
                          return e.g.streaming.preferNativeDash;
                      }
                      return !1;
                    })(e, i)
                      ? u.return(null)
                      : ((a = !1),
                        (o = !0),
                        r &&
                          (e.o && e.Ma == e.g.abrFactory && (o = !1),
                          e.h && "AUDIO" === e.h.nodeName && (a = !0)),
                        (s = ap(e, t, n, i || null, !r, a, o)),
                        (s = r
                          ? s.then(function (e) {
                              return (e.A = !1), e;
                            })
                          : s.then(function (t) {
                              return e.Vd.push(t), t;
                            })),
                        u.return(s)));
              })
            );
          }
          function ap(e, t, n, i, r, a, o) {
            var s, u, c, d, h, f, p, g, m, v, y, b;
            return (
              (r = void 0 === r || r),
              (a = void 0 !== a && a),
              (o = void 0 === o || o),
              P(function (S) {
                return 1 == S.g
                  ? ((s = null),
                    (u = dn(e.g)),
                    a && (u.manifest.disableVideo = !0),
                    (c = function () {
                      return s.X && s.s ? null : s;
                    }),
                    (d = function () {
                      return c() ? c().getConfiguration() : e.g;
                    }),
                    1 / 0 != e.la.width ||
                    1 / 0 != e.la.height ||
                    e.g.ignoreHardwareResolution
                      ? S.u(2)
                      : w(S, st(), 3))
                  : (2 != S.g &&
                      ((h = S.h),
                      (e.la.width = h.width),
                      (e.la.height = h.height)),
                    (f = new Hc(u, e.la, null)),
                    (p = {
                      networkingEngine: e.D,
                      filter: function (e) {
                        var t;
                        return P(function (n) {
                          return 1 == n.g
                            ? w(n, Vc(f, e), 2)
                            : 4 != n.g
                            ? n.h
                              ? ((t = ep("trackschanged")),
                                w(n, Promise.resolve(), 4))
                              : n.u(0)
                            : (s.dispatchEvent(t), void x(n));
                        });
                      },
                      makeTextStreamsForClosedCaptions: function (t) {
                        return (function (e, t) {
                          for (
                            var n = new Set(),
                              i = l(t.textStreams),
                              r = i.next();
                            !r.done;
                            r = i.next()
                          )
                            ("application/cea-608" != (r = r.value).mimeType &&
                              "application/cea-708" != r.mimeType) ||
                              n.add(r.originalId);
                          for (
                            i = l(t.variants), r = i.next();
                            !r.done;
                            r = i.next()
                          )
                            if ((r = r.value.video) && r.closedCaptions)
                              for (
                                var a = l(r.closedCaptions.keys()),
                                  o = a.next();
                                !o.done;
                                o = a.next()
                              )
                                if (((o = o.value), !n.has(o))) {
                                  var s = o.startsWith("CC")
                                      ? "application/cea-608"
                                      : "application/cea-708",
                                    u = new Ps(),
                                    c = r.closedCaptions.get(o);
                                  (s = {
                                    id: e.fe++,
                                    originalId: o,
                                    groupId: null,
                                    createSegmentIndex: function () {
                                      return Promise.resolve();
                                    },
                                    segmentIndex: u,
                                    mimeType: s,
                                    codecs: "",
                                    kind: "caption",
                                    encrypted: !1,
                                    drmInfos: [],
                                    keyIds: new Set(),
                                    language: c,
                                    originalLanguage: c,
                                    label: null,
                                    type: Lt,
                                    primary: !1,
                                    trickModeVideo: null,
                                    dependencyStream: null,
                                    emsgSchemeIdUris: null,
                                    roles: r.roles,
                                    forced: !1,
                                    channelsCount: null,
                                    audioSamplingRate: null,
                                    spatialAudio: !1,
                                    closedCaptions: null,
                                    accessibilityPurpose: null,
                                    external: !1,
                                    fastSwitching: !1,
                                    fullMimeTypes: new Set([Ci(s, "")]),
                                    isAudioMuxedInVideo: !1,
                                    baseOriginalId: null,
                                  }),
                                    t.textStreams.push(s),
                                    n.add(o);
                                }
                        })(e, t);
                      },
                      onTimelineRegionAdded: function (e) {
                        Gd(s.G, e);
                      },
                      onEvent: function (e) {
                        return s.dispatchEvent(e);
                      },
                      onError: function (e) {
                        return s.onError(e);
                      },
                      isLowLatencyMode: function () {
                        return d().streaming.lowLatencyMode;
                      },
                      updateDuration: function () {
                        e.j && s.X && e.j.updateDuration();
                      },
                      newDrmInfo: function (e) {
                        var t = s.i,
                          n = t ? t.h : null;
                        n && t.A && qc(f, n.keySystem, e);
                      },
                      onManifestUpdated: function () {
                        var t = new Map().set("isLive", e.R());
                        s.dispatchEvent(ep("manifestupdated", t)),
                          Dh(s, !1, function () {
                            e.B && e.B.onManifestUpdated(e.R());
                          });
                      },
                      getBandwidthEstimate: function () {
                        return e.o.getBandwidthEstimate();
                      },
                      onMetadata: function (t, n, i, r) {
                        var a = t;
                        "com.apple.hls.interstitial" == t &&
                          ((a = "com.apple.quicktime.HLS"),
                          (t = { startTime: n, endTime: i, values: r }),
                          e.B) &&
                          e.B.onHLSInterstitialMetadata(e, e.h, t),
                          (t = (r = l(r)).next());
                        for (
                          var o = {};
                          !t.done;
                          o = { df: void 0 }, t = r.next()
                        )
                          (o.df = t.value),
                            "ID" != o.df.name &&
                              Dh(
                                s,
                                !1,
                                (function (t) {
                                  return function () {
                                    dp(e, n, i, a, t.df);
                                  };
                                })(o)
                              );
                      },
                      disableStream: function (t) {
                        return e.disableStream(
                          t,
                          e.g.streaming.maxDisabledTime
                        );
                      },
                      addFont: function (t, n) {
                        return e.addFont(t, n);
                      },
                    }),
                    (g = new zd(function () {
                      return e.La();
                    })).addEventListener("regionadd", function (t) {
                      var n = t.region;
                      Kp(e, "timelineregionadded", n, s),
                        Dh(s, !1, function () {
                          e.B &&
                            (e.B.onDashTimedMetadata(n),
                            e.B.onDASHInterstitialMetadata(e, e.h, n));
                        });
                    }),
                    (m = null),
                    u.streaming.observeQualityChanges &&
                      ((m = new Hd(function () {
                        return e.hb();
                      })).addEventListener("qualitychange", function (t) {
                        Wp(e, t.quality, t.position);
                      }),
                      m.addEventListener("audiotrackchange", function (t) {
                        Wp(e, t.quality, t.position, !0);
                      })),
                    (v = !0),
                    (y = {
                      cc: e.D,
                      onError: function (e) {
                        return s.onError(e);
                      },
                      kg: function (t) {
                        Dh(s, !0, function () {
                          if (e.C) {
                            var n = t,
                              i = ep("keystatuschanged");
                            e.dispatchEvent(i);
                            var r = Object.keys(n);
                            1 == r.length &&
                              "" == r[0] &&
                              ((r = ["00"]), (n = { "00": n[""] })),
                              (i = 1 == r.length && "00" == r[0]);
                            var a = !1;
                            if (r.length) {
                              r = e.keySystem();
                              for (
                                var o = Rl(e.g.drm.clearKeys),
                                  s = l(e.i.variants),
                                  u = s.next();
                                !u.done;
                                u = s.next()
                              ) {
                                var c = [];
                                (u = u.value).audio && c.push(u.audio),
                                  u.video && c.push(u.video);
                                for (
                                  var d = (c = l(c)).next();
                                  !d.done;
                                  d = c.next()
                                ) {
                                  var h = d.value;
                                  if (
                                    ((d = u.allowedByKeySystem), h.keyIds.size)
                                  )
                                    if (h.drmInfos.length && !o.size) {
                                      for (
                                        var f = (h = l(h.drmInfos)).next();
                                        !f.done;
                                        f = h.next()
                                      )
                                        if (
                                          (f = f.value).keyIds.size &&
                                          f.keySystem == r
                                        ) {
                                          u.allowedByKeySystem = !0;
                                          for (
                                            var p = (f = l(f.keyIds)).next();
                                            !p.done;
                                            p = f.next()
                                          )
                                            (p = p.value),
                                              ((p = n[i ? "00" : p]) ||
                                                e.C.D) &&
                                                (u.allowedByKeySystem =
                                                  u.allowedByKeySystem &&
                                                  !!p &&
                                                  !Wc.includes(p));
                                        }
                                    } else
                                      for (
                                        u.allowedByKeySystem = !0,
                                          f = (h = l(h.keyIds)).next();
                                        !f.done;
                                        f = h.next()
                                      )
                                        (f = f.value),
                                          ((f = n[i ? "00" : f]) || e.C.D) &&
                                            (u.allowedByKeySystem =
                                              u.allowedByKeySystem &&
                                              !!f &&
                                              !Wc.includes(f));
                                  d != u.allowedByKeySystem && (a = !0);
                                }
                              }
                            }
                            (a && (Up(e), !Lp(e))) ||
                              ((n = e.j.l) && !n.allowedByKeySystem && Rp(e));
                          }
                        });
                      },
                      onExpirationUpdated: function (e, t) {
                        var n = ep("expirationupdated");
                        s.dispatchEvent(n),
                          (n = s.l) &&
                            n.onExpirationUpdated &&
                            n.onExpirationUpdated(e, t);
                      },
                      onEvent: function (t) {
                        s.dispatchEvent(t),
                          "drmsessionupdate" == t.type &&
                            v &&
                            ((v = !1),
                            (t = Date.now() / 1e3 - s.za),
                            ((e.A || s.getStats()).j = t),
                            e.S && Ot(e.S));
                      },
                    }),
                    (b = hp(e, c)),
                    (function (e, t) {
                      for (var n = l(e.g), i = n.next(); !i.done; i = n.next())
                        t.g.add(i.value);
                      for (n = (e = l(e.h)).next(); !n.done; n = e.next())
                        t.h.add(n.value);
                    })(e.D, b),
                    (s = new Eh(t, i, n, {
                      config: u,
                      Uh: p,
                      gi: g,
                      fi: m,
                      od: function () {
                        return e.od(y);
                      },
                      Th: f,
                      networkingEngine: b,
                      Rg: r,
                      Qg: o,
                    })),
                    S.return(s));
              })
            );
          }
          function op(e, t) {
            var n, i;
            return P(function (r) {
              return 1 == r.g
                ? ((n = e.g.manifest.retryParameters), w(r, uf(t, e.D, n), 2))
                : ("application/x-mpegurl" == (i = r.h) &&
                    Xe() &&
                    (i = "application/vnd.apple.mpegurl"),
                  r.return(i));
            });
          }
          function sp(e) {
            var t = e.g.textDisplayFactory;
            t !== e.ee &&
              ((e.s = t()),
              e.s.configure
                ? e.s.configure(e.g.textDisplayer)
                : te(
                    "Text displayer w/ configure",
                    'Text displayer should have a "configure" method!'
                  ),
              (e.ee = t),
              e.s.setTextVisibility(e.oa));
          }
          function up(e) {
            var t, n, i;
            return P(function (r) {
              if (1 == r.g)
                return (
                  tp(e, "media-source"),
                  e.h.removeAttribute("src"),
                  Jc(e.h),
                  sp(e),
                  (t = (function (e, t, n, i) {
                    return new $c(e, t, n, i);
                  })(
                    e.h,
                    e.s,
                    {
                      oh: function () {
                        return e.keySystem();
                      },
                      onMetadata: function (t, n, i) {
                        for (var r = (t = l(t)).next(); !r.done; r = t.next())
                          if (
                            (r = r.value).data &&
                            "number" == typeof r.cueTime &&
                            r.frames
                          ) {
                            var a = r.cueTime + n,
                              o = i;
                            o && a > o && (o = a);
                            for (
                              var s = l(r.frames), u = s.next();
                              !u.done;
                              u = s.next()
                            )
                              dp(e, a, o, "org.id3", u.value);
                            e.B && e.B.onHlsTimedMetadata(r, a);
                          }
                      },
                      ai: function (t) {
                        e.Oa &&
                          Gd(e.Oa, {
                            schemeIdUri: t.schemeIdUri,
                            startTime: t.startTime,
                            endTime: t.endTime,
                            id: String(t.id),
                            emsg: t,
                          });
                      },
                      onEvent: function (t) {
                        return e.dispatchEvent(t);
                      },
                      ci: function () {
                        e.G && e.G.update && e.G.update();
                      },
                    },
                    e.S
                  )),
                  t.configure(e.g.mediaSource),
                  (n = e.g.manifest),
                  (i = n.segmentRelativeVttTiming),
                  (t.Xa = i),
                  w(r, t.J, 2)
                );
              (e.J = t), x(r);
            });
          }
          function lp(e, t, n) {
            function i() {
              return Ep(e);
            }
            e.l.H(t, "playing", i),
              e.l.H(t, "pause", i),
              e.l.H(t, "ended", i),
              e.l.H(t, "ratechange", function () {
                var t = e.h.playbackRate;
                0 != t &&
                  (e.K &&
                    (e.K.set(t),
                    e.m == tg && e.o.playbackRateChanged(t),
                    Mp(e, t)),
                  (t = ep("ratechange")),
                  e.dispatchEvent(t));
              }),
              t.remote &&
                (e.l.H(t.remote, "connect", function () {
                  return Up(e);
                }),
                e.l.H(t.remote, "connecting", function () {
                  return Up(e);
                }),
                e.l.H(t.remote, "disconnect", function () {
                  return P(function (n) {
                    if (1 == n.g)
                      return e.j && "disconnected" == t.remote.state
                        ? w(n, Sh(e.j), 2)
                        : n.u(2);
                    Up(e), x(n);
                  });
                })),
              t.audioTracks &&
                (e.l.H(t.audioTracks, "addtrack", function () {
                  return Up(e);
                }),
                e.l.H(t.audioTracks, "removetrack", function () {
                  return Up(e);
                }),
                e.l.H(t.audioTracks, "change", function () {
                  return Up(e);
                })),
              t.textTracks &&
                (e.l.H(t.textTracks, "addtrack", function (t) {
                  if (t.track)
                    switch (((t = t.track), t.kind)) {
                      case "metadata":
                        !(function (e, t) {
                          if ("metadata" == t.kind) {
                            (t.mode = "hidden"),
                              e.l.H(t, "cuechange", function () {
                                if (t.activeCues)
                                  for (
                                    var n = l(t.activeCues), i = n.next();
                                    !i.done;
                                    i = n.next()
                                  )
                                    (i = i.value),
                                      dp(
                                        e,
                                        i.startTime,
                                        i.endTime,
                                        i.type,
                                        i.value
                                      ),
                                      e.B && e.B.onCueMetadataChange(i.value);
                                if (t.cues) {
                                  n = [];
                                  for (
                                    var r = (i = l(t.cues)).next(), a = {};
                                    !r.done;
                                    a = { Eb: void 0 }, r = i.next()
                                  )
                                    (a.Eb = r.value),
                                      "com.apple.quicktime.HLS" == a.Eb.type &&
                                        null != a.Eb.startTime &&
                                        ((r = n.find(
                                          (function (e) {
                                            return function (t) {
                                              return (
                                                t.startTime == e.Eb.startTime &&
                                                t.endTime == e.Eb.endTime
                                              );
                                            };
                                          })(a)
                                        )),
                                        r ||
                                          ((r = {
                                            startTime: a.Eb.startTime,
                                            endTime: a.Eb.endTime,
                                            values: [],
                                          }),
                                          n.push(r)),
                                        r.values.push(a.Eb.value));
                                  for (
                                    i = (n = l(n)).next();
                                    !i.done;
                                    i = n.next()
                                  )
                                    (i = i.value).values.some(function (e) {
                                      return (
                                        "X-ASSET-URI" == e.key ||
                                        "X-ASSET-LIST" == e.key
                                      );
                                    }) &&
                                      e.B &&
                                      (i.values.push({
                                        key: "CUE",
                                        description: "",
                                        data:
                                          0 != i.startTime || e.R()
                                            ? "ONCE"
                                            : "ONCE,PRE",
                                        mimeType: null,
                                        pictureType: null,
                                      }),
                                      e.B.onHLSInterstitialMetadata(e, e.h, i));
                                }
                              });
                            var n = new je(function () {
                              for (
                                var t = (function (e) {
                                    return Array.from(e.h.textTracks).filter(
                                      function (e) {
                                        return "metadata" == e.kind;
                                      }
                                    );
                                  })(e),
                                  n = (t = l(t)).next();
                                !n.done;
                                n = t.next()
                              )
                                n.value.mode = "hidden";
                            })
                              .Nb()
                              .ea(0.5);
                            e.Yc.push(function () {
                              n.stop();
                            });
                          }
                        })(e, t);
                        break;
                      case "chapters":
                        !(function (e, t) {
                          if (t && "chapters" == t.kind) {
                            t.mode = "hidden";
                            var n = new je(function () {
                              t.mode = "hidden";
                            })
                              .Nb()
                              .ea(0.5);
                            e.Yc.push(function () {
                              n.stop();
                            });
                          }
                        })(e, t);
                        break;
                      default:
                        Up(e);
                    }
                }),
                e.l.H(t.textTracks, "removetrack", function () {
                  return Up(e);
                }),
                e.l.H(t.textTracks, "change", function () {
                  return Up(e);
                }),
                "keep" !== e.g.streaming.crossBoundaryStrategy &&
                  (e.l.H(t, "waiting", function () {
                    e.j && Th(e.j);
                  }),
                  e.l.H(t, "timeupdate", function () {
                    e.j && Th(e.j);
                  }))),
              "none" != t.preload &&
                e.l.Ea(t, "loadedmetadata", function () {
                  e.A.C = Date.now() / 1e3 - n;
                });
          }
          function cp(e, t) {
            (t = new Map()
              .set("startTime", t.startTime)
              .set("endTime", t.endTime)
              .set("metadataType", t.schemeIdUri)
              .set("payload", t.payload)),
              e.dispatchEvent(ep("metadata", t));
          }
          function dp(e, t, n, i, r) {
            e.Aa &&
              (((t = {
                schemeIdUri: i,
                startTime: t,
                endTime: n || 1 / 0,
                id: "",
                payload: r,
              }).id = JSON.stringify(t)),
              Gd(e.Aa, t));
          }
          function hp(e, t) {
            function n(n) {
              t() ? t().dispatchEvent(n) : e.dispatchEvent(n);
            }
            function i(e) {
              t() ? Dh(t(), !0, e) : e();
            }
            return (
              t ||
                (t = function () {
                  return null;
                }),
              new Zo(
                function (n, i, r, a) {
                  var o = t() ? t().j : e.o;
                  o && o.segmentDownloaded(n, i, r, a);
                },
                function (t, r, a) {
                  n(
                    ep(
                      "downloadheadersreceived",
                      (r = new Map()
                        .set("headers", t)
                        .set("request", r)
                        .set("requestType", a))
                    )
                  ),
                    i(function () {
                      if (e.ga) {
                        var n = e.ga;
                        if (n.h.enabled) {
                          var i = t["cmsd-static"];
                          if (i)
                            try {
                              var r = new Map(),
                                a = i.split(",");
                              for (i = 0; i < a.length; i++) {
                                var o = a[i].split("=");
                                r.set(o[0], qf(o[1]));
                              }
                            } catch (e) {}
                          if ((r = t["cmsd-dynamic"])) {
                            try {
                              var s = new Map(),
                                u = r.split(";");
                              for (r = 1; r < u.length; r++) {
                                var l = u[r].split("=");
                                s.set(l[0], qf(l[1]));
                              }
                              var c = s;
                            } catch (e) {
                              c = null;
                            }
                            c && (n.g = c);
                          }
                        }
                      }
                    });
                },
                function (e, t) {
                  n(
                    ep(
                      "downloadcompleted",
                      (e = new Map().set("request", e).set("response", t))
                    )
                  );
                },
                function (e, t, i, r) {
                  n(
                    ep(
                      "downloadfailed",
                      (e = new Map()
                        .set("request", e)
                        .set("error", t)
                        .set("httpResponseCode", i)
                        .set("aborted", r))
                    )
                  );
                },
                function (t, n, r) {
                  i(function () {
                    var i = e.L,
                      a = r;
                    if (((a = void 0 === a ? {} : a), i.g.enabled))
                      if ("HEAD" === n.method) Mf(i, n);
                      else
                        switch (t) {
                          case 0:
                            try {
                              if (i.g.enabled) {
                                if (a.type) {
                                  e: {
                                    switch (a.type) {
                                      case 4:
                                        var o = i.l ? Hf : Ff;
                                        break e;
                                      case 3:
                                      case 2:
                                        o = i.l ? zf : Vf;
                                        break e;
                                      case 5:
                                        o = "s";
                                        break e;
                                    }
                                    o = void 0;
                                  }
                                  i.i = o;
                                }
                                Mf(i, n, { ot: Lf, su: !i.s });
                              }
                            } catch (e) {
                              X(
                                "CMCD_MANIFEST_ERROR",
                                "Could not generate manifest CMCD data.",
                                e
                              );
                            }
                            break;
                          case as:
                            try {
                              if (i.g.enabled) {
                                var s = a.segment;
                                (o = 0), s && (o = s.endTime - s.startTime);
                                var u = { d: 1e3 * o, st: i.h.R() ? "l" : "v" };
                                u.ot = (function (e) {
                                  if (0 === e.type) return Uf;
                                  if ((e = e.stream)) {
                                    var t = e.type;
                                    if ("video" == t)
                                      return e.codecs && e.codecs.includes(",")
                                        ? _f
                                        : Nf;
                                    if ("audio" == t) return Rf;
                                    if ("text" == t)
                                      return "application/mp4" === e.mimeType
                                        ? Of
                                        : jf;
                                  }
                                })(a);
                                var c =
                                    u.ot === Nf ||
                                    u.ot === Rf ||
                                    u.ot === _f ||
                                    u.ot === Of,
                                  d = a.stream;
                                if (d) {
                                  var h = i.h.Ra();
                                  if (
                                    c &&
                                    ((u.bl = (function (e, t) {
                                      if (!(t = e.h.hb()[t]).length) return NaN;
                                      var n = e.h.getCurrentTime();
                                      return (e = t.find(function (e) {
                                        return e.start <= n && e.end >= n;
                                      }))
                                        ? 1e3 * (e.end - n)
                                        : NaN;
                                    })(i, d.type)),
                                    u.ot !== Of)
                                  ) {
                                    var f = Ef(i, d.type);
                                    u.dl = h ? f / Math.abs(h) : f;
                                  }
                                  if (
                                    (d.bandwidth && (u.br = d.bandwidth / 1e3),
                                    d.segmentIndex && s)
                                  ) {
                                    var p = d.segmentIndex.ob(
                                      s.endTime,
                                      !0,
                                      0 > h
                                    );
                                    if (p) {
                                      var g = p.next().value;
                                      if (g && g != s) {
                                        if (!rn(s.T(), g.T())) {
                                          var m = g.T()[0],
                                            v = n.uris[0],
                                            y = new URL(m),
                                            b = new URL(v);
                                          if (y.origin !== b.origin) var w = m;
                                          else {
                                            for (
                                              var x = y.pathname
                                                  .split("/")
                                                  .slice(1),
                                                S = b.pathname
                                                  .split("/")
                                                  .slice(1, -1);
                                              x[0] === S[0];

                                            )
                                              x.shift(), S.shift();
                                            for (; S.length; )
                                              S.shift(), x.unshift("..");
                                            w = x.join("/");
                                          }
                                          u.nor = w;
                                        }
                                        if (
                                          (g.startByte || g.endByte) &&
                                          (s.startByte != g.startByte ||
                                            s.endByte != g.endByte)
                                        ) {
                                          var T = g.startByte + "-";
                                          g.endByte && (T += g.endByte),
                                            (u.nrr = T);
                                        }
                                      }
                                    }
                                    var A = i.h.Ra() || 1,
                                      k = Ef(i, d.type) || 500,
                                      I = d.bandwidth,
                                      C = I
                                        ? ((I * (s.endTime - s.startTime)) /
                                            1e3 /
                                            (k / A / 1e3)) *
                                          i.g.rtpSafetyFactor
                                        : NaN;
                                    isNaN(C) || (u.rtp = C);
                                  }
                                }
                                c &&
                                  u.ot !== Of &&
                                  (u.tb =
                                    (function (e, t) {
                                      var n = e.h.yb();
                                      if (!n.length) return NaN;
                                      e = n[0];
                                      for (
                                        var i = (n = l(n)).next();
                                        !i.done;
                                        i = n.next()
                                      )
                                        "variant" === (i = i.value).type &&
                                          i.bandwidth > e.bandwidth &&
                                          (e = i);
                                      switch (t) {
                                        case Nf:
                                          return e.videoBandwidth || NaN;
                                        case Rf:
                                          return e.audioBandwidth || NaN;
                                        default:
                                          return e.bandwidth;
                                      }
                                    })(i, u.ot) / 1e3),
                                  Mf(i, n, u);
                              }
                            } catch (e) {
                              X(
                                "CMCD_SEGMENT_ERROR",
                                "Could not generate segment CMCD data.",
                                e
                              );
                            }
                            break;
                          case 2:
                          case 5:
                          case 6:
                            Mf(i, n, { ot: "k" });
                            break;
                          case 4:
                            Mf(i, n, { ot: "o" });
                        }
                  });
                },
                function (n, i, r, a) {
                  (n = t() ? t().l : e.G) && n.banLocation && n.banLocation(a);
                },
                function (n, i) {
                  if (i.data) {
                    i = i.data.byteLength;
                    var r = t() ? t().getStats() : e.A;
                    r &&
                      ((r.Pb = isNaN(r.Pb) ? i : r.Pb + i),
                      0 === n && (r.cg = i));
                  }
                }
              )
            );
          }
          function fp(e, t, n) {
            (e.O = new Zl()),
              (e.O.g = Ql),
              pp(e),
              Cp(e),
              (e.pa = new je(function () {
                gp(e);
              })),
              e.g.streaming.rebufferingGoal && e.pa.ta(0.25),
              e.l.H(t, "waiting", function () {
                return gp(e);
              }),
              e.l.H(t, "canplaythrough", function () {
                return gp(e);
              }),
              e.l.H(t, "playing", function () {
                return gp(e);
              }),
              e.l.H(t, "seeked", function () {
                return gp(e);
              }),
              n &&
                (e.l.H(t, "stalled", function () {
                  return gp(e);
                }),
                e.l.H(t, "progress", function () {
                  return gp(e);
                }),
                e.l.H(t, "timeupdate", function () {
                  return gp(e);
                }));
          }
          function pp(e) {
            var t = e.g.streaming.rebufferingGoal;
            e.O.i.set(ec, Math.min(0.5, t / 2)).set(Ql, t);
          }
          function gp(e) {
            switch (e.m) {
              case ng:
                if (e.vc()) var t = !0;
                else {
                  var n = Lc(e.h.buffered);
                  t = null != n && n >= e.h.duration - 1;
                }
                break;
              case tg:
                e: if (e.vc() || nd(e.J)) t = !0;
                else {
                  if (e.i.presentationTimeline.R()) {
                    n = e.i.presentationTimeline.Gb();
                    var i = Lc(e.h.buffered);
                    if (null != i && i >= n) {
                      t = !0;
                      break e;
                    }
                  }
                  t = !1;
                }
                break;
              default:
                t = !1;
            }
            i = Nc(e.h.buffered, e.h.currentTime);
            var r = t,
              a = (n = e.O).i.get(n.g);
            (t = n.g),
              (i = r || (i >= a && 0 < i) ? ec : Ql),
              (n.g = i),
              (t = t != i) && i === ec && (n.h = Date.now()),
              t && Cp(e);
          }
          function mp(e) {
            if (((e.Md = new Hc(e.g, e.la, e.C)), e.G)) {
              var t = dn(e.g.manifest);
              e.h && "AUDIO" === e.h.nodeName && (t.disableVideo = !0),
                e.G.configure(t);
            }
            if ((e.C && e.C.configure(e.g.drm), e.j)) {
              e.j.configure(e.g.streaming);
              try {
                e.m != Qp && Gc(e.Md, e.i) && Up(e);
              } catch (t) {
                qp(e, t);
              }
              e.o && Lp(e),
                !(t = e.j.l) ||
                  (t.allowedByApplication && t.allowedByKeySystem) ||
                  Rp(e);
            }
            if (
              (e.D &&
                (e.D.lf(e.g.streaming.forceHTTP),
                e.D.mf(e.g.streaming.forceHTTPS),
                (e.D.o = e.g.streaming.minBytesForProgressEvents)),
              e.J &&
                (e.J.configure(e.g.mediaSource),
                (e.J.Xa = e.g.manifest.segmentRelativeVttTiming)),
              e.s)
            )
              if (((t = e.g.textDisplayFactory), e.ee != t)) {
                var n = e.s;
                if (
                  ((e.s = t()),
                  e.s.configure
                    ? e.s.configure(e.g.textDisplayer)
                    : te(
                        "Text displayer w/ configure",
                        'Text displayer should have a "configure" method!'
                      ),
                  e.s.setTextLanguage ||
                    te(
                      "Text displayer w/ setTextLanguage",
                      'Text displayer should have a "setTextLanguage" method!'
                    ),
                  e.s.setTextVisibility(n.isTextVisible()),
                  n.destroy(),
                  e.J)
                ) {
                  n = e.J;
                  var i = e.s;
                  (n.fa = i), n.h && (n.h.j = i);
                }
                (e.ee = t),
                  e.j &&
                    (n = (t = e.j).i.get(Lt)) &&
                    oh(t, n.stream, !0, 0, !0);
              } else e.s.configure && e.s.configure(e.g.textDisplayer);
            e.o &&
              (e.o.configure(e.g.abr),
              e.g.abr.enabled ? e.o.enable() : e.o.disable(),
              Vp(e)),
              e.O && pp(e),
              e.pa &&
                (e.g.streaming.rebufferingGoal ? e.pa.ta(0.25) : e.pa.stop()),
              e.i &&
                Yp(
                  e.i.presentationTimeline,
                  e.g.playRangeStart,
                  e.g.playRangeEnd
                ),
              e.B && e.B.configure(e.g.ads),
              e.L && e.L.configure(e.g.cmcd),
              e.ga && e.ga.configure(e.g.cmsd);
          }
          function vp(e) {
            return e && (e = /(\d+)x(\d+)/.exec(e))
              ? { Rb: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
              : null;
          }
          function yp(e, t) {
            var n, i;
            return P(function (r) {
              return 1 == r.g
                ? e.m != tg && e.m != ng
                  ? r.return(null)
                  : ((n = e.ae),
                    e.i && (n = e.i.imageStreams),
                    (i = n[0])
                      ? (null != t &&
                          (i = n.find(function (e) {
                            return e.id == t;
                          })),
                        i
                          ? i.segmentIndex
                            ? r.u(2)
                            : w(r, i.createSegmentIndex(), 2)
                          : r.return(null))
                      : r.return(null))
                : r.return(i);
            });
          }
          function bp(e, t, n, i) {
            var r = t.width || 0,
              a = t.height || 0,
              o = r / i.Rb,
              s = a / i.rows,
              u = i.Rb * i.rows,
              l = e.i - e.startTime;
            l = e.C || l / u;
            var c = e.startTime,
              d = 0,
              h = 0;
            return (
              1 < u &&
                ((h = Math.floor((n - e.startTime) / l)),
                (c = e.startTime + h * l),
                (d = (h % i.Rb) * o),
                (h = Math.floor(h / i.Rb) * s)),
              (i = !1),
              (n = e.thumbnailSprite) &&
                ((i = !0),
                (s = n.height),
                (d = n.positionX),
                (h = n.positionY),
                (o = n.width)),
              {
                segment: e,
                imageHeight: a,
                imageWidth: r,
                height: s,
                positionX: d,
                positionY: h,
                startTime: c,
                duration: l,
                uris: e.T(),
                startByte: e.qc(),
                endByte: e.oc(),
                width: o,
                sprite: i,
                mimeType: e.mimeType || t.mimeType,
                codecs: e.codecs || t.codecs,
              }
            );
          }
          function wp(e, t) {
            e.l.H(t, "cuechange", function () {
              e.s.remove(
                0,
                Math.max(0, e.h.currentTime - e.g.streaming.bufferBehind)
              );
              for (
                var n = {
                    periodStart: 0,
                    segmentStart: 0,
                    segmentEnd: e.h.duration,
                    vttOffset: 0,
                  },
                  i = [],
                  r = Array.from(t.activeCues || []),
                  a = (r = l(r)).next();
                !a.done;
                a = r.next()
              ) {
                if (1 / 0 === (a = a.value).endTime || a.endTime < a.startTime)
                  a = null;
                else {
                  var o = new Kn(a.startTime, a.endTime, a.text);
                  (o.line = "number" == typeof a.line ? a.line : null),
                    a.lineAlign && (o.lineAlign = a.lineAlign),
                    (o.lineInterpretation = a.snapToLines ? oi : 1),
                    (o.position =
                      "number" == typeof a.position ? a.position : null),
                    a.positionAlign && (o.positionAlign = a.positionAlign),
                    (o.size = a.size),
                    (o.textAlign = a.align),
                    "lr" === a.vertical
                      ? (o.writingMode = "vertical-lr")
                      : "rl" === a.vertical && (o.writingMode = "vertical-rl"),
                    a.region &&
                      ((o.region.id = a.region.id),
                      (o.region.height = a.region.lines),
                      (o.region.heightUnits = 2),
                      (o.region.regionAnchorX = a.region.regionAnchorX),
                      (o.region.regionAnchorY = a.region.regionAnchorY),
                      (o.region.scroll = a.region.scroll),
                      (o.region.viewportAnchorX = a.region.viewportAnchorX),
                      (o.region.viewportAnchorY = a.region.viewportAnchorY),
                      (o.region.viewportAnchorUnits = Qt),
                      (o.region.width = a.region.width),
                      (o.region.widthUnits = Qt)),
                    Yn(o),
                    (a = o);
                }
                a &&
                  ((o = e.g.mediaSource.modifyCueCallback) && o(a, null, n),
                  i.push(a));
              }
              e.s.append(i);
            }),
              (t.mode = document.pictureInPictureElement
                ? "showing"
                : "hidden");
          }
          function xp(e) {
            return Array.from(e.h.textTracks).filter(function (e) {
              return (
                "metadata" != e.kind &&
                "chapters" != e.kind &&
                "Shaka Player TextTrack" != e.label
              );
            });
          }
          function Sp(e) {
            return Array.from(e.h.textTracks).find(function (e) {
              return "Shaka Player TextTrack" == e.label;
            });
          }
          function Tp(e, t) {
            var n;
            return P(function (i) {
              switch (i.g) {
                case 1:
                  return (
                    S(i, 2), w(i, uf(t, e.D, e.g.streaming.retryParameters), 4)
                  );
                case 4:
                  (n = i.h), T(i, 3);
                  break;
                case 2:
                  A(i);
                case 3:
                  if (n) return i.return(n);
                  throw new Me(1, 2, 2011, t);
              }
            });
          }
          function Ap(e, t, n, i) {
            var r, a, o;
            return P(function (s) {
              if (1 == s.g) {
                (r = as), ((a = es([t], i)).method = "GET");
                var u = e.L;
                try {
                  u.g.enabled && Mf(u, a, { ot: jf, su: !0 });
                } catch (e) {
                  X("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", e);
                }
                return w(s, n.request(r, a).promise, 2);
              }
              return (o = s.h), s.return(o.data);
            });
          }
          function kp(e, t, n, i) {
            var r = Vi(n);
            if (r)
              return (
                (n = r()),
                (e = {
                  periodStart: 0,
                  segmentStart: 0,
                  segmentEnd: e.h.duration,
                  vttOffset: 0,
                }),
                (t = Ae(t)),
                (function (e, t) {
                  function n(e) {
                    for (
                      var n = e, i = l(t), r = i.next();
                      !r.done;
                      r = i.next()
                    )
                      (r = r.value).end &&
                        r.start < e &&
                        (n += r.end - r.start);
                    return (
                      (10 > (e = Math.floor(n / 3600)) ? "0" : "") +
                      e +
                      ":" +
                      (10 > (i = Math.floor((n / 60) % 60)) ? "0" : "") +
                      i +
                      ":" +
                      (10 > (r = Math.floor(n % 60)) ? "0" : "") +
                      r +
                      "." +
                      (100 > (n = Math.floor((1e3 * n) % 1e3))
                        ? 10 > n
                          ? "00"
                          : "0"
                        : "") +
                      n
                    );
                  }
                  var i = hf(e);
                  e = "WEBVTT\n\n";
                  for (var r = (i = l(i)).next(); !r.done; r = i.next())
                    (e +=
                      n((r = r.value).startTime) +
                      " --\x3e " +
                      n(r.endTime) +
                      (function (e) {
                        var t = [];
                        switch (e.textAlign) {
                          case "left":
                            t.push("align:left");
                            break;
                          case "right":
                            t.push("align:right");
                            break;
                          case ei:
                            t.push("align:middle");
                            break;
                          case "start":
                            t.push("align:start");
                            break;
                          case "end":
                            t.push("align:end");
                        }
                        switch (e.writingMode) {
                          case "vertical-lr":
                            t.push("vertical:lr");
                            break;
                          case "vertical-rl":
                            t.push("vertical:rl");
                        }
                        return t.length ? " " + t.join(" ") : "";
                      })(r) +
                      "\n"),
                      (e += r.payload + "\n\n");
                  return e;
                })((t = n.parseMedia(t, e, null, [])), i)
              );
            throw new Me(2, 2, 2014, n);
          }
          function Ip(e) {
            var t = $u();
            return (
              (t.streaming.failureCallback = function (t) {
                if (e.R()) {
                  var n = null;
                  1001 == t.code || 1002 == t.code
                    ? ((n = 1), e.g.streaming.lowLatencyMode && (n = 0.1))
                    : 1003 == t.code && (n = 0.1),
                    null != n && ((t.severity = 1), e.hf(n));
                }
              }),
              (t.textDisplayFactory = function () {
                return !e.Nd || (Xe() && !document.fullscreenEnabled)
                  ? "addTextTrack" in e.h
                    ? new gf(e.h, "Shaka Player TextTrack")
                    : new yf()
                  : new bf(e.h, e.Nd);
              }),
              t
            );
          }
          function Cp(e) {
            var t = e.Zf();
            if (e.A && e.O && e.F) {
              if (0 == e.g.streaming.rebufferingGoal) {
                var n = e.K;
                (n.j = !1), Ad(n);
              } else ((n = e.K).j = t), Ad(n);
              if (
                (e.L &&
                  ((n = e.L),
                  t || n.s || (n.s = !0),
                  n.s && t && (n.B = !0),
                  (n.D = t)),
                Ep(e),
                (n = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts),
                e.g.streaming.liveSync.dynamicTargetLatency.enabled &&
                  t &&
                  e.jd < n)
              ) {
                n = e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
                var i = e.g.streaming.liveSync.targetLatencyTolerance,
                  r =
                    e.g.streaming.liveSync.dynamicTargetLatency
                      .rebufferIncrement;
                e.W && (e.W = Math.min(e.W + ++e.jd * r, n - i));
              }
            }
            (t = new Map().set("buffering", t)),
              e.dispatchEvent(ep("buffering", t));
          }
          function Mp(e, t) {
            e.ab.qb(),
              e.ab.H(e.h, "timeupdate", function () {
                var n = e.h.currentTime,
                  i = e.La(),
                  r = e.R() ? e.g.streaming.safeSeekOffset : 0;
                0 < t
                  ? Math.floor(n) >= Math.floor(i.end) && e.Hc()
                  : Math.floor(n) <= Math.floor(i.start + r) && e.Hc();
              });
          }
          function Ep(e) {
            if (e.A && e.O) {
              var t = e.A.g,
                n = "playing";
              e.O.g == Ql
                ? (n = "buffering")
                : e.vc()
                ? (n = "ended")
                : e.h.paused && (n = "paused");
              var i = n;
              if (null == t.g)
                (t.g = { timestamp: Date.now() / 1e3, state: i, duration: 0 }),
                  (t = !0);
              else {
                var r = Date.now() / 1e3;
                (t.g.duration = r - t.g.timestamp),
                  t.g.state == i
                    ? (t = !1)
                    : (t.h.push(t.g),
                      (t.g = { timestamp: r, state: i, duration: 0 }),
                      (t = !0));
              }
              t &&
                ((n = new Map().set("newstate", n)),
                e.dispatchEvent(ep("statechanged", n)));
            }
          }
          function Dp(e) {
            var t = e.h.playbackRate,
              n = e.R();
            if (e.g.streaming.vodDynamicPlaybackRate && !n) {
              var i = e.g.streaming.vodDynamicPlaybackRateLowBufferRate,
                r = e.Rf();
              r <= e.g.streaming.vodDynamicPlaybackRateBufferRatio
                ? t != i && e.gd(i, !1)
                : 1 == r && t !== e.K.Wb() && e.Hc();
            }
            if (
              n &&
              ((n = e.La()),
              Number.isFinite(n.end) &&
                !(e.h.currentTime < n.start || e.h.paused))
            ) {
              (i = e.g.streaming.liveSync.targetLatencyTolerance),
                (r = e.g.streaming.liveSync.dynamicTargetLatency.enabled);
              var a =
                e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
              if (e.g.streaming.liveSync && e.g.streaming.liveSync.enabled)
                var o = e.g.streaming.liveSync.targetLatency,
                  s = o + i,
                  u = Math.max(0, o - i),
                  l = e.g.streaming.liveSync.maxPlaybackRate,
                  c = e.g.streaming.liveSync.minPlaybackRate;
              else
                e.i &&
                  e.i.serviceDescription &&
                  ((o = e.i.serviceDescription.targetLatency),
                  null != e.i.serviceDescription.targetLatency
                    ? (s = e.i.serviceDescription.targetLatency + i)
                    : null != e.i.serviceDescription.maxLatency &&
                      (s = e.i.serviceDescription.maxLatency),
                  null != e.i.serviceDescription.targetLatency
                    ? (u = Math.max(
                        0,
                        e.i.serviceDescription.targetLatency - i
                      ))
                    : null != e.i.serviceDescription.minLatency &&
                      (u = e.i.serviceDescription.minLatency),
                  (l =
                    e.i.serviceDescription.maxPlaybackRate ||
                    e.g.streaming.liveSync.maxPlaybackRate),
                  (c =
                    e.i.serviceDescription.minPlaybackRate ||
                    e.g.streaming.liveSync.minPlaybackRate));
              e.W || "number" != typeof o || (e.W = o);
              var d = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
              r &&
                e.$a &&
                null !== e.W &&
                "number" == typeof o &&
                e.jd < d &&
                Date.now() - e.$a > 1e3 * a &&
                ((a = e.g.streaming.liveSync.dynamicTargetLatency.minLatency),
                (e.W = Math.max(e.W - (o - a) / 2, a + i)),
                (e.$a = Date.now())),
                r && null !== e.W && ((s = e.W + i), (u = e.W - i)),
                (o = n.end - e.h.currentTime),
                (i = 0),
                e.m == ng &&
                  0 < (r = e.h.buffered).length &&
                  ((i = r.end(r.length - 1)), (i = Math.max(l, i - n.end))),
                (n = e.g.streaming.liveSync.panicMode),
                (r = 1e3 * e.g.streaming.liveSync.panicThreshold),
                (a = Date.now() - e.O.h),
                n && !c && (c = e.g.streaming.liveSync.minPlaybackRate),
                n && c && a <= r
                  ? t != c && e.gd(c, !1)
                  : null != s && l && o - i > s
                  ? (t != l && e.gd(l, !1), (e.$a = null))
                  : null != u && c && o - i < u
                  ? (t != c && e.gd(c, !1), (e.$a = null))
                  : t !== e.K.Wb() && (e.Hc(), (e.$a = Date.now()));
            }
          }
          function Pp(e) {
            if (e.h) {
              var t = function (t, n) {
                  var i = void 0 === i ? Number.EPSILON : i;
                  if (t === n) i = !0;
                  else {
                    var r = Math.abs(t - n);
                    i =
                      r <= i ||
                      (i !== Number.EPSILON &&
                        Math.abs(r - i) <= Number.EPSILON);
                  }
                  return !!((i || n > t) && e.he < t) && ((e.he = t), !0);
                },
                n = e.La();
              if (
                ((n = 0 < (n = n.end - n.start) ? e.h.currentTime / n : 0),
                !isNaN(n))
              ) {
                if (t(0, (n *= 100))) var i = ep("started");
                else
                  t(25, n)
                    ? (i = ep("firstquartile"))
                    : t(50, n)
                    ? (i = ep("midpoint"))
                    : t(75, n)
                    ? (i = ep("thirdquartile"))
                    : (t(100, n) && (i = ep("complete")),
                      e.g &&
                        1 / 0 != e.g.playRangeEnd &&
                        e.vc() &&
                        e.h.pause());
                i && e.dispatchEvent(i);
              }
            }
          }
          function Lp(e) {
            try {
              Kc(e.Md, e.i);
            } catch (t) {
              return qp(e, t), !1;
            }
            var t = Ar(e.i.variants);
            return (
              (t = e.Y.create(t)), e.o.setVariants(Array.from(t.values())), !0
            );
          }
          function Rp(e, t, n, i, r) {
            var a;
            (t = void 0 === t || t),
              (n = void 0 === n ? 0 : n),
              (i = void 0 !== i && i),
              (r = void 0 === r || r),
              (a = Lp(e) ? e.o.chooseVariant() : null) && Np(e, a, r, t, n, i);
          }
          function Np(e, t, n, i, r, a) {
            a = void 0 !== a && a;
            var o = e.j.l;
            if (t == o) i && rh(e.j, t, i, r, !0);
            else {
              var s = e.A.h;
              if (
                (s.h != t &&
                  ((s.h = t),
                  s.g.push({
                    timestamp: Date.now() / 1e3,
                    id: t.id,
                    type: "variant",
                    fromAdaptation: n,
                    bandwidth: t.bandwidth,
                  })),
                rh(e.j, t, i, r, a, n),
                (i = null),
                o && (i = vr(o)),
                ((o = vr(t)).active = !0),
                e.S && ((r = e.S), (t = t.video)))
              ) {
                switch (
                  (t.dependencyStream && (t = t.dependencyStream),
                  (a = 0),
                  (s = -1),
                  t.mimeType)
                ) {
                  case "video/webm":
                    a = 1;
                    break;
                  case "video/mp4":
                    a = 2;
                }
                switch (e.Tf()) {
                  case "DASH":
                    s = 1;
                    break;
                  case "HLS":
                    s = 0;
                }
                r.g &&
                  (r.g.setLevelSwitching(t.id, !0),
                  r.g.setContainerFormat(a),
                  r.j || r.g.setStreamingFormat(s));
              }
              n
                ? Jp(
                    e,
                    (n = ep(
                      "adaptation",
                      (n = new Map().set("oldTrack", i).set("newTrack", o))
                    ))
                  )
                : jp(e, i, o),
                Op(e, i, o);
            }
          }
          function _p(e, t) {
            var n = Array.from(e.h.audioTracks).find(function (e) {
              return e.enabled;
            });
            (t.enabled = !0),
              n &&
                (t.id !== n.id && (n.enabled = !1),
                jp(e, (n = xr(n)), (t = xr(t))),
                Op(e, n, t));
          }
          function Up(e) {
            Jp(e, ep("trackschanged")), Bp(e);
          }
          function jp(e, t, n) {
            Jp(
              e,
              (t = ep(
                "variantchanged",
                (t = new Map().set("oldTrack", t).set("newTrack", n))
              ))
            );
          }
          function Op(e, t, n) {
            var i = !1;
            (t && t.audioId == n.audioId && t.audioGroupId == n.audioGroupId) ||
              (i = !0),
              i && Bp(e);
          }
          function Bp(e) {
            Jp(e, ep("audiotrackschanged"));
          }
          function Fp(e) {
            Jp(e, ep("textchanged"));
          }
          function Hp(e) {
            Jp(e, ep("texttrackvisibility"));
          }
          function Vp(e) {
            e.g.abr.enabled || Gp(e),
              Jp(
                e,
                ep(
                  "abrstatuschanged",
                  new Map().set("newStatus", e.g.abr.enabled)
                )
              );
          }
          function zp(e) {
            var t = e.Yb().find(function (e) {
              return e.active;
            });
            t && e.s && e.s.setTextLanguage && e.s.setTextLanguage(t.language);
          }
          function Gp(e, t) {
            if (((t = void 0 === t || t), e.m == tg)) {
              e.Td.stop();
              for (var n = l(e.i.variants), i = n.next(); !i.done; i = n.next())
                i.value.disabledUntilTime = 0;
              t && Lp(e);
            }
          }
          function qp(e, t) {
            var n, i, r, a;
            return P(function (o) {
              switch (o.g) {
                case 1:
                  if (e.m == Qp) return o.return();
                  if (
                    (1 === t.severity && e.A.K++,
                    (n = !0),
                    !(e.xa && e.i && e.j) ||
                      (3016 != t.code &&
                        3014 != t.code &&
                        3015 != t.code &&
                        3018 != t.code))
                  ) {
                    o.u(2);
                    break;
                  }
                  return Xe() && 3016 == t.code
                    ? o.return()
                    : (S(o, 3), w(o, Sh(e.j), 5));
                case 5:
                  (i = o.h),
                    (n = !i),
                    i && ((r = ep("mediasourcerecovered")), e.dispatchEvent(r)),
                    T(o, 2);
                  break;
                case 3:
                  A(o), (n = !0);
                case 2:
                  if (!n) return o.return();
                  2 === t.severity && Gp(e, !1),
                    (a = ep("error", new Map().set("detail", t))),
                    e.dispatchEvent(a),
                    a.defaultPrevented && (t.handled = !0),
                    x(o);
              }
            });
          }
          function Kp(e, t, n, i) {
            (i = void 0 === i ? e : i),
              (e = new Map().set("detail", {
                schemeIdUri: n.schemeIdUri,
                value: n.value,
                startTime: n.startTime,
                endTime: n.endTime,
                id: n.id,
                timescale: n.timescale,
                eventElement: n.eventElement,
                eventNode: n.eventNode,
              })),
              i.dispatchEvent(ep(t, e));
          }
          function Wp(e, t, n, i) {
            (i = void 0 !== i && i),
              (t = new Map()
                .set("mediaQuality", {
                  bandwidth: t.bandwidth,
                  audioSamplingRate: t.audioSamplingRate,
                  codecs: t.codecs,
                  contentType: t.contentType,
                  frameRate: t.frameRate,
                  height: t.height,
                  mimeType: t.mimeType,
                  channelsCount: t.channelsCount,
                  pixelAspectRatio: t.pixelAspectRatio,
                  width: t.width,
                  label: t.label,
                  roles: t.roles,
                  language: t.language,
                })
                .set("position", n)),
              e.dispatchEvent(
                ep(i ? "audiotrackchanged" : "mediaqualitychanged", t)
              );
          }
          function Xp(e, t) {
            if (((t = void 0 === t || t), !e.h.error))
              return t ? new Me(2, 3, 3016) : null;
            var n = e.h.error.code;
            return t || 1 != n
              ? ((t = e.h.error.msExtendedCode) &&
                  (0 > t && (t += Math.pow(2, 32)), (t = t.toString(16))),
                new Me(2, 3, 3016, n, t, e.h.error.message))
              : null;
          }
          function Yp(e, t, n) {
            0 < t && (e.R() || e.Bg(t)),
              n < (t = e.getDuration()) && (e.R() || e.nb(n));
          }
          function Jp(e, t) {
            P(function (n) {
              if (1 == n.g) return w(n, Promise.resolve(), 2);
              e.m != Qp && e.dispatchEvent(t), x(n);
            });
          }
          function $p(e) {
            for (
              var t = new Set(), n = (e = l(e)).next();
              !n.done;
              n = e.next()
            )
              (n = n.value).language ? t.add(tr(n.language)) : t.add("und");
            return t;
          }
          function Zp(e) {
            for (
              var t = new Map(), n = new Map(), i = (e = l(e)).next();
              !i.done;
              i = e.next()
            ) {
              var r = "und",
                a = [];
              (i = i.value).language && (r = tr(i.language)),
                ((a = "variant" == i.type ? i.audioRoles : i.roles) &&
                  a.length) ||
                  (a = [""]),
                t.has(r) || t.set(r, new Set());
              for (var o = (a = l(a)).next(); !o.done; o = a.next())
                (o = o.value),
                  t.get(r).add(o),
                  i.label &&
                    (n.has(r) || n.set(r, new Map()), n.get(r).set(o, i.label));
            }
            var s = [];
            return (
              t.forEach(function (e, t) {
                for (var i = (e = l(e)).next(); !i.done; i = e.next()) {
                  i = i.value;
                  var r = null;
                  n.has(t) && n.get(t).has(i) && (r = n.get(t).get(i)),
                    s.push({ language: t, role: i, label: r });
                }
              }),
              s
            );
          }
          (Jf.prototype.release = function () {
            0 < this.h.length ? this.h.shift()() : (this.g = null);
          }),
            m(Zf, Yo),
            ((i = Zf.prototype).destroy = function () {
              var e,
                t = this;
              return P(function (n) {
                switch (n.g) {
                  case 1:
                    return t.m == Qp
                      ? n.return()
                      : (Qf(t), (e = t.detach()), (t.m = Qp), w(n, e, 2));
                  case 2:
                    return w(n, t.Mf(), 3);
                  case 3:
                    if (
                      (t.ce && (t.ce.release(), (t.ce = null)),
                      t.Wc && (t.Wc.release(), (t.Wc = null)),
                      t.l && (t.l.release(), (t.l = null)),
                      t.ab && (t.ab.release(), (t.ab = null)),
                      t.rc && (t.rc.release(), (t.rc = null)),
                      (t.Ma = null),
                      (t.g = null),
                      (t.A = null),
                      (t.Nd = null),
                      (t.L = null),
                      (t.ga = null),
                      !t.D)
                    ) {
                      n.u(4);
                      break;
                    }
                    return w(n, t.D.destroy(), 5);
                  case 5:
                    t.D = null;
                  case 4:
                    t.o && (t.o.release(), (t.o = null)),
                      Yo.prototype.release.call(t),
                      x(n);
                }
              });
            }),
            (i.Cb = function (e, t) {
              t = void 0 === t || t;
              var n,
                i,
                r,
                a = this;
              return P(function (o) {
                switch (o.g) {
                  case 1:
                    if (a.m == Qp) throw new Me(2, 7, 7e3);
                    if (((n = a.h && a.h == e), !a.h || a.h == e)) {
                      o.u(2);
                      break;
                    }
                    return w(o, a.detach(), 2);
                  case 2:
                    return w(o, np(a, "attach"), 4);
                  case 4:
                    if (o.h) return o.return();
                    if (
                      (S(o, 5, 6),
                      n ||
                        (tp(a, "attach"),
                        (i = function () {
                          var e = Xp(a, !1);
                          e && qp(a, e);
                        }),
                        a.Wc.H(e, "error", i),
                        (a.h = e),
                        a.L && a.L.setMediaElement(e)),
                      !t || !Oe() || a.J)
                    ) {
                      o.u(6);
                      break;
                    }
                    return w(o, up(a), 6);
                  case 6:
                    k(o), a.da.release(), I(o, 0);
                    break;
                  case 5:
                    return (r = A(o)), w(o, a.detach(), 10);
                  case 10:
                    throw r;
                }
              });
            }),
            (i.Sg = function (e) {
              this.Bf = e;
            }),
            (i.detach = function (e) {
              e = void 0 !== e && e;
              var t = this;
              return P(function (n) {
                if (1 == n.g) {
                  if (t.m == Qp) throw new Me(2, 7, 7e3);
                  return w(n, t.hd(!1, e), 2);
                }
                if (3 != n.g) return w(n, np(t, "detach"), 3);
                if (n.h) return n.return();
                try {
                  t.h && (t.Wc.qb(), (t.h = null)),
                    tp(t, "detach"),
                    t.B && !e && t.B.release();
                } finally {
                  t.da.release();
                }
                x(n);
              });
            }),
            (i.hd = function (t, n) {
              (t = void 0 === t || t), (n = void 0 !== n && n);
              var i,
                r,
                a,
                o,
                s,
                u,
                c,
                d,
                h,
                f,
                p = this;
              return P(function (g) {
                switch (g.g) {
                  case 1:
                    return p.m != Qp && (p.m = eg), w(g, np(p, "unload"), 2);
                  case 2:
                    return g.h
                      ? g.return()
                      : ((g.l = 0),
                        (g.j = 3),
                        (p.xa = !1),
                        tp(p, "unload"),
                        Qf(p),
                        (i = p.Yc.map(function (e) {
                          return e();
                        })),
                        (p.Yc = []),
                        w(g, Promise.all(i), 5));
                  case 5:
                    if (
                      (p.dispatchEvent(ep("unloading")),
                      p.Vc && (p.Vc.release(), (p.Vc = null)),
                      p.Aa && (p.Aa.release(), (p.Aa = null)),
                      p.Oa && (p.Oa.release(), (p.Oa = null)),
                      p.h && (p.l.qb(), p.ab.qb()),
                      p.Td.stop(),
                      p.Ya && (p.Ya.release(), (p.Ya = null)),
                      p.pa && (p.pa.stop(), (p.pa = null)),
                      !p.G)
                    ) {
                      g.u(6);
                      break;
                    }
                    return w(g, p.G.stop(), 7);
                  case 7:
                    (p.G = null), (p.nc = null);
                  case 6:
                    if (!p.o) {
                      g.u(8);
                      break;
                    }
                    return w(g, p.o.stop(), 8);
                  case 8:
                    if (!p.j) {
                      g.u(10);
                      break;
                    }
                    return w(g, p.j.destroy(), 11);
                  case 11:
                    p.j = null;
                  case 10:
                    if (
                      (p.K && (p.K.release(), (p.K = null)),
                      p.F && (p.F.release(), (p.F = null)),
                      "webkit" !== e.shakaMediaKeysPolyfill || !p.C)
                    ) {
                      g.u(12);
                      break;
                    }
                    return w(g, p.C.destroy(), 13);
                  case 13:
                    p.C = null;
                  case 12:
                    if (!p.J) {
                      g.u(14);
                      break;
                    }
                    return w(g, p.J.destroy(), 15);
                  case 15:
                    p.J = null;
                  case 14:
                    if (
                      (p.B && !n && p.B.onAssetUnload(),
                      p.fa && !n && (p.fa.destroy(), (p.fa = null)),
                      n || p.je.stop(),
                      p.L &&
                        (function (e) {
                          (e.s = !1),
                            (e.D = !0),
                            (e.B = !1),
                            (e.l = !1),
                            (e.m = 0),
                            (e.o = 0),
                            (e.A = 0),
                            (e.F = !1),
                            (e.j = null),
                            e.C.qb();
                        })(p.L),
                      p.ga && (p.ga.g = null),
                      !p.s)
                    ) {
                      g.u(16);
                      break;
                    }
                    return w(g, p.s.destroy(), 17);
                  case 17:
                    p.s = null;
                  case 16:
                    if (
                      (p.h &&
                        (Jc(p.h),
                        p.h.src && (p.h.removeAttribute("src"), p.h.load())),
                      !p.C)
                    ) {
                      g.u(18);
                      break;
                    }
                    return w(g, p.C.destroy(), 19);
                  case 19:
                    p.C = null;
                  case 18:
                    if (
                      (p.za &&
                        p.X != p.za.qd() &&
                        (p.za.s || p.za.destroy(), (p.za = null)),
                      (p.X = null),
                      (p.mc = null),
                      (p.O = null),
                      p.i)
                    ) {
                      for (
                        r = l(p.i.variants), a = r.next();
                        !a.done;
                        a = r.next()
                      )
                        for (
                          o = a.value, s = l([o.audio, o.video]), u = s.next();
                          !u.done;
                          u = s.next()
                        )
                          (c = u.value) &&
                            c.segmentIndex &&
                            c.segmentIndex.release();
                      for (
                        d = l(p.i.textStreams), h = d.next();
                        !h.done;
                        h = d.next()
                      )
                        (f = h.value).segmentIndex && f.segmentIndex.release();
                    }
                    p.g &&
                      p.g.streaming.clearDecodingCache &&
                      (Dr.clear(), _e.clear()),
                      (p.i = null),
                      (p.A = new Mh()),
                      (p.ee = null),
                      (p.$a = null),
                      (p.W = null),
                      (p.jd = -1),
                      (p.ae = []),
                      (p.dd = []),
                      (p.he = -1),
                      p.D && p.D.Jf(),
                      Cp(p);
                  case 3:
                    k(g), p.da.release(), I(g, 4);
                    break;
                  case 4:
                    if (t && Oe() && !p.J && p.h) return w(g, up(p), 0);
                    g.u(0);
                }
              });
            }),
            (i.Fi = function (e) {
              this.ca = e;
            }),
            (i.load = function (t, n, i) {
              n = void 0 === n ? null : n;
              var r,
                a,
                o,
                s,
                u,
                c,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b = this;
              return P(function (T) {
                switch (T.g) {
                  case 1:
                    if (b.m == Qp) throw new Me(2, 7, 7e3);
                    if (((r = null), (a = ""), t instanceof Eh)) {
                      if (t.s) throw new Me(2, 7, 7006);
                      a = (r = t).qd() || "";
                    } else a = t || "";
                    return w(T, $f(b.da, "load"), 2);
                  case 2:
                    if ((b.da.release(), !b.h)) throw new Me(2, 7, 7002);
                    if (!b.X) {
                      T.u(3);
                      break;
                    }
                    return (b.X = a), w(T, b.hd(!1), 3);
                  case 3:
                    if (
                      ((o = ++b.ge),
                      (s = function () {
                        return P(function (e) {
                          if (1 == e.g)
                            return b.ge == o
                              ? e.u(0)
                              : r
                              ? w(e, r.destroy(), 3)
                              : e.u(3);
                          throw new Me(2, 7, 7e3);
                        });
                      }),
                      (u = function (e, t) {
                        return P(function (n) {
                          switch (n.g) {
                            case 1:
                              return (n.l = 0), (n.j = 2), w(n, $f(b.da, t), 4);
                            case 4:
                              return w(n, s(), 5);
                            case 5:
                              return w(n, e(), 6);
                            case 6:
                              return w(n, s(), 7);
                            case 7:
                              r && b.g && (r.g = b.g);
                            case 2:
                              k(n), b.da.release(), I(n, 0);
                          }
                        });
                      }),
                      S(T, 5, 6),
                      null == n && r && (n = r.getStartTime()),
                      (b.ca = n),
                      (b.xa = !1),
                      b.dispatchEvent(ep("loading")),
                      r)
                    ) {
                      (i = r.ca), T.u(8);
                      break;
                    }
                    if (i) {
                      T.u(8);
                      break;
                    }
                    return w(
                      T,
                      u(function () {
                        return P(function (e) {
                          if (1 == e.g) return w(e, op(b, a), 2);
                          (i = e.h), x(e);
                        });
                      }, "guessMimeType_"),
                      8
                    );
                  case 8:
                    if (((c = !!r), r)) {
                      Ph(r, b), (b.A = r.getStats()), T.u(11);
                      break;
                    }
                    return w(T, rp(b, a, n, i, !0), 12);
                  case 12:
                    (r = T.h)
                      ? ((r.A = !1),
                        Ph(r, b),
                        (b.A = r.getStats()),
                        r.start(),
                        r.m.catch(function () {}))
                      : (b.A = new Mh());
                  case 11:
                    return (
                      (d = !r),
                      (h = Date.now() / 1e3),
                      (b.A = r ? r.getStats() : new Mh()),
                      (b.X = a),
                      (b.mc = i || null),
                      Cp(b),
                      (f = function () {
                        var e = b.hb(),
                          t = { start: 0, end: 0 };
                        if (e.total.length) {
                          t.start = 1 / 0;
                          for (
                            var n = (e = l(e.total)).next();
                            !n.done;
                            n = e.next()
                          )
                            (n = n.value).start < t.start &&
                              (t.start = n.start),
                              n.end > t.end && (t.end = n.end);
                        }
                        return t;
                      }),
                      (b.Aa = new zd(f)),
                      d
                        ? w(
                            T,
                            u(function () {
                              return P(function (e) {
                                return w(
                                  e,
                                  (function (e, t) {
                                    var n, i, r, a, o;
                                    return P(function (s) {
                                      return 1 == s.g
                                        ? ((n = Rt),
                                          (i = Date.now() / 1e3),
                                          (r = !0),
                                          (e.C = e.od({
                                            cc: e.D,
                                            onError: function (t) {
                                              qp(e, t);
                                            },
                                            kg: function () {},
                                            onExpirationUpdated: function () {
                                              var t = ep("expirationupdated");
                                              e.dispatchEvent(t);
                                            },
                                            onEvent: function (t) {
                                              e.dispatchEvent(t),
                                                "drmsessionupdate" == t.type &&
                                                  r &&
                                                  ((r = !1),
                                                  (e.A.j =
                                                    Date.now() / 1e3 - i));
                                            },
                                          })),
                                          e.C.configure(e.g.drm),
                                          (a = {
                                            id: 0,
                                            language: "und",
                                            disabledUntilTime: 0,
                                            primary: !1,
                                            audio: null,
                                            video: null,
                                            bandwidth: 100,
                                            allowedByApplication: !0,
                                            allowedByKeySystem: !0,
                                            decodingInfos: [],
                                          }),
                                          (o = {
                                            id: 0,
                                            originalId: null,
                                            groupId: null,
                                            createSegmentIndex: function () {
                                              return Promise.resolve();
                                            },
                                            segmentIndex: null,
                                            mimeType: t ? Ni(t) : "",
                                            codecs: t ? _i(t) : "",
                                            encrypted: !0,
                                            drmInfos: [],
                                            keyIds: new Set(),
                                            language: "und",
                                            originalLanguage: null,
                                            label: null,
                                            type: n.ja,
                                            primary: !1,
                                            trickModeVideo: null,
                                            dependencyStream: null,
                                            emsgSchemeIdUris: null,
                                            roles: [],
                                            forced: !1,
                                            channelsCount: null,
                                            audioSamplingRate: null,
                                            spatialAudio: !1,
                                            closedCaptions: null,
                                            accessibilityPurpose: null,
                                            external: !1,
                                            fastSwitching: !1,
                                            fullMimeTypes: new Set(),
                                            isAudioMuxedInVideo: !1,
                                            baseOriginalId: null,
                                          }).fullMimeTypes.add(
                                            Ci(o.mimeType, o.codecs)
                                          ),
                                          t.startsWith("audio/")
                                            ? ((o.type = n.P), (a.audio = o))
                                            : (a.video = o),
                                          (e.C.ca = !0),
                                          w(s, Ul(e.C, [a], []), 2))
                                        : w(s, e.C.Cb(e.h), 0);
                                    });
                                  })(b, i),
                                  0
                                );
                              });
                            }, "initializeSrcEqualsDrmInner_"),
                            23
                          )
                        : ((b.Oa = new zd(f)),
                          w(
                            T,
                            u(function () {
                              return P(function (e) {
                                if (1 == e.g)
                                  return w(e, Promise.race([r.oa, r.m]), 2);
                                b.nc = r.F;
                                var t = r;
                                (t.pa = !0), (b.G = t.l), (b.i = r.Oe()), x(e);
                              });
                            }, "waitForFinish"),
                            15
                          ))
                    );
                  case 15:
                    if (b.J) {
                      T.u(16);
                      break;
                    }
                    return w(
                      T,
                      u(function () {
                        return P(function (e) {
                          return w(e, up(b), 0);
                        });
                      }, "initializeMediaSourceEngineInner_"),
                      16
                    );
                  case 16:
                    return (
                      b.i &&
                        b.i.textStreams.length &&
                        (b.s.enableTextDisplayer
                          ? b.s.enableTextDisplayer()
                          : te(
                              "Text displayer w/ enableTextDisplayer",
                              'Text displayer should have a "enableTextDisplayer" method!'
                            )),
                      w(
                        T,
                        u(function () {
                          return P(function (e) {
                            return w(e, r.m, 0);
                          });
                        }, "waitForFinish"),
                        18
                      )
                    );
                  case 18:
                    if (
                      ((b.g = r.getConfiguration()),
                      (b.Md = r.D),
                      b.G &&
                        b.G.setMediaElement &&
                        b.h &&
                        b.G.setMediaElement(b.h),
                      (b.Vc = (function (e) {
                        return (e.xa = !0), e.G;
                      })(r)),
                      (b.Uc = r.Oa),
                      (p = r.o) && (b.Y = p),
                      c &&
                        b.h &&
                        "AUDIO" === b.h.nodeName &&
                        ((function (e) {
                          for (
                            var t = l(e.i.variants), n = t.next();
                            !n.done;
                            n = t.next()
                          )
                            (n = n.value).video &&
                              (n.video.closeSegmentIndex(), (n.video = null)),
                              (n.bandwidth =
                                n.audio && n.audio.bandwidth
                                  ? n.audio.bandwidth
                                  : 0);
                          e.i.variants = e.i.variants.filter(function (e) {
                            return e.audio;
                          });
                        })(b),
                        b.configure("manifest.disableVideo", !0)),
                      r.i)
                    ) {
                      T.u(19);
                      break;
                    }
                    return w(
                      T,
                      u(function () {
                        return P(function (e) {
                          return w(e, Nh(r, b.h), 0);
                        });
                      }, "drmEngine_.init"),
                      19
                    );
                  case 19:
                    return (
                      (b.C = (function (e) {
                        return (e.la = !0), e.i;
                      })(r)),
                      w(
                        T,
                        u(function () {
                          return P(function (e) {
                            return w(e, b.C.Cb(b.h), 0);
                          });
                        }, "drmEngine_.attach"),
                        21
                      )
                    );
                  case 21:
                    return (
                      !(g = r.C) ||
                        (b.Ma && b.Ma == g) ||
                        ((b.o = (function (e) {
                          return (e.fa = !0), e.j;
                        })(r)),
                        (b.Ma = r.C),
                        "function" != typeof b.o.setMediaElement &&
                          (te(
                            "AbrManager w/o setMediaElement",
                            "Please use an AbrManager with setMediaElement function."
                          ),
                          (b.o.setMediaElement = function () {})),
                        "function" != typeof b.o.setCmsdManager &&
                          (te(
                            "AbrManager w/o setCmsdManager",
                            "Please use an AbrManager with setCmsdManager function."
                          ),
                          (b.o.setCmsdManager = function () {})),
                        "function" != typeof b.o.trySuggestStreams &&
                          (te(
                            "AbrManager w/o trySuggestStreams",
                            "Please use an AbrManager with trySuggestStreams function."
                          ),
                          (b.o.trySuggestStreams = function () {}))),
                      (m = (function (e) {
                        return (e.Aa = !0), e.O;
                      })(r)),
                      (v = r.K),
                      w(
                        T,
                        u(function () {
                          return P(function (e) {
                            return w(
                              e,
                              (function (e, t, n, i) {
                                var r,
                                  a,
                                  o,
                                  s,
                                  u,
                                  c,
                                  d,
                                  h,
                                  f,
                                  p,
                                  g,
                                  m,
                                  v,
                                  y,
                                  b,
                                  S,
                                  T,
                                  A,
                                  k,
                                  I,
                                  C,
                                  M,
                                  E,
                                  D,
                                  L;
                                return P(function (R) {
                                  switch (R.g) {
                                    case 1:
                                      for (
                                        tp(e, "load"),
                                          r = e.h,
                                          e.K = new Td({
                                            ud: function () {
                                              return r.playbackRate;
                                            },
                                            Wb: function () {
                                              return r.defaultPlaybackRate;
                                            },
                                            nf: function (e) {
                                              r.playbackRate = e;
                                            },
                                            fg: function (e) {
                                              r.currentTime += e;
                                            },
                                          }),
                                          lp(e, r, t),
                                          a = !1,
                                          o = l(e.i.variants),
                                          s = o.next();
                                        !s.done;
                                        s = o.next()
                                      )
                                        (u = s.value),
                                          (c =
                                            u.video &&
                                            u.video.dependencyStream) &&
                                            (a = Bt(c));
                                      !(function (e, t, n) {
                                        n || t.lcevc.enabled
                                          ? (Qf(e),
                                            null == e.S &&
                                              ((e.S = new Ut(
                                                e.h,
                                                e.Bf,
                                                t.lcevc,
                                                n
                                              )),
                                              e.J && (e.J.K = e.S)))
                                          : Qf(e);
                                      })(e, e.g, a),
                                        (e.tc = e.g.preferredTextLanguage),
                                        (e.bd = e.g.preferredTextRole),
                                        (e.$c = e.g.preferForcedSubs),
                                        Yp(
                                          e.i.presentationTimeline,
                                          e.g.playRangeStart,
                                          e.g.playRangeEnd
                                        ),
                                        e.o.init(function (t, n, i) {
                                          e.i &&
                                            e.j &&
                                            t != e.j.l &&
                                            Np(
                                              e,
                                              t,
                                              !0,
                                              void 0 !== n && n,
                                              void 0 === i ? 0 : i
                                            );
                                        }),
                                        e.o.setMediaElement(r),
                                        e.o.setCmsdManager(e.ga),
                                        (e.j = (function (e) {
                                          return new nh(e.i, {
                                            pc: function () {
                                              return e.F ? e.F.kd() : 0;
                                            },
                                            getBandwidthEstimate: function () {
                                              return e.o.getBandwidthEstimate();
                                            },
                                            Ra: function () {
                                              return e.Ra();
                                            },
                                            video: e.h,
                                            U: e.J,
                                            cc: e.D,
                                            onError: function (t) {
                                              return qp(e, t);
                                            },
                                            onEvent: function (t) {
                                              return e.dispatchEvent(t);
                                            },
                                            Jd: function (t, n, i) {
                                              var r = t.startTime;
                                              if (
                                                ((t = t.endTime),
                                                (n = n.type) != Lt)
                                              ) {
                                                if (e.F) {
                                                  e.F.hg();
                                                  var a = rd(e.J, n);
                                                  !e.R() &&
                                                    e.h.paused &&
                                                    !e.h.seeking &&
                                                    null != a &&
                                                    0 < a &&
                                                    e.F.kd() < a &&
                                                    e.F.le(a);
                                                }
                                                gp(e);
                                              }
                                              (i = new Map()
                                                .set("start", r)
                                                .set("end", t)
                                                .set("contentType", n)
                                                .set("isMuxed", i)),
                                                e.dispatchEvent(
                                                  ep("segmentappended", i)
                                                );
                                            },
                                            bi: function (t, n) {
                                              (n = n.We) &&
                                                e.Uc &&
                                                (function (e, t, n) {
                                                  var i = (function (e, t) {
                                                    var n = e.g.get(t);
                                                    return (
                                                      n ||
                                                        ((n = {
                                                          ed: [],
                                                          we: null,
                                                          contentType: t,
                                                        }),
                                                        e.g.set(t, n)),
                                                      n
                                                    );
                                                  })(e, t.contentType);
                                                  !(function (e, t) {
                                                    if (
                                                      (e =
                                                        e.h()[t.contentType]) &&
                                                      0 < e.length
                                                    ) {
                                                      var n = e[0].start,
                                                        i = e[e.length - 1].end,
                                                        r = t.ed;
                                                      t.ed = r.filter(function (
                                                        e,
                                                        t
                                                      ) {
                                                        return !(
                                                          (e.position <= n &&
                                                            t + 1 < r.length &&
                                                            r[t + 1].position <=
                                                              n) ||
                                                          e.position >= i
                                                        );
                                                      });
                                                    } else t.ed = [];
                                                  })(e, i),
                                                    (e = {
                                                      We: t,
                                                      position: n,
                                                    }),
                                                    0 <=
                                                    (t = (i = i.ed).findIndex(
                                                      function (e) {
                                                        return e.position >= n;
                                                      }
                                                    ))
                                                      ? i.splice(
                                                          t,
                                                          i[t].position == n
                                                            ? 1
                                                            : 0,
                                                          e
                                                        )
                                                      : i.push(e);
                                                })(e.Uc, n, t);
                                            },
                                            Hf: function (t, n) {
                                              var i = e.C;
                                              if (
                                                i.g.parseInbandPsshEnabled &&
                                                !i.D &&
                                                ["audio", "video"].includes(t)
                                              ) {
                                                (t = new Ro(Ae(n))), (n = 0);
                                                for (
                                                  var r = l(t.data),
                                                    a = r.next();
                                                  !a.done;
                                                  a = r.next()
                                                )
                                                  n += a.value.length;
                                                if (0 == n)
                                                  i = Promise.resolve();
                                                else {
                                                  for (
                                                    n = new Uint8Array(n),
                                                      r = 0,
                                                      a = (t = l(
                                                        t.data
                                                      )).next();
                                                    !a.done;
                                                    a = t.next()
                                                  )
                                                    (a = a.value),
                                                      n.set(a, r),
                                                      (r += a.length);
                                                  Ol(i, "cenc", n), (i = i.m);
                                                }
                                              } else i = Promise.resolve();
                                              return i;
                                            },
                                            disableStream: function (t, n) {
                                              return e.disableStream(t, n);
                                            },
                                          });
                                        })(e)),
                                        e.j.configure(e.g.streaming),
                                        (e.m = tg),
                                        e.dispatchEvent(ep("streaming")),
                                        (d = n);
                                    case 2:
                                      for (
                                        (f = e.j.l) ||
                                          d ||
                                          (d = Lp(e)
                                            ? e.o.chooseVariant()
                                            : null),
                                          p = [],
                                          g = l([(h = f || d).video, h.audio]),
                                          m = g.next();
                                        !m.done;
                                        m = g.next()
                                      )
                                        (v = m.value) &&
                                          !v.segmentIndex &&
                                          (p.push(v.createSegmentIndex()),
                                          v.dependencyStream &&
                                            p.push(
                                              v.dependencyStream.createSegmentIndex()
                                            ));
                                      if (!(0 < p.length)) {
                                        R.u(4);
                                        break;
                                      }
                                      return w(R, Promise.all(p), 4);
                                    case 4:
                                      if (!h || 0 != h.disabledUntilTime) {
                                        R.u(2);
                                        break;
                                      }
                                      if (
                                        (e.G &&
                                          e.G.onInitialVariantChosen &&
                                          e.G.onInitialVariantChosen(h),
                                        e.i.isLowLatency &&
                                          (e.g.streaming.lowLatencyMode
                                            ? e.configure(e.ie)
                                            : W(
                                                "Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."
                                              )),
                                        e.L &&
                                          ((function (e, t) {
                                            (e.l = t),
                                              e.l
                                                ? e.i == Ff
                                                  ? (e.i = Hf)
                                                  : e.i == Vf && (e.i = zf)
                                                : e.i == Hf
                                                ? (e.i = Ff)
                                                : e.i == zf && (e.i = Vf);
                                          })(
                                            e.L,
                                            e.i.isLowLatency &&
                                              e.g.streaming.lowLatencyMode
                                          ),
                                          (function (e, t) {
                                            if (
                                              e.g &&
                                              e.g.enabled &&
                                              e.g.version == Bf &&
                                              e.j &&
                                              e.j.autoplay
                                            ) {
                                              var n = e.j.play();
                                              n &&
                                                n
                                                  .then(function () {
                                                    e.A = t;
                                                  })
                                                  .catch(function () {
                                                    e.A = 0;
                                                  });
                                            }
                                          })(e.L, 1e3 * t)),
                                        Yp(
                                          e.i.presentationTimeline,
                                          e.g.playRangeStart,
                                          e.g.playRangeEnd
                                        ),
                                        (function (e, t, n) {
                                          e.j.presentationTimeline.R() ||
                                            ((e.Y = t), (e.X = n));
                                        })(
                                          e.j,
                                          e.g.playRangeStart,
                                          e.g.playRangeEnd
                                        ),
                                        (y = function (t) {
                                          (e.F = (function (e, t) {
                                            return new _d(
                                              e.h,
                                              e.i,
                                              e.g.streaming,
                                              t,
                                              function () {
                                                e.Ya && Fd(e.Ya, !0),
                                                  e.j && e.j.fc(),
                                                  e.O && gp(e);
                                              },
                                              function (t) {
                                                return e.dispatchEvent(t);
                                              }
                                            );
                                          })(e, t)),
                                            (e.Ya = (function (e, t) {
                                              var n = e.R() || 0 < t;
                                              (t = new Uh(e.Vc, n)),
                                                t.addEventListener(
                                                  "enter",
                                                  function (t) {
                                                    Kp(
                                                      e,
                                                      "timelineregionenter",
                                                      t.region
                                                    );
                                                  }
                                                ),
                                                t.addEventListener(
                                                  "exit",
                                                  function (t) {
                                                    Kp(
                                                      e,
                                                      "timelineregionexit",
                                                      t.region
                                                    );
                                                  }
                                                ),
                                                t.addEventListener(
                                                  "skip",
                                                  function (t) {
                                                    var n = t.region;
                                                    t.seeking ||
                                                      (Kp(
                                                        e,
                                                        "timelineregionenter",
                                                        n
                                                      ),
                                                      Kp(
                                                        e,
                                                        "timelineregionexit",
                                                        n
                                                      ));
                                                  }
                                                );
                                              var i = new Uh(e.Aa, n);
                                              i.addEventListener(
                                                "enter",
                                                function (t) {
                                                  cp(e, t.region);
                                                }
                                              ),
                                                (n = new Uh(e.Oa, n)),
                                                n.addEventListener(
                                                  "enter",
                                                  function (t) {
                                                    (t = new Map().set(
                                                      "detail",
                                                      t.region.emsg
                                                    )),
                                                      e.dispatchEvent(
                                                        ep("emsg", t)
                                                      );
                                                  }
                                                );
                                              var r = new Bd(e.h);
                                              return (
                                                r.g.add(t),
                                                r.g.add(i),
                                                r.g.add(n),
                                                e.Uc && r.g.add(e.Uc),
                                                r
                                              );
                                            })(e, t)),
                                            fp(e, r, !1);
                                        }),
                                        e.g.streaming.startAtSegmentBoundary ||
                                          (null == (b = e.ca) &&
                                            e.i.startTime &&
                                            (b = e.i.startTime),
                                          y(b)),
                                        f)
                                      ) {
                                        R.u(7);
                                        break;
                                      }
                                      if (
                                        !e.g.streaming.startAtSegmentBoundary
                                      ) {
                                        R.u(8);
                                        break;
                                      }
                                      return (
                                        (S = e.i.presentationTimeline),
                                        (T = e.ca || e.h.currentTime),
                                        null == e.ca &&
                                          e.i.startTime &&
                                          (T = e.i.startTime),
                                        (A = S.pb()),
                                        (k = S.bb()),
                                        T < A ? (T = A) : T > k && (T = k),
                                        w(
                                          R,
                                          (function (e, t) {
                                            var n, i, r, a, o;
                                            return P(function (s) {
                                              return 1 == s.g
                                                ? ((n = e.audio),
                                                  (i = e.video),
                                                  (r = function (e, t) {
                                                    var n, i, r;
                                                    return P(function (a) {
                                                      return 1 == a.g
                                                        ? e
                                                          ? e.segmentIndex
                                                            ? a.u(2)
                                                            : w(
                                                                a,
                                                                e.createSegmentIndex(),
                                                                2
                                                              )
                                                          : a.return(null)
                                                        : (i = (n =
                                                            e.segmentIndex.ob(
                                                              t
                                                            ))
                                                            ? n.next().value
                                                            : null)
                                                        ? ((r = i.startTime),
                                                          a.return(r))
                                                        : a.return(null);
                                                    });
                                                  }),
                                                  w(s, r(n, t), 2))
                                                : 3 != s.g
                                                ? ((a = s.h), w(s, r(i, t), 3))
                                                : null != (o = s.h) && null != a
                                                ? s.return(Math.max(o, a))
                                                : null != o
                                                ? s.return(o)
                                                : null != a
                                                ? s.return(a)
                                                : s.return(t);
                                            });
                                          })(d, T),
                                          9
                                        )
                                      );
                                    case 9:
                                      (I = R.h), y(I);
                                    case 8:
                                      Np(e, d, !0, !1, 0);
                                    case 7:
                                      return (
                                        e.F.ready(),
                                        e.Yb().find(function (e) {
                                          return e.active;
                                        }) ||
                                          ((C =
                                            kr(
                                              e.i.textStreams,
                                              e.tc,
                                              e.bd,
                                              e.$c
                                            )[0] || null) && Ch(e.A.h, C, !0),
                                          d &&
                                            (C
                                              ? (Er(d.audio, C, e.g) &&
                                                  (e.oa = !0),
                                                e.oa &&
                                                  e.s.setTextVisibility(!0))
                                              : ((e.oa = !1),
                                                e.s.setTextVisibility(!1)),
                                            Hp(e)),
                                          C &&
                                            (e.g.streaming.alwaysStreamText ||
                                              e.Ue()) &&
                                            (ah(e.j, C), zp(e))),
                                        w(R, e.j.start(i), 10)
                                      );
                                    case 10:
                                      e.g.abr.enabled && (e.o.enable(), Vp(e)),
                                        Up(e),
                                        Lp(e),
                                        e.i.variants.some(function (e) {
                                          return e.primary;
                                        }),
                                        (((M = e.R()) &&
                                          ((e.g.streaming.liveSync &&
                                            e.g.streaming.liveSync.enabled) ||
                                            e.i.serviceDescription ||
                                            e.g.streaming.liveSync
                                              .panicMode)) ||
                                          e.g.streaming
                                            .vodDynamicPlaybackRate) &&
                                          ((E = function () {
                                            return Dp(e);
                                          }),
                                          e.l.H(r, "timeupdate", E)),
                                        M ||
                                          ((D = function () {
                                            return Pp(e);
                                          }),
                                          e.l.H(r, "timeupdate", D),
                                          Pp(e),
                                          e.i.nextUrl &&
                                            (0 <
                                              e.g.streaming
                                                .preloadNextUrlWindow &&
                                              ((L = function () {
                                                var t;
                                                return P(function (n) {
                                                  if (1 == n.g)
                                                    return (
                                                      (t =
                                                        e.La().end -
                                                        e.h.currentTime),
                                                      !isNaN(t) &&
                                                      t <=
                                                        e.g.streaming
                                                          .preloadNextUrlWindow
                                                        ? (e.l.sb(
                                                            r,
                                                            "timeupdate",
                                                            L
                                                          ),
                                                          w(
                                                            n,
                                                            e.preload(
                                                              e.i.nextUrl
                                                            ),
                                                            4
                                                          ))
                                                        : n.u(0)
                                                    );
                                                  (e.za = n.h), x(n);
                                                });
                                              }),
                                              e.l.H(r, "timeupdate", L)),
                                            e.l.H(r, "ended", function () {
                                              e.load(e.za || e.i.nextUrl);
                                            }))),
                                        e.B && e.B.onManifestUpdated(M),
                                        (e.xa = !0),
                                        x(R);
                                  }
                                });
                              })(b, h, v, m),
                              0
                            );
                          });
                        }, "loadInner_"),
                        22
                      )
                    );
                  case 22:
                    !(function (e) {
                      if (e.J)
                        for (
                          var t = l(e.J), n = t.next();
                          !n.done;
                          n = t.next()
                        )
                          (n = n.value)();
                      e.J = null;
                    })(r),
                      b.mc &&
                        Xe() &&
                        Ui(b.mc) &&
                        (function (t, n, i) {
                          t.g &&
                            e.ManagedMediaSource &&
                            t.i &&
                            (t.C && t.g.removeChild(t.C),
                            (t.C = Yc(n, i)),
                            t.g.appendChild(t.C),
                            (t.g.disableRemotePlayback = !1));
                        })(b.J, b.X, b.mc),
                      T.u(14);
                    break;
                  case 23:
                    return w(
                      T,
                      u(function () {
                        return P(function (e) {
                          return w(
                            e,
                            (function (e, t, n) {
                              var i, r, a, o, s, u, c, d, h, f, p, g;
                              return P(function (m) {
                                switch (m.g) {
                                  case 1:
                                    if (
                                      (tp(e, "src-equals"),
                                      (i = e.h),
                                      (e.F = new Nd(i)),
                                      (r = !1),
                                      e.Yc.push(function () {
                                        r = !0;
                                      }),
                                      null != e.ca && e.F.le(e.ca),
                                      (e.Ya = (function (e, t) {
                                        (t = new Uh(e.Aa, 0 < t)),
                                          t.addEventListener(
                                            "enter",
                                            function (t) {
                                              cp(e, t.region);
                                            }
                                          );
                                        var n = new Bd(e.h);
                                        return n.g.add(t), n;
                                      })(e, e.ca || 0)),
                                      (e.K = new Td({
                                        ud: function () {
                                          return i.playbackRate;
                                        },
                                        Wb: function () {
                                          return i.defaultPlaybackRate;
                                        },
                                        nf: function (e) {
                                          i.playbackRate = e;
                                        },
                                        fg: function (e) {
                                          i.currentTime += e;
                                        },
                                      })),
                                      fp(e, i, !0),
                                      i.textTracks &&
                                        (sp(e),
                                        (a = function () {
                                          var t = xp(e).find(function (e) {
                                            return "disabled" !== e.mode;
                                          });
                                          t && (t.mode = "showing"),
                                            (t = Sp(e)) && (t.mode = "hidden");
                                        }),
                                        (o = function () {
                                          var t = xp(e).find(function (e) {
                                            return "disabled" !== e.mode;
                                          });
                                          t && (t.mode = "hidden"), (t = Sp(e));
                                          var n = e.s.isTextVisible();
                                          t && n && (t.mode = "showing");
                                        }),
                                        e.l.H(
                                          i,
                                          "enterpictureinpicture",
                                          function () {
                                            return a();
                                          }
                                        ),
                                        e.l.H(
                                          i,
                                          "leavepictureinpicture",
                                          function () {
                                            return o();
                                          }
                                        ),
                                        i.remote
                                          ? (e.l.H(
                                              i.remote,
                                              "connect",
                                              function () {
                                                return o();
                                              }
                                            ),
                                            e.l.H(
                                              i.remote,
                                              "connecting",
                                              function () {
                                                return o();
                                              }
                                            ),
                                            e.l.H(
                                              i.remote,
                                              "disconnect",
                                              function () {
                                                return o();
                                              }
                                            ))
                                          : "webkitCurrentPlaybackTargetIsWireless" in
                                              i &&
                                            e.l.H(
                                              i,
                                              "webkitcurrentplaybacktargetiswirelesschanged",
                                              function () {
                                                return o();
                                              }
                                            ),
                                        (s = i).webkitSupportsFullscreen &&
                                          e.l.H(
                                            s,
                                            "webkitpresentationmodechanged",
                                            function () {
                                              "inline" !=
                                              s.webkitPresentationMode
                                                ? a()
                                                : o();
                                            }
                                          )),
                                      lp(e, i, t),
                                      (u = (function (e, t, n) {
                                        try {
                                          if (!e.g.enabled) return t;
                                          var i = Cf(e);
                                          e: {
                                            switch (n.toLowerCase()) {
                                              case "audio/mp4":
                                              case "audio/webm":
                                              case "audio/ogg":
                                              case "audio/mpeg":
                                              case "audio/aac":
                                              case "audio/flac":
                                              case "audio/wav":
                                                var r = Rf;
                                                break e;
                                              case "video/webm":
                                              case "video/mp4":
                                              case "video/mpeg":
                                              case "video/mp2t":
                                                r = _f;
                                                break e;
                                              case "application/x-mpegurl":
                                              case "application/vnd.apple.mpegurl":
                                              case "application/dash+xml":
                                              case "video/vnd.mpeg.dash.mpd":
                                              case "application/vnd.ms-sstr+xml":
                                                r = Lf;
                                                break e;
                                            }
                                            r = void 0;
                                          }
                                          return (
                                            (i.ot = r),
                                            (i.su = !0),
                                            Pf(t, Df(i))
                                          );
                                        } catch (e) {
                                          return (
                                            X(
                                              "CMCD_SRC_ERROR",
                                              "Could not generate src CMCD data.",
                                              e
                                            ),
                                            t
                                          );
                                        }
                                      })(e.L, e.X, n)),
                                      !u.includes("#t=") &&
                                        (0 < e.g.playRangeStart ||
                                          isFinite(e.g.playRangeEnd)) &&
                                        ((u += "#t="),
                                        0 < e.g.playRangeStart &&
                                          (u += e.g.playRangeStart),
                                        isFinite(e.g.playRangeEnd) &&
                                          (u += "," + e.g.playRangeEnd)),
                                      !e.J)
                                    ) {
                                      m.u(2);
                                      break;
                                    }
                                    return w(m, e.J.destroy(), 3);
                                  case 3:
                                    e.J = null;
                                  case 2:
                                    return (
                                      Jc(i),
                                      (i.src = u),
                                      (Ve() || Ge()) && i.load(),
                                      "none" != i.preload &&
                                        !i.autoplay &&
                                        Ui(n) &&
                                        Xe() &&
                                        i.load(),
                                      (e.m = ng),
                                      e.dispatchEvent(ep("streaming")),
                                      (c = new Ho()),
                                      kd(
                                        i,
                                        HTMLMediaElement.HAVE_METADATA,
                                        e.l,
                                        function () {
                                          e.F.ready(), c.resolve();
                                        }
                                      ),
                                      (d = function () {
                                        return new Promise(function (t) {
                                          var n = new je(t);
                                          e.l.H(
                                            i.textTracks,
                                            "change",
                                            function () {
                                              return n.ea(0.5);
                                            }
                                          ),
                                            n.ea(0.5);
                                        });
                                      }),
                                      kd(
                                        i,
                                        HTMLMediaElement.HAVE_CURRENT_DATA,
                                        e.l,
                                        function () {
                                          var t, n, i, a, o;
                                          return P(function (s) {
                                            if (1 == s.g) return w(s, d(), 2);
                                            if (r) return s.return();
                                            for (
                                              (function (e) {
                                                var t =
                                                  e.g.preferredAudioLanguage;
                                                "" != t &&
                                                  e.rg(
                                                    t,
                                                    e.g.preferredVariantRole
                                                  );
                                              })(e),
                                                (t = xp(e)).some(function (e) {
                                                  return "showing" === e.mode;
                                                }) &&
                                                  ((e.oa = !0),
                                                  e.s.setTextVisibility(!0)),
                                                t.length &&
                                                  (e.s.enableTextDisplayer
                                                    ? e.s.enableTextDisplayer()
                                                    : te(
                                                        "Text displayer w/ enableTextDisplayer",
                                                        'Text displayer should have a "enableTextDisplayer" method!'
                                                      )),
                                                n = !1,
                                                i = l(t),
                                                a = i.next();
                                              !a.done;
                                              a = i.next()
                                            )
                                              "disabled" !==
                                                (o = a.value).mode &&
                                                (n
                                                  ? ((o.mode = "disabled"),
                                                    W(
                                                      "Found more than one enabled text track, disabling it",
                                                      o
                                                    ))
                                                  : (wp(e, o), (n = !0)));
                                            !(function (e) {
                                              var t = e.g.preferredTextLanguage;
                                              "" != t &&
                                                e.sg(
                                                  t,
                                                  e.g.preferredTextRole,
                                                  e.g.preferForcedSubs
                                                );
                                            })(e),
                                              x(s);
                                          });
                                        }
                                      ),
                                      i.error
                                        ? c.reject(Xp(e))
                                        : "none" == i.preload &&
                                          (W(
                                            'With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'
                                          ),
                                          c.resolve()),
                                      e.l.Ea(i, "error", function () {
                                        c.reject(Xp(e));
                                      }),
                                      w(m, Ji(e.g.streaming.loadTimeout, c), 4)
                                    );
                                  case 4:
                                    (((h = e.R()) &&
                                      ((e.g.streaming.liveSync &&
                                        e.g.streaming.liveSync.enabled) ||
                                        e.g.streaming.liveSync.panicMode)) ||
                                      e.g.streaming.vodDynamicPlaybackRate) &&
                                      ((f = function () {
                                        return Dp(e);
                                      }),
                                      e.l.H(i, "timeupdate", f)),
                                      h ||
                                        ((p = function () {
                                          return Pp(e);
                                        }),
                                        e.l.H(i, "timeupdate", p),
                                        Pp(e)),
                                      e.B &&
                                        (e.B.onManifestUpdated(h),
                                        h &&
                                          ((g = e.La().end),
                                          e.l.H(i, "progress", function () {
                                            var t = e.La().end;
                                            g != t &&
                                              (e.B.onManifestUpdated(e.R()),
                                              (g = t));
                                          }))),
                                      (e.xa = !0),
                                      x(m);
                                }
                              });
                            })(b, h, i),
                            0
                          );
                        });
                      }, "srcEqualsInner_"),
                      14
                    );
                  case 14:
                    b.dispatchEvent(ep("loaded"));
                  case 6:
                    if ((k(T), !r)) {
                      T.u(25);
                      break;
                    }
                    return w(T, r.destroy(), 25);
                  case 25:
                    (b.za = null), I(T, 0);
                    break;
                  case 5:
                    if (!(y = A(T)) || 7e3 == y.code) {
                      T.u(27);
                      break;
                    }
                    return w(T, b.hd(!1), 27);
                  case 27:
                    throw y;
                }
              });
            }),
            (i.Bi = function (e, t) {
              (e = void 0 === e || e), (t = void 0 !== t && t);
              var n,
                i = this;
              return P(function (r) {
                return 1 == r.g
                  ? w(r, ip(i), 2)
                  : 3 != r.g
                  ? ((n = r.h), w(r, i.hd(e, t), 3))
                  : r.return(n);
              });
            }),
            (i.Nf = function (e, t) {
              (e = void 0 !== e && e), (t = void 0 !== t && t);
              var n,
                i = this;
              return P(function (r) {
                return 1 == r.g
                  ? w(r, ip(i, t), 2)
                  : 3 != r.g
                  ? ((n = r.h), w(r, i.detach(e), 3))
                  : r.return(n);
              });
            }),
            (i.preload = function (e, t, n) {
              t = void 0 === t ? null : t;
              var i,
                r = this;
              return P(function (a) {
                return 1 == a.g
                  ? w(a, rp(r, e, t, n), 2)
                  : ((i = a.h) ? i.start() : qp(r, new Me(2, 7, 7005)),
                    a.return(i));
              });
            }),
            (i.Mf = function () {
              var e,
                t,
                n,
                i,
                r = this;
              return P(function (a) {
                for (e = [], t = l(r.Vd), n = t.next(); !n.done; n = t.next())
                  (i = n.value).s || e.push(i.destroy());
                return (r.Vd = []), w(a, Promise.all(e), 0);
              });
            }),
            (i.ki = function () {
              for (var e = this.da; e.g; ) e.release();
            }),
            (i.od = function (e) {
              return new _l(e);
            }),
            (i.configure = function (e, t) {
              if (
                (2 == arguments.length &&
                  "string" == typeof e &&
                  (e = Wu(e, t)),
                e.streaming &&
                  "forceTransmuxTS" in e.streaming &&
                  (te(
                    "streaming.forceTransmuxTS configuration",
                    "Please Use mediaSource.forceTransmux instead."
                  ),
                  (e.mediaSource.mediaSource = e.streaming.forceTransmuxTS),
                  delete e.streaming.forceTransmuxTS),
                e.streaming &&
                  "forceTransmux" in e.streaming &&
                  (te(
                    "streaming.forceTransmux configuration",
                    "Please Use mediaSource.forceTransmux instead."
                  ),
                  (e.mediaSource.mediaSource = e.streaming.forceTransmux),
                  delete e.streaming.forceTransmux),
                e.streaming &&
                  "useNativeHlsOnSafari" in e.streaming &&
                  (te(
                    "streaming.useNativeHlsOnSafari configuration",
                    "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."
                  ),
                  (e.streaming.preferNativeHls =
                    e.streaming.useNativeHlsOnSafari && Xe()),
                  delete e.streaming.useNativeHlsOnSafari),
                e.streaming && "boolean" == typeof e.streaming.liveSync)
              ) {
                te(
                  "streaming.liveSync",
                  "Please Use streaming.liveSync.enabled instead."
                );
                var n = e.streaming.liveSync;
                (e.streaming.liveSync = {}), (e.streaming.liveSync.enabled = n);
              }
              if (
                e.streaming &&
                (!e.streaming.liveSync ||
                  !("targetLatency" in e.streaming.liveSync)) &&
                ("liveSyncMinLatency" in e.streaming ||
                  "liveSyncMaxLatency" in e.streaming)
              ) {
                n = e.streaming.liveSyncMinLatency || 0;
                var i = Math.abs((e.streaming.liveSyncMaxLatency || 1) - n) / 2;
                (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatency = n + i),
                  (e.streaming.liveSync.targetLatencyTolerance = i);
              }
              if (
                (e.streaming &&
                  "liveSyncMaxLatency" in e.streaming &&
                  (te(
                    "streaming.liveSyncMaxLatency",
                    "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"
                  ),
                  delete e.streaming.liveSyncMaxLatency),
                e.streaming &&
                  "liveSyncMinLatency" in e.streaming &&
                  (te(
                    "streaming.liveSyncMinLatency",
                    "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"
                  ),
                  delete e.streaming.liveSyncMinLatency),
                e.streaming &&
                  "liveSyncTargetLatency" in e.streaming &&
                  (te(
                    "streaming.liveSyncTargetLatency",
                    "Please Use streaming.liveSync.targetLatency instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatency =
                    e.streaming.liveSyncTargetLatency),
                  delete e.streaming.liveSyncTargetLatency),
                e.streaming &&
                  "liveSyncTargetLatencyTolerance" in e.streaming &&
                  (te(
                    "streaming.liveSyncTargetLatencyTolerance",
                    "Please Use streaming.liveSync.targetLatencyTolerance instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatencyTolerance =
                    e.streaming.liveSyncTargetLatencyTolerance),
                  delete e.streaming.liveSyncTargetLatencyTolerance),
                e.streaming &&
                  "liveSyncPlaybackRate" in e.streaming &&
                  (te(
                    "streaming.liveSyncPlaybackRate",
                    "Please Use streaming.liveSync.maxPlaybackRate instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.maxPlaybackRate =
                    e.streaming.liveSyncPlaybackRate),
                  delete e.streaming.liveSyncPlaybackRate),
                e.streaming &&
                  "liveSyncMinPlaybackRate" in e.streaming &&
                  (te(
                    "streaming.liveSyncMinPlaybackRate",
                    "Please Use streaming.liveSync.minPlaybackRate instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.minPlaybackRate =
                    e.streaming.liveSyncMinPlaybackRate),
                  delete e.streaming.liveSyncMinPlaybackRate),
                e.streaming &&
                  "liveSyncPanicMode" in e.streaming &&
                  (te(
                    "streaming.liveSyncPanicMode",
                    "Please Use streaming.liveSync.panicMode instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.panicMode =
                    e.streaming.liveSyncPanicMode),
                  delete e.streaming.liveSyncPanicMode),
                e.streaming &&
                  "liveSyncPanicThreshold" in e.streaming &&
                  (te(
                    "streaming.liveSyncPanicThreshold",
                    "Please Use streaming.liveSync.panicThreshold instead."
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.panicThreshold =
                    e.streaming.liveSyncPanicThreshold),
                  delete e.streaming.liveSyncPanicThreshold),
                e.mediaSource && "sourceBufferExtraFeatures" in e.mediaSource)
              ) {
                te(
                  "mediaSource.sourceBufferExtraFeatures configuration",
                  "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead."
                );
                var r = e.mediaSource.sourceBufferExtraFeatures;
                (e.mediaSource.addExtraFeaturesToSourceBuffer = function () {
                  return r;
                }),
                  delete e.mediaSource.sourceBufferExtraFeatures;
              }
              if (
                (e.manifest &&
                  e.manifest.hls &&
                  "useSafariBehaviorForLive" in e.manifest.hls &&
                  (te(
                    "manifest.hls.useSafariBehaviorForLive configuration",
                    "Please Use liveSync config to keep on live Edge instead."
                  ),
                  delete e.manifest.hls.useSafariBehaviorForLive),
                e.streaming &&
                  "parsePrftBox" in e.streaming &&
                  (te(
                    "streaming.parsePrftBox configuration",
                    "Now fired without needing a configuration."
                  ),
                  delete e.streaming.parsePrftBox),
                e.manifest &&
                  e.manifest.dash &&
                  "enableAudioGroups" in e.manifest.dash &&
                  (te(
                    "manifest.dash.enableAudioGroups configuration",
                    "It is now enabled by default and cannot be disabled."
                  ),
                  delete e.manifest.dash.enableAudioGroups),
                e.streaming &&
                  "dispatchAllEmsgBoxes" in e.streaming &&
                  (te(
                    "streaming.dispatchAllEmsgBoxes configuration",
                    "Please Use mediaSource.dispatchAllEmsgBoxes instead."
                  ),
                  (e.mediaSource.dispatchAllEmsgBoxes =
                    e.streaming.dispatchAllEmsgBoxes),
                  delete e.streaming.dispatchAllEmsgBoxes),
                e.streaming &&
                  "autoLowLatencyMode" in e.streaming &&
                  (te(
                    "streaming.autoLowLatencyMode configuration",
                    "Please Use streaming.lowLatencyMode instead."
                  ),
                  (e.streaming.lowLatencyMode = e.streaming.autoLowLatencyMode),
                  delete e.streaming.autoLowLatencyMode),
                e.manifest &&
                  e.manifest.dash &&
                  "ignoreSupplementalCodecs" in e.manifest.dash &&
                  (te(
                    "manifest.dash.ignoreSupplementalCodecs configuration",
                    "Please Use manifest.ignoreSupplementalCodecs instead."
                  ),
                  (e.manifest.ignoreSupplementalCodecs =
                    e.manifest.dash.ignoreSupplementalCodecs),
                  delete e.manifest.dash.ignoreSupplementalCodecs),
                e.manifest &&
                  e.manifest.hls &&
                  "ignoreSupplementalCodecs" in e.manifest.hls &&
                  (te(
                    "manifest.hls.ignoreSupplementalCodecs configuration",
                    "Please Use manifest.ignoreSupplementalCodecs instead."
                  ),
                  (e.manifest.ignoreSupplementalCodecs =
                    e.manifest.hls.ignoreSupplementalCodecs),
                  delete e.manifest.hls.ignoreSupplementalCodecs),
                e.manifest &&
                  e.manifest.dash &&
                  "updatePeriod" in e.manifest.dash &&
                  (te(
                    "manifest.dash.updatePeriod configuration",
                    "Please Use manifest.updatePeriod instead."
                  ),
                  (e.manifest.updatePeriod = e.manifest.dash.updatePeriod),
                  delete e.manifest.dash.updatePeriod),
                e.manifest &&
                  e.manifest.hls &&
                  "updatePeriod" in e.manifest.hls &&
                  (te(
                    "manifest.hls.updatePeriod configuration",
                    "Please Use manifest.updatePeriod instead."
                  ),
                  (e.manifest.updatePeriod = e.manifest.hls.updatePeriod),
                  delete e.manifest.hls.updatePeriod),
                e.manifest &&
                  e.manifest.dash &&
                  "ignoreDrmInfo" in e.manifest.dash &&
                  (te(
                    "manifest.dash.ignoreDrmInfo configuration",
                    "Please Use manifest.ignoreDrmInfo instead."
                  ),
                  (e.manifest.ignoreDrmInfo = e.manifest.dash.ignoreDrmInfo),
                  delete e.manifest.dash.ignoreDrmInfo),
                e.drm && e.drm.advanced)
              ) {
                for (var a in ((n = !1), e.drm.advanced)) {
                  var o = e.drm.advanced[a];
                  (i = o.videoRobustness),
                    (o = o.audioRobustness),
                    "videoRobustness" in e.drm.advanced[a] &&
                      !Array.isArray(e.drm.advanced[a].videoRobustness) &&
                      ((e.drm.advanced[a].videoRobustness = [i]), (n = !0)),
                    "audioRobustness" in e.drm.advanced[a] &&
                      !Array.isArray(e.drm.advanced[a].audioRobustness) &&
                      ((e.drm.advanced[a].audioRobustness = [o]), (n = !0));
                }
                n &&
                  te(
                    "AdvancedDrmConfiguration's videoRobustness and audioRobustness",
                    "These properties are no longer strings but array of strings, please update your usage of these properties."
                  );
              }
              return (
                e.streaming &&
                  "crossBoundaryStrategy" in e.streaming &&
                  "keep" != e.streaming.crossBoundaryStrategy &&
                  (e.streaming.inaccurateManifestTolerance = 0),
                (a = Qu(this.g, e, Ip(this))),
                mp(this),
                a
              );
            }),
            (i.Xg = function (e) {
              this.ie = e;
            }),
            (i.getConfiguration = function () {
              var e = Ip(this);
              return Qu(e, this.g, Ip(this)), e;
            }),
            (i.hh = function () {
              return this.ie;
            }),
            (i.uh = function () {
              return Qu(Ip(this), this.g, Ip(this)), Yu(this.g, Ip(this));
            }),
            (i.Rf = function () {
              if (this.h) {
                var e = this.h.buffered.length;
                e = e ? this.h.buffered.end(e - 1) : 0;
                var t = this.getConfiguration().streaming.bufferingGoal;
                if (e >= (t = Math.min(this.h.currentTime + t, this.La().end)))
                  return 1;
                if (!(e <= this.h.currentTime) && e < t)
                  return (e - this.h.currentTime) / (t - this.h.currentTime);
              }
              return 0;
            }),
            (i.mi = function () {
              for (var e in this.g) delete this.g[e];
              Qu(this.g, Ip(this), Ip(this)), mp(this);
            }),
            (i.ph = function () {
              return this.m;
            }),
            (i.Tf = function () {
              return this.i ? this.i.type : null;
            }),
            (i.th = function () {
              return this.h;
            }),
            (i.Pe = function () {
              return this.D;
            }),
            (i.qd = function () {
              return this.X;
            }),
            (i.$g = function () {
              return this.B ? this.B : null;
            }),
            (i.R = function () {
              return this.i && !this.Ka()
                ? this.i.presentationTimeline.R()
                : !(!this.h || !this.h.src) && 1 / 0 == this.h.duration;
            }),
            (i.wc = function () {
              return !!this.i && this.i.presentationTimeline.wc();
            }),
            (i.Mh = function () {
              if (this.i && !this.Ka()) {
                var e = this.i.variants;
                return !!e.length && !e[0].video;
              }
              return (
                !(!this.h || !this.h.src) &&
                (this.h.videoTracks
                  ? 0 == this.h.videoTracks.length
                  : 0 == this.h.videoHeight)
              );
            }),
            (i.La = function () {
              if (this.i && !this.Ka()) {
                if (!this.xa && "HLS" == this.i.type)
                  return { start: 0, end: 0 };
                var e = this.i.presentationTimeline;
                return { start: e.pb(), end: e.bb() };
              }
              if (this.h && this.h.src && (e = this.h.seekable) && e.length) {
                var t = this.g ? this.g.playRangeStart : 0;
                t = Math.max(e.start(0), t);
                var n = this.g ? this.g.playRangeEnd : 1 / 0;
                return {
                  start: t,
                  end: (e = Math.min(e.end(e.length - 1), n)),
                };
              }
              return { start: 0, end: 0 };
            }),
            (i.Jh = function () {
              this.R() && (this.h.currentTime = this.La().end);
            }),
            (i.Nh = function () {
              return this.xa;
            }),
            (i.keySystem = function () {
              var e = this.drmInfo();
              return e ? e.keySystem : "";
            }),
            (i.drmInfo = function () {
              return this.C ? this.C.h : null;
            }),
            (i.Ne = function () {
              return this.C ? this.C.Ne() : 1 / 0;
            }),
            (i.Me = function () {
              return this.C ? this.C.Me() : [];
            }),
            (i.sd = function () {
              return this.C ? this.C.sd() : {};
            }),
            (i.Zf = function () {
              return this.O ? this.O.g == Ql : !!this.X;
            }),
            (i.Ra = function () {
              return this.h ? (this.K ? this.K.i : 1) : 0;
            }),
            (i.gd = function (e, t) {
              (t = void 0 === t || t),
                0 == e
                  ? W("A trick play rate of 0 is unsupported!")
                  : (this.K.set(e),
                    this.m == tg &&
                      (this.o.playbackRateChanged(e),
                      ih(this.j, t && 1 < Math.abs(e))),
                    Mp(this, e));
            }),
            (i.Hc = function () {
              var e = this.K.Wb();
              this.m == ng && this.K.set(e),
                this.m == tg &&
                  (this.K.set(e),
                  this.o.playbackRateChanged(e),
                  ih(this.j, !1)),
                this.ab.qb();
            }),
            (i.yb = function () {
              if (this.i && !this.Ka()) {
                for (
                  var e = this.j ? this.j.l : null,
                    t = [],
                    n = 0,
                    i = l(this.i.variants),
                    r = i.next();
                  !r.done;
                  r = i.next()
                )
                  if (Tr((r = r.value))) {
                    var a = vr(r);
                    (a.active = r == e),
                      a.active ||
                        1 == n ||
                        null == e ||
                        r.video != e.video ||
                        r.audio != e.audio ||
                        (a.active = !0),
                      a.active && n++,
                      t.push(a);
                  }
                return t;
              }
              return this.h && this.h.audioTracks
                ? Array.from(this.h.audioTracks).map(function (e) {
                    return xr(e);
                  })
                : [];
            }),
            (i.Yb = function () {
              if (this.i && !this.Ka()) {
                for (
                  var e = this.j ? this.j.s : null,
                    t = [],
                    n = l(this.i.textStreams),
                    i = n.next();
                  !i.done;
                  i = n.next()
                ) {
                  var r = yr((i = i.value));
                  (r.active = i == e), t.push(r);
                }
                return t;
              }
              return this.h && this.h.src && this.h.textTracks
                ? xp(this).map(function (e) {
                    var t = Sr(e);
                    return (
                      (t.active = "disabled" != e.mode),
                      (t.type = "text"),
                      (t.originalTextId = e.id),
                      "captions" == e.kind && (t.mimeType = "unknown"),
                      "subtitles" == e.kind && (t.mimeType = "text/vtt"),
                      e.kind && (t.roles = [e.kind]),
                      "forced" == e.kind && (t.forced = !0),
                      t
                    );
                  })
                : [];
            }),
            (i.mh = function () {
              var e = this.ae;
              return (
                this.i && (e = this.i.imageStreams),
                e.map(function (e) {
                  return br(e);
                })
              );
            }),
            (i.ah = function (e) {
              var t,
                n,
                i = this;
              return P(function (r) {
                return 1 == r.g
                  ? w(r, yp(i, e), 2)
                  : (t = r.h)
                  ? ((n = []),
                    t.segmentIndex.Tb(function (e) {
                      var i = vp(e.tilesLayout || t.tilesLayout);
                      if (i)
                        for (
                          var r = i.rows * i.Rb, a = e.i - e.startTime, o = 0;
                          o < r;
                          o++
                        ) {
                          var s = bp(e, t, e.startTime + (a * o) / r, i);
                          n.push(s);
                        }
                    }),
                    t.closeSegmentIndex && t.closeSegmentIndex(),
                    r.return(n))
                  : r.return(null);
              });
            }),
            (i.Eh = function (e, t) {
              var n,
                i,
                r,
                a,
                o = this;
              return P(function (s) {
                return 1 == s.g
                  ? w(s, yp(o, e), 2)
                  : (n = s.h)
                  ? null == (i = n.segmentIndex.find(t))
                    ? s.return(null)
                    : ((r = n.segmentIndex.get(i)),
                      (a = vp(r.tilesLayout || n.tilesLayout))
                        ? s.return(bp(r, n, t, a))
                        : s.return(null))
                  : s.return(null);
              });
            }),
            (i.tg = function (e) {
              var t,
                n = this;
              (this.i &&
                this.F &&
                ((t = n.i.textStreams.find(function (t) {
                  return t.id == e.id;
                })) &&
                  t != n.j.s &&
                  (Ch(n.A.h, t, !1),
                  ah(n.j, t),
                  Fp(n),
                  zp(n),
                  (n.tc = t.language)),
                !this.Ka())) ||
                (function () {
                  if (n.h && n.h.textTracks) {
                    var t = xp(n),
                      i = t.find(function (e) {
                        return "disabled" !== e.mode;
                      });
                    (t = t.find(function (t) {
                      return wr(t) === e.id;
                    })) &&
                      (i !== t &&
                        (i &&
                          ((i.mode = "disabled"),
                          n.l.sb(i, "cuechange"),
                          n.s.remove(0, 1 / 0)),
                        t && wp(n, t)),
                      Fp(n),
                      zp(n));
                  }
                })();
            }),
            (i.Rd = function (e, t, n) {
              var i = this;
              (t = void 0 !== t && t),
                (n = void 0 === n ? 0 : n),
                (this.i &&
                  this.F &&
                  ((function () {
                    var r = i.i.variants.find(function (t) {
                      return t.id == e.id;
                    });
                    if (r && Tr(r)) {
                      var a = i.j.l;
                      i.g.abr.enabled &&
                        (a.video != r.video ||
                          (a.audio &&
                            r.audio &&
                            a.audio.language == r.audio.language &&
                            a.audio.channelsCount == r.audio.channelsCount &&
                            a.audio.label == r.audio.label)) &&
                        W(
                          "Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."
                        ),
                        i.Ka()
                          ? Np(i, r, !1, !1, 0)
                          : Np(i, r, !1, t || !1, n || 0),
                        i.Y.configure({
                          language: r.language,
                          role:
                            (r.audio && r.audio.roles && r.audio.roles[0]) ||
                            "",
                          channelCount:
                            r.audio && r.audio.channelsCount
                              ? r.audio.channelsCount
                              : 0,
                          sc: r.video && r.video.hdr ? r.video.hdr : "",
                          spatialAudio:
                            !(!r.audio || !r.audio.spatialAudio) &&
                            r.audio.spatialAudio,
                          videoLayout:
                            r.video && r.video.videoLayout
                              ? r.video.videoLayout
                              : "",
                          kc: r.audio && r.audio.label ? r.audio.label : "",
                          Gc: "",
                          codecSwitchingStrategy:
                            i.g.mediaSource.codecSwitchingStrategy,
                          audioCodec:
                            r.audio && r.audio.codecs ? r.audio.codecs : "",
                        }),
                        Lp(i);
                    }
                  })(),
                  !this.Ka())) ||
                  (function () {
                    if (i.h && i.h.audioTracks)
                      for (
                        var t = Array.from(i.h.audioTracks),
                          n = (t = l(t)).next();
                        !n.done;
                        n = t.next()
                      )
                        if (wr((n = n.value)) == e.id) {
                          _p(i, n);
                          break;
                        }
                  })();
            }),
            (i.si = function (e, t) {
              t = void 0 === t ? 0 : t;
              var n = this.yb();
              if (n.length) {
                var i = n.find(function (e) {
                  return e.active;
                });
                i &&
                  (n = n.find(function (t) {
                    return (
                      t.videoId === i.videoId &&
                      t.language == e.language &&
                      t.label == e.label &&
                      t.audioMimeType == e.mimeType &&
                      t.audioCodec == e.codecs &&
                      t.primary == e.primary &&
                      rn(t.audioRoles, e.roles) &&
                      t.accessibilityPurpose == e.accessibilityPurpose &&
                      t.channelsCount == e.channelsCount &&
                      t.audioSamplingRate == e.audioSamplingRate &&
                      t.spatialAudio == e.spatialAudio
                    );
                  })) &&
                  !n.active &&
                  this.Rd(n, !0, t);
              }
            }),
            (i.getAudioTracks = function () {
              var e = this.yb();
              if (!e.length) return [];
              var t = e.find(function (e) {
                return e.active;
              });
              if (!t) return [];
              var n = e;
              if (
                (this.m == tg &&
                  (n = e.filter(function (e) {
                    return (
                      e.originalVideoId === t.originalVideoId && e.audioCodec
                    );
                  })),
                !n.length)
              )
                return [];
              e = new Map();
              for (var i = (n = l(n)).next(); !i.done; i = n.next()) {
                var r = (i = i.value).originalAudioId;
                r || null == i.audioId || (r = String(i.audioId)),
                  r &&
                    e.set(r, {
                      active: i.active,
                      language: i.language,
                      label: i.label,
                      mimeType: i.audioMimeType,
                      codecs: i.audioCodec,
                      primary: i.primary,
                      roles: i.audioRoles || [],
                      accessibilityPurpose: i.accessibilityPurpose,
                      channelsCount: i.channelsCount,
                      audioSamplingRate: i.audioSamplingRate,
                      spatialAudio: i.spatialAudio,
                      originalLanguage: i.originalLanguage,
                    });
              }
              return Array.from(e.values());
            }),
            (i.dh = function () {
              return Zp(this.yb());
            }),
            (i.Ch = function () {
              return Zp(this.Yb());
            }),
            (i.bh = function () {
              return Array.from($p(this.yb()));
            }),
            (i.Bh = function () {
              return Array.from($p(this.Yb()));
            }),
            (i.rg = function (e, t, n, i, r, a, o) {
              var s = this;
              (n = void 0 === n ? 0 : n),
                (i = void 0 === i ? 0 : i),
                (r = void 0 === r ? "" : r),
                (a = void 0 !== a && a),
                (o = void 0 === o ? "" : o),
                (this.i &&
                  this.F &&
                  ((function () {
                    function u(e, t) {
                      return e.video || t.video
                        ? e.video && t.video
                          ? Math.abs(
                              (e.video.height || 0) - (t.video.height || 0)
                            ) +
                            Math.abs(
                              (e.video.width || 0) - (t.video.width || 0)
                            )
                          : 1 / 0
                        : 0;
                    }
                    (s.Y = s.g.adaptationSetCriteriaFactory()),
                      s.Y.configure({
                        language: e,
                        role: t || "",
                        channelCount: n || 0,
                        sc: "",
                        spatialAudio: a || !1,
                        videoLayout: "",
                        kc: o || "",
                        Gc: "",
                        codecSwitchingStrategy:
                          s.g.mediaSource.codecSwitchingStrategy,
                        audioCodec: r || "",
                      });
                    for (
                      var c = s.j.l,
                        d = s.Y.create(s.i.variants),
                        h = null,
                        f = (d = l(d.values())).next();
                      !f.done;
                      f = d.next()
                    )
                      Tr((f = f.value)) && (!h || u(h, c) > u(f, c)) && (h = f);
                    h != c && (h ? ((c = vr(h)), s.Rd(c, !0, i || 0)) : Rp(s));
                  })(),
                  !this.Ka())) ||
                  (function () {
                    if (s.h && s.h.audioTracks) {
                      var n = kr(s.yb(), e, t || "", !1)[0];
                      n && s.Rd(n);
                    }
                  })();
            }),
            (i.sg = function (e, t, n) {
              var i,
                r = this;
              ((n = void 0 !== n && n),
              this.i &&
                this.F &&
                ((function () {
                  (r.tc = e), (r.bd = t || ""), (r.$c = n || !1);
                  var i = kr(r.i.textStreams, r.tc, r.bd, r.$c)[0] || null;
                  i &&
                    i != r.j.s &&
                    (Ch(r.A.h, i, !1),
                    r.g.streaming.alwaysStreamText || r.Ue()) &&
                    (ah(r.j, i), Fp(r), zp(r));
                })(),
                !this.Ka())) ||
                ((i = kr(r.Yb(), e, t || "", n || !1)[0]) && r.tg(i));
            }),
            (i.ti = function (e, t, n) {
              var i = this;
              (t = void 0 === t || t),
                (n = void 0 === n ? 0 : n),
                (this.i &&
                  this.F &&
                  ((function () {
                    for (
                      var r = null, a = l(i.i.variants), o = a.next();
                      !o.done;
                      o = a.next()
                    )
                      if ((o = o.value).audio.label == e) {
                        r = o;
                        break;
                      }
                    null != r &&
                      ((i.Y = i.g.adaptationSetCriteriaFactory()),
                      i.Y.configure({
                        language: r.language,
                        role: "",
                        channelCount: 0,
                        sc: "",
                        spatialAudio: !1,
                        videoLayout: "",
                        Gc: "",
                        kc: e,
                        codecSwitchingStrategy:
                          i.g.mediaSource.codecSwitchingStrategy,
                        audioCodec: "",
                      }),
                      Rp(i, t, n));
                  })(),
                  !this.Ka())) ||
                  (function () {
                    if (i.h && i.h.audioTracks) {
                      for (
                        var t = Array.from(i.h.audioTracks),
                          n = null,
                          r = (t = l(t)).next();
                        !r.done;
                        r = t.next()
                      )
                        (r = r.value).label == e && (n = r);
                      n && _p(i, n);
                    }
                  })();
            }),
            (i.Ue = function () {
              var e = this.oa;
              return this.s ? this.s.isTextVisible() : e;
            }),
            (i.gh = function () {
              return this.dd.map(function (e) {
                return yr(e);
              });
            }),
            (i.fh = function (e) {
              if (!this.dd.length) return [];
              var t = tr(e);
              if (
                !(e = this.dd.filter(function (e) {
                  return tr(e.language) == t;
                })).length
              )
                return [];
              for (
                var n = [], i = new Set(), r = (e = l(e)).next();
                !r.done;
                r = e.next()
              )
                (r = r.value).segmentIndex &&
                  r.segmentIndex.Tb(function (e) {
                    var t = e.T()[0],
                      r = e.startTime + "-" + e.endTime + "-" + t;
                    (e = {
                      id: r,
                      title: t,
                      startTime: e.startTime,
                      endTime: e.endTime,
                    }),
                      i.has(r) || (n.push(e), i.add(r));
                  });
              return n;
            }),
            (i.xi = function (e) {
              (e = !!e),
                this.oa != e &&
                  ((this.oa = e),
                  this.m == tg
                    ? (this.s.setTextVisibility(e),
                      this.g.streaming.alwaysStreamText ||
                        (e
                          ? this.j.s ||
                            (0 <
                              (e = kr(
                                this.i.textStreams,
                                this.tc,
                                this.bd,
                                this.$c
                              )).length &&
                              (ah(this.j, e[0]), Fp(this), zp(this)))
                          : (function (e) {
                              var t = e.i.get(Lt);
                              t &&
                                (bh(t),
                                wh(t).catch(function () {}),
                                (e.D = e.i.get(Lt)),
                                e.i.delete(Lt)),
                                (e.s = null);
                            })(this.j)))
                    : this.h &&
                      this.h.src &&
                      this.h.textTracks &&
                      this.s.setTextVisibility(e),
                  Hp(this));
            }),
            (i.vh = function () {
              if (this.F) var e = this.F.kd();
              else {
                if (null == this.ca) return new Date();
                e = this.ca;
              }
              if (this.i && !this.Ka()) {
                var t = this.i.presentationTimeline;
                return new Date(1e3 * ((t.s || t.i) + e));
              }
              return this.h && this.h.getStartDate
                ? ((t = this.h.getStartDate()),
                  isNaN(t.getTime()) ? null : new Date(t.getTime() + 1e3 * e))
                : null;
            }),
            (i.Vf = function () {
              if (this.i && !this.Ka()) {
                var e = this.i.presentationTimeline;
                return new Date(1e3 * (e.s || e.i));
              }
              return this.h && this.h.getStartDate
                ? ((e = this.h.getStartDate()), isNaN(e.getTime()) ? null : e)
                : null;
            }),
            (i.vd = function () {
              return this.R() && this.i
                ? this.i.presentationTimeline.vd()
                : null;
            }),
            (i.hb = function () {
              if (this.m == tg) return this.J.hb();
              var e = { total: [], audio: [], video: [], text: [] };
              return this.m == ng && (e.total = _c(this.h.buffered)), e;
            }),
            (i.td = function () {
              if (!this.h || !this.h.currentTime) return null;
              var e = this.Vf().getTime() + 1e3 * this.h.currentTime;
              return Math.floor(Date.now() - e);
            }),
            (i.getStats = function () {
              if (this.m != tg && this.m != ng)
                return {
                  width: NaN,
                  height: NaN,
                  streamBandwidth: NaN,
                  decodedFrames: NaN,
                  droppedFrames: NaN,
                  corruptedFrames: NaN,
                  stallsDetected: NaN,
                  gapsJumped: NaN,
                  estimatedBandwidth: NaN,
                  completionPercent: NaN,
                  loadLatency: NaN,
                  manifestTimeSeconds: NaN,
                  drmTimeSeconds: NaN,
                  playTime: NaN,
                  pauseTime: NaN,
                  bufferingTime: NaN,
                  licenseTime: NaN,
                  liveLatency: NaN,
                  maxSegmentDuration: NaN,
                  manifestSizeBytes: NaN,
                  bytesDownloaded: NaN,
                  nonFatalErrorCount: NaN,
                  manifestPeriodCount: NaN,
                  manifestGapCount: NaN,
                  switchHistory: [],
                  stateHistory: [],
                };
              Ep(this);
              var e = this.h,
                t = e.currentTime / e.duration;
              if (!isNaN(t) && !this.R()) {
                var n = this.A;
                (t = Math.round(100 * t)),
                  (n.i = isNaN(n.i) ? t : Math.max(n.i, t));
              }
              if (
                (this.F && ((this.A.W = this.F.Cf()), (this.A.X = this.F.Df())),
                e.getVideoPlaybackQuality)
              ) {
                (n = e.getVideoPlaybackQuality()), (t = this.A);
                var i = Number(n.totalVideoFrames);
                (t.S = Number(n.droppedVideoFrames)),
                  (t.O = i),
                  (this.A.L = Number(n.corruptedVideoFrames));
              }
              if (
                (this.C ? (n = (n = this.C).G ? n.G : NaN) : (n = NaN),
                (this.A.o = n),
                this.m == tg)
              ) {
                if (((n = this.j.l), (t = this.j.s), n)) {
                  var r = (i = this.K ? this.K.i : 1) * n.bandwidth;
                  t && t.bandwidth && (r += i * t.bandwidth), (this.A.A = r);
                }
                n &&
                  n.video &&
                  ((t = this.A),
                  (i = n.video.height || NaN),
                  (t.m = n.video.width || NaN),
                  (t.l = i)),
                  this.R() && ((n = this.td() || 0), (this.A.B = n / 1e3)),
                  this.i &&
                    ((this.A.F = this.i.periodCount),
                    (this.A.D = this.i.gapCount),
                    this.i.presentationTimeline &&
                      (this.A.J = this.i.presentationTimeline.h)),
                  (n = this.o.getBandwidthEstimate()),
                  (this.A.s = n);
              }
              this.m == ng &&
                (((n = this.A).Pb = isNaN(n.Pb) ? NaN : n.Pb + NaN),
                (n = this.A),
                (t = e.videoHeight || NaN),
                (n.m = e.videoWidth || NaN),
                (n.l = t));
              var a = this.A;
              (e = a.m), (n = a.l), (t = a.A), (i = a.O), (r = a.S);
              for (
                var o = a.L,
                  s = a.X,
                  u = a.W,
                  c = a.s,
                  d = a.i,
                  h = a.C,
                  f = a.G,
                  p = a.j,
                  g = kh(a.g, "playing"),
                  m = kh(a.g, "paused"),
                  v = kh(a.g, "buffering"),
                  y = a.o,
                  b = a.B,
                  w = a.J,
                  x = a.cg,
                  S = a.Pb,
                  T = a.K,
                  A = a.F,
                  k = a.D,
                  I = (function (e) {
                    function t(e) {
                      return {
                        timestamp: e.timestamp,
                        state: e.state,
                        duration: e.duration,
                      };
                    }
                    for (
                      var n = [], i = l(e.h), r = i.next();
                      !r.done;
                      r = i.next()
                    )
                      n.push(t(r.value));
                    return e.g && n.push(t(e.g)), n;
                  })(a.g),
                  C = [],
                  M = (a = l(a.h.g)).next();
                !M.done;
                M = a.next()
              )
                (M = M.value),
                  C.push({
                    timestamp: M.timestamp,
                    id: M.id,
                    type: M.type,
                    fromAdaptation: M.fromAdaptation,
                    bandwidth: M.bandwidth,
                  });
              return {
                width: e,
                height: n,
                streamBandwidth: t,
                decodedFrames: i,
                droppedFrames: r,
                corruptedFrames: o,
                stallsDetected: s,
                gapsJumped: u,
                estimatedBandwidth: c,
                completionPercent: d,
                loadLatency: h,
                manifestTimeSeconds: f,
                drmTimeSeconds: p,
                playTime: g,
                pauseTime: m,
                bufferingTime: v,
                licenseTime: y,
                liveLatency: b,
                maxSegmentDuration: w,
                manifestSizeBytes: x,
                bytesDownloaded: S,
                nonFatalErrorCount: T,
                manifestPeriodCount: A,
                manifestGapCount: k,
                stateHistory: I,
                switchHistory: C,
              };
            }),
            (i.Og = function (e, t, n, i, r, a, o) {
              o = void 0 !== o && o;
              var s,
                u,
                l,
                c,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b = this;
              return P(function (x) {
                switch (x.g) {
                  case 1:
                    if (b.m != tg && b.m != ng) throw new Me(1, 7, 7004);
                    if (
                      ("subtitles" != n &&
                        "captions" != n &&
                        W(
                          "Using a kind value different of `subtitles` or `captions` can cause unwanted issues."
                        ),
                      i)
                    ) {
                      x.u(2);
                      break;
                    }
                    return w(x, Tp(b, e), 3);
                  case 3:
                    i = x.h;
                  case 2:
                    if (
                      ((s = []), b.B && (s = b.B.getCuePoints()), b.m != ng)
                    ) {
                      x.u(4);
                      break;
                    }
                    return (
                      o && (n = "forced"),
                      w(
                        x,
                        (function (e, t, n, i, r, a, o) {
                          var s, u, l, c;
                          return P(function (d) {
                            if (1 == d.g)
                              return "text/vtt" != r || o.length
                                ? w(
                                    d,
                                    Ap(
                                      e,
                                      t,
                                      e.D,
                                      e.g.streaming.retryParameters
                                    ),
                                    3
                                  )
                                : d.u(2);
                            2 != d.g &&
                              ((s = d.h),
                              (u = kp(e, s, r, o)),
                              (l = new Blob([u], { type: "text/vtt" })),
                              (t = xd(l)),
                              (r = "text/vtt")),
                              (c = document.createElement("track"));
                            var h = e.L,
                              f = t;
                            try {
                              if (h.g.enabled) {
                                var p = Cf(h);
                                (p.ot = jf), (p.su = !0);
                                var g = Pf(f, Df(p));
                              } else g = f;
                            } catch (e) {
                              X(
                                "CMCD_TEXT_TRACK_ERROR",
                                "Could not generate text track CMCD data.",
                                e
                              ),
                                (g = f);
                            }
                            return (
                              (c.src = g),
                              (c.label = a),
                              (c.kind = i),
                              (c.srclang = n),
                              e.h.getAttribute("crossorigin") ||
                                e.h.setAttribute("crossorigin", "anonymous"),
                              e.h.appendChild(c),
                              d.return(c)
                            );
                          });
                        })(b, e, t, n, i, a || "", s),
                        5
                      )
                    );
                  case 5:
                    if (
                      ((u = tr(t)),
                      (l = b.Yb()),
                      (c = l.find(function (e) {
                        return (
                          tr(e.language) == u &&
                          e.label == (a || "") &&
                          e.kind == n
                        );
                      })))
                    )
                      return Up(b), x.return(c);
                    throw new Me(1, 2, 2012);
                  case 4:
                    if (
                      ((d = Rt),
                      (h = b.La()),
                      (f = h.end - h.start),
                      b.i && (f = b.i.presentationTimeline.getDuration()),
                      1 / 0 == f)
                    )
                      throw new Me(1, 4, 4033);
                    if (!s.length) {
                      x.u(6);
                      break;
                    }
                    return w(
                      x,
                      Ap(b, e, b.D, b.g.streaming.retryParameters),
                      7
                    );
                  case 7:
                    (p = x.h),
                      (g = kp(b, p, i, s)),
                      (m = new Blob([g], { type: "text/vtt" })),
                      (e = xd(m)),
                      (i = "text/vtt");
                  case 6:
                    if (
                      ((v = {
                        id: b.fe++,
                        originalId: null,
                        groupId: null,
                        createSegmentIndex: function () {
                          return Promise.resolve();
                        },
                        segmentIndex: Es(0, f, [e]),
                        mimeType: i || "",
                        codecs: r || "",
                        kind: n,
                        encrypted: !1,
                        drmInfos: [],
                        keyIds: new Set(),
                        language: t,
                        originalLanguage: t,
                        label: a || null,
                        type: d.ua,
                        primary: !1,
                        trickModeVideo: null,
                        dependencyStream: null,
                        emsgSchemeIdUris: null,
                        roles: [],
                        forced: !!o,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        accessibilityPurpose: null,
                        external: !0,
                        fastSwitching: !1,
                        fullMimeTypes: new Set([Ci(i || "", r || "")]),
                        isAudioMuxedInVideo: !1,
                        baseOriginalId: null,
                      }),
                      (y = Ci(v.mimeType, v.codecs)),
                      !zi(y))
                    )
                      throw new Me(2, 2, 2014, i);
                    return b.i.textStreams.push(v), Up(b), x.return(yr(v));
                }
              });
            }),
            (i.Pg = function (e, t) {
              var n,
                i,
                r,
                a,
                o,
                s,
                u,
                c,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b,
                x,
                S = this;
              return P(function (T) {
                switch (T.g) {
                  case 1:
                    if (S.m != tg && S.m != ng) throw new Me(1, 7, 7004);
                    if (t) {
                      T.u(2);
                      break;
                    }
                    return w(T, Tp(S, e), 3);
                  case 3:
                    t = T.h;
                  case 2:
                    if ("text/vtt" != t) throw new Me(1, 2, 2017, e);
                    if (
                      ((n = Rt),
                      (i = S.La()),
                      (r = i.end - i.start),
                      S.i && (r = S.i.presentationTimeline.getDuration()),
                      1 / 0 == r)
                    )
                      throw new Me(1, 4, 4045);
                    return w(
                      T,
                      Ap(S, e, S.D, S.g.streaming.retryParameters),
                      4
                    );
                  case 4:
                    if (((a = T.h), !(o = Vi(t)))) throw new Me(2, 2, 2014, t);
                    for (
                      s = o(),
                        u = {
                          periodStart: 0,
                          segmentStart: 0,
                          segmentEnd: r,
                          vttOffset: 0,
                        },
                        c = Ae(a),
                        d = s.parseMedia(c, u, e, []),
                        h = [],
                        f = l(d),
                        p = f.next(),
                        g = {};
                      !p.done;
                      g = { $d: void 0, lc: void 0 }, p = f.next()
                    )
                      (g.lc = p.value),
                        (g.$d = null),
                        (m = (function (t) {
                          return function () {
                            return (
                              null == t.$d && (t.$d = Ct([e], [t.lc.payload])),
                              t.$d || []
                            );
                          };
                        })(g)),
                        (v = new ms(
                          g.lc.startTime,
                          g.lc.endTime,
                          m,
                          0,
                          null,
                          null,
                          0,
                          0,
                          1 / 0
                        )),
                        g.lc.payload.includes("#xywh") &&
                          4 ===
                            (y = g.lc.payload.split("#xywh=")[1].split(","))
                              .length &&
                          v.zg({
                            height: parseInt(y[3], 10),
                            positionX: parseInt(y[0], 10),
                            positionY: parseInt(y[1], 10),
                            width: parseInt(y[2], 10),
                          }),
                        h.push(v);
                    if (((b = t), !h.length)) {
                      T.u(5);
                      break;
                    }
                    return w(
                      T,
                      uf(h[0].T()[0], S.D, S.g.manifest.retryParameters),
                      6
                    );
                  case 6:
                    b = T.h;
                  case 5:
                    return (
                      (x = {
                        id: S.fe++,
                        originalId: null,
                        groupId: null,
                        createSegmentIndex: function () {
                          return Promise.resolve();
                        },
                        segmentIndex: new Ms(h),
                        mimeType: b || "",
                        codecs: "",
                        kind: "",
                        encrypted: !1,
                        drmInfos: [],
                        keyIds: new Set(),
                        language: "und",
                        originalLanguage: null,
                        label: null,
                        type: n.Mg,
                        primary: !1,
                        trickModeVideo: null,
                        dependencyStream: null,
                        emsgSchemeIdUris: null,
                        roles: [],
                        forced: !1,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        tilesLayout: "1x1",
                        accessibilityPurpose: null,
                        external: !0,
                        fastSwitching: !1,
                        fullMimeTypes: new Set([Ci(b || "", "")]),
                        isAudioMuxedInVideo: !1,
                        baseOriginalId: null,
                      }),
                      S.m == ng ? S.ae.push(x) : S.i.imageStreams.push(x),
                      Up(S),
                      T.return(br(x))
                    );
                }
              });
            }),
            (i.Ng = function (e, t, n) {
              var i,
                r,
                a,
                o,
                s,
                u,
                c,
                d,
                h,
                f,
                p,
                g,
                m,
                v,
                y,
                b = this;
              return P(function (x) {
                switch (x.g) {
                  case 1:
                    if (b.m != tg && b.m != ng) throw new Me(1, 7, 7004);
                    if (n) {
                      x.u(2);
                      break;
                    }
                    return w(x, Tp(b, e), 3);
                  case 3:
                    n = x.h;
                  case 2:
                    if (
                      ((i = Rt),
                      (r = b.La()),
                      (a = r.end - r.start),
                      b.i && (a = b.i.presentationTimeline.getDuration()),
                      1 / 0 == a)
                    )
                      throw new Me(1, 4, 4054);
                    return w(
                      x,
                      Ap(b, e, b.D, b.g.streaming.retryParameters),
                      4
                    );
                  case 4:
                    if (((o = x.h), !(s = Vi(n)))) throw new Me(2, 2, 2014, n);
                    for (
                      u = s(),
                        c = {
                          periodStart: 0,
                          segmentStart: 0,
                          segmentEnd: a,
                          vttOffset: 0,
                        },
                        d = Ae(o),
                        h = u.parseMedia(d, c, e, []),
                        f = [],
                        p = l(h),
                        g = p.next(),
                        m = {};
                      !g.done;
                      m = { pd: void 0 }, g = p.next()
                    )
                      (m.pd = g.value),
                        (v = new ms(
                          m.pd.startTime,
                          m.pd.endTime,
                          (function (e) {
                            return function () {
                              return [e.pd.payload];
                            };
                          })(m),
                          0,
                          null,
                          null,
                          0,
                          0,
                          1 / 0
                        )),
                        f.push(v);
                    return (
                      (y = {
                        id: b.fe++,
                        originalId: null,
                        groupId: null,
                        createSegmentIndex: function () {
                          return Promise.resolve();
                        },
                        segmentIndex: new Ms(f),
                        mimeType: "text/plain",
                        codecs: "",
                        kind: "",
                        encrypted: !1,
                        drmInfos: [],
                        keyIds: new Set(),
                        language: t,
                        originalLanguage: t,
                        label: null,
                        type: i.ua,
                        primary: !1,
                        trickModeVideo: null,
                        dependencyStream: null,
                        emsgSchemeIdUris: null,
                        roles: [],
                        forced: !1,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        accessibilityPurpose: null,
                        external: !0,
                        fastSwitching: !1,
                        fullMimeTypes: new Set([Ci("text/plain", "")]),
                        isAudioMuxedInVideo: !1,
                        baseOriginalId: null,
                      }),
                      b.dd.push(y),
                      Up(b),
                      x.return(yr(y))
                    );
                }
              });
            }),
            (i.vi = function (e, t) {
              (this.la.width = e), (this.la.height = t);
            }),
            (i.hf = function (e) {
              if (this.m == tg) {
                var t = this.j;
                if (((e = void 0 === e ? 0.1 : e), t.m.g)) t = !1;
                else if (t.B) t = !1;
                else {
                  for (
                    var n = l(t.i.values()), i = n.next();
                    !i.done;
                    i = n.next()
                  )
                    !(i = i.value).Qc ||
                      i.sa ||
                      i.Va ||
                      ((i.Qc = !1), yh(t, i, e));
                  t = !0;
                }
              } else t = !1;
              return t;
            }),
            (i.Oe = function () {
              return (
                W(
                  "Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."
                ),
                this.i
              );
            }),
            (i.qh = function () {
              return this.nc;
            }),
            (i.kh = function () {
              var e = { video: null, audio: null, text: null };
              if (this.m != tg) return e;
              for (
                var t = this.j.l,
                  n = this.h.currentTime,
                  i = (t = l([t.video, t.audio, this.j.s])).next();
                !i.done;
                i = t.next()
              )
                if ((i = i.value) && i.segmentIndex) {
                  var r = i.segmentIndex.find(n);
                  (r = {
                    codecs: (r = i.segmentIndex.get(r)).codecs || i.codecs,
                    mimeType: r.mimeType || i.mimeType,
                    bandwidth: r.bandwidth || i.bandwidth,
                  }),
                    "video" == i.type
                      ? ((r.width = i.width),
                        (r.height = i.height),
                        (e.video = r))
                      : "audio" == i.type
                      ? (e.audio = r)
                      : i.type == Lt && (e.text = r);
                }
              return e;
            }),
            (i.yi = function (e) {
              this.Nd = e;
            }),
            (i.disableStream = function (e, t) {
              if (
                !this.g.abr.enabled ||
                this.m === Qp ||
                !navigator.onLine ||
                0 == t ||
                !this.i
              )
                return !1;
              if (
                this.i.variants.some(function (t) {
                  var n = t[e.type];
                  return (
                    !(!n || n.id === e.id || t.disabledUntilTime) &&
                    ("audio" != e.type || e.language === n.language)
                  );
                })
              ) {
                for (
                  var n = !1, i = !1, r = l(this.i.variants), a = r.next();
                  !a.done;
                  a = r.next()
                ) {
                  var o = (a = a.value)[e.type];
                  o &&
                    (o.id === e.id
                      ? ((a.disabledUntilTime = Date.now() / 1e3 + t), (n = !0))
                      : o.trickModeVideo &&
                        o.trickModeVideo.id == e.id &&
                        (i = !0));
                }
                return (
                  !(!n && i) &&
                  (this.Td.ta(1),
                  (t = this.hb().video.reduce(function (e, t) {
                    return e + t.end - t.start;
                  }, 0)),
                  Rp(this, !1, t, !0, !1),
                  !0)
                );
              }
              return !1;
            }),
            (i.addFont = function (t, n) {
              return (function (t, n) {
                var i, r, a, o, s;
                return P(function (u) {
                  if (1 == u.g)
                    return "fonts" in document && "FontFace" in e
                      ? w(u, document.fonts.ready, 2)
                      : u.return();
                  if (!("entries" in document.fonts)) return u.return();
                  for (
                    i = function (e) {
                      for (
                        var t = [], n = (e = e.entries()).next();
                        !1 === n.done;

                      )
                        t.push(n.value), (n = e.next());
                      return t;
                    },
                      r = l(i(document.fonts)),
                      a = r.next();
                    !a.done;
                    a = r.next()
                  )
                    if ((o = a.value).family === t && "swap" === o.display)
                      return u.return();
                  (s = new FontFace(t, "url(" + n + ")", { display: "swap" })),
                    document.fonts.add(s),
                    x(u);
                });
              })(t, n);
            }),
            (i.Ka = function () {
              return (
                !(!this.h || !this.h.remote) &&
                "disconnected" != this.h.remote.state
              );
            }),
            (i.vc = function () {
              return (
                !(this.h && !this.h.ended) ||
                (this.xa && !this.R() && this.h.currentTime >= this.La().end)
              );
            }),
            B("shaka.Player", Zf),
            (Zf.prototype.isEnded = Zf.prototype.vc),
            (Zf.prototype.isRemotePlayback = Zf.prototype.Ka),
            (Zf.prototype.addFont = Zf.prototype.addFont),
            (Zf.prototype.setVideoContainer = Zf.prototype.yi),
            (Zf.prototype.getFetchedPlaybackInfo = Zf.prototype.kh),
            (Zf.prototype.getManifestParserFactory = Zf.prototype.qh),
            (Zf.prototype.getManifest = Zf.prototype.Oe),
            (Zf.prototype.retryStreaming = Zf.prototype.hf),
            (Zf.prototype.setMaxHardwareResolution = Zf.prototype.vi),
            (Zf.prototype.addChaptersTrack = Zf.prototype.Ng),
            (Zf.prototype.addThumbnailsTrack = Zf.prototype.Pg),
            (Zf.prototype.addTextTrackAsync = Zf.prototype.Og),
            (Zf.prototype.getStats = Zf.prototype.getStats),
            (Zf.prototype.getBufferedInfo = Zf.prototype.hb),
            (Zf.prototype.getSegmentAvailabilityDuration = Zf.prototype.vd),
            (Zf.prototype.getPresentationStartTimeAsDate = Zf.prototype.Vf),
            (Zf.prototype.getPlayheadTimeAsDate = Zf.prototype.vh),
            (Zf.prototype.setTextTrackVisibility = Zf.prototype.xi),
            (Zf.prototype.getChapters = Zf.prototype.fh),
            (Zf.prototype.getChaptersTracks = Zf.prototype.gh),
            (Zf.prototype.isTextTrackVisible = Zf.prototype.Ue),
            (Zf.prototype.selectVariantsByLabel = Zf.prototype.ti),
            (Zf.prototype.selectTextLanguage = Zf.prototype.sg),
            (Zf.prototype.selectAudioLanguage = Zf.prototype.rg),
            (Zf.prototype.getTextLanguages = Zf.prototype.Bh),
            (Zf.prototype.getAudioLanguages = Zf.prototype.bh),
            (Zf.prototype.getTextLanguagesAndRoles = Zf.prototype.Ch),
            (Zf.prototype.getAudioLanguagesAndRoles = Zf.prototype.dh),
            (Zf.prototype.getAudioTracks = Zf.prototype.getAudioTracks),
            (Zf.prototype.selectAudioTrack = Zf.prototype.si),
            (Zf.prototype.selectVariantTrack = Zf.prototype.Rd),
            (Zf.prototype.selectTextTrack = Zf.prototype.tg),
            (Zf.prototype.getThumbnails = Zf.prototype.Eh),
            (Zf.prototype.getAllThumbnails = Zf.prototype.ah),
            (Zf.prototype.getImageTracks = Zf.prototype.mh),
            (Zf.prototype.getTextTracks = Zf.prototype.Yb),
            (Zf.prototype.getVariantTracks = Zf.prototype.yb),
            (Zf.prototype.cancelTrickPlay = Zf.prototype.Hc),
            (Zf.prototype.trickPlay = Zf.prototype.gd),
            (Zf.prototype.getPlaybackRate = Zf.prototype.Ra),
            (Zf.prototype.isBuffering = Zf.prototype.Zf),
            (Zf.prototype.getKeyStatuses = Zf.prototype.sd),
            (Zf.prototype.getActiveSessionsMetadata = Zf.prototype.Me),
            (Zf.prototype.getExpiration = Zf.prototype.Ne),
            (Zf.prototype.drmInfo = Zf.prototype.drmInfo),
            (Zf.prototype.keySystem = Zf.prototype.keySystem),
            (Zf.prototype.isFullyLoaded = Zf.prototype.Nh),
            (Zf.prototype.goToLive = Zf.prototype.Jh),
            (Zf.prototype.seekRange = Zf.prototype.La),
            (Zf.prototype.isAudioOnly = Zf.prototype.Mh),
            (Zf.prototype.isInProgress = Zf.prototype.wc),
            (Zf.prototype.isLive = Zf.prototype.R),
            (Zf.prototype.getAdManager = Zf.prototype.$g),
            (Zf.prototype.getAssetUri = Zf.prototype.qd),
            (Zf.prototype.getNetworkingEngine = Zf.prototype.Pe),
            (Zf.prototype.getMediaElement = Zf.prototype.th),
            (Zf.prototype.getManifestType = Zf.prototype.Tf),
            (Zf.prototype.getLoadMode = Zf.prototype.ph),
            (Zf.prototype.resetConfiguration = Zf.prototype.mi),
            (Zf.prototype.getBufferFullness = Zf.prototype.Rf),
            (Zf.prototype.getNonDefaultConfiguration = Zf.prototype.uh),
            (Zf.prototype.getConfigurationForLowLatency = Zf.prototype.hh),
            (Zf.prototype.getConfiguration = Zf.prototype.getConfiguration),
            (Zf.prototype.configurationForLowLatency = Zf.prototype.Xg),
            (Zf.prototype.configure = Zf.prototype.configure),
            (Zf.prototype.releaseAllMutexes = Zf.prototype.ki),
            (Zf.prototype.destroyAllPreloads = Zf.prototype.Mf),
            (Zf.prototype.preload = Zf.prototype.preload),
            (Zf.prototype.detachAndSavePreload = Zf.prototype.Nf),
            (Zf.prototype.unloadAndSavePreload = Zf.prototype.Bi),
            (Zf.prototype.load = Zf.prototype.load),
            (Zf.prototype.updateStartTime = Zf.prototype.Fi),
            (Zf.prototype.unload = Zf.prototype.hd),
            (Zf.prototype.detach = Zf.prototype.detach),
            (Zf.prototype.attachCanvas = Zf.prototype.Sg),
            (Zf.prototype.attach = Zf.prototype.Cb),
            (Zf.probeSupport = function (t) {
              var n, i, r, a, o;
              return (
                (t = void 0 === t || t),
                P(function (s) {
                  switch (s.g) {
                    case 1:
                      if (((n = {}), !t)) {
                        s.u(2);
                        break;
                      }
                      return w(
                        s,
                        (function () {
                          var t,
                            n,
                            i,
                            r,
                            a,
                            o,
                            s,
                            u,
                            c,
                            d,
                            h,
                            f,
                            p,
                            g,
                            m,
                            v,
                            y,
                            b,
                            k,
                            I,
                            C,
                            M,
                            E,
                            D,
                            L,
                            R,
                            N,
                            _,
                            U,
                            j,
                            O,
                            B,
                            F;
                          return P(function (H) {
                            if (1 == H.g) {
                              if (
                                ((t =
                                  "org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(
                                    " "
                                  )),
                                !(
                                  e.MediaKeys &&
                                  e.navigator &&
                                  e.navigator.requestMediaKeySystemAccess &&
                                  e.MediaKeySystemAccess &&
                                  e.MediaKeySystemAccess.prototype
                                    .getConfiguration
                                ))
                              ) {
                                for (
                                  n = {}, i = l(t), r = i.next();
                                  !r.done;
                                  r = i.next()
                                )
                                  (a = r.value), (n[a] = null);
                                return H.return(n);
                              }
                              for (
                                o = "1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(
                                  " "
                                ),
                                  u = {
                                    "com.widevine.alpha": (s = [
                                      "SW_SECURE_CRYPTO",
                                      "SW_SECURE_DECODE",
                                      "HW_SECURE_CRYPTO",
                                      "HW_SECURE_DECODE",
                                      "HW_SECURE_ALL",
                                    ]),
                                    "com.widevine.alpha.experiment": s,
                                    "com.microsoft.playready.recommendation": [
                                      "150",
                                      "2000",
                                      "3000",
                                    ],
                                  },
                                  h = {
                                    videoCapabilities: (c = [
                                      {
                                        contentType:
                                          'video/mp4; codecs="avc1.42E01E"',
                                      },
                                      {
                                        contentType: 'video/webm; codecs="vp8"',
                                      },
                                    ]),
                                    audioCapabilities: (d = [
                                      {
                                        contentType:
                                          'audio/mp4; codecs="mp4a.40.2"',
                                      },
                                      {
                                        contentType:
                                          'audio/webm; codecs="opus"',
                                      },
                                    ]),
                                    initDataTypes: [
                                      "cenc",
                                      "sinf",
                                      "skd",
                                      "keyids",
                                    ],
                                  },
                                  f = [null, "cenc", "cbcs", "cbcs-1-9"],
                                  p = new Map(),
                                  g = function (e, t) {
                                    var n, i, r, a, s, u, c, d, h, f, g, m, v;
                                    return P(function (y) {
                                      switch (y.g) {
                                        case 1:
                                          return (
                                            S(y, 2),
                                            w(y, t.createMediaKeys(), 5)
                                          );
                                        case 5:
                                          n = y.h;
                                        case 4:
                                          T(y, 3);
                                          break;
                                        case 2:
                                          return A(y), y.return();
                                        case 3:
                                          if (
                                            ((r =
                                              !!(i =
                                                t.getConfiguration()
                                                  .sessionTypes) &&
                                              i.includes("persistent-license")),
                                            ze() && (r = !1),
                                            (a =
                                              t.getConfiguration()
                                                .videoCapabilities),
                                            (s =
                                              t.getConfiguration()
                                                .audioCapabilities),
                                            (u = {
                                              persistentState: r,
                                              encryptionSchemes: [],
                                              videoRobustnessLevels: [],
                                              audioRobustnessLevels: [],
                                              minHdcpVersions: [],
                                            }),
                                            p.has(e) && p.get(e)
                                              ? (u = p.get(e))
                                              : p.set(e, u),
                                            (c = a[0].encryptionScheme) &&
                                              !u.encryptionSchemes.includes(
                                                c
                                              ) &&
                                              u.encryptionSchemes.push(c),
                                            (d = a[0].robustness) &&
                                              !u.videoRobustnessLevels.includes(
                                                d
                                              ) &&
                                              u.videoRobustnessLevels.push(d),
                                            (h = s[0].robustness) &&
                                              !u.audioRobustnessLevels.includes(
                                                h
                                              ) &&
                                              u.audioRobustnessLevels.push(h),
                                            ("getStatusForPolicy" in n))
                                          ) {
                                            for (
                                              f = [],
                                                g = l(o),
                                                m = g.next(),
                                                v = {};
                                              !m.done;
                                              v = { Rc: void 0 }, m = g.next()
                                            )
                                              (v.Rc = m.value),
                                                u.minHdcpVersions.includes(
                                                  v.Rc
                                                ) ||
                                                  f.push(
                                                    n
                                                      .getStatusForPolicy({
                                                        minHdcpVersion: v.Rc,
                                                      })
                                                      .then(
                                                        (function (e) {
                                                          return function (t) {
                                                            "usable" != t ||
                                                              u.minHdcpVersions.includes(
                                                                e.Rc
                                                              ) ||
                                                              u.minHdcpVersions.push(
                                                                e.Rc
                                                              );
                                                          };
                                                        })(v)
                                                      )
                                                  );
                                            return w(y, Promise.all(f), 0);
                                          }
                                          y.u(0);
                                      }
                                    });
                                  },
                                  m = function (e, t, n, i) {
                                    var r, a, o, s, u, c, d, f, p, m;
                                    return P(function (v) {
                                      switch (v.g) {
                                        case 1:
                                          for (
                                            S(v, 2),
                                              r = dn(h),
                                              a = l(r.videoCapabilities),
                                              o = a.next();
                                            !o.done;
                                            o = a.next()
                                          )
                                            ((s = o.value).encryptionScheme =
                                              t),
                                              (s.robustness = n);
                                          for (
                                            u = l(r.audioCapabilities),
                                              c = u.next();
                                            !c.done;
                                            c = u.next()
                                          )
                                            ((d = c.value).encryptionScheme =
                                              t),
                                              (d.robustness = i);
                                          return (
                                            ((f = dn(r)).persistentState =
                                              "required"),
                                            (f.sessionTypes = [
                                              "persistent-license",
                                            ]),
                                            (p = [f, r]),
                                            tt()
                                              ? w(
                                                  v,
                                                  Ji(
                                                    5,
                                                    navigator.requestMediaKeySystemAccess(
                                                      e,
                                                      p
                                                    )
                                                  ),
                                                  7
                                                )
                                              : w(
                                                  v,
                                                  navigator.requestMediaKeySystemAccess(
                                                    e,
                                                    p
                                                  ),
                                                  6
                                                )
                                          );
                                        case 6:
                                          (m = v.h), v.u(5);
                                          break;
                                        case 7:
                                          m = v.h;
                                        case 5:
                                          return w(v, g(e, m), 8);
                                        case 8:
                                          T(v, 0);
                                          break;
                                        case 2:
                                          A(v), x(v);
                                      }
                                    });
                                  },
                                  v = function (e, t, n, i) {
                                    var r, a, o;
                                    return P(function (s) {
                                      switch (s.g) {
                                        case 1:
                                          return (
                                            S(s, 2),
                                            (r = {
                                              type: "media-source",
                                              video: {
                                                contentType: c[0].contentType,
                                                width: 640,
                                                height: 480,
                                                bitrate: 1,
                                                framerate: 1,
                                              },
                                              audio: {
                                                contentType: d[0].contentType,
                                                channels: 2,
                                                bitrate: 1,
                                                samplerate: 1,
                                              },
                                              keySystemConfiguration: {
                                                keySystem: e,
                                                video: {
                                                  encryptionScheme: t,
                                                  robustness: n,
                                                },
                                                audio: {
                                                  encryptionScheme: t,
                                                  robustness: i,
                                                },
                                              },
                                            }),
                                            tt()
                                              ? w(
                                                  s,
                                                  Ji(
                                                    5,
                                                    navigator.mediaCapabilities.decodingInfo(
                                                      r
                                                    )
                                                  ),
                                                  7
                                                )
                                              : w(
                                                  s,
                                                  navigator.mediaCapabilities.decodingInfo(
                                                    r
                                                  ),
                                                  6
                                                )
                                          );
                                        case 6:
                                          (a = s.h), s.u(5);
                                          break;
                                        case 7:
                                          a = s.h;
                                        case 5:
                                          return (
                                            (o = a.keySystemAccess),
                                            w(s, g(e, o), 8)
                                          );
                                        case 8:
                                          T(s, 0);
                                          break;
                                        case 2:
                                          A(s), x(s);
                                      }
                                    });
                                  },
                                  y = l(t),
                                  b = y.next();
                                !b.done;
                                b = y.next()
                              )
                                (k = b.value), p.set(k, null);
                              for (
                                I = function (e) {
                                  return "org.w3.clearkey" !== e || !Xe();
                                },
                                  C = [],
                                  M = l(f),
                                  E = M.next();
                                !E.done;
                                E = M.next()
                              )
                                for (
                                  D = E.value, L = l(t), R = L.next();
                                  !R.done;
                                  R = L.next()
                                )
                                  (N = R.value),
                                    I(N) &&
                                      (C.push(m(N, D, "", "")),
                                      C.push(v(N, D, "", "")));
                              for (
                                _ = l(t), U = _.next();
                                !U.done;
                                U = _.next()
                              )
                                for (
                                  j = U.value, O = l(u[j] || []), B = O.next();
                                  !B.done;
                                  B = O.next()
                                )
                                  (F = B.value),
                                    I(j) &&
                                      (C.push(m(j, null, F, "")),
                                      C.push(m(j, null, "", F)),
                                      C.push(v(j, null, F, "")),
                                      C.push(v(j, null, "", F)));
                              return w(H, Promise.all(C), 2);
                            }
                            return H.return(Nl(p));
                          });
                        })(),
                        3
                      );
                    case 3:
                      n = s.h;
                    case 2:
                      return (
                        (i = (function () {
                          var e = {};
                          if (Oe())
                            for (
                              var t = l(Ys.keys()), n = t.next();
                              !n.done;
                              n = t.next()
                            )
                              e[n.value] = !0;
                          for (
                            n = (t = l([
                              "application/dash+xml",
                              "application/x-mpegurl",
                              "application/vnd.apple.mpegurl",
                              "application/vnd.ms-sstr+xml",
                            ])).next();
                            !n.done;
                            n = t.next()
                          )
                            e[(n = n.value)] = Oe() ? Ys.has(n) : Be(n);
                          return e;
                        })()),
                        (r = (function () {
                          for (
                            var e =
                                'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'
                                  .split(",")
                                  .concat(c(Bi)),
                              t = {},
                              n = (e = l(e)).next();
                            !n.done;
                            n = e.next()
                          ) {
                            zi((n = n.value))
                              ? (t[n] = !0)
                              : (t[n] = Oe() ? Ft(n) || !!wi(n) : Be(n));
                            var i = n.split(";")[0];
                            t[i] = t[i] || t[n];
                          }
                          return t;
                        })()),
                        w(s, st(), 4)
                      );
                    case 4:
                      return (
                        (a = s.h),
                        (o = {
                          manifest: i,
                          media: r,
                          drm: n,
                          hardwareResolution: a,
                        }),
                        rg.forEach(function (e, t) {
                          o[t] = e();
                        }),
                        s.return(o)
                      );
                  }
                })
              );
            }),
            (Zf.isBrowserSupported = function () {
              return (
                e.Promise ||
                  W("A Promise implementation or polyfill is required"),
                !(
                  !(e.Promise && e.Uint8Array && Array.prototype.forEach) ||
                  it("Trident/")
                ) &&
                  (!!Oe() || Be("application/x-mpegurl"))
              );
            }),
            (Zf.setAdManagerFactory = function (e) {
              ag = e;
            }),
            (Zf.registerSupportPlugin = function (e, t) {
              rg.set(e, t);
            }),
            (Zf.prototype.destroy = Zf.prototype.destroy);
          var Qp = 0,
            eg = 1,
            tg = 2,
            ng = 3;
          (Zf.LoadMode = {
            DESTROYED: Qp,
            NOT_LOADED: eg,
            MEDIA_SOURCE: tg,
            SRC_EQUALS: ng,
          }),
            (Zf.version = "4.14.12-npm-dirty");
          var ig = ["", "14"];
          re = new (function (e) {
            (this.g = e), (this.i = ne), (this.h = ie);
          })(new ee(Number(ig[0]), Number(ig[1])));
          var rg = new Map(),
            ag = null;
          function og() {}
          function sg(e, t) {
            for (
              e = { priority: t || 0, callback: e }, t = 0;
              t < ug.length;
              t++
            )
              if (ug[t].priority < e.priority) return void ug.splice(t, 0, e);
            ug.push(e);
          }
          B("shaka.polyfill", og),
            (og.register = sg),
            (og.installAll = function () {
              for (var e = l(ug), t = e.next(); !t.done; t = e.next()) {
                t = t.value;
                try {
                  t.callback();
                } catch (e) {
                  W("Error installing polyfill!", e);
                }
              }
            });
          var ug = [];
          function lg() {}
          function cg() {
            if (
              !Object.getOwnPropertyDescriptor(Element.prototype, "ariaHidden")
            )
              for (
                var e = l([
                    "ariaHidden",
                    "ariaLabel",
                    "ariaPressed",
                    "ariaSelected",
                  ]),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                dg(t.value);
          }
          function dg(e) {
            var t = "aria-" + e.toLowerCase().replace(/^aria/, "");
            Object.defineProperty(Element.prototype, e, {
              get: function () {
                return this.getAttribute(t);
              },
              set: function (e) {
                null == e || null == e
                  ? this.removeAttribute(t)
                  : this.setAttribute(t, e);
              },
            });
          }
          function hg() {}
          function fg() {
            Je() || it("Sky_STB") || ty();
          }
          function pg() {}
          function gg() {
            if (e.Document) {
              var t = Element.prototype;
              (t.requestFullscreen =
                t.requestFullscreen ||
                t.mozRequestFullScreen ||
                t.msRequestFullscreen ||
                t.webkitRequestFullscreen),
                ((t = Document.prototype).exitFullscreen =
                  t.exitFullscreen ||
                  t.mozCancelFullScreen ||
                  t.msExitFullscreen ||
                  t.webkitCancelFullScreen),
                "fullscreenElement" in document ||
                  (Object.defineProperty(document, "fullscreenElement", {
                    get: function () {
                      return (
                        document.mozFullScreenElement ||
                        document.msFullscreenElement ||
                        document.webkitCurrentFullScreenElement ||
                        document.webkitFullscreenElement
                      );
                    },
                  }),
                  Object.defineProperty(document, "fullscreenEnabled", {
                    get: function () {
                      return (
                        document.mozFullScreenEnabled ||
                        document.msFullscreenEnabled ||
                        document.webkitFullscreenEnabled
                      );
                    },
                  })),
                document.addEventListener("webkitfullscreenchange", mg),
                document.addEventListener("webkitfullscreenerror", mg),
                document.addEventListener("mozfullscreenchange", mg),
                document.addEventListener("mozfullscreenerror", mg),
                document.addEventListener("MSFullscreenChange", mg),
                document.addEventListener("MSFullscreenError", mg);
            }
          }
          function mg(e) {
            var t = e.type.replace(/^(webkit|moz|MS)/, "").toLowerCase(),
              n = document.createEvent("Event");
            n.initEvent(t, e.bubbles, e.cancelable), e.target.dispatchEvent(n);
          }
          function vg() {}
          function yg() {
            var e = !0;
            ((Ke() && !tt() && !nt()) ||
              Xe() ||
              Ye() ||
              Je() ||
              Ge() ||
              Ve() ||
              $e() ||
              Ze() ||
              (rt() && !Xe())) &&
              (e = !1),
              (e && navigator.mediaCapabilities) ||
                (navigator.mediaCapabilities ||
                  (navigator.mediaCapabilities = {}),
                (wg = navigator.mediaCapabilities),
                (navigator.mediaCapabilities.decodingInfo = bg));
          }
          function bg(t) {
            var n, i, r, a, o, s, u;
            return P(function (l) {
              switch (l.g) {
                case 1:
                  if (
                    ((n = {
                      supported: !1,
                      powerEfficient: !0,
                      smooth: !0,
                      keySystemAccess: null,
                      configuration: t,
                    }),
                    (i = t.video),
                    (r = t.audio),
                    "media-source" != t.type)
                  ) {
                    if ("file" != t.type) return l.return(n);
                    if (
                      (i && ((a = i.contentType), !Be(a))) ||
                      (r && ((o = r.contentType), !Be(o)))
                    )
                      return l.return(n);
                    l.u(2);
                    break;
                  }
                  if (!Oe()) return l.return(n);
                  if (!i) {
                    l.u(3);
                    break;
                  }
                  return w(
                    l,
                    (function (t) {
                      var n;
                      return P(function (i) {
                        return 1 == i.g
                          ? Ke()
                            ? w(
                                i,
                                (function (t) {
                                  var n, i, r, a;
                                  return P(function (o) {
                                    if (1 == o.g) {
                                      if (
                                        !(
                                          e.cast &&
                                          cast.__platform__ &&
                                          cast.__platform__.canDisplayType
                                        )
                                      )
                                        return o.return(Ft(t.contentType));
                                      switch (
                                        ((n = t.contentType),
                                        t.width &&
                                          t.height &&
                                          1280 < t.width &&
                                          720 < t.height &&
                                          (n +=
                                            "; width=" +
                                            t.width +
                                            "; height=" +
                                            t.height),
                                        t.framerate &&
                                          (24 > (i = Math.round(t.framerate)) ||
                                            30 < i) &&
                                          (n += "; framerate=" + t.framerate),
                                        t.transferFunction || "")
                                      ) {
                                        case "":
                                        case "srgb":
                                          break;
                                        case "pq":
                                          n += "; eotf=smpte2084";
                                          break;
                                        case "hlg":
                                          n += "; eotf=arib-std-b67";
                                          break;
                                        default:
                                          return o.return(!1);
                                      }
                                      return (
                                        (r = !1),
                                        (a = xg).has(n)
                                          ? ((r = a.get(n)), o.u(2))
                                          : w(
                                              o,
                                              cast.__platform__.canDisplayType(
                                                n
                                              ),
                                              3
                                            )
                                      );
                                    }
                                    return (
                                      2 != o.g && ((r = o.h), a.set(n, r)),
                                      o.return(r)
                                    );
                                  });
                                })(t),
                                3
                              )
                            : i.u(2)
                          : 2 != i.g
                          ? ((n = i.h), i.return(n))
                          : i.return(Ft(t.contentType));
                      });
                    })(i),
                    4
                  );
                case 4:
                  if (!l.h) return l.return(n);
                case 3:
                  if (r) {
                    var c = r.contentType;
                    if (
                      (Ke() &&
                        r.spatialRendering &&
                        (c += "; spatialRendering=true"),
                      !Ft(c))
                    )
                      return l.return(n);
                  }
                case 2:
                  return t.keySystemConfiguration
                    ? ((s = t.keySystemConfiguration),
                      w(
                        l,
                        (function (e, t, n) {
                          var i, r, a, o, s, u, l, c, d, h, f;
                          return P(function (p) {
                            switch (p.g) {
                              case 1:
                                if (
                                  ((i = []),
                                  (r = []),
                                  n.audio &&
                                    ((a = {
                                      robustness: n.audio.robustness || "",
                                      contentType: t.contentType,
                                    }),
                                    Ve() &&
                                      t.contentType.includes('codecs="ac-3"') &&
                                      (a.contentType =
                                        'audio/mp4; codecs="ec-3"'),
                                    n.audio.encryptionScheme &&
                                      (a.encryptionScheme =
                                        n.audio.encryptionScheme),
                                    i.push(a)),
                                  n.video &&
                                    ((o = {
                                      robustness: n.video.robustness || "",
                                      contentType: e.contentType,
                                    }),
                                    n.video.encryptionScheme &&
                                      (o.encryptionScheme =
                                        n.video.encryptionScheme),
                                    r.push(o)),
                                  (s = {
                                    initDataTypes: [n.initDataType],
                                    distinctiveIdentifier:
                                      n.distinctiveIdentifier,
                                    persistentState: n.persistentState,
                                    sessionTypes: n.sessionTypes,
                                  }),
                                  i.length && (s.audioCapabilities = i),
                                  r.length && (s.videoCapabilities = r),
                                  (u = e ? e.contentType : ""),
                                  (l = t ? t.contentType : ""),
                                  (c = Ni(u) + ";" + Ri(u)),
                                  (d = Ni(l) + ";" + Ri(l)),
                                  (h = n.keySystem),
                                  (f = null),
                                  S(p, 2),
                                  _e.has(c + "#" + d + "#" + h))
                                ) {
                                  (f = _e.get(c + "#" + d + "#" + h) || null),
                                    p.u(4);
                                  break;
                                }
                                return w(
                                  p,
                                  navigator.requestMediaKeySystemAccess(
                                    n.keySystem,
                                    [s]
                                  ),
                                  5
                                );
                              case 5:
                                (f = p.h), _e.set(c + "#" + d + "#" + h, f);
                              case 4:
                                T(p, 3);
                                break;
                              case 2:
                                A(p);
                              case 3:
                                return p.return(f);
                            }
                          });
                        })(i, r, s),
                        6
                      ))
                    : ((n.supported = !0), l.return(n));
                case 6:
                  (u = l.h) && ((n.supported = !0), (n.keySystemAccess = u));
                case 5:
                  return l.return(n);
              }
            });
          }
          (og.Aria = lg),
            (lg.install = cg),
            sg(cg),
            (og.EncryptionScheme = hg),
            (hg.install = fg),
            sg(fg, -2),
            (og.Fullscreen = pg),
            (pg.install = gg),
            sg(gg),
            (og.MediaCapabilities = vg),
            (vg.install = yg);
          var wg = null;
          vg.originalMcap = wg;
          var xg = new Map();
          function Sg() {}
          function Tg() {
            var t = Qe();
            (e.MediaSource || e.ManagedMediaSource) &&
              (t && e.MediaSource
                ? 12 >= t
                  ? (Ag(), kg())
                  : 15 >= t && Ag()
                : it("DT_STB_BCM")
                ? (Ag(), kg())
                : (it("Tizen 2") || ze() || it("Tizen 4")) &&
                  (function () {
                    var t = MediaSource.isTypeSupported.bind(MediaSource);
                    if (
                      ((MediaSource.isTypeSupported = function (e) {
                        return "opus" != Ri(e) && t(e);
                      }),
                      e.ManagedMediaSource)
                    ) {
                      var n =
                        ManagedMediaSource.isTypeSupported.bind(
                          ManagedMediaSource
                        );
                      e.ManagedMediaSource.isTypeSupported = function (e) {
                        return "opus" != Ri(e) && n(e);
                      };
                    }
                  })()),
              (e.MediaSource || e.ManagedMediaSource) &&
                (function () {
                  if (e.MediaSource) {
                    var t = MediaSource.isTypeSupported.bind(MediaSource);
                    MediaSource.isTypeSupported = function (e) {
                      return "mp2t" != Pi(e) && t(e);
                    };
                  }
                  if (e.ManagedMediaSource) {
                    var n =
                      ManagedMediaSource.isTypeSupported.bind(
                        ManagedMediaSource
                      );
                    e.ManagedMediaSource.isTypeSupported = function (e) {
                      return "mp2t" != Pi(e) && n(e);
                    };
                  }
                })(),
              e.MediaSource &&
                MediaSource.isTypeSupported('video/webm; codecs="vp9"') &&
                !MediaSource.isTypeSupported(
                  'video/webm; codecs="vp09.00.10.08"'
                ) &&
                (function () {
                  var e = MediaSource.isTypeSupported;
                  Ge() ||
                    (MediaSource.isTypeSupported = function (t) {
                      var n = t.split(/ *; */),
                        i = n.findIndex(function (e) {
                          return e.startsWith("codecs=");
                        });
                      if (0 > i) return e(t);
                      var r = n[i]
                          .replace("codecs=", "")
                          .replace(/"/g, "")
                          .split(/\s*,\s*/),
                        a = r.findIndex(function (e) {
                          return e.startsWith("vp09");
                        });
                      return (
                        0 <= a &&
                          ((r[a] = "vp9"),
                          (n[i] = 'codecs="' + r.join(",") + '"'),
                          (t = n.join("; "))),
                        e(t)
                      );
                    });
                })();
          }
          function Ag() {
            var e = MediaSource.prototype.addSourceBuffer;
            MediaSource.prototype.addSourceBuffer = function () {
              var t = e.apply(this, L.apply(0, arguments));
              return (t.abort = function () {}), t;
            };
          }
          function kg() {
            var e = SourceBuffer.prototype.remove;
            SourceBuffer.prototype.remove = function (t, n) {
              return e.call(this, t, n - 0.001);
            };
          }
          function Ig() {}
          function Cg() {
            (screen.orientation && screen.orientation.unlock) ||
              (null != screen.orientation
                ? (void 0 === screen.orientation.lock &&
                    (screen.orientation.lock = function () {
                      return Promise.resolve();
                    }),
                  void 0 === screen.orientation.unlock &&
                    (screen.orientation.unlock = function () {}))
                : null != e.orientation &&
                  (function () {
                    function t() {
                      switch (e.orientation) {
                        case -90:
                          (n.type = "landscape-secondary"), (n.angle = 270);
                          break;
                        case 0:
                          (n.type = "portrait-primary"), (n.angle = 0);
                          break;
                        case 90:
                          (n.type = "landscape-primary"), (n.angle = 90);
                          break;
                        case 180:
                          (n.type = "portrait-secondary"), (n.angle = 180);
                      }
                    }
                    var n = new Mg();
                    (screen.orientation = n),
                      t(),
                      e.addEventListener("orientationchange", function () {
                        t();
                        var e = new Xo("change");
                        n.dispatchEvent(e);
                      });
                  })());
          }
          function Mg() {
            Yo.call(this), (this.type = ""), (this.angle = 0);
          }
          function Eg() {}
          function Dg() {
            e.MediaKeys &&
              (!MediaKeys.prototype.setServerCertificate ||
                ze() ||
                it("Tizen 4") ||
                it("Tizen 5.0") ||
                qe()) &&
              (MediaKeys.prototype.setServerCertificate = Pg);
          }
          function Pg() {
            return Promise.resolve(!1);
          }
          function Lg() {}
          function Rg() {
            if (
              !(
                !e.HTMLVideoElement ||
                (navigator.requestMediaKeySystemAccess &&
                  MediaKeySystemAccess.prototype.getConfiguration)
              )
            ) {
              if (HTMLMediaElement.prototype.webkitGenerateKeyRequest)
                Kg = "webkit";
              else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
              (navigator.requestMediaKeySystemAccess = _g),
                delete HTMLMediaElement.prototype.mediaKeys,
                (HTMLMediaElement.prototype.mediaKeys = null),
                (HTMLMediaElement.prototype.setMediaKeys = Ug),
                (e.MediaKeys = Og),
                (e.MediaKeySystemAccess = jg),
                (e.shakaMediaKeysPolyfill = Wg);
            }
          }
          function Ng(e) {
            return Kg ? Kg + e.charAt(0).toUpperCase() + e.slice(1) : e;
          }
          function _g(e, t) {
            try {
              var n = new jg(e, t);
              return Promise.resolve(n);
            } catch (e) {
              return Promise.reject(e);
            }
          }
          function Ug(e) {
            var t = this.mediaKeys;
            return (
              t && t != e && Bg(t, null),
              delete this.mediaKeys,
              (this.mediaKeys = e) && Bg(e, this),
              Promise.resolve()
            );
          }
          function jg(e, t) {
            this.g = this.keySystem = e;
            var n = !1;
            "org.w3.clearkey" == e &&
              ((this.g = "webkit-org.w3.clearkey"), (n = !1));
            var i = !1,
              r = document.getElementsByTagName("video");
            r = r.length ? r[0] : document.createElement("video");
            for (var a = (t = l(t)).next(); !a.done; a = t.next()) {
              var o = {
                  audioCapabilities: [],
                  videoCapabilities: [],
                  persistentState: "optional",
                  distinctiveIdentifier: "optional",
                  initDataTypes: (a = a.value).initDataTypes,
                  sessionTypes: ["temporary"],
                  label: a.label,
                },
                s = !1;
              if (a.audioCapabilities)
                for (
                  var u = l(a.audioCapabilities), c = u.next();
                  !c.done;
                  c = u.next()
                )
                  (c = c.value).contentType &&
                    ((s = !0),
                    r.canPlayType(c.contentType.split(";")[0], this.g) &&
                      (o.audioCapabilities.push(c), (i = !0)));
              if (a.videoCapabilities)
                for (
                  c = (u = l(a.videoCapabilities)).next();
                  !c.done;
                  c = u.next()
                )
                  (c = c.value).contentType &&
                    ((s = !0),
                    r.canPlayType(c.contentType, this.g) &&
                      (o.videoCapabilities.push(c), (i = !0)));
              if (
                (s ||
                  (i =
                    r.canPlayType("video/mp4", this.g) ||
                    r.canPlayType("video/webm", this.g)),
                "required" == a.persistentState &&
                  (n
                    ? ((o.persistentState = "required"),
                      (o.sessionTypes = ["persistent-license"]))
                    : (i = !1)),
                i)
              )
                return void (this.h = o);
            }
            throw (
              ((n = "Unsupported keySystem"),
              ("org.w3.clearkey" != e && "com.widevine.alpha" != e) ||
                (n = "None of the requested configurations were supported."),
              ((e = Error(n)).name = "NotSupportedError"),
              (e.code = DOMException.NOT_SUPPORTED_ERR),
              e)
            );
          }
          function Og(e) {
            (this.l = e),
              (this.h = null),
              (this.g = new $()),
              (this.i = []),
              (this.j = new Map());
          }
          function Bg(e, t) {
            (e.h = t), e.g.qb();
            var n = Kg;
            t &&
              (e.g.H(t, n + "needkey", function (t) {
                var n = new CustomEvent("encrypted");
                (n.initDataType = "cenc"),
                  (n.initData = Te(t.initData)),
                  e.h.dispatchEvent(n);
              }),
              e.g.H(t, n + "keymessage", function (t) {
                var n = Fg(e, t.sessionId);
                n &&
                  ((t = new Xo(
                    "message",
                    (t = new Map()
                      .set(
                        "messageType",
                        null == n.keyStatuses.Pc()
                          ? "licenserequest"
                          : "licenserenewal"
                      )
                      .set("message", t.message))
                  )),
                  n.h && (n.h.resolve(), (n.h = null)),
                  n.dispatchEvent(t));
              }),
              e.g.H(t, n + "keyadded", function (t) {
                (t = Fg(e, t.sessionId)) && t.ready();
              }),
              e.g.H(t, n + "keyerror", function (t) {
                var n = Fg(e, t.sessionId);
                if (n) {
                  var i = Error("EME v0.1b key error"),
                    r = t.errorCode;
                  (r.systemCode = t.systemCode),
                    (i.errorCode = r),
                    !t.sessionId && n.h
                      ? (45 == t.systemCode &&
                          (i.message = "Unsupported session type."),
                        n.h.reject(i),
                        (n.h = null))
                      : t.sessionId && n.g
                      ? (n.g.reject(i), (n.g = null))
                      : ((i = t.systemCode),
                        t.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT
                          ? Gg(n, "output-restricted")
                          : Gg(n, 1 == i ? "expired" : "internal-error"));
                }
              }));
          }
          function Fg(e, t) {
            var n = e.j.get(t);
            return (
              n ||
              ((n = e.i.shift()) ? ((n.sessionId = t), e.j.set(t, n), n) : null)
            );
          }
          function Hg(e, t, n) {
            Yo.call(this),
              (this.j = e),
              (this.m = !1),
              (this.g = this.h = null),
              (this.i = t),
              (this.l = n),
              (this.sessionId = ""),
              (this.expiration = NaN),
              (this.closed = new Ho()),
              (this.keyStatuses = new qg());
          }
          function Vg(e, t, n) {
            if (e.m)
              return Promise.reject(
                Error("The session is already initialized.")
              );
            e.m = !0;
            try {
              if ("persistent-license" == e.l)
                if (n) var i = Ae(gt("LOAD_SESSION|" + n));
                else {
                  var r = gt("PERSISTENT|");
                  i = It(r, t);
                }
              else i = Ae(t);
            } catch (e) {
              return Promise.reject(e);
            }
            e.h = new Ho();
            var a = Ng("generateKeyRequest");
            try {
              e.j[a](e.i, i);
            } catch (t) {
              if ("InvalidStateError" != t.name)
                return (e.h = null), Promise.reject(t);
              new je(function () {
                try {
                  e.j[a](e.i, i);
                } catch (t) {
                  e.h.reject(t), (e.h = null);
                }
              }).ea(0.01);
            }
            return e.h;
          }
          function zg(e, t, n) {
            if (e.g)
              e.g
                .then(function () {
                  return zg(e, t, n);
                })
                .catch(function () {
                  return zg(e, t, n);
                });
            else {
              if (((e.g = t), "webkit-org.w3.clearkey" == e.i)) {
                var i = ht(n),
                  r = JSON.parse(i);
                "oct" != r.keys[0].kty &&
                  (e.g.reject(
                    Error("Response is not a valid JSON Web Key Set.")
                  ),
                  (e.g = null)),
                  (i = Tt(r.keys[0].k)),
                  (r = Tt(r.keys[0].kid));
              } else (i = Ae(n)), (r = null);
              var a = Ng("addKey");
              try {
                e.j[a](e.i, i, r, e.sessionId);
              } catch (t) {
                e.g.reject(t), (e.g = null);
              }
            }
          }
          function Gg(e, t) {
            var n = e.keyStatuses;
            (n.size = null == t ? 0 : 1),
              (n.g = t),
              (t = new Xo("keystatuseschange")),
              e.dispatchEvent(t);
          }
          function qg() {
            (this.size = 0), (this.g = void 0);
          }
          sg(yg, -1),
            (og.MediaSource = Sg),
            (Sg.install = Tg),
            sg(Tg),
            (og.Orientation = Ig),
            (Ig.install = Cg),
            m(Mg, Yo),
            (Mg.prototype.lock = function (e) {
              function t(e) {
                return screen.lockOrientation
                  ? screen.lockOrientation(e)
                  : screen.mozLockOrientation
                  ? screen.mozLockOrientation(e)
                  : !!screen.msLockOrientation && screen.msLockOrientation(e);
              }
              var n = !1;
              switch (e) {
                case "natural":
                  n = t("default");
                  break;
                case "any":
                  (n = !0), this.unlock();
                  break;
                default:
                  n = t(e);
              }
              return n
                ? Promise.resolve()
                : (((e = Error(
                    "screen.orientation.lock() is not available on this device"
                  )).name = "NotSupportedError"),
                  (e.code = DOMException.NOT_SUPPORTED_ERR),
                  Promise.reject(e));
            }),
            (Mg.prototype.unlock = function () {
              screen.unlockOrientation
                ? screen.unlockOrientation()
                : screen.mozUnlockOrientation
                ? screen.mozUnlockOrientation()
                : screen.msUnlockOrientation && screen.msUnlockOrientation();
            }),
            sg(Cg),
            (og.PatchedMediaKeysCert = Eg),
            (Eg.install = Dg),
            sg(Dg),
            (og.PatchedMediaKeysWebkit = Lg),
            (Lg.install = Rg),
            (jg.prototype.createMediaKeys = function () {
              var e = new Og(this.g);
              return Promise.resolve(e);
            }),
            (jg.prototype.getConfiguration = function () {
              return this.h;
            }),
            (Og.prototype.createSession = function (e) {
              if (
                "temporary" != (e = e || "temporary") &&
                "persistent-license" != e
              )
                throw new TypeError(
                  "Session type " + e + " is unsupported on this platform."
                );
              var t = this.h || document.createElement("video");
              return (
                t.src || (t.src = "about:blank"),
                (e = new Hg(t, this.l, e)),
                this.i.push(e),
                e
              );
            }),
            (Og.prototype.setServerCertificate = function () {
              return Promise.resolve(!1);
            }),
            (Og.prototype.getStatusForPolicy = function () {
              return Promise.resolve("usable");
            }),
            m(Hg, Yo),
            ((i = Hg.prototype).ready = function () {
              Gg(this, "usable"), this.g && this.g.resolve(), (this.g = null);
            }),
            (i.generateRequest = function (e, t) {
              return Vg(this, t, null);
            }),
            (i.load = function (e) {
              return "persistent-license" == this.l
                ? Vg(this, null, e)
                : Promise.reject(Error("Not a persistent session."));
            }),
            (i.update = function (e) {
              var t = new Ho();
              return zg(this, t, e), t;
            }),
            (i.close = function () {
              if ("persistent-license" != this.l) {
                if (!this.sessionId)
                  return (
                    this.closed.reject(Error("The session is not callable.")),
                    this.closed
                  );
                var e = Ng("cancelKeyRequest");
                try {
                  this.j[e](this.i, this.sessionId);
                } catch (e) {}
              }
              return this.closed.resolve(), this.closed;
            }),
            (i.remove = function () {
              return "persistent-license" != this.l
                ? Promise.reject(Error("Not a persistent session."))
                : this.close();
            }),
            ((i = qg.prototype).Pc = function () {
              return this.g;
            }),
            (i.forEach = function (e) {
              this.g && e(this.g, Ne.value());
            }),
            (i.get = function (e) {
              if (this.has(e)) return this.g;
            }),
            (i.has = function (e) {
              var t = Ne.value();
              return !(!this.g || !Se(e, t));
            }),
            (i.entries = function () {}),
            (i.keys = function () {}),
            (i.values = function () {});
          var Kg = "",
            Wg = "webkit";
          function Xg() {}
          function Yg() {
            if (e.HTMLVideoElement) {
              var t = HTMLVideoElement.prototype;
              (t.requestPictureInPicture && document.exitPictureInPicture) ||
                !t.webkitSupportsPresentationMode ||
                ((document.pictureInPictureEnabled = !0),
                (document.pictureInPictureElement = null),
                (t.requestPictureInPicture = $g),
                Object.defineProperty(t, "disablePictureInPicture", {
                  get: Qg,
                  set: em,
                  enumerable: !0,
                  configurable: !0,
                }),
                (document.exitPictureInPicture = Zg),
                document.addEventListener(
                  "webkitpresentationmodechanged",
                  Jg,
                  !0
                ));
            }
          }
          function Jg(e) {
            if ("picture-in-picture" == (e = e.target).webkitPresentationMode) {
              document.pictureInPictureElement = e;
              var t = new Event("enterpictureinpicture");
              e.dispatchEvent(t);
            } else
              document.pictureInPictureElement == e &&
                (document.pictureInPictureElement = null),
                (t = new Event("leavepictureinpicture")),
                e.dispatchEvent(t);
          }
          function $g() {
            return this.webkitSupportsPresentationMode("picture-in-picture")
              ? (this.webkitSetPresentationMode("picture-in-picture"),
                (document.pictureInPictureElement = this),
                Promise.resolve())
              : Promise.reject(Error("PiP not allowed by video element"));
          }
          function Zg() {
            var e = document.pictureInPictureElement;
            return e
              ? (e.webkitSetPresentationMode("inline"),
                (document.pictureInPictureElement = null),
                Promise.resolve())
              : Promise.reject(Error("No picture in picture element found"));
          }
          function Qg() {
            return (
              !!this.hasAttribute("disablePictureInPicture") ||
              !this.webkitSupportsPresentationMode("picture-in-picture")
            );
          }
          function em(e) {
            e
              ? this.setAttribute("disablePictureInPicture", "")
              : this.removeAttribute("disablePictureInPicture");
          }
          function tm() {}
          function nm() {
            e.crypto &&
              ("randomUUID" in e.crypto || (e.crypto.randomUUID = im));
          }
          function im() {
            var e = URL.createObjectURL(new Blob()),
              t = e.toString();
            return URL.revokeObjectURL(e), t.substr(t.lastIndexOf("/") + 1);
          }
          function rm() {}
          function am() {
            var e = Symbol.prototype;
            "description" in e ||
              Object.defineProperty(e, "description", { get: om });
          }
          function om() {
            var e = /\((.*)\)/.exec(this.toString());
            return e ? e[1] : void 0;
          }
          function sm() {}
          function um() {
            if (e.HTMLMediaElement) {
              var t = HTMLMediaElement.prototype.play;
              HTMLMediaElement.prototype.play = function () {
                var e = t.apply(this);
                return e && e.catch(function () {}), e;
              };
            }
          }
          function lm() {}
          function cm() {
            if (e.HTMLVideoElement) {
              var t = HTMLVideoElement.prototype;
              !t.getVideoPlaybackQuality &&
                ("webkitDroppedFrameCount" in t || qe()) &&
                (t.getVideoPlaybackQuality = dm);
            }
          }
          function dm() {
            return {
              droppedVideoFrames: this.webkitDroppedFrameCount,
              totalVideoFrames: this.webkitDecodedFrameCount,
              corruptedVideoFrames: 0,
              creationTime: NaN,
              totalFrameDelay: 0,
            };
          }
          function hm() {}
          function fm() {
            if (!e.VTTCue && e.TextTrackCue) {
              var t = null,
                n = TextTrackCue.length;
              if (3 == n) t = pm;
              else if (6 == n) t = gm;
              else {
                try {
                  var i = !!pm(1, 2, "");
                } catch (e) {
                  i = !1;
                }
                i && (t = pm);
              }
              t &&
                (e.VTTCue = function (e, n, i) {
                  return t(e, n, i);
                });
            }
          }
          function pm(t, n, i) {
            return new e.TextTrackCue(t, n, i);
          }
          function gm(t, n, i) {
            return new e.TextTrackCue(t + "-" + n + "-" + i, t, n, i);
          }
          function mm() {}
          sg(Rg),
            (og.PiPWebkit = Xg),
            (Xg.install = Yg),
            sg(Yg),
            (og.RandomUUID = tm),
            (tm.install = nm),
            sg(nm),
            (og.Symbol = rm),
            (rm.install = am),
            sg(am),
            (og.VideoPlayPromise = sm),
            (sm.install = um),
            sg(um),
            (og.VideoPlaybackQuality = lm),
            (lm.install = cm),
            sg(cm),
            (og.VTTCue = hm),
            (hm.install = fm),
            sg(fm),
            (mm.prototype.parseInit = function () {}),
            (mm.prototype.setSequenceMode = function () {}),
            (mm.prototype.setManifestType = function () {}),
            (mm.prototype.parseMedia = function (e, t) {
              for (
                var n = null,
                  i = [],
                  r = (e = l((e = ht(e).split(/\r?\n/)))).next();
                !r.done;
                r = e.next()
              )
                if ((r = r.value) && !/^\s+$/.test(r) && (r = vm.exec(r))) {
                  var a = ym.exec(r[1]);
                  (r = new Kn(
                    (a =
                      60 * parseInt(a[1], 10) +
                      parseFloat(a[2].replace(",", "."))),
                    t.segmentEnd ? t.segmentEnd : a + 2,
                    r[2]
                  )),
                    n && ((n.endTime = a), i.push(n)),
                    (n = r);
                }
              return n && i.push(n), i;
            }),
            B("shaka.text.LrcTextParser", mm),
            (mm.prototype.parseMedia = mm.prototype.parseMedia),
            (mm.prototype.setManifestType = mm.prototype.setManifestType),
            (mm.prototype.setSequenceMode = mm.prototype.setSequenceMode),
            (mm.prototype.parseInit = mm.prototype.parseInit);
          var vm = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,
            ym = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
          function bm() {}
          function wm(e, t, n, i, r, a, o, s, u, c, d, h, f) {
            var p = c;
            if (vn(e)) {
              if (!d) return null;
              var g = {
                tagName: "span",
                children: [wn(e)],
                attributes: {},
                parent: null,
              };
            } else g = e;
            for (
              var m = null, v = l(Xm), y = v.next();
              !y.done && !(m = Mm(g, "backgroundImage", i, "#", y.value)[0]);
              y = v.next()
            );
            v = null;
            var b = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;
            if ((y = Mn(g, Xm, "backgroundImage")) && b.test(y)) {
              if ((v = parseInt(y.split(":").pop(), 10) - 1) >= f.length)
                return null;
              v = f[v];
            } else
              h &&
                y &&
                !y.startsWith("#") &&
                ((b = new oe(h)),
                (y = new oe(y)),
                (y = b.resolve(y).toString()) && (v = y));
            if (
              (("p" == e.tagName || m || v) && (d = !0),
              (e = d),
              (y =
                "default" ==
                (g.attributes["xml:space"] || (s ? "default" : "preserve"))),
              (s = []),
              !(b = g.children.every(vn)))
            )
              for (var w = l(g.children), x = w.next(); !x.done; x = w.next())
                (x = wm(x.value, t, n, i, r, a, o, y, u, g, d, h, f)) &&
                  s.push(x);
            if (
              ((i = null != c),
              (h = wn(g)),
              (h = g.children.length && h && /\S/.test(h)),
              !(
                (w =
                  g.attributes.begin || g.attributes.end || g.attributes.dur) ||
                h ||
                "br" == g.tagName ||
                0 != s.length ||
                (i && !y)
              ))
            )
              return null;
            for (
              h = (f = Dm(g, n)).start, f = f.end;
              p && p.tagName && "tt" != p.tagName;

            )
              (h = (f = Em(p, n, h, f)).start), (f = f.end), (p = p.parent);
            if (
              (null == h && (h = 0),
              (h += t.periodStart),
              (f = null == f ? 1 / 0 : f + t.periodStart),
              (h = Math.max(h, t.segmentStart)),
              (f = Math.min(f, t.segmentEnd)),
              !w && 0 < s.length)
            )
              for (
                h = 1 / 0, f = 0, n = (t = l(s)).next();
                !n.done;
                n = t.next()
              )
                (n = n.value),
                  (h = Math.min(h, n.startTime)),
                  (f = Math.max(f, n.endTime));
            if ("br" == g.tagName)
              return ((r = new Kn(h, f, "")).lineBreak = !0), r;
            if (
              ((t = ""),
              b && ((t = yt(wn(g) || "")), y && (t = t.replace(/\s+/g, " "))),
              ((t = new Kn(h, f, t)).nestedCues = s),
              d || (t.isContainer = !0),
              u && (t.cellResolution = u),
              (u = Mm(g, "region", a, "")[0]),
              g.attributes.region && u && u.attributes["xml:id"])
            ) {
              var S = u.attributes["xml:id"];
              t.region = o.filter(function (e) {
                return e.id == S;
              })[0];
            }
            return (
              (o = u),
              c &&
                i &&
                !g.attributes.region &&
                !g.attributes.style &&
                (o = Mm(c, "region", a, "")[0]),
              (function (e, t, n, i, r, a, o, s) {
                (o = o || s),
                  "rtl" == Am(t, n, a, "direction", o) && (e.direction = "rtl"),
                  (s = Am(t, n, a, "writingMode", o)),
                  "tb" == s || "tblr" == s
                    ? (e.writingMode = "vertical-lr")
                    : "tbrl" == s
                    ? (e.writingMode = "vertical-rl")
                    : "rltb" == s || "rl" == s
                    ? (e.direction = "rtl")
                    : s && (e.direction = ri),
                  (s = Am(t, n, a, "textAlign", !0))
                    ? ((e.positionAlign = qm.get(s)),
                      (e.lineAlign = Gm.get(s)),
                      (e.textAlign = ti[s.toUpperCase()]))
                    : (e.textAlign = ei),
                  (s = Am(t, n, a, "displayAlign", !0)) &&
                    (e.displayAlign = ii[s.toUpperCase()]);
                (s = Am(t, n, a, "color", o)) && (e.color = Sm(s));
                (s = Am(t, n, a, "backgroundColor", o)) &&
                  (e.backgroundColor = Sm(s));
                (s = Am(t, n, a, "border", o)) && (e.border = s);
                if ((s = Am(t, n, a, "fontFamily", o)))
                  switch (s) {
                    case "monospaceSerif":
                      e.fontFamily =
                        "Courier New,Liberation Mono,Courier,monospace";
                      break;
                    case "proportionalSansSerif":
                      e.fontFamily =
                        "Arial,Helvetica,Liberation Sans,sans-serif";
                      break;
                    case "sansSerif":
                      e.fontFamily = "sans-serif";
                      break;
                    case "monospaceSansSerif":
                      e.fontFamily = "Consolas,monospace";
                      break;
                    case "proportionalSerif":
                      e.fontFamily = "serif";
                      break;
                    default:
                      e.fontFamily = s
                        .split(",")
                        .filter(function (e) {
                          return "default" != e;
                        })
                        .join(",");
                  }
                (s = Am(t, n, a, "fontWeight", o)) &&
                  "bold" == s &&
                  (e.fontWeight = hi),
                  (s = Am(t, n, a, "wrapOption", o)),
                  (e.wrapLine = !s || "noWrap" != s),
                  (s = Am(t, n, a, "lineHeight", o)) &&
                    s.match(Um) &&
                    (e.lineHeight = s),
                  (s = Am(t, n, a, "fontSize", o)) &&
                    (s.match(Um) || s.match(_m)) &&
                    (e.fontSize = s),
                  (s = Am(t, n, a, "fontStyle", o)) &&
                    (e.fontStyle = gi[s.toUpperCase()]);
                i
                  ? ((r = i.attributes.imageType || i.attributes.imagetype),
                    (s = i.attributes.encoding),
                    (i = wn(i).trim()),
                    "PNG" == r &&
                      "Base64" == s &&
                      i &&
                      (e.backgroundImage = "data:image/png;base64," + i))
                  : r && (e.backgroundImage = r),
                  (i = Am(t, n, a, "textOutline", o)) &&
                    ((i = i.split(" ")),
                    i[0].match(Um)
                      ? (e.textStrokeColor = e.color)
                      : ((e.textStrokeColor = Sm(i[0])), i.shift()),
                    i[0] && i[0].match(Um)
                      ? (e.textStrokeWidth = i[0])
                      : (e.textStrokeColor = ""));
                (i = Am(t, n, a, "letterSpacing", o)) &&
                  i.match(Um) &&
                  (e.letterSpacing = i),
                  (i = Am(t, n, a, "linePadding", o)) &&
                    i.match(Um) &&
                    (e.linePadding = i),
                  (i = Am(t, n, a, "opacity", o)) &&
                    (e.opacity = parseFloat(i));
                (i = km(n, a, "textDecoration")) && Tm(e, i),
                  (i = Im(t, a, "textDecoration")) && Tm(e, i),
                  (i = Am(t, n, a, "textCombine", o)) &&
                    (e.textCombineUpright = i);
                switch (Am(t, n, a, "ruby", o)) {
                  case "container":
                    e.rubyTag = "ruby";
                    break;
                  case "text":
                    e.rubyTag = "rt";
                }
              })(t, g, o, m, v, r, e, 0 == s.length),
              t
            );
          }
          function xm(e, t, n) {
            var i = new Zt(),
              r = e.attributes["xml:id"];
            if (!r) return null;
            (i.id = r),
              (r = null),
              n && (r = Nm.exec(n) || jm.exec(n)),
              (n = r ? Number(r[1]) : null),
              (r = r ? Number(r[2]) : null);
            var a,
              o = km(e, t, "extent");
            if (o) {
              var s = (a = Nm.exec(o)) || jm.exec(o);
              null != s &&
                ((i.width = Number(s[1])),
                (i.height = Number(s[2])),
                a ||
                  (null != n && (i.width = (100 * i.width) / n),
                  null != r && (i.height = (100 * i.height) / r)),
                (i.widthUnits = a || null != n ? Qt : 0),
                (i.heightUnits = a || null != r ? Qt : 0));
            }
            return (
              (e = km(e, t, "origin")) &&
                null != (s = (a = Nm.exec(e)) || jm.exec(e)) &&
                ((i.viewportAnchorX = Number(s[1])),
                (i.viewportAnchorY = Number(s[2])),
                a
                  ? o ||
                    ((i.width = 100 - i.viewportAnchorX),
                    (i.widthUnits = Qt),
                    (i.height = 100 - i.viewportAnchorY),
                    (i.heightUnits = Qt))
                  : (null != r &&
                      (i.viewportAnchorY = (100 * i.viewportAnchorY) / r),
                    null != n &&
                      (i.viewportAnchorX = (100 * i.viewportAnchorX) / n)),
                (i.viewportAnchorUnits = a || null != n ? Qt : 0)),
              i
            );
          }
          function Sm(e) {
            var t = e.match(/rgba\(([^)]+)\)/);
            return t && 4 == (t = t[1].split(",")).length
              ? ((t[3] = String(Number(t[3]) / 255)),
                "rgba(" + t.join(",") + ")")
              : e;
          }
          function Tm(e, t) {
            for (var n = (t = l(t.split(" "))).next(); !n.done; n = t.next())
              switch (n.value) {
                case "underline":
                  e.textDecoration.includes(mi) || e.textDecoration.push(mi);
                  break;
                case "noUnderline":
                  e.textDecoration.includes(mi) && nn(e.textDecoration, mi);
                  break;
                case "lineThrough":
                  e.textDecoration.includes("lineThrough") ||
                    e.textDecoration.push("lineThrough");
                  break;
                case "noLineThrough":
                  e.textDecoration.includes("lineThrough") &&
                    nn(e.textDecoration, "lineThrough");
                  break;
                case "overline":
                  e.textDecoration.includes("overline") ||
                    e.textDecoration.push("overline");
                  break;
                case "noOverline":
                  e.textDecoration.includes("overline") &&
                    nn(e.textDecoration, "overline");
              }
          }
          function Am(e, t, n, i, r) {
            return (
              (r = void 0 === r || r),
              (e = Im(e, n, i)) ? e : r ? km(t, n, i) : null
            );
          }
          function km(e, t, n) {
            if (!e) return null;
            var i = Mn(e, Wm, n);
            return i || Cm(e, t, n);
          }
          function Im(e, t, n) {
            var i = Mn(e, Wm, n);
            return i || Cm(e, t, n);
          }
          function Cm(e, t, n) {
            e = Mm(e, "style", t, "");
            for (var i = null, r = 0; r < e.length; r++) {
              var a = In(e[r], "urn:ebu:tt:style", n);
              a || (a = Mn(e[r], Wm, n)),
                a || (a = Im(e[r], t, n)),
                a && (i = a);
            }
            return i;
          }
          function Mm(e, t, n, i, r) {
            var a = [];
            if (!e || 1 > n.length) return a;
            var o = e;
            for (
              e = null;
              !e && !(e = r ? In(o, r, t) : o.attributes[t]) && (o = o.parent);

            );
            if ((t = e))
              for (r = (t = l(t.split(" "))).next(); !r.done; r = t.next())
                for (r = r.value, o = (e = l(n)).next(); !o.done; o = e.next())
                  if (i + (o = o.value).attributes["xml:id"] == r) {
                    a.push(o);
                    break;
                  }
            return a;
          }
          function Em(e, t, n, i) {
            return (
              (e = Dm(e, t)),
              null == n ? (n = e.start) : null != e.start && (n += e.start),
              null == i ? (i = e.end) : null != e.start && (i += e.start),
              { start: n, end: i }
            );
          }
          function Dm(e, t) {
            var n = Pm(e.attributes.begin, t),
              i = Pm(e.attributes.end, t);
            return (
              (e = Pm(e.attributes.dur, t)),
              null == i && null != e && (i = n + e),
              { start: n, end: i }
            );
          }
          function Pm(e, t) {
            var n = null;
            if (Om.test(e)) {
              (e = Om.exec(e)), (n = Number(e[1]));
              var i = Number(e[2]),
                r = Number(e[3]),
                a = Number(e[4]);
              n =
                (r += (a += (Number(e[5]) || 0) / t.h) / t.frameRate) +
                60 * i +
                3600 * n;
            } else if (Bm.test(e)) n = Lm(Bm, e);
            else if (Fm.test(e)) n = Lm(Fm, e);
            else if (Hm.test(e))
              (e = Hm.exec(e)), (n = Number(e[1]) / t.frameRate);
            else if (Vm.test(e)) (e = Vm.exec(e)), (n = Number(e[1]) / t.g);
            else if (zm.test(e)) n = Lm(zm, e);
            else if (e)
              throw new Me(
                2,
                2,
                2001,
                "Could not parse cue time range in TTML"
              );
            return n;
          }
          function Lm(e, t) {
            return null == (e = e.exec(t)) || "" == e[0]
              ? null
              : (Number(e[4]) || 0) / 1e3 +
                  (Number(e[3]) || 0) +
                  60 * (Number(e[2]) || 0) +
                  3600 * (Number(e[1]) || 0);
          }
          function Rm(e, t, n, i) {
            (this.frameRate = Number(e) || 30),
              (this.h = Number(t) || 1),
              (this.g = Number(i)),
              0 == this.g && (this.g = e ? this.frameRate * this.h : 1),
              n &&
                (e = /^(\d+) (\d+)$/g.exec(n)) &&
                (this.frameRate *= Number(e[1]) / Number(e[2]));
          }
          Hi("application/x-subtitle-lrc", function () {
            return new mm();
          }),
            (bm.prototype.parseInit = function () {}),
            (bm.prototype.setSequenceMode = function () {}),
            (bm.prototype.setManifestType = function () {}),
            (bm.prototype.parseMedia = function (e, t, n, i) {
              var r = ht(e);
              if (((e = []), "" == r)) return e;
              var a = gn(r, "tt", !0);
              if (!a) throw new Me(2, 2, 2005, "Failed to parse TTML.");
              if (!(r = Sn(a, "body")[0])) return [];
              var o = Mn(a, Km, "frameRate"),
                s = Mn(a, Km, "subFrameRate"),
                u = Mn(a, Km, "frameRateMultiplier"),
                c = Mn(a, Km, "tickRate"),
                d = Mn(a, Km, "cellResolution"),
                h = a.attributes["xml:space"] || "default",
                f = Mn(a, Wm, "extent");
              if ("default" != h && "preserve" != h)
                throw new Me(2, 2, 2005, "Invalid xml:space value: " + h);
              (h = "default" == h),
                (o = new Rm(o, s, u, c)),
                (d = (function (e) {
                  return e && (e = /^(\d+) (\d+)$/.exec(e))
                    ? { Rb: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
                    : null;
                })(d)),
                (s = ((s = Sn(a, "metadata")[0]) ? s.children : []).filter(
                  function (e) {
                    return "\n" != e;
                  }
                )),
                (u = Sn(a, "style")),
                (c = []);
              for (
                var p = l((a = Sn(a, "region"))), g = p.next();
                !g.done;
                g = p.next()
              )
                (g = xm(g.value, u, f)) && c.push(g);
              if (bn(r, "p").length)
                throw new Me(
                  2,
                  2,
                  2001,
                  "<p> can only be inside <div> in TTML"
                );
              for (p = (f = l(bn(r, "div"))).next(); !p.done; p = f.next())
                if (bn(p.value, "span").length)
                  throw new Me(
                    2,
                    2,
                    2001,
                    "<span> can only be inside <p> in TTML"
                  );
              return (
                (t = wm(r, t, o, s, u, a, c, h, d, null, !1, n, i)) &&
                  (t.backgroundColor || (t.backgroundColor = "transparent"),
                  e.push(t)),
                e
              );
            }),
            B("shaka.text.TtmlTextParser", bm),
            (bm.prototype.parseMedia = bm.prototype.parseMedia),
            (bm.prototype.setManifestType = bm.prototype.setManifestType),
            (bm.prototype.setSequenceMode = bm.prototype.setSequenceMode),
            (bm.prototype.parseInit = bm.prototype.parseInit);
          var Nm =
              /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,
            _m = /^(\d{1,4}(?:\.\d+)?|100)%$/,
            Um = /^(\d+px|\d+em|\d*\.?\d+c)$/,
            jm = /^(\d+)px (\d+)px$/,
            Om = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,
            Bm = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,
            Fm = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,
            Hm = /^(\d*(?:\.\d*)?)f$/,
            Vm = /^(\d*(?:\.\d*)?)t$/,
            zm = RegExp(
              "^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"
            ),
            Gm = new Map()
              .set("left", si)
              .set("center", "center")
              .set("right", "end")
              .set("start", si)
              .set("end", "end"),
            qm = new Map()
              .set("left", "line-left")
              .set("center", "center")
              .set("right", "line-right"),
            Km = [
              "http://www.w3.org/ns/ttml#parameter",
              "http://www.w3.org/2006/10/ttaf1#parameter",
            ],
            Wm = [
              "http://www.w3.org/ns/ttml#styling",
              "http://www.w3.org/2006/10/ttaf1#styling",
            ],
            Xm = [
              "http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",
              "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt",
            ];
          function Ym() {
            this.g = new bm();
          }
          function Jm() {
            this.g = "UNKNOWN";
          }
          function $m(e, t, n) {
            var i;
            (i = /^align:(start|middle|center|end|left|right)$/.exec(t))
              ? ((t = i[1]),
                (e.textAlign = "middle" == t ? ei : ti[t.toUpperCase()]))
              : (i = /^vertical:(lr|rl)$/.exec(t))
              ? (e.writingMode = "lr" == i[1] ? "vertical-lr" : "vertical-rl")
              : (i = /^size:([\d.]+)%$/.exec(t))
              ? (e.size = Number(i[1]))
              : (i =
                  /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(
                    t
                  ))
              ? ((e.position = Number(i[1])),
                i[2] &&
                  ((t = i[2]),
                  (e.positionAlign =
                    "line-left" == t || "start" == t
                      ? "line-left"
                      : "line-right" == t || "end" == t
                      ? "line-right"
                      : "center" == t || "middle" == t
                      ? "center"
                      : Qn)))
              : (i = /^region:(.*)$/.exec(t))
              ? (t = (function (e, t) {
                  return (
                    (e = e.filter(function (e) {
                      return e.id == t;
                    })),
                    e.length ? e[0] : null
                  );
                })(n, i[1])) && (e.region = t)
              : (n = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))
              ? ((e.lineInterpretation = 1),
                (e.line = Number(n[1])),
                n[2] && (e.lineAlign = ui[n[2].toUpperCase()]))
              : (n = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)) &&
                ((e.lineInterpretation = oi),
                (e.line = Number(n[1])),
                n[2] && (e.lineAlign = ui[n[2].toUpperCase()]));
          }
          function Zm() {
            this.g = null;
          }
          function Qm(e, t, n) {
            var i, r, a;
            return (
              new Ra()
                .box(
                  "payl",
                  Oa(function (e) {
                    i = ht(e);
                  })
                )
                .box(
                  "iden",
                  Oa(function (e) {
                    r = ht(e);
                  })
                )
                .box(
                  "sttg",
                  Oa(function (e) {
                    a = ht(e);
                  })
                )
                .parse(e),
              i
                ? (function (e, t, n, i, r) {
                    if (((e = new Kn(i, r, e)), Yn(e), t && (e.id = t), n))
                      for (t = new an(n), n = un(t); n; )
                        $m(e, n, []), on(t), (n = un(t));
                    return e;
                  })(i, r, a, t, n)
                : null
            );
          }
          function ev() {}
          function tv() {
            this.g = new Jm();
          }
          function nv(e) {
            var t = "WEBVTT\n\n";
            if ("" == e) return t;
            for (
              var n = (e = l(
                (e = (e = e.replace(/\r+/g, "")).trim()).split("\n\n")
              )).next();
              !n.done;
              n = e.next()
            )
              (n = n.value.split(/\n/))[0].match(/\d+/) && n.shift(),
                (n[0] = n[0].replace(/,/g, ".")),
                (t +=
                  n
                    .join("\n")
                    .replace(/{b}/g, "<b>")
                    .replace(/{\/b}/g, "</b>")
                    .replace(/{i}/g, "<i>")
                    .replace(/{\/i}/g, "</i>")
                    .replace(/{u}/g, "<u>")
                    .replace(/{\/u}/g, "</u>") + "\n\n");
            return t;
          }
          function iv() {}
          function rv(e, t) {
            var n = t.Fontname;
            if (
              (n && (e.fontFamily = n),
              (n = t.Fontsize) && (e.fontSize = n + "px"),
              (n = t.PrimaryColour) && (n = av(n)) && (e.color = n),
              (n = t.BackColour) && (n = av(n)) && (e.backgroundColor = n),
              t.Bold && (e.fontWeight = hi),
              t.Italic && (e.fontStyle = pi),
              t.Underline && e.textDecoration.push(mi),
              (n = t.Spacing) && (e.letterSpacing = n + "px"),
              (n = t.Alignment))
            )
              switch (parseInt(n, 10)) {
                case 1:
                  (e.displayAlign = ni), (e.textAlign = "start");
                  break;
                case 2:
                  (e.displayAlign = ni), (e.textAlign = ei);
                  break;
                case 3:
                  (e.displayAlign = ni), (e.textAlign = "end");
                  break;
                case 5:
                  (e.displayAlign = "before"), (e.textAlign = "start");
                  break;
                case 6:
                  (e.displayAlign = "before"), (e.textAlign = ei);
                  break;
                case 7:
                  (e.displayAlign = "before"), (e.textAlign = "end");
                  break;
                case 9:
                  (e.displayAlign = "center"), (e.textAlign = "start");
                  break;
                case 10:
                  (e.displayAlign = "center"), (e.textAlign = ei);
                  break;
                case 11:
                  (e.displayAlign = "center"), (e.textAlign = "end");
              }
            (t = t.AlphaLevel) && (e.opacity = parseFloat(t));
          }
          function av(e) {
            return 0 <= (e = parseInt(e.replace("&H", ""), 16))
              ? "rgba(" +
                  (255 & e) +
                  "," +
                  ((e >> 8) & 255) +
                  "," +
                  ((e >> 16) & 255) +
                  "," +
                  (((e >> 24) & 255) ^ 255) / 255 +
                  ")"
              : null;
          }
          function ov(e) {
            return (
              3600 *
                ((e = cv.exec(e))[1]
                  ? parseInt(e[1].replace(":", ""), 10)
                  : 0) +
              60 * parseInt(e[2], 10) +
              parseFloat(e[3])
            );
          }
          Hi("application/ttml+xml", function () {
            return new bm();
          }),
            (Ym.prototype.parseInit = function (e) {
              var t = !1;
              if (
                (new Ra()
                  .box("moov", Na)
                  .box("trak", Na)
                  .box("mdia", Na)
                  .box("minf", Na)
                  .box("stbl", Na)
                  .N("stsd", _a)
                  .box("stpp", function (e) {
                    (t = !0), e.parser.stop();
                  })
                  .parse(e),
                !t)
              )
                throw new Me(2, 2, 2007);
            }),
            (Ym.prototype.setSequenceMode = function () {}),
            (Ym.prototype.setManifestType = function () {}),
            (Ym.prototype.parseMedia = function (e, t, n) {
              var i = [],
                r = null,
                a = [],
                o = new Map(),
                s = [];
              if (
                (new Ra()
                  .box("moof", Na)
                  .box("traf", Na)
                  .N("tfhd", function (e) {
                    r = Ga(e.reader, e.flags).Lc;
                  })
                  .N("trun", function (e) {
                    for (
                      var t = (e = l(
                        (e = Wa(e.reader, e.version, e.flags)).jf
                      )).next();
                      !t.done;
                      t = e.next()
                    )
                      s.push(t.value.sampleSize || r || 0);
                  })
                  .N("subs", function (e) {
                    for (
                      var t = e.reader, n = t.M(), i = -1, r = 0;
                      r < n;
                      r++
                    ) {
                      var a = t.M();
                      (i += a), (a = t.kb());
                      for (var s = [], u = 0; u < a; u++)
                        1 == e.version ? s.push(t.M()) : s.push(t.kb()),
                          t.lb(),
                          t.lb(),
                          t.M();
                      o.set(i, s);
                    }
                  })
                  .box(
                    "mdat",
                    Oa(function (e) {
                      a.push(e);
                    })
                  )
                  .parse(e, !1),
                0 == a.length)
              )
                throw new Me(2, 2, 2007);
              for (
                var u = It.apply(wt, c(a)), d = 0, h = 0;
                h < s.length;
                h++
              ) {
                var f = Ae(u, d, s[h]);
                d += s[h];
                var p = o.get(h);
                if (p && p.length) {
                  f = Ae(f, 0, p[0]);
                  for (var g = [], m = p[0], v = 1; v < p.length; v++) {
                    var y = Ae(e, m, p[v]);
                    (y = xt(y)),
                      g.push("data:image/png;base64," + y),
                      (m += p[v]);
                  }
                  i = i.concat(this.g.parseMedia(f, t, n, g));
                } else i = i.concat(this.g.parseMedia(f, t, n, []));
              }
              return i;
            }),
            B("shaka.text.Mp4TtmlParser", Ym),
            (Ym.prototype.parseMedia = Ym.prototype.parseMedia),
            (Ym.prototype.setManifestType = Ym.prototype.setManifestType),
            (Ym.prototype.setSequenceMode = Ym.prototype.setSequenceMode),
            (Ym.prototype.parseInit = Ym.prototype.parseInit),
            Hi('application/mp4; codecs="stpp"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.ttml"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.ttml.im1i"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.ttml.im1t"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.ttml.im2i"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.ttml.im2t"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.ttml.etd1"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.ttml.etd1|im1t"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.ttml.im1t|etd1"', function () {
              return new Ym();
            }),
            Hi('application/mp4; codecs="stpp.TTML.im1t"', function () {
              return new Ym();
            }),
            (Jm.prototype.parseInit = function () {}),
            (Jm.prototype.setSequenceMode = function () {}),
            (Jm.prototype.setManifestType = function (e) {
              this.g = e;
            }),
            (Jm.prototype.parseMedia = function (e, t) {
              var n = (e = (e = ht(e)).replace(
                /\r\n|\r(?=[^\n]|$)/gm,
                "\n"
              )).split(/\n{2,}/m);
              if (!/^WEBVTT($|[ \t\n])/m.test(n[0])) throw new Me(2, 2, 2e3);
              if (((e = t.vttOffset), "HLS" == this.g))
                if (n[0].includes("X-TIMESTAMP-MAP")) {
                  var i = (e = n[0]).match(
                    /LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m
                  );
                  if (((e = e.match(/MPEGTS:(\d+)/m)), !i || !e))
                    throw new Me(2, 2, 2e3);
                  if (null == (i = (i = i[1]) ? ln(new an(i)) : null))
                    throw new Me(2, 2, 2e3);
                  e = Number(e[1]);
                  for (
                    var r = t.segmentStart - t.periodStart;
                    95443.7176888889 <= r;

                  )
                    (r -= 95443.7176888889), (e += 8589934592);
                  e = t.periodStart + e / 9e4 - i;
                } else t.periodStart && t.vttOffset == t.periodStart && (e = 0);
              for (
                t = [], r = (i = l(n[0].split("\n"))).next();
                !r.done;
                r = i.next()
              )
                if (((r = r.value), /^Region:/.test(r))) {
                  r = new an(r);
                  var a = new Zt();
                  un(r), on(r);
                  for (var o = un(r); o; ) {
                    var s = a,
                      u = o;
                    (o = /^id=(.*)$/.exec(u))
                      ? (s.id = o[1])
                      : (o = /^width=(\d{1,2}|100)%$/.exec(u))
                      ? (s.width = Number(o[1]))
                      : (o = /^lines=(\d+)$/.exec(u))
                      ? ((s.height = Number(o[1])), (s.heightUnits = 2))
                      : (o =
                          /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(
                            u
                          ))
                      ? ((s.regionAnchorX = Number(o[1])),
                        (s.regionAnchorY = Number(o[2])))
                      : (o =
                          /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(
                            u
                          ))
                      ? ((s.viewportAnchorX = Number(o[1])),
                        (s.viewportAnchorY = Number(o[2])))
                      : /^scroll=up$/.exec(u) && (s.scroll = "up"),
                      on(r),
                      (o = un(r));
                  }
                  t.push(a);
                }
              for (
                Jn((i = new Map())), r = [], a = (n = l(n.slice(1))).next();
                !a.done;
                a = n.next()
              ) {
                if (
                  (1 != (a = a.value.split("\n")).length || a[0]) &&
                  !/^NOTE($|[ \t])/.test(a[0]) &&
                  "STYLE" == a[0]
                ) {
                  for (s = [], o = -1, u = 1; u < a.length; u++)
                    a[u].includes("::cue") && (s.push([]), (o = s.length - 1)),
                      -1 != o &&
                        (s[o].push(a[u]), a[u].includes("}") && (o = -1));
                  for (o = (s = l(s)).next(); !o.done; o = s.next()) {
                    var c = o.value;
                    (o = "global"),
                      (u = c[0].match(/\((.*)\)/)) && (o = u.pop()),
                      (u = c.slice(1, -1)),
                      c[0].includes("}") &&
                        (c = /\{(.*?)\}/.exec(c[0])) &&
                        (u = c[1].split(";")),
                      (c = i.get(o)) || (c = new Kn(0, 0, ""));
                    for (var d = !1, h = 0; h < u.length; h++) {
                      var f = /^\s*([^:]+):\s*(.*)/.exec(u[h]);
                      if (f) {
                        var p = f[2].trim().replace(";", "");
                        switch (f[1].trim()) {
                          case "background-color":
                          case "background":
                            (d = !0), (c.backgroundColor = p);
                            break;
                          case "color":
                            (d = !0), (c.color = p);
                            break;
                          case "font-family":
                            (d = !0), (c.fontFamily = p);
                            break;
                          case "font-size":
                            (d = !0), (c.fontSize = p);
                            break;
                          case "font-weight":
                            (700 <= parseInt(p, 10) || "bold" == p) &&
                              ((d = !0), (c.fontWeight = hi));
                            break;
                          case "font-style":
                            switch (p) {
                              case "normal":
                                (d = !0), (c.fontStyle = fi);
                                break;
                              case "italic":
                                (d = !0), (c.fontStyle = pi);
                                break;
                              case "oblique":
                                (d = !0), (c.fontStyle = "oblique");
                            }
                            break;
                          case "opacity":
                            (d = !0), (c.opacity = parseFloat(p));
                            break;
                          case "text-combine-upright":
                            (d = !0), (c.textCombineUpright = p);
                            break;
                          case "text-shadow":
                            (d = !0), (c.textShadow = p);
                            break;
                          case "white-space":
                            (d = !0), (c.wrapLine = "noWrap" != p);
                        }
                      }
                    }
                    d && i.set(o, c);
                  }
                }
                if (
                  ((d = e),
                  (1 == (c = a).length && !c[0]) ||
                    /^NOTE($|[ \t])/.test(c[0]) ||
                    "STYLE" == c[0] ||
                    "REGION" == c[0])
                )
                  a = null;
                else if (
                  ((a = null),
                  c[0].includes("--\x3e") || ((a = c[0]), c.splice(0, 1)),
                  (o = ln((s = new an(c[0])))),
                  (h = sn(s, /[ \t]+--\x3e[ \t]+/g)),
                  (u = ln(s)),
                  null == o || null == h || null == u)
                )
                  W("Failed to parse VTT time code. Cue skipped:", a, c),
                    (a = null);
                else {
                  for (
                    o += d,
                      u += d,
                      d = c.slice(1).join("\n").trim(),
                      i.has("global")
                        ? (((c = i.get("global").clone()).startTime = o),
                          (c.endTime = u),
                          (c.payload = d))
                        : (c = new Kn(o, u, d)),
                      on(s),
                      o = un(s);
                    o;

                  )
                    $m(c, o, t), on(s), (o = un(s));
                  Yn(c, i), null != a && (c.id = a), (a = c);
                }
                a && r.push(a);
              }
              return r;
            }),
            B("shaka.text.VttTextParser", Jm),
            (Jm.prototype.parseMedia = Jm.prototype.parseMedia),
            (Jm.prototype.setManifestType = Jm.prototype.setManifestType),
            (Jm.prototype.setSequenceMode = Jm.prototype.setSequenceMode),
            (Jm.prototype.parseInit = Jm.prototype.parseInit),
            Hi("text/vtt", function () {
              return new Jm();
            }),
            Hi('text/vtt; codecs="vtt"', function () {
              return new Jm();
            }),
            Hi('text/vtt; codecs="wvtt"', function () {
              return new Jm();
            }),
            (Zm.prototype.parseInit = function (e) {
              var t = this,
                n = !1;
              if (
                (new Ra()
                  .box("moov", Na)
                  .box("trak", Na)
                  .box("mdia", Na)
                  .N("mdhd", function (e) {
                    (e = Ka(e.reader, e.version)), (t.g = e.timescale);
                  })
                  .box("minf", Na)
                  .box("stbl", Na)
                  .N("stsd", _a)
                  .box("wvtt", function () {
                    n = !0;
                  })
                  .parse(e),
                !this.g)
              )
                throw new Me(2, 2, 2008);
              if (!n) throw new Me(2, 2, 2008);
            }),
            (Zm.prototype.setSequenceMode = function () {}),
            (Zm.prototype.setManifestType = function () {}),
            (Zm.prototype.parseMedia = function (e, t) {
              if (!e.length) return [];
              if (!this.g) throw new Me(2, 2, 2008);
              var n,
                i = 0,
                r = [],
                a = [],
                o = !1,
                s = !1,
                u = !1,
                c = null;
              if (
                (new Ra()
                  .box("moof", Na)
                  .box("traf", Na)
                  .N("tfdt", function (e) {
                    (o = !0), (i = qa(e.reader, e.version).baseMediaDecodeTime);
                  })
                  .N("tfhd", function (e) {
                    c = Ga(e.reader, e.flags).Kc;
                  })
                  .N("trun", function (e) {
                    (s = !0), (r = Wa(e.reader, e.version, e.flags).jf);
                  })
                  .box(
                    "mdat",
                    Oa(function (e) {
                      (u = !0), (n = e);
                    })
                  )
                  .parse(e, !1),
                !u && !o && !s)
              )
                throw new Me(2, 2, 2008);
              e = i;
              for (
                var d = new Aa(n, 0), h = l(r), f = h.next();
                !f.done;
                f = h.next()
              ) {
                var p = (f = f.value).kf || c,
                  g = f.Od ? i + f.Od : e;
                e = g + (p || 0);
                var m = 0;
                do {
                  var v = d.M();
                  m += v;
                  var y = null;
                  "vttc" == Fa(d.M())
                    ? 8 < v && (y = d.Ib(v - 8))
                    : d.skip(v - 8),
                    p &&
                      y &&
                      ((v = Qm(
                        y,
                        t.periodStart + g / this.g,
                        t.periodStart + e / this.g
                      )),
                      a.push(v));
                } while (f.sampleSize && m < f.sampleSize);
              }
              return a.filter(Yi);
            }),
            B("shaka.text.Mp4VttParser", Zm),
            (Zm.prototype.parseMedia = Zm.prototype.parseMedia),
            (Zm.prototype.setManifestType = Zm.prototype.setManifestType),
            (Zm.prototype.setSequenceMode = Zm.prototype.setSequenceMode),
            (Zm.prototype.parseInit = Zm.prototype.parseInit),
            Hi('application/mp4; codecs="wvtt"', function () {
              return new Zm();
            }),
            (ev.prototype.parseInit = function () {}),
            (ev.prototype.setSequenceMode = function () {}),
            (ev.prototype.setManifestType = function () {}),
            (ev.prototype.parseMedia = function (e) {
              var t = ht(e).replace(/\r+/g, "");
              if (((e = []), "" == (t = t.trim()))) return e;
              for (
                var n = (t = l(t.split("\n\n"))).next();
                !n.done;
                n = t.next()
              ) {
                var i = new an((n = n.value.split("\n"))[0]),
                  r = ln(i),
                  a = sn(i, /,/g);
                if (((i = ln(i)), null == r || null == a || null == i))
                  throw new Me(
                    2,
                    2,
                    2001,
                    "Could not parse cue time range in SubViewer"
                  );
                e.push(new Kn(r, i, n.slice(1).join("\n").trim()));
              }
              return e;
            }),
            B("shaka.text.SbvTextParser", ev),
            (ev.prototype.parseMedia = ev.prototype.parseMedia),
            (ev.prototype.setManifestType = ev.prototype.setManifestType),
            (ev.prototype.setSequenceMode = ev.prototype.setSequenceMode),
            (ev.prototype.parseInit = ev.prototype.parseInit),
            Hi("text/x-subviewer", function () {
              return new ev();
            }),
            (tv.prototype.parseInit = function () {}),
            (tv.prototype.setSequenceMode = function () {}),
            (tv.prototype.setManifestType = function () {}),
            (tv.prototype.parseMedia = function (e, t, n) {
              return (
                (e = Ae(gt((e = nv((e = ht(e))))))),
                this.g.parseMedia(e, t, n, [])
              );
            }),
            B("shaka.text.SrtTextParser", tv),
            (tv.srt2webvtt = nv),
            (tv.prototype.parseMedia = tv.prototype.parseMedia),
            (tv.prototype.setManifestType = tv.prototype.setManifestType),
            (tv.prototype.setSequenceMode = tv.prototype.setSequenceMode),
            (tv.prototype.parseInit = tv.prototype.parseInit),
            Hi("text/srt", function () {
              return new tv();
            }),
            (iv.prototype.parseInit = function () {}),
            (iv.prototype.setSequenceMode = function () {}),
            (iv.prototype.setManifestType = function () {}),
            (iv.prototype.parseMedia = function (e) {
              var t = "",
                n = "",
                i = null,
                r = null;
              for (
                r = (e = l((r = ht(e).split(/\r?\n\s*\r?\n/)))).next();
                !r.done;
                r = e.next()
              ) {
                var a = r.value;
                (r = a),
                  (a = sv.exec(a)) && ((i = a[1]), (r = a[2])),
                  "V4 Styles" == i || "V4+ Styles" == i
                    ? ((t = r), (t = n ? t + "\n" + r : r))
                    : "Events" == i && (n = n ? n + "\n" + r : r);
              }
              for (
                i = [], r = null, e = (t = l(t.split(/\r?\n/))).next();
                !e.done;
                e = t.next()
              )
                if (((e = e.value), !/^\s*;/.test(e) && (a = uv.exec(e))))
                  if (((e = a[1].trim()), (a = a[2].trim()), "Format" == e))
                    r = a.split(lv);
                  else if ("Style" == e) {
                    (e = a.split(lv)), (a = {});
                    for (var o = 0; o < r.length && o < e.length; o++)
                      a[r[o]] = e[o];
                    i.push(a);
                  }
              for (
                r = [], t = null, a = (n = l(n.split(/\r?\n/))).next(), e = {};
                !a.done;
                e = { Cg: void 0 }, a = n.next()
              )
                if (((a = a.value), !/^\s*;/.test(a) && (o = uv.exec(a))))
                  if (((a = o[1].trim()), (o = o[2].trim()), "Format" == a))
                    t = o.split(lv);
                  else if ("Dialogue" == a) {
                    (o = o.split(lv)), (a = {});
                    for (var s = 0; s < t.length && s < o.length; s++)
                      a[t[s]] = o[s];
                    (o = new Kn(
                      (s = ov(a.Start)),
                      ov(a.End),
                      o
                        .slice(t.length - 1)
                        .join(",")
                        .replace(/\\N/g, "\n")
                        .replace(/\{[^}]+\}/g, "")
                    )),
                      (e.Cg = a.Style),
                      (e = i.find(
                        (function (e) {
                          return function (t) {
                            return t.Name == e.Cg;
                          };
                        })(e)
                      )) && rv(o, e),
                      r.push(o);
                  }
              return r;
            }),
            B("shaka.text.SsaTextParser", iv),
            (iv.prototype.parseMedia = iv.prototype.parseMedia),
            (iv.prototype.setManifestType = iv.prototype.setManifestType),
            (iv.prototype.setSequenceMode = iv.prototype.setSequenceMode),
            (iv.prototype.parseInit = iv.prototype.parseInit);
          var sv = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,
            uv = /^\s*([^:]+):\s*(.*)/,
            lv = /\s*,\s*/,
            cv = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
          function dv(e, t) {
            var n = 1 & e[t + 1] ? 7 : 9;
            return t + n <= e.length &&
              0 <
                (e =
                  (((3 & e[t + 3]) << 11) |
                    (e[t + 4] << 3) |
                    ((224 & e[t + 5]) >>> 5)) -
                  n)
              ? { Sc: n, aa: e }
              : null;
          }
          function hv(e, t) {
            var n = [
                96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3,
                11025, 8e3, 7350,
              ],
              i = (60 & e[t + 2]) >>> 2;
            if (i > n.length - 1) return null;
            var r = 1 + ((192 & e[t + 2]) >>> 6),
              a = (1 & e[t + 2]) << 2;
            return (
              (a |= (192 & e[t + 3]) >>> 6),
              { sampleRate: n[i], channelCount: a, codec: "mp4a.40." + r }
            );
          }
          function fv(e, t) {
            if (t + 1 < e.length && 255 === e[t] && 240 == (246 & e[t + 1])) {
              var n = 1 & e[t + 1] ? 7 : 9;
              if (t + n >= e.length) return !1;
              var i =
                ((3 & e[t + 3]) << 11) |
                (e[t + 4] << 3) |
                ((224 & e[t + 5]) >>> 5);
              return (
                !(i <= n) &&
                ((t += i) === e.length ||
                  (t + 1 < e.length && 255 === e[t] && 240 == (246 & e[t + 1])))
              );
            }
            return !1;
          }
          function pv(e) {
            (this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null);
          }
          function gv(e, t) {
            if (t + 8 > e.length || 11 !== e[t] || 119 !== e[t + 1])
              return null;
            var n = e[t + 4] >> 6;
            if (3 <= n) return null;
            var i = 63 & e[t + 4],
              r =
                2 *
                [
                  64, 69, 96, 64, 70, 96, 80, 87, 120, 80, 88, 120, 96, 104,
                  144, 96, 105, 144, 112, 121, 168, 112, 122, 168, 128, 139,
                  192, 128, 140, 192, 160, 174, 240, 160, 175, 240, 192, 208,
                  288, 192, 209, 288, 224, 243, 336, 224, 244, 336, 256, 278,
                  384, 256, 279, 384, 320, 348, 480, 320, 349, 480, 384, 417,
                  576, 384, 418, 576, 448, 487, 672, 448, 488, 672, 512, 557,
                  768, 512, 558, 768, 640, 696, 960, 640, 697, 960, 768, 835,
                  1152, 768, 836, 1152, 896, 975, 1344, 896, 976, 1344, 1024,
                  1114, 1536, 1024, 1115, 1536, 1152, 1253, 1728, 1152, 1254,
                  1728, 1280, 1393, 1920, 1280, 1394, 1920,
                ][3 * i + n];
            if (t + r > e.length) return null;
            var a = e[t + 6] >> 5,
              o = 0;
            2 === a
              ? (o += 2)
              : (1 & a && 1 !== a && (o += 2), 4 & a && (o += 2)),
              (o = (((e[t + 6] << 8) | e[t + 7]) >> (12 - o)) & 1);
            var s = 7 & e[t + 5];
            return (
              (e = new Uint8Array([
                (n << 6) | ((e[t + 5] >> 3) << 1) | (s >> 2),
                ((3 & s) << 6) | (a << 3) | (o << 2) | (i >> 4),
                (i << 4) & 224,
              ])),
              {
                sampleRate: [48e3, 44100, 32e3][n],
                channelCount: [2, 1, 2, 3, 3, 4, 4, 5][a] + o,
                ka: e,
                aa: r,
              }
            );
          }
          function mv(e, t) {
            if (11 === e[t] && 119 === e[t + 1]) {
              var n,
                i,
                r = 0,
                a = 5;
              for (t += a; 0 < a; ) {
                i = e[t];
                var o = Math.min(a, 8),
                  s = 8 - o;
                (n = (i & (n = (4278190080 >>> (24 + s)) << s)) >> s),
                  (r = r ? (r << o) | n : n),
                  (t += 1),
                  (a -= o);
              }
              if (16 > r) return !0;
            }
            return !1;
          }
          function vv(e) {
            (this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null);
          }
          function yv(e, t) {
            if (t + 8 > e.length || 2935 != ((e[t] << 8) | e[t + 1]))
              return null;
            var n = new no(e.subarray(t + 2));
            ro(n, 2), ro(n, 3);
            var i = (ao(n, 11) + 1) << 1,
              r = ao(n, 2);
            if (3 == r) {
              r = [24e3, 22060, 16e3][(r = ao(n, 2))];
              var a = 3;
            } else (r = [48e3, 44100, 32e3][r]), (a = ao(n, 2));
            var o = ao(n, 3),
              s = ao(n, 1);
            return (
              (n = ao(n, 5)),
              t + i > e.byteLength
                ? null
                : ((e = Math.floor((i * r) / (16 * [1, 2, 3, 6][a]))),
                  (e = new Uint8Array([
                    (8160 & e) >> 5,
                    (31 & e) << 3,
                    (r << 6) | (n << 1),
                    (o << 1) | s,
                    0,
                  ])),
                  {
                    sampleRate: r,
                    channelCount: [2, 1, 2, 3, 3, 4, 4, 5][o] + s,
                    ka: e,
                    aa: i,
                  })
            );
          }
          function bv(e) {
            (this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null);
          }
          Hi("text/x-ssa", function () {
            return new iv();
          }),
            ((i = pv.prototype).destroy = function () {
              this.g.clear();
            }),
            (i.isSupported = function (e) {
              return (
                "audio/aac" == e.toLowerCase().split(";")[0] &&
                Ft(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "audio/aac" == t.toLowerCase().split(";")[0]
                ? 'audio/mp4; codecs="' + (_i(t) || "mp4a.40.2") + '"'
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.j;
            }),
            (i.transmux = function (e, t, n, i) {
              for (
                var r = Ae(e), a = xo(r), o = a.length;
                o < r.length && !fv(r, o);
                o++
              );
              if (
                ((e = 1e3 * n.endTime),
                (a = wo(a)).length &&
                  n &&
                  (a = a.find(function (e) {
                    return (
                      "com.apple.streaming.transportStreamTimestamp" ===
                      e.description
                    );
                  })) &&
                  (e = a.data),
                !(a = hv(r, o)))
              )
                return Promise.reject(new Me(2, 3, 3018, n ? n.T()[0] : null));
              (t.audioSamplingRate = a.sampleRate),
                (t.channelsCount = a.channelCount);
              for (var s = []; o < r.length; ) {
                var u = dv(r, o);
                if (!u)
                  return Promise.reject(
                    new Me(2, 3, 3018, n ? n.T()[0] : null)
                  );
                var l = u.Sc + u.aa;
                o + l <= r.length &&
                  s.push({
                    data: r.subarray(o + u.Sc, o + l),
                    size: u.aa,
                    duration: 1024,
                    Qa: 0,
                    flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                  }),
                  (o += l);
              }
              return (
                (r = a.sampleRate),
                (e = Math.floor((e * r) / 1e3)),
                (i = new tc([
                  (i = {
                    id: t.id,
                    type: "audio",
                    codecs: a.codec,
                    encrypted: t.encrypted && 0 < t.drmInfos.length,
                    timescale: r,
                    duration: i,
                    Wa: [],
                    ka: new Uint8Array([]),
                    qa: new Uint8Array([]),
                    va: 0,
                    wa: 0,
                    data: { mb: this.h, baseMediaDecodeTime: e, Ua: s },
                    stream: t,
                  }),
                ])),
                (n = t.id + "_" + n.h),
                this.g.has(n)
                  ? (t = this.g.get(n))
                  : ((t = nc(i)), this.g.set(n, t)),
                (n = this.i !== t),
                (i = sc(i)),
                (this.i = t),
                this.h++,
                n ? ((t = It(t, i)), Promise.resolve(t)) : Promise.resolve(i)
              );
            }),
            B("shaka.transmuxer.AacTransmuxer", pv),
            (pv.prototype.transmux = pv.prototype.transmux),
            (pv.prototype.getOriginalMimeType =
              pv.prototype.getOriginalMimeType),
            (pv.prototype.convertCodecs = pv.prototype.convertCodecs),
            (pv.prototype.isSupported = pv.prototype.isSupported),
            (pv.prototype.destroy = pv.prototype.destroy),
            bi(
              "audio/aac",
              function () {
                return new pv("audio/aac");
              },
              Si
            ),
            ((i = vv.prototype).destroy = function () {
              this.g.clear();
            }),
            (i.isSupported = function (e) {
              return (
                "audio/ac3" == e.toLowerCase().split(";")[0] &&
                Ft(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "audio/ac3" == t.toLowerCase().split(";")[0]
                ? ze()
                  ? 'audio/mp4; codecs="ec-3"'
                  : 'audio/mp4; codecs="ac-3"'
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.j;
            }),
            (i.transmux = function (e, t, n, i) {
              for (
                var r = xo((e = Ae(e))), a = r.length;
                a < e.length && !mv(e, a);
                a++
              );
              var o = 1e3 * n.endTime;
              (r = wo(r)).length &&
                n &&
                (r = r.find(function (e) {
                  return (
                    "com.apple.streaming.transportStreamTimestamp" ===
                    e.description
                  );
                })) &&
                (o = r.data),
                (r = 0);
              for (var s = new Uint8Array([]), u = []; a < e.length; ) {
                var l = gv(e, a);
                if (!l)
                  return Promise.reject(
                    new Me(2, 3, 3018, n ? n.T()[0] : null)
                  );
                (t.audioSamplingRate = l.sampleRate),
                  (t.channelsCount = l.channelCount),
                  (r = l.sampleRate),
                  (s = l.ka),
                  u.push({
                    data: e.subarray(a, a + l.aa),
                    size: l.aa,
                    duration: 1536,
                    Qa: 0,
                    flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                  }),
                  (a += l.aa);
              }
              return (
                (e = Math.floor((o * r) / 1e3)),
                (i = new tc([
                  (i = {
                    id: t.id,
                    type: "audio",
                    codecs: "ac-3",
                    encrypted: t.encrypted && 0 < t.drmInfos.length,
                    timescale: r,
                    duration: i,
                    Wa: [],
                    ka: s,
                    qa: new Uint8Array([]),
                    va: 0,
                    wa: 0,
                    data: { mb: this.h, baseMediaDecodeTime: e, Ua: u },
                    stream: t,
                  }),
                ])),
                (n = t.id + "_" + n.h),
                this.g.has(n)
                  ? (t = this.g.get(n))
                  : ((t = nc(i)), this.g.set(n, t)),
                (n = this.i !== t),
                (i = sc(i)),
                (this.i = t),
                this.h++,
                n ? ((t = It(t, i)), Promise.resolve(t)) : Promise.resolve(i)
              );
            }),
            B("shaka.transmuxer.Ac3Transmuxer", vv),
            (vv.prototype.transmux = vv.prototype.transmux),
            (vv.prototype.getOriginalMimeType =
              vv.prototype.getOriginalMimeType),
            (vv.prototype.convertCodecs = vv.prototype.convertCodecs),
            (vv.prototype.isSupported = vv.prototype.isSupported),
            (vv.prototype.destroy = vv.prototype.destroy),
            bi(
              "audio/ac3",
              function () {
                return new vv("audio/ac3");
              },
              Si
            ),
            ((i = bv.prototype).destroy = function () {
              this.g.clear();
            }),
            (i.isSupported = function (e) {
              return (
                "audio/ec3" == e.toLowerCase().split(";")[0] &&
                Ft(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "audio/ec3" == t.toLowerCase().split(";")[0]
                ? 'audio/mp4; codecs="ec-3"'
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.j;
            }),
            (i.transmux = function (e, t, n, i) {
              for (
                var r = xo((e = Ae(e))), a = r.length;
                a < e.length && 2935 != ((e[a] << 8) | e[a + 1]);
                a++
              );
              var o = 1e3 * n.endTime;
              (r = wo(r)).length &&
                n &&
                (r = r.find(function (e) {
                  return (
                    "com.apple.streaming.transportStreamTimestamp" ===
                    e.description
                  );
                })) &&
                (o = r.data),
                (r = 0);
              for (var s = new Uint8Array([]), u = []; a < e.length; ) {
                var l = yv(e, a);
                if (!l)
                  return Promise.reject(
                    new Me(2, 3, 3018, n ? n.T()[0] : null)
                  );
                (t.audioSamplingRate = l.sampleRate),
                  (t.channelsCount = l.channelCount),
                  (r = l.sampleRate),
                  (s = l.ka),
                  u.push({
                    data: e.subarray(a, a + l.aa),
                    size: l.aa,
                    duration: 1536,
                    Qa: 0,
                    flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                  }),
                  (a += l.aa);
              }
              return (
                (e = Math.floor((o * r) / 1e3)),
                (i = new tc([
                  (i = {
                    id: t.id,
                    type: "audio",
                    codecs: "ec-3",
                    encrypted: t.encrypted && 0 < t.drmInfos.length,
                    timescale: r,
                    duration: i,
                    Wa: [],
                    ka: s,
                    qa: new Uint8Array([]),
                    va: 0,
                    wa: 0,
                    data: { mb: this.h, baseMediaDecodeTime: e, Ua: u },
                    stream: t,
                  }),
                ])),
                (n = t.id + "_" + n.h),
                this.g.has(n)
                  ? (t = this.g.get(n))
                  : ((t = nc(i)), this.g.set(n, t)),
                (n = this.i !== t),
                (i = sc(i)),
                (this.i = t),
                this.h++,
                n ? ((t = It(t, i)), Promise.resolve(t)) : Promise.resolve(i)
              );
            }),
            B("shaka.transmuxer.Ec3Transmuxer", bv),
            (bv.prototype.transmux = bv.prototype.transmux),
            (bv.prototype.getOriginalMimeType =
              bv.prototype.getOriginalMimeType),
            (bv.prototype.convertCodecs = bv.prototype.convertCodecs),
            (bv.prototype.isSupported = bv.prototype.isSupported),
            (bv.prototype.destroy = bv.prototype.destroy),
            bi(
              "audio/ec3",
              function () {
                return new bv("audio/ec3");
              },
              Si
            );
          var wv = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
          function xv(e) {
            if (!e.length) return null;
            var t = e.find(function (e) {
                return 32 == e.type;
              }),
              n = e.find(function (e) {
                return 33 == e.type;
              }),
              i = e.find(function (e) {
                return 34 == e.type;
              });
            if (!t || !n || !i) return null;
            var r = (function (e) {
              var t = new no(e, !0);
              return (
                ho(t),
                ho(t),
                ao(t, 4),
                ao(t, 2),
                ao(t, 6),
                (e = ao(t, 3)),
                (t = co(t)),
                { Ze: e + 1, uf: t }
              );
            })(t.fullData);
            e = (function (e) {
              (e = new no(e, !0)), ho(e), ho(e);
              var t = 0,
                n = 0,
                i = 0,
                r = 0;
              ao(e, 4);
              var a = ao(e, 3);
              co(e);
              for (
                var o = ao(e, 2),
                  s = ao(e, 1),
                  u = ao(e, 5),
                  l = ho(e),
                  c = ho(e),
                  d = ho(e),
                  h = ho(e),
                  f = ho(e),
                  p = ho(e),
                  g = ho(e),
                  m = ho(e),
                  v = ho(e),
                  y = ho(e),
                  b = ho(e),
                  w = [],
                  x = [],
                  S = 0;
                S < a;
                S++
              )
                w.push(co(e)), x.push(co(e));
              if (0 < a) for (S = a; 8 > S; S++) ao(e, 2);
              for (S = 0; S < a; S++) w[S] && ao(e, 88), x[S] && ho(e);
              uo(e),
                (w = uo(e)),
                3 == w && ao(e, 1),
                (x = uo(e)),
                (S = uo(e)),
                co(e) &&
                  ((t += uo(e)), (n += uo(e)), (i += uo(e)), (r += uo(e)));
              var T = uo(e),
                A = uo(e),
                k = uo(e);
              if (co(e)) for (var I = 0; I <= a; I++) uo(e), uo(e), uo(e);
              else uo(e), uo(e), uo(e);
              if ((uo(e), uo(e), uo(e), uo(e), uo(e), uo(e), co(e) && co(e)))
                for (I = 0; 4 > I; I++)
                  for (var C = 0; C < (3 === I ? 2 : 6); C++)
                    if (co(e)) {
                      var M = Math.min(64, 1 << (4 + (I << 1)));
                      1 < I && lo(e);
                      for (var E = 0; E < M; E++) lo(e);
                    } else uo(e);
              for (
                co(e),
                  co(e),
                  co(e) && (ho(e), uo(e), uo(e), co(e)),
                  I = uo(e),
                  M = C = 0;
                M < I;
                M++
              )
                if (((E = !1), 0 !== M && (E = co(e)), E)) {
                  M === I && uo(e), co(e), uo(e);
                  for (var D = (E = 0); D <= C; D++) {
                    var P = co(e),
                      L = !1;
                    P || (L = co(e)), (P || L) && E++;
                  }
                  C = E;
                } else {
                  for (C = (D = uo(e)) + (E = uo(e)), P = 0; P < D; P++)
                    uo(e), co(e);
                  for (D = 0; D < E; D++) uo(e), co(e);
                }
              if (co(e))
                for (I = uo(e), C = 0; C < I; C++) {
                  for (M = 0; M < k + 4; M++) ao(e, 1);
                  ao(e, 1);
                }
              if (((I = k = 1), (C = 0), co(e), co(e), co(e))) {
                if (
                  (co(e) &&
                    ((E = [
                      1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3,
                      2,
                    ]),
                    (D = [
                      1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2,
                      1,
                    ]),
                    0 < (M = ho(e)) && 16 >= M
                      ? ((k = E[M - 1]), (I = D[M - 1]))
                      : 255 === M && ((k = ao(e, 16)), (I = ao(e, 16)))),
                  co(e) && co(e),
                  co(e) && (ao(e, 3), co(e), co(e) && (ho(e), ho(e), ho(e))),
                  co(e) && (uo(e), uo(e)),
                  co(e),
                  co(e),
                  co(e),
                  (M = co(e)) && (uo(e), uo(e), uo(e), uo(e)),
                  co(e) && (ao(e, 32), ao(e, 32), co(e) && uo(e), co(e)))
                )
                  for (
                    D = !1,
                      M = co(e),
                      E = co(e),
                      (M || E) &&
                        ((D = co(e)) && (ho(e), ao(e, 5), co(e), ao(e, 5)),
                        ao(e, 4),
                        ao(e, 4),
                        D && ao(e, 4),
                        ao(e, 5),
                        ao(e, 5),
                        ao(e, 5)),
                      P = 0;
                    P <= a;
                    P++
                  ) {
                    var R = !0;
                    (L = 1), co(e) || (R = co(e));
                    var N = !1;
                    if ((R ? uo(e) : (N = co(e)), N || (L = uo(e) + 1), M)) {
                      for (R = 0; R < L; R++) uo(e), uo(e), D && (uo(e), uo(e));
                      co(e);
                    }
                    if (E) {
                      for (R = 0; R < L; R++) uo(e), uo(e), D && (uo(e), uo(e));
                      co(e);
                    }
                  }
                co(e) &&
                  (co(e),
                  co(e),
                  co(e),
                  (C = uo(e)),
                  uo(e),
                  uo(e),
                  uo(e),
                  uo(e));
              }
              return {
                Ee: b,
                Ke: o,
                Le: s,
                Je: u,
                Fe: l,
                Ge: c,
                He: d,
                Ie: h,
                ye: f,
                ze: p,
                Ae: g,
                Be: m,
                Ce: v,
                De: y,
                Fd: C,
                se: 0,
                qe: w,
                pe: T,
                oe: A,
                width: x - (t + n) * (1 === w || 2 === w ? 2 : 1),
                height: S - (i + r) * (1 === w ? 2 : 1),
                pi: k,
                oi: I,
              };
            })(n.fullData);
            var a = (function (e) {
              var t = new no(e, !0);
              ho(t),
                ho(t),
                uo(t),
                uo(t),
                co(t),
                co(t),
                ao(t, 3),
                co(t),
                co(t),
                uo(t),
                uo(t),
                lo(t),
                co(t),
                co(t),
                co(t) && uo(t),
                lo(t),
                lo(t),
                co(t),
                co(t),
                co(t),
                co(t),
                (e = co(t)),
                (t = co(t));
              var n = 1;
              return t && e ? (n = 0) : t ? (n = 3) : e && (n = 2), { af: n };
            })(i.fullData);
            return (
              (t = (function (e, t, n, i) {
                var r = new Uint8Array(
                  23 +
                    (5 + e.byteLength) +
                    (5 + t.byteLength) +
                    (5 + n.byteLength)
                );
                return (
                  (r[0] = 1),
                  (r[1] =
                    ((3 & i.Ke) << 6) | ((i.Le ? 1 : 0) << 5) | (31 & i.Je)),
                  (r[2] = i.Fe),
                  (r[3] = i.Ge),
                  (r[4] = i.He),
                  (r[5] = i.Ie),
                  (r[6] = i.ye),
                  (r[7] = i.ze),
                  (r[8] = i.Ae),
                  (r[9] = i.Be),
                  (r[10] = i.Ce),
                  (r[11] = i.De),
                  (r[12] = i.Ee),
                  (r[13] = 240 | ((3840 & i.Fd) >> 8)),
                  (r[14] = 255 & i.Fd),
                  (r[15] = 252 | (3 & i.af)),
                  (r[16] = 252 | (3 & i.qe)),
                  (r[17] = 248 | (7 & i.pe)),
                  (r[18] = 248 | (7 & i.oe)),
                  (r[19] = 0),
                  (r[20] = 0),
                  (r[21] =
                    ((3 & i.se) << 6) |
                    ((7 & i.Ze) << 3) |
                    ((i.uf ? 1 : 0) << 2) |
                    3),
                  (r[22] = 3),
                  (r[23] = 160),
                  (r[24] = 0),
                  (r[25] = 1),
                  (r[26] = (65280 & e.byteLength) >> 8),
                  (r[27] = 255 & e.byteLength),
                  r.set(e, 28),
                  (r[23 + (5 + e.byteLength)] = 161),
                  (r[e.byteLength + 29] = 0),
                  (r[e.byteLength + 30] = 1),
                  (r[e.byteLength + 31] = (65280 & t.byteLength) >> 8),
                  (r[e.byteLength + 32] = 255 & t.byteLength),
                  r.set(t, e.byteLength + 33),
                  (r[23 + (e.byteLength + 10 + t.byteLength)] = 162),
                  (r[e.byteLength + 10 + t.byteLength + 24] = 0),
                  (r[e.byteLength + 10 + t.byteLength + 25] = 1),
                  (r[e.byteLength + 10 + t.byteLength + 26] =
                    (65280 & n.byteLength) >> 8),
                  (r[e.byteLength + 10 + t.byteLength + 27] =
                    255 & n.byteLength),
                  r.set(n, e.byteLength + 10 + t.byteLength + 28),
                  r
                );
              })(t.fullData, n.fullData, i.fullData, {
                Ze: r.Ze,
                uf: r.uf,
                Ke: e.Ke,
                Le: e.Le,
                Ee: e.Ee,
                Je: e.Je,
                Fe: e.Fe,
                Ge: e.Ge,
                He: e.He,
                Ie: e.Ie,
                ye: e.ye,
                ze: e.ze,
                Ae: e.Ae,
                Be: e.Be,
                Ce: e.Ce,
                De: e.De,
                se: e.se,
                Fd: e.Fd,
                qe: e.qe,
                pe: e.pe,
                oe: e.oe,
                af: a.af,
              })),
              { height: e.height, width: e.width, qa: t, va: e.pi, wa: e.oi }
            );
          }
          function Sv(e, t) {
            var n = (e[t + 1] >> 3) & 3,
              i = (e[t + 1] >> 1) & 3,
              r = (e[t + 2] >> 4) & 15,
              a = (e[t + 2] >> 2) & 3;
            if (1 !== n && 0 !== r && 15 !== r && 3 !== a) {
              var o = e[t + 3] >> 6;
              (r = 1e3 * kv[14 * (3 === n ? 3 - i : 3 === i ? 3 : 4) + r - 1]),
                (a = Iv[3 * (3 === n ? 0 : 2 === n ? 1 : 2) + a]),
                (n = Cv[n][i]);
              var s = Mv[i],
                u = Math.floor((n * r) / a + ((e[t + 2] >> 1) & 1)) * s,
                l = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
              return (
                (l = l ? parseInt(l[1], 10) : 0) &&
                  87 >= l &&
                  2 === i &&
                  224e3 <= r &&
                  0 === o &&
                  (e[t + 3] |= 128),
                {
                  sampleRate: a,
                  channelCount: 3 === o ? 1 : 2,
                  aa: u,
                  ni: 8 * n * s,
                }
              );
            }
            return null;
          }
          function Tv(e, t) {
            return !(255 !== e[t] || 224 & ~e[t + 1] || !(6 & e[t + 1]));
          }
          function Av(e, t) {
            if (t + 1 < e.length && Tv(e, t)) {
              var n = Sv(e, t),
                i = 4;
              return (
                n && n.aa && (i = n.aa),
                (t += i) === e.length || (t + 1 < e.length && Tv(e, t))
              );
            }
            return !1;
          }
          var kv = [
              32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448,
              32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384,
              32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32,
              48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16,
              24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160,
            ],
            Iv = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
            Cv = [
              [0, 72, 144, 12],
              [0, 0, 0, 0],
              [0, 72, 144, 12],
              [0, 144, 144, 12],
            ],
            Mv = [0, 1, 1, 4];
          function Ev(e) {
            (this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null);
          }
          function Dv(e) {
            (this.h = e), (this.g = null);
          }
          function Pv(e) {
            (this.h = e),
              (this.g = Dl.get("ISOBoxer")()) &&
                (function (e) {
                  function t() {
                    this._procFullBox(),
                      1 & this.flags &&
                        (this._procField("AlgorithmID", "uint", 24),
                        this._procField("IV_size", "uint", 8),
                        this._procFieldArray("KID", 16, "uint", 8)),
                      this._procField("sample_count", "uint", 32),
                      this._procEntries(
                        "entry",
                        this.sample_count,
                        function (e) {
                          this._procEntryField(
                            e,
                            "InitializationVector",
                            "data",
                            8
                          ),
                            2 & this.flags &&
                              (this._procEntryField(
                                e,
                                "NumberOfEntries",
                                "uint",
                                16
                              ),
                              this._procSubEntries(
                                e,
                                "clearAndCryptedData",
                                e.NumberOfEntries,
                                function (e) {
                                  this._procEntryField(
                                    e,
                                    "BytesOfClearData",
                                    "uint",
                                    16
                                  ),
                                    this._procEntryField(
                                      e,
                                      "BytesOfEncryptedData",
                                      "uint",
                                      32
                                    );
                                }
                              ));
                        }
                      );
                  }
                  e.g.addBoxProcessor("saio", function () {
                    this._procFullBox(),
                      1 & this.flags &&
                        (this._procField("aux_info_type", "uint", 32),
                        this._procField("aux_info_type_parameter", "uint", 32)),
                      this._procField("entry_count", "uint", 32),
                      this._procFieldArray(
                        "offset",
                        this.entry_count,
                        "uint",
                        1 === this.version ? 64 : 32
                      );
                  }),
                    e.g.addBoxProcessor("saiz", function () {
                      this._procFullBox(),
                        1 & this.flags &&
                          (this._procField("aux_info_type", "uint", 32),
                          this._procField(
                            "aux_info_type_parameter",
                            "uint",
                            32
                          )),
                        this._procField("default_sample_info_size", "uint", 8),
                        this._procField("sample_count", "uint", 32),
                        0 === this.default_sample_info_size &&
                          this._procFieldArray(
                            "sample_info_size",
                            this.sample_count,
                            "uint",
                            8
                          );
                    }),
                    e.g.addBoxProcessor("senc", t),
                    e.g.addBoxProcessor("uuid", function () {
                      for (var e = !0, n = 0; 16 > n; n++)
                        this.usertype[n] !== Rv[n] && (e = !1);
                      e &&
                        (this._parsing && (this.type = "sepiff"), t.call(this));
                    });
                })(this);
          }
          function Lv(e, t) {
            for (
              var n = 8, i = 0;
              i < e.boxes.length && e.boxes[i].type !== t;
              i++
            )
              n += e.boxes[i].size;
            return n;
          }
          ((i = Ev.prototype).destroy = function () {
            this.g.clear();
          }),
            (i.isSupported = function (e) {
              return (
                "audio/mpeg" == e.toLowerCase().split(";")[0] &&
                Ft(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "audio/mpeg" == t.toLowerCase().split(";")[0]
                ? 'audio/mp4; codecs="mp3"'
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.j;
            }),
            (i.transmux = function (e, t, n, i) {
              for (
                var r = Ae(e), a = xo(r).length;
                a < r.length && !Av(r, a);
                a++
              );
              var o;
              for (e = []; a < r.length; ) {
                var s = Sv(r, a);
                if (!s)
                  return Promise.reject(
                    new Me(2, 3, 3018, n ? n.T()[0] : null)
                  );
                o || (o = s),
                  a + s.aa <= r.length &&
                    e.push({
                      data: r.subarray(a, a + s.aa),
                      size: s.aa,
                      duration: 1152,
                      Qa: 0,
                      flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                    }),
                  (a += s.aa);
              }
              return o
                ? ((r = ((9e4 * o.ni) / o.sampleRate) * this.h),
                  (i = new tc([
                    (i = {
                      id: t.id,
                      type: "audio",
                      codecs: "mp3",
                      encrypted: t.encrypted && 0 < t.drmInfos.length,
                      timescale: o.sampleRate,
                      duration: i,
                      Wa: [],
                      ka: new Uint8Array([]),
                      qa: new Uint8Array([]),
                      va: 0,
                      wa: 0,
                      data: { mb: this.h, baseMediaDecodeTime: r, Ua: e },
                      stream: t,
                    }),
                  ])),
                  (n = t.id + "_" + n.h),
                  this.g.has(n)
                    ? (t = this.g.get(n))
                    : ((t = nc(i)), this.g.set(n, t)),
                  (n = this.i !== t),
                  (i = sc(i)),
                  (this.i = t),
                  this.h++,
                  n ? ((t = It(t, i)), Promise.resolve(t)) : Promise.resolve(i))
                : Promise.reject(new Me(2, 3, 3018, n ? n.T()[0] : null));
            }),
            B("shaka.transmuxer.Mp3Transmuxer", Ev),
            (Ev.prototype.transmux = Ev.prototype.transmux),
            (Ev.prototype.getOriginalMimeType =
              Ev.prototype.getOriginalMimeType),
            (Ev.prototype.convertCodecs = Ev.prototype.convertCodecs),
            (Ev.prototype.isSupported = Ev.prototype.isSupported),
            (Ev.prototype.destroy = Ev.prototype.destroy),
            bi(
              "audio/mpeg",
              function () {
                return new Ev("audio/mpeg");
              },
              Si
            ),
            ((i = Dv.prototype).destroy = function () {}),
            (i.isSupported = function (e) {
              if ("video/mp2t" != e.toLowerCase().split(";")[0]) return !1;
              var t = _i(e).split(","),
                n = Dt("audio", t);
              return (
                (t = Dt("video", t)),
                !(!n || t || "mp3" != Li(n)) &&
                  Ft(this.convertCodecs("audio", e))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "video/mp2t" == t.toLowerCase().split(";")[0]
                ? "audio/mpeg"
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.h;
            }),
            (i.transmux = function (e, t, n, i, r) {
              if (
                (this.g ? this.g.clearData() : (this.g = new So()),
                (e = Ae(e)),
                "mp3" != (e = this.g.parse(e)).rd().audio || "audio" != r)
              )
                return Promise.reject(new Me(2, 3, 3018, n ? n.T()[0] : null));
              for (
                n = new Uint8Array([]), r = l(e.Fb()), e = r.next();
                !e.done;
                e = r.next()
              )
                if ((e = e.value.data))
                  for (t = 0; t < e.length; )
                    (i = Sv(e, t))
                      ? (t + i.aa <= e.length &&
                          (n = It(n, e.subarray(t, t + i.aa))),
                        (t += i.aa))
                      : t++;
              return Promise.resolve(n);
            }),
            B("shaka.transmuxer.MpegTsTransmuxer", Dv),
            (Dv.prototype.transmux = Dv.prototype.transmux),
            (Dv.prototype.getOriginalMimeType =
              Dv.prototype.getOriginalMimeType),
            (Dv.prototype.convertCodecs = Dv.prototype.convertCodecs),
            (Dv.prototype.isSupported = Dv.prototype.isSupported),
            (Dv.prototype.destroy = Dv.prototype.destroy),
            bi(
              "video/mp2t",
              function () {
                return new Dv("video/mp2t");
              },
              Ti
            ),
            ((i = Pv.prototype).destroy = function () {}),
            (i.isSupported = function (e, t) {
              var n = e.startsWith("mss/");
              return (
                !(!this.g || !n) &&
                (t
                  ? Ft(this.convertCodecs(t, e))
                  : ((t = this.convertCodecs("audio", e)),
                    (e = this.convertCodecs("video", e)),
                    Ft(t) || Ft(e)))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return t.replace("mss/", "");
            }),
            (i.getOriginalMimeType = function () {
              return this.h;
            }),
            (i.transmux = function (e, t, n) {
              if (!n) return Promise.resolve(Ae(e));
              if (!t.mssPrivateData)
                return Promise.reject(new Me(2, 3, 3020, n ? n.T()[0] : null));
              try {
                var i,
                  r = this.g.parseBuffer(e),
                  a = r.fetch("tfhd");
                a.track_ID = t.id + 1;
                var o = r.fetch("tfdt"),
                  s = r.fetch("traf");
                null === o &&
                  (((o = this.g.createFullBox("tfdt", s, a)).version = 1),
                  (o.flags = 0),
                  (o.baseMediaDecodeTime = Math.floor(
                    n.startTime * t.mssPrivateData.timescale
                  )));
                var u = r.fetch("trun"),
                  l = r.fetch("tfxd");
                l && l._parent.boxes.splice(l._parent.boxes.indexOf(l), 1);
                var c = r.fetch("tfrf");
                c && c._parent.boxes.splice(c._parent.boxes.indexOf(c), 1);
                var d = r.fetch("sepiff");
                if (null !== d) {
                  (d.type = "senc"), (d.usertype = void 0);
                  var h = r.fetch("saio");
                  if (null === h) {
                    ((h = this.g.createFullBox("saio", s)).version = 0),
                      (h.flags = 0),
                      (h.entry_count = 1),
                      (h.offset = [0]);
                    var f = this.g.createFullBox("saiz", s);
                    if (
                      ((f.version = 0),
                      (f.flags = 0),
                      (f.sample_count = d.sample_count),
                      (f.default_sample_info_size = 0),
                      (f.sample_info_size = []),
                      2 & d.flags)
                    )
                      for (i = 0; i < d.sample_count; i += 1)
                        f.sample_info_size[i] =
                          10 + 6 * d.entry[i].NumberOfEntries;
                    else f.default_sample_info_size = 8;
                  }
                }
                (a.flags &= 16777214), (a.flags |= 131072), (u.flags |= 1);
                var p = r.fetch("moof");
                u.data_offset = p.getLength() + 8;
                var g = r.fetch("saio");
                null !== g &&
                  (g.offset[0] = Lv(p, "traf") + Lv(s, "senc") + 16);
                var m = Ae(r.write());
                return Promise.resolve(m);
              } catch (e) {
                return e instanceof Me
                  ? Promise.reject(e)
                  : Promise.reject(new Me(2, 3, 3022, n ? n.T()[0] : null));
              }
            }),
            B("shaka.transmuxer.MssTransmuxer", Pv),
            (Pv.prototype.transmux = Pv.prototype.transmux),
            (Pv.prototype.getOriginalMimeType =
              Pv.prototype.getOriginalMimeType),
            (Pv.prototype.convertCodecs = Pv.prototype.convertCodecs),
            (Pv.prototype.isSupported = Pv.prototype.isSupported),
            (Pv.prototype.destroy = Pv.prototype.destroy);
          var Rv = new Uint8Array([
            162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141,
            244,
          ]);
          function Nv(e) {
            (this.m = e),
              (this.g = 0),
              (this.i = new Map()),
              (this.l = this.h = this.j = null);
          }
          bi(
            "mss/audio/mp4",
            function () {
              return new Pv("mss/audio/mp4");
            },
            Si
          ),
            bi(
              "mss/video/mp4",
              function () {
                return new Pv("mss/video/mp4");
              },
              Si
            ),
            ((i = Nv.prototype).destroy = function () {
              this.i.clear(), this.h && this.h.destroy();
            }),
            (i.isSupported = function (e, t) {
              if ("video/mp2t" != e.toLowerCase().split(";")[0]) return !1;
              var n = e;
              t && (n = this.convertCodecs(t, e));
              var i = _i(n).split(",");
              return (
                (n = Dt("audio", i)),
                (i = Dt("video", i)),
                !(
                  (n && ((n = Li(n)), !jv.includes(n))) ||
                  (i && ((n = Li(i)), !Ov.includes(n)))
                ) &&
                  (t
                    ? Ft(this.convertCodecs(t, e))
                    : ((t = this.convertCodecs("audio", e)),
                      (e = this.convertCodecs("video", e)),
                      Ft(t) || Ft(e)))
              );
            }),
            (i.convertCodecs = function (e, t) {
              return "video/mp2t" == t.toLowerCase().split(";")[0]
                ? ((t = _i(t)
                    .replace("mp4a.40.34", "mp3")
                    .split(",")
                    .map(function (e) {
                      return gr(e, "audio/mp4");
                    })
                    .map(mr)
                    .join(",")),
                  "audio" == e
                    ? 'audio/mp4; codecs="' + t + '"'
                    : 'video/mp4; codecs="' + t + '"')
                : t;
            }),
            (i.getOriginalMimeType = function () {
              return this.m;
            }),
            (i.transmux = function (e, t, n, i, r) {
              var a = Ae(e);
              if ("audio" == r && !Io(a)) {
                for (var o = xo(a), s = o.length; s < a.length; s++)
                  if (Av(a, s))
                    return Promise.reject(
                      new Me(2, 3, 3018, n ? n.T()[0] : null)
                    );
                for (s = o.length; s < a.length; s++)
                  if (fv(a, s))
                    return (
                      this.h || (this.h = new pv("audio/aac")),
                      this.h.transmux(e, t, n, i, r)
                    );
                return Promise.reject(new Me(2, 3, 3018, n ? n.T()[0] : null));
              }
              this.j ? this.j.clearData() : (this.j = new So());
              var u = this.j.parse(a),
                d = [],
                h = u.rd();
              try {
                var f = null;
                if ("video" == r) {
                  switch (h.video) {
                    case "avc":
                      var p = [],
                        g = null,
                        m = u.Zb(),
                        v = (function (e) {
                          function t(e) {
                            r = {
                              data: new Uint8Array([]),
                              frame: !1,
                              isKeyframe: !1,
                              pts: e.pts,
                              dts: e.dts,
                              nalus: [],
                            };
                          }
                          function n() {
                            if (r && r.nalus.length && r.frame) {
                              for (
                                var e = [], t = l(r.nalus), n = t.next();
                                !n.done;
                                n = t.next()
                              ) {
                                var a = (n = n.value).fullData.byteLength,
                                  o = new Uint8Array(4);
                                (o[0] = (a >> 24) & 255),
                                  (o[1] = (a >> 16) & 255),
                                  (o[2] = (a >> 8) & 255),
                                  (o[3] = 255 & a),
                                  e.push(o),
                                  e.push(n.fullData);
                              }
                              (r.data = It.apply(wt, c(e))), i.push(r);
                            }
                          }
                          for (
                            var i = [], r = null, a = !1, o = 0;
                            o < e.length;
                            o++
                          ) {
                            var s = e[o],
                              u = s.nalus,
                              d = !1;
                            r && u.length && !a && (n(), t(s));
                            for (
                              var h = (u = l(s.nalus)).next();
                              !h.done;
                              h = u.next()
                            ) {
                              var f = !1;
                              switch ((h = h.value).type) {
                                case 1:
                                  var p = !1;
                                  f = !0;
                                  var g = h.data;
                                  d &&
                                    4 < g.length &&
                                    (2 === (g = po(new no(g))) ||
                                      4 === g ||
                                      7 === g ||
                                      9 === g) &&
                                    (p = !0),
                                    p &&
                                      r &&
                                      r.frame &&
                                      !r.isKeyframe &&
                                      (n(), (r = null)),
                                    r || t(s),
                                    (r.frame = !0),
                                    (r.isKeyframe = p);
                                  break;
                                case 5:
                                  (f = !0),
                                    r &&
                                      r.frame &&
                                      !r.isKeyframe &&
                                      (n(), (r = null)),
                                    r || t(s),
                                    (r.frame = !0),
                                    (r.isKeyframe = !0);
                                  break;
                                case 6:
                                case 8:
                                case 12:
                                  f = !0;
                                  break;
                                case 7:
                                  d = f = !0;
                                  break;
                                case 9:
                                  (a = f = !0),
                                    r && r.frame && (n(), (r = null)),
                                    r || t(s);
                                  break;
                                default:
                                  f = !1;
                              }
                              r && f && r.nalus.push(h);
                            }
                          }
                          return n(), i;
                        })(m);
                      if (!v.length)
                        throw new Me(2, 3, 3023, n ? n.T()[0] : null);
                      for (var y = 0; y < v.length; y++) {
                        var b = v[y];
                        null == g && (g = b.dts);
                        var w;
                        (w =
                          y + 1 < v.length
                            ? (v[y + 1].dts || 0) - (b.dts || 0)
                            : 1 < v.length
                            ? (b.dts || 0) - (v[y - 1].dts || 0)
                            : 9e4 * (n.endTime - n.startTime)),
                          p.push({
                            data: b.data,
                            size: b.data.byteLength,
                            duration: w,
                            Qa: Math.round((b.pts || 0) - (b.dts || 0)),
                            flags: {
                              Sa: 0,
                              Ja: 0,
                              Ia: 0,
                              Ga: 0,
                              Ha: b.isKeyframe ? 2 : 1,
                              Ta: b.isKeyframe ? 0 : 1,
                            },
                          });
                      }
                      for (
                        var x = [], S = l(m), T = S.next();
                        !T.done;
                        T = S.next()
                      )
                        x.push.apply(x, c(T.value.nalus));
                      var A = (function (e) {
                        if (!e.length) return null;
                        var t = e.find(function (e) {
                          return 7 == e.type;
                        });
                        if (
                          ((e = e.find(function (e) {
                            return 8 == e.type;
                          })),
                          !t || !e)
                        )
                          return null;
                        var n = new no(t.data),
                          i = ho(n);
                        if (
                          (ho(n),
                          ho(n),
                          so(n),
                          wv.includes(i) &&
                            (3 === (i = uo(n)) && ro(n, 1),
                            so(n),
                            so(n),
                            ro(n, 1),
                            co(n)))
                        ) {
                          i = 3 !== i ? 8 : 12;
                          for (var r = 0; r < i; r++)
                            co(n) && fo(n, 6 > r ? 16 : 64);
                        }
                        if ((so(n), 0 === (i = uo(n)))) uo(n);
                        else if (1 === i)
                          for (
                            ro(n, 1), so(n), so(n), i = uo(n), r = 0;
                            r < i;
                            r++
                          )
                            so(n);
                        so(n), ro(n, 1);
                        var a = uo(n),
                          o = uo(n),
                          s = ao(n, 1);
                        0 === s && ro(n, 1), ro(n, 1);
                        var u = 0,
                          l = 0,
                          d = 0,
                          h = 0;
                        if (
                          (co(n) &&
                            ((u = uo(n)),
                            (l = uo(n)),
                            (d = uo(n)),
                            (h = uo(n))),
                          (r = i = 1),
                          co(n) && co(n))
                        ) {
                          var f = ho(n);
                          0 < f && 16 >= f
                            ? ((i = [
                                1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64,
                                160, 4, 3, 2,
                              ][f - 1]),
                              (r = [
                                1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33,
                                99, 3, 2, 1,
                              ][f - 1]))
                            : 255 === f && ((i = ao(n, 16)), (r = ao(n, 16)));
                        }
                        return (
                          (n = (2 - s) * (o + 1) * 16 - 2 * d - 2 * h),
                          (a = 16 * (a + 1) - 2 * u - 2 * l),
                          (u = []),
                          (t = t.fullData),
                          u.push((t.byteLength >>> 8) & 255),
                          u.push(255 & t.byteLength),
                          (u = u.concat.apply(u, c(t))),
                          (t = []),
                          (e = e.fullData),
                          t.push((e.byteLength >>> 8) & 255),
                          t.push(255 & e.byteLength),
                          (t = t.concat.apply(t, c(e))),
                          {
                            height: n,
                            width: a,
                            qa: (e = new Uint8Array(
                              [1, u[3], u[4], u[5], 255, 225].concat(u, [1], t)
                            )),
                            va: i,
                            wa: r,
                          }
                        );
                      })(x);
                      if (!A || null == g)
                        throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                      (t.height = A.height),
                        (t.width = A.width),
                        (f = {
                          id: t.id,
                          type: "video",
                          codecs: "avc1",
                          encrypted: t.encrypted && 0 < t.drmInfos.length,
                          timescale: 9e4,
                          duration: i,
                          Wa: [],
                          ka: new Uint8Array([]),
                          qa: A.qa,
                          va: A.va,
                          wa: A.wa,
                          data: { mb: this.g, baseMediaDecodeTime: g, Ua: p },
                          stream: t,
                        });
                      break;
                    case "hvc":
                      var k = [],
                        I = null,
                        C = [],
                        M = u.Zb();
                      if (!M.length)
                        throw new Me(2, 3, 3023, n ? n.T()[0] : null);
                      for (var E = 0; E < M.length; E++) {
                        var D = M[E],
                          P = D.nalus;
                        C.push.apply(C, c(P));
                        for (
                          var L = !1, R = [], N = !1, _ = l(P), U = _.next();
                          !U.done;
                          U = _.next()
                        ) {
                          var j = U.value;
                          switch (j.type) {
                            case 1:
                            case 0:
                              var O = (N = !0);
                              break;
                            case 19:
                            case 20:
                            case 21:
                              L = O = N = !0;
                              break;
                            case 32:
                            case 33:
                            case 34:
                            case 39:
                            case 40:
                              O = !0;
                              break;
                            case 35:
                              N = O = !0;
                              break;
                            default:
                              O = !1;
                          }
                          if (N && O) {
                            var B = j.fullData.byteLength,
                              F = new Uint8Array(4);
                            (F[0] = (B >> 24) & 255),
                              (F[1] = (B >> 16) & 255),
                              (F[2] = (B >> 8) & 255),
                              (F[3] = 255 & B),
                              R.push(F),
                              R.push(j.fullData);
                          }
                        }
                        var H = R.length
                          ? { data: It.apply(wt, c(R)), isKeyframe: L }
                          : null;
                        if (H) {
                          null == I && null != D.dts && (I = D.dts);
                          var V;
                          (V =
                            E + 1 < M.length
                              ? (M[E + 1].dts || 0) - (D.dts || 0)
                              : 1 < M.length
                              ? (D.dts || 0) - (M[E - 1].dts || 0)
                              : 9e4 * (n.endTime - n.startTime)),
                            k.push({
                              data: H.data,
                              size: H.data.byteLength,
                              duration: V,
                              Qa: Math.round((D.pts || 0) - (D.dts || 0)),
                              flags: {
                                Sa: 0,
                                Ja: 0,
                                Ia: 0,
                                Ga: 0,
                                Ha: H.isKeyframe ? 2 : 1,
                                Ta: H.isKeyframe ? 0 : 1,
                              },
                            });
                        }
                      }
                      var z = xv(C);
                      if (!z || null == I)
                        throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                      (t.height = z.height),
                        (t.width = z.width),
                        (f = {
                          id: t.id,
                          type: "video",
                          codecs: "hvc1",
                          encrypted: t.encrypted && 0 < t.drmInfos.length,
                          timescale: 9e4,
                          duration: i,
                          Wa: [],
                          ka: new Uint8Array([]),
                          qa: z.qa,
                          va: z.va,
                          wa: z.wa,
                          data: { mb: this.g, baseMediaDecodeTime: I, Ua: k },
                          stream: t,
                        });
                  }
                  f && (d.push(f), (f = null));
                }
                if ("audio" == r) {
                  switch (h.audio) {
                    case "aac":
                      for (
                        var G,
                          q = [],
                          K = null,
                          W = null,
                          X = null,
                          Y = l(u.Fb()),
                          J = Y.next();
                        !J.done;
                        J = Y.next()
                      ) {
                        var $ = J.value,
                          Z = $.data;
                        if (Z) {
                          var Q = 0;
                          if (-1 == W && X) (Z = It(X, $.data)), (W = null);
                          else if (null != W && X) {
                            Q = Math.max(0, W);
                            var ee = It(X, Z.subarray(0, Q));
                            q.push({
                              data: ee,
                              size: ee.byteLength,
                              duration: 1024,
                              Qa: 0,
                              flags: {
                                Sa: 0,
                                Ja: 0,
                                Ia: 0,
                                Ga: 0,
                                Ha: 2,
                                Ta: 0,
                              },
                            }),
                              (W = X = null);
                          }
                          if (!(G = hv(Z, Q)))
                            throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                          for (
                            t.audioSamplingRate = G.sampleRate,
                              t.channelsCount = G.channelCount,
                              null == K && null !== $.pts && (K = $.pts);
                            Q < Z.length;

                          ) {
                            var te = dv(Z, Q);
                            if (!te) {
                              (X = Z.subarray(Q, Z.length)), (W = -1);
                              break;
                            }
                            var ne = te.Sc + te.aa;
                            0 != (W = Math.max(0, Q + ne - Z.length))
                              ? (X = Z.subarray(Q + te.Sc, Q + ne))
                              : Q + ne <= Z.length &&
                                q.push({
                                  data: Z.subarray(Q + te.Sc, Q + ne),
                                  size: te.aa,
                                  duration: 1024,
                                  Qa: 0,
                                  flags: {
                                    Sa: 0,
                                    Ja: 0,
                                    Ia: 0,
                                    Ga: 0,
                                    Ha: 2,
                                    Ta: 0,
                                  },
                                }),
                              (Q += ne);
                          }
                        }
                      }
                      if (!G || null == K) {
                        if (!u.Zb().length)
                          throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                        K = 9e4 * n.startTime;
                        var ie = Dt("audio", t.codecs.split(","));
                        if (!ie || !t.channelsCount || !t.audioSamplingRate)
                          throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                        G = {
                          sampleRate: t.audioSamplingRate,
                          channelCount: t.channelsCount,
                          codec: ie,
                        };
                        var re = (function (e, t) {
                          if ("mp4a.40.2" === e) {
                            if (1 === t)
                              return new Uint8Array([0, 200, 0, 128, 35, 128]);
                            if (2 === t)
                              return new Uint8Array([
                                33, 0, 73, 144, 2, 25, 0, 35, 128,
                              ]);
                            if (3 === t)
                              return new Uint8Array([
                                0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0,
                                142,
                              ]);
                            if (4 === t)
                              return new Uint8Array([
                                0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0,
                                128, 44, 128, 8, 2, 56,
                              ]);
                            if (5 === t)
                              return new Uint8Array([
                                0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0,
                                130, 48, 4, 153, 0, 33, 144, 2, 56,
                              ]);
                            if (6 === t)
                              return new Uint8Array([
                                0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0,
                                130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32,
                                8, 224,
                              ]);
                          } else {
                            if (1 === t)
                              return new Uint8Array([
                                1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0,
                                0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94,
                              ]);
                            if (2 === t || 3 === t)
                              return new Uint8Array([
                                1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0,
                                0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94,
                              ]);
                          }
                          return null;
                        })(ie, t.channelsCount);
                        if (!re) throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                        for (
                          var ae = K + 9e4 * (n.endTime - n.startTime), oe = K;
                          oe < ae;

                        )
                          q.push({
                            data: re,
                            size: re.byteLength,
                            duration: 1024,
                            Qa: 0,
                            flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                          }),
                            (oe += (1024 / G.sampleRate) * 9e4);
                      }
                      var se = G.sampleRate,
                        ue = (K / 9e4) * se;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: G.codec,
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: se,
                        duration: i,
                        Wa: [],
                        ka: new Uint8Array([]),
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: ue, Ua: q },
                        stream: t,
                      };
                      break;
                    case "ac3":
                      for (
                        var le = [],
                          ce = 0,
                          de = new Uint8Array([]),
                          he = null,
                          fe = l(u.Fb()),
                          pe = fe.next();
                        !pe.done;
                        pe = fe.next()
                      ) {
                        var ge = pe.value,
                          me = ge.data;
                        null == he && null !== ge.pts && (he = ge.pts);
                        for (var ve = 0; ve < me.length; ) {
                          var ye = gv(me, ve);
                          ye
                            ? ((t.audioSamplingRate = ye.sampleRate),
                              (t.channelsCount = ye.channelCount),
                              (ce = ye.sampleRate),
                              (de = ye.ka),
                              le.push({
                                data: me.subarray(ve, ve + ye.aa),
                                size: ye.aa,
                                duration: 1536,
                                Qa: 0,
                                flags: {
                                  Sa: 0,
                                  Ja: 0,
                                  Ia: 0,
                                  Ga: 0,
                                  Ha: 2,
                                  Ta: 0,
                                },
                              }),
                              (ve += ye.aa))
                            : ve++;
                        }
                      }
                      if (0 == ce || 0 == de.byteLength || null == he)
                        throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                      var be = (he / 9e4) * ce;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: "ac-3",
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: ce,
                        duration: i,
                        Wa: [],
                        ka: de,
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: be, Ua: le },
                        stream: t,
                      };
                      break;
                    case "ec3":
                      for (
                        var we = [],
                          xe = 0,
                          Se = new Uint8Array([]),
                          Te = null,
                          ke = l(u.Fb()),
                          Ie = ke.next();
                        !Ie.done;
                        Ie = ke.next()
                      ) {
                        var Ce = Ie.value,
                          Ee = Ce.data;
                        null == Te && null !== Ce.pts && (Te = Ce.pts);
                        for (var De = 0; De < Ee.length; ) {
                          var Pe = yv(Ee, De);
                          Pe
                            ? ((t.audioSamplingRate = Pe.sampleRate),
                              (t.channelsCount = Pe.channelCount),
                              (xe = Pe.sampleRate),
                              (Se = Pe.ka),
                              we.push({
                                data: Ee.subarray(De, De + Pe.aa),
                                size: Pe.aa,
                                duration: 1536,
                                Qa: 0,
                                flags: {
                                  Sa: 0,
                                  Ja: 0,
                                  Ia: 0,
                                  Ga: 0,
                                  Ha: 2,
                                  Ta: 0,
                                },
                              }),
                              (De += Pe.aa))
                            : De++;
                        }
                      }
                      if (0 == xe || 0 == Se.byteLength || null == Te)
                        throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                      var Le = (Te / 9e4) * xe;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: "ec-3",
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: xe,
                        duration: i,
                        Wa: [],
                        ka: Se,
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: Le, Ua: we },
                        stream: t,
                      };
                      break;
                    case "mp3":
                      for (
                        var Re,
                          Ne = [],
                          _e = null,
                          Ue = l(u.Fb()),
                          je = Ue.next();
                        !je.done;
                        je = Ue.next()
                      ) {
                        var Oe = je.value,
                          Be = Oe.data;
                        if (Be) {
                          null == _e && null !== Oe.pts && (_e = Oe.pts);
                          for (var Fe = 0; Fe < Be.length; ) {
                            var He = Sv(Be, Fe);
                            He
                              ? (Re || (Re = He),
                                Fe + He.aa <= Be.length &&
                                  Ne.push({
                                    data: Be.subarray(Fe, Fe + He.aa),
                                    size: He.aa,
                                    duration: 1152,
                                    Qa: 0,
                                    flags: {
                                      Sa: 0,
                                      Ja: 0,
                                      Ia: 0,
                                      Ga: 0,
                                      Ha: 2,
                                      Ta: 0,
                                    },
                                  }),
                                (Fe += He.aa))
                              : Fe++;
                          }
                        }
                      }
                      if (!Re || null == _e)
                        throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                      var Ve = Re.sampleRate,
                        ze = (_e / 9e4) * Ve;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: "mp3",
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: Ve,
                        duration: i,
                        Wa: [],
                        ka: new Uint8Array([]),
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: ze, Ua: Ne },
                        stream: t,
                      };
                      break;
                    case "opus":
                      var Ge = [],
                        qe = null,
                        Ke = u.D;
                      if (!Ke) throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                      var We = [];
                      switch (Ke.Ug) {
                        case 1:
                        case 2:
                          We = [0];
                          break;
                        case 0:
                          We = [255, 1, 1, 0, 1];
                          break;
                        case 128:
                          We = [255, 2, 0, 0, 1];
                          break;
                        case 3:
                          We = [1, 2, 1, 0, 2, 1];
                          break;
                        case 4:
                          We = [1, 2, 2, 0, 1, 2, 3];
                          break;
                        case 5:
                          We = [1, 3, 2, 0, 4, 1, 2, 3];
                          break;
                        case 6:
                          We = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                          break;
                        case 7:
                          We = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                          break;
                        case 8:
                          We = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                          break;
                        case 130:
                          We = [1, 1, 2, 0, 1];
                          break;
                        case 131:
                          We = [1, 1, 3, 0, 1, 2];
                          break;
                        case 132:
                          We = [1, 1, 4, 0, 1, 2, 3];
                          break;
                        case 133:
                          We = [1, 1, 5, 0, 1, 2, 3, 4];
                          break;
                        case 134:
                          We = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                          break;
                        case 135:
                          We = [1, 1, 7, 0, 1, 2, 3, 4, 5, 6];
                          break;
                        case 136:
                          We = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7];
                      }
                      for (
                        var Xe = new Uint8Array(
                            [
                              0,
                              Ke.channelCount,
                              0,
                              0,
                              (Ke.sampleRate >>> 24) & 255,
                              (Ke.sampleRate >>> 17) & 255,
                              (Ke.sampleRate >>> 8) & 255,
                              (Ke.sampleRate >>> 0) & 255,
                              0,
                              0,
                            ].concat(c(We))
                          ),
                          Ye = Ke.sampleRate,
                          Je = l(u.Fb()),
                          $e = Je.next();
                        !$e.done;
                        $e = Je.next()
                      ) {
                        var Ze = $e.value,
                          Qe = Ze.data;
                        null == qe && null !== Ze.pts && (qe = Ze.pts);
                        for (var et = 0; et < Qe.length; ) {
                          for (
                            var tt = !!(16 & Qe[et + 1]),
                              nt = !!(8 & Qe[et + 1]),
                              it = et + 2,
                              rt = 0;
                            255 === Qe[it];

                          )
                            (rt += 255), (it += 1);
                          (rt += Qe[it]),
                            (it += 1),
                            (it += tt ? 2 : 0),
                            (it += nt ? 2 : 0);
                          var at = Qe.slice(it, it + rt);
                          Ge.push({
                            data: at,
                            size: at.byteLength,
                            duration: 960,
                            Qa: 0,
                            flags: { Sa: 0, Ja: 0, Ia: 0, Ga: 0, Ha: 2, Ta: 0 },
                          }),
                            (et = it + rt);
                        }
                      }
                      if (0 == Xe.byteLength || null == qe)
                        throw new Me(2, 3, 3018, n ? n.T()[0] : null);
                      (t.audioSamplingRate = Ke.sampleRate),
                        (t.channelsCount = Ke.channelCount);
                      var ot = (qe / 9e4) * Ye;
                      f = {
                        id: t.id,
                        type: "audio",
                        codecs: "opus",
                        encrypted: t.encrypted && 0 < t.drmInfos.length,
                        timescale: Ye,
                        duration: i,
                        Wa: [],
                        ka: Xe,
                        qa: new Uint8Array([]),
                        va: 0,
                        wa: 0,
                        data: { mb: this.g, baseMediaDecodeTime: ot, Ua: Ge },
                        stream: t,
                      };
                  }
                  f && (d.push(f), (f = null));
                }
              } catch (e) {
                return e && 3023 == e.code
                  ? Promise.resolve(new Uint8Array([]))
                  : Promise.reject(e);
              }
              if (!d.length)
                return Promise.reject(new Me(2, 3, 3018, n ? n.T()[0] : null));
              var st = new tc(d),
                ut = t.id + "_" + n.h;
              if (this.i.has(ut)) var lt = this.i.get(ut);
              else (lt = nc(st)), this.i.set(ut, lt);
              var ct = this.l !== lt,
                dt = sc(st);
              if (((this.l = lt), this.g++, ct)) {
                var ht = It(lt, dt);
                return Promise.resolve(ht);
              }
              return Promise.resolve(dt);
            }),
            B("shaka.transmuxer.TsTransmuxer", Nv),
            (Nv.prototype.transmux = Nv.prototype.transmux),
            (Nv.prototype.getOriginalMimeType =
              Nv.prototype.getOriginalMimeType),
            (Nv.prototype.convertCodecs = Nv.prototype.convertCodecs),
            (Nv.prototype.isSupported = Nv.prototype.isSupported),
            (Nv.prototype.destroy = Nv.prototype.destroy);
          var _v,
            Uv,
            jv = ["aac", "ac-3", "ec-3", "mp3", "opus"],
            Ov = ["avc", "hevc"];
          function Bv() {}
          function Fv() {}
          function Hv() {
            _v || navigator.emeEncryptionSchemePolyfilled
              ? console.debug("EmeEncryptionSchemePolyfill: Already installed.")
              : navigator.requestMediaKeySystemAccess &&
                MediaKeySystemAccess.prototype.getConfiguration
              ? ((_v = navigator.requestMediaKeySystemAccess),
                console.debug(
                  "EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."
                ),
                (navigator.requestMediaKeySystemAccess = Vv),
                (navigator.emeEncryptionSchemePolyfilled = !0))
              : console.debug("EmeEncryptionSchemePolyfill: EME not found");
          }
          function Vv(e, t) {
            var n,
              i = this;
            return P(function (r) {
              return 1 == r.g
                ? (console.assert(
                    i == navigator,
                    'bad "this" for requestMediaKeySystemAccess'
                  ),
                  w(r, _v.call(i, e, t), 2))
                : Zv((n = r.h))
                ? (console.debug(
                    "EmeEncryptionSchemePolyfill: Native encryptionScheme support found."
                  ),
                  (navigator.requestMediaKeySystemAccess = _v),
                  r.return(n))
                : (console.debug(
                    "EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."
                  ),
                  (navigator.requestMediaKeySystemAccess = zv),
                  r.return(zv.call(i, e, t)));
            });
          }
          function zv(e, t) {
            var n,
              i,
              r,
              a,
              o,
              s,
              u,
              c,
              d,
              h,
              f,
              p,
              g = this;
            return P(function (m) {
              if (1 == m.g) {
                for (
                  console.assert(
                    g == navigator,
                    'bad "this" for requestMediaKeySystemAccess'
                  ),
                    n = $v(e),
                    i = [],
                    r = l(t),
                    a = r.next();
                  !a.done;
                  a = r.next()
                )
                  (o = a.value),
                    (s = Gv(o.videoCapabilities, n)),
                    (u = Gv(o.audioCapabilities, n)),
                    (o.videoCapabilities &&
                      o.videoCapabilities.length &&
                      !s.length) ||
                      (o.audioCapabilities &&
                        o.audioCapabilities.length &&
                        !u.length) ||
                      (((c = Object.assign({}, o)).videoCapabilities = s),
                      (c.audioCapabilities = u),
                      i.push(c));
                if (!i.length)
                  throw (
                    (((d = Error(
                      "Unsupported keySystem or supportedConfigurations."
                    )).name = "NotSupportedError"),
                    (d.code = DOMException.NOT_SUPPORTED_ERR),
                    d)
                  );
                return w(m, _v.call(g, e, i), 2);
              }
              return (
                (h = m.h),
                (p = f = null),
                i[0] &&
                  (i[0].videoCapabilities &&
                    (f = i[0].videoCapabilities[0].encryptionScheme),
                  i[0].audioCapabilities &&
                    (p = i[0].audioCapabilities[0].encryptionScheme)),
                m.return(new Jv(h, f, p))
              );
            });
          }
          function Gv(e, t) {
            return e
              ? e.filter(function (e) {
                  return Qv(e.encryptionScheme, t);
                })
              : e;
          }
          function qv() {}
          function Kv() {
            Uv || navigator.mediaCapabilitiesEncryptionSchemePolyfilled
              ? console.debug("McEncryptionSchemePolyfill: Already installed.")
              : navigator.mediaCapabilities
              ? ((Uv = navigator.mediaCapabilities.decodingInfo),
                console.debug(
                  "McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."
                ),
                (navigator.mediaCapabilities.decodingInfo = Wv),
                (navigator.mediaCapabilitiesEncryptionSchemePolyfilled = !0))
              : console.debug(
                  "McEncryptionSchemePolyfill: MediaCapabilities not found"
                );
          }
          function Wv(e) {
            var t,
              n,
              i = this;
            return P(function (r) {
              switch (r.g) {
                case 1:
                  return (
                    console.assert(
                      i == navigator.mediaCapabilities,
                      'bad "this" for decodingInfo'
                    ),
                    w(r, Uv.call(i, e), 2)
                  );
                case 2:
                  if (!(t = r.h).supported || !e.keySystemConfiguration)
                    return r.return(t);
                  if ((n = t.keySystemAccess) && Zv(n))
                    return (
                      console.debug(
                        "McEncryptionSchemePolyfill: Native encryptionScheme support found."
                      ),
                      (navigator.mediaCapabilities.decodingInfo = Uv),
                      r.return(t)
                    );
                  if (
                    (console.debug(
                      "McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."
                    ),
                    (navigator.mediaCapabilities.decodingInfo = Xv),
                    n)
                  ) {
                    r.u(3);
                    break;
                  }
                  return w(r, Yv(e), 4);
                case 4:
                  return (t.keySystemAccess = r.h), r.return(t);
                case 3:
                  return r.return(Xv.call(i, e));
              }
            });
          }
          function Xv(e) {
            var t,
              n,
              i,
              r,
              a,
              o,
              s,
              u = this;
            return P(function (l) {
              switch (l.g) {
                case 1:
                  return (
                    console.assert(
                      u == navigator.mediaCapabilities,
                      'bad "this" for decodingInfo'
                    ),
                    (n = t = null),
                    !e.keySystemConfiguration ||
                    ((i = e.keySystemConfiguration),
                    (r = i.keySystem),
                    (n = i.audio && i.audio.encryptionScheme),
                    (t = i.video && i.video.encryptionScheme),
                    (a = $v(r)),
                    (o = {
                      powerEfficient: !1,
                      smooth: !1,
                      supported: !1,
                      keySystemAccess: null,
                      configuration: e,
                    }),
                    Qv(n, a) && Qv(t, a))
                      ? w(l, Uv.call(u, e), 2)
                      : l.return(o)
                  );
                case 2:
                  if ((s = l.h).keySystemAccess) {
                    (s.keySystemAccess = new Jv(s.keySystemAccess, t, n)),
                      l.u(3);
                    break;
                  }
                  if (!e.keySystemConfiguration) {
                    l.u(3);
                    break;
                  }
                  return w(l, Yv(e), 5);
                case 5:
                  s.keySystemAccess = l.h;
                case 3:
                  return l.return(s);
              }
            });
          }
          function Yv(e) {
            var t, n;
            return P(function (i) {
              if (1 == i.g) {
                var r = e.keySystemConfiguration,
                  a = [],
                  o = [];
                return (
                  r.audio &&
                    a.push({
                      robustness: r.audio.robustness || "",
                      contentType: e.audio.contentType,
                      encryptionScheme: r.audio.encryptionScheme,
                    }),
                  r.video &&
                    o.push({
                      robustness: r.video.robustness || "",
                      contentType: e.video.contentType,
                      encryptionScheme: r.video.encryptionScheme,
                    }),
                  (r = {
                    initDataTypes: r.initDataType ? [r.initDataType] : [],
                    distinctiveIdentifier: r.distinctiveIdentifier,
                    persistentState: r.persistentState,
                    sessionTypes: r.sessionTypes,
                  }),
                  a.length && (r.audioCapabilities = a),
                  o.length && (r.videoCapabilities = o),
                  (t = r),
                  w(
                    i,
                    navigator.requestMediaKeySystemAccess(
                      e.keySystemConfiguration.keySystem,
                      [t]
                    ),
                    2
                  )
                );
              }
              return (n = i.h), i.return(n);
            });
          }
          function Jv(e, t, n) {
            (this.g = e),
              (this.i = t || null),
              (this.h = n || null),
              (this.keySystem = e.keySystem);
          }
          function $v(e) {
            return e.startsWith("com.widevine") ||
              e.startsWith("com.microsoft") ||
              e.startsWith("com.chromecast") ||
              e.startsWith("com.adobe") ||
              e.startsWith("org.w3")
              ? "cenc"
              : e.startsWith("com.apple")
              ? "cbcs"
              : e.startsWith("com.huawei")
              ? "cenc"
              : (console.warn(
                  "EmeEncryptionSchemePolyfill: Unknown key system:",
                  e,
                  "Please contribute!"
                ),
                null);
          }
          function Zv(e) {
            var t =
              (e = e.getConfiguration()).audioCapabilities &&
              e.audioCapabilities[0];
            return !(
              !(e = (e.videoCapabilities && e.videoCapabilities[0]) || t) ||
              void 0 === e.encryptionScheme
            );
          }
          function Qv(e, t) {
            return (
              !e ||
              e == t ||
              !(("cbcs" != e && "cbcs-1-9" != e) || !(ry || sy || iy))
            );
          }
          function ey() {}
          function ty() {
            Hv(), Kv();
          }
          bi(
            "video/mp2t",
            function () {
              return new Nv("video/mp2t");
            },
            Ai
          ),
            m(Bv, _u),
            B("shaka.util.FairPlayUtils", Bv),
            B("EmeEncryptionSchemePolyfill", Fv),
            (Fv.install = Hv),
            B("McEncryptionSchemePolyfill", qv),
            (qv.install = Kv),
            (Jv.prototype.getConfiguration = function () {
              var e = this.g.getConfiguration();
              if (e.videoCapabilities)
                for (
                  var t = l(e.videoCapabilities), n = t.next();
                  !n.done;
                  n = t.next()
                )
                  n.value.encryptionScheme = this.i;
              if (e.audioCapabilities)
                for (
                  n = (t = l(e.audioCapabilities)).next();
                  !n.done;
                  n = t.next()
                )
                  n.value.encryptionScheme = this.h;
              return e;
            }),
            (Jv.prototype.createMediaKeys = function () {
              return this.g.createMediaKeys();
            }),
            B("EncryptionSchemePolyfills", ey),
            (ey.install = ty);
          var ny,
            iy = navigator.userAgent.includes("CrKey"),
            ry =
              100 <= parseInt(navigator.userAgent.split("Firefox/").pop(), 10),
            ay = navigator.userAgent || "";
          if (ay.includes("Web0S")) {
            var oy = ay.match(/Chrome\/(\d+)/);
            ny = !!oy && 79 <= parseInt(oy[1], 10);
          } else ny = !1;
          var sy = ny;
          void 0 !== n && n.exports && (n.exports = ey);
        }.call(i, e, e, void 0),
        i.shaka))
          t[r] = i.shaka[r];
      })();
    },
  },
]);
//# sourceMappingURL=sourcemaps/67b0eb8c10185775.vendor.js.map
